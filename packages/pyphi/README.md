# PyPhi - IIT 4.0 Integrated Information Calculator

A clean-room Apache 2.0 licensed implementation of Integrated Information Theory (IIT) 4.0 for calculating Φ (phi) - the mathematical measure of consciousness.

## Overview

This library implements the core computations from IIT 4.0 as described in:

> Albantakis L, Barbosa L, Findlay G, Grasso M, … Tononi G. (2023) Integrated information theory (IIT) 4.0: formulating the properties of phenomenal existence in physical terms. PLoS Computational Biology 19(10): e1011465.

## Why This Implementation?

The original PyPhi library is licensed under GPLv3, which requires derivative works to also be open-sourced. This implementation provides the same core functionality under the Apache 2.0 license, making it suitable for commercial applications.

## Installation

```bash
pip install ./packages/pyphi
# or for development
pip install -e ./packages/pyphi
```

## Quick Start

```python
import pyphi
from pyphi import Network, compute

# Create a simple network
tpm = [[0.0, 0.0, 0.0],
       [0.0, 0.0, 1.0],
       [1.0, 0.0, 1.0],
       [1.0, 0.0, 0.0],
       [1.0, 1.0, 0.0],
       [1.0, 1.0, 1.0],
       [1.0, 1.0, 1.0],
       [1.0, 1.0, 0.0]]
       
connectivity = [[0, 0, 1],
                [1, 0, 1],
                [1, 1, 0]]

network = Network(tpm, connectivity)
state = (1, 0, 0)

# Compute Phi
phi = compute.phi(network, state)
print(f"Φ = {phi}")

# Get full cause-effect structure
ces = compute.concept_structure(network, state)
print(f"Number of concepts: {len(ces.concepts)}")
```

## Core Concepts

### Integrated Information (Φ)

Φ measures how much a system is "more than the sum of its parts" - specifically, how much information is generated by the whole system above and beyond its parts.

### Concepts

A concept is a maximally irreducible cause-effect repertoire. Each concept represents a distinct "meaning" or "distinction" made by a mechanism within the system.

### Minimum Information Partition (MIP)

The MIP is the partition of a system that makes the least difference to its cause-effect structure. Φ is computed as the distance between the unpartitioned and MIP-partitioned structures.

## API Reference

### Network

```python
from pyphi import Network

network = Network(
    tpm,           # Transition probability matrix
    connectivity,  # Connectivity matrix (optional)
    node_labels    # Labels for nodes (optional)
)
```

### Compute Functions

```python
from pyphi import compute

# Compute system Phi
phi = compute.phi(network, state)

# Get full cause-effect structure
ces = compute.concept_structure(network, state)

# Compute a single concept
concept = compute.concept(network, state, mechanism)

# Find the MIP
mip = compute.mip(network, state)
```

### Models

```python
from pyphi.models import Concept, ConceptStructure

# Concept attributes
concept.mechanism      # Tuple of node indices
concept.cause_purview  # Cause purview
concept.effect_purview # Effect purview
concept.phi            # Small phi (irreducibility)

# ConceptStructure attributes
ces.concepts  # List of concepts
ces.phi       # Big Phi (system irreducibility)
```

## Computational Complexity

IIT computations are computationally expensive. For a system with N nodes:
- Concept computation: O(2^N) for each mechanism
- Full CES: O(2^N * 2^N) 
- MIP finding: O(2^N) partitions to check

This implementation is optimized for networks up to ~12 nodes. For larger networks, approximation methods are recommended.

## Differences from Original PyPhi

1. **License**: Apache 2.0 (commercial-friendly) vs GPLv3
2. **Scope**: Focused on core Φ calculation, not full research toolkit
3. **Performance**: Optimized for the specific use case of cognitive loop analysis
4. **Async Support**: Native async/await for integration with async services

## Testing

```bash
pytest tests/
```

## License

Apache 2.0 - See LICENSE file for details.

## References

- Tononi, G., et al. (2016). Integrated information theory: from consciousness to its physical substrate. Nature Reviews Neuroscience, 17(7), 450-461.
- Albantakis, L., et al. (2023). Integrated information theory (IIT) 4.0. PLoS Computational Biology, 19(10), e1011465.
- Mayner, W.G.P., et al. (2018). PyPhi: A toolbox for integrated information theory. PLoS Computational Biology, 14(7), e1006343.
