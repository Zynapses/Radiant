<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>RADIANT &amp; Think Tank - Complete Technical Documentation v4.18.0</title>
  <style>
    /* Default styles provided by pandoc.
    ** See https://pandoc.org/MANUAL.html#variables-for-html for config info.
    */
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    svg {
      height: auto;
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      border: none;
      border-top: 1px solid #1a1a1a;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
  :root { --primary: #6366f1; --primary-dark: #4f46e5; --secondary: #8b5cf6; --accent: #06b6d4; --success: #10b981; --warning: #f59e0b; --danger: #ef4444; --dark: #1e1b4b; --gray-900: #111827; --gray-700: #374151; --gray-500: #6b7280; --gray-300: #d1d5db; --gray-100: #f3f4f6; }
  @media print { .page-break { page-break-after: always; } h1 { page-break-before: always; } }
  * { box-sizing: border-box; }
  body { font-family: 'Inter', -apple-system, sans-serif; line-height: 1.7; color: var(--gray-900); max-width: 850px; margin: 0 auto; padding: 40px 30px; }
  h1 { font-size: 28px; font-weight: 700; color: var(--dark); margin: 50px 0 20px; padding-bottom: 10px; border-bottom: 3px solid var(--primary); }
  h2 { font-size: 20px; font-weight: 600; color: var(--primary-dark); margin: 35px 0 15px; }
  h3 { font-size: 16px; font-weight: 600; color: var(--dark); margin: 25px 0 12px; }
  h4 { font-size: 14px; font-weight: 600; color: var(--gray-700); margin: 18px 0 10px; }
  p { margin: 12px 0; color: var(--gray-700); }
  table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 12px; }
  th { background: var(--dark); color: white; padding: 10px 12px; text-align: left; font-weight: 600; }
  td { padding: 10px 12px; border-bottom: 1px solid var(--gray-300); }
  tr:nth-child(even) { background: var(--gray-100); }
  code { background: var(--gray-100); padding: 2px 6px; border-radius: 4px; font-family: 'SF Mono', Monaco, monospace; font-size: 11px; color: var(--primary-dark); }
  pre { background: var(--dark); color: #e0e7ff; padding: 16px; border-radius: 10px; overflow-x: auto; font-size: 11px; line-height: 1.5; margin: 16px 0; }
  pre code { background: transparent; color: inherit; padding: 0; }
  #TOC { background: var(--gray-100); border-radius: 12px; padding: 24px; margin: 30px 0; }
  #TOC ul { list-style: none; padding-left: 16px; }
  #TOC > ul { padding-left: 0; }
  #TOC li { padding: 4px 0; font-size: 12px; }
  #TOC a { color: var(--gray-700); text-decoration: none; }
  #TOC a:hover { color: var(--primary); }
  blockquote { border-left: 4px solid var(--primary); padding-left: 16px; margin: 16px 0; color: var(--gray-500); }
  strong { color: var(--gray-900); }
  </style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">RADIANT &amp; Think Tank - Complete Technical
Documentation v4.18.0</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#radiant-think-tank-executive-summary"
id="toc-radiant-think-tank-executive-summary">RADIANT &amp; Think Tank
Executive Summary</a>
<ul>
<li><a href="#what-is-radiant" id="toc-what-is-radiant">What is
RADIANT?</a></li>
<li><a href="#what-is-think-tank" id="toc-what-is-think-tank">What is
Think Tank?</a></li>
<li><a href="#key-differentiators" id="toc-key-differentiators">Key
Differentiators</a>
<ul>
<li><a href="#agi-driven-model-selection"
id="toc-agi-driven-model-selection">1. AGI-Driven Model
Selection</a></li>
<li><a href="#proven-orchestration-patterns"
id="toc-proven-orchestration-patterns">2. 49 Proven Orchestration
Patterns</a></li>
<li><a href="#enterprise-grade-security"
id="toc-enterprise-grade-security">3. Enterprise-Grade Security</a></li>
</ul></li>
<li><a href="#platform-components" id="toc-platform-components">Platform
Components</a></li>
<li><a href="#by-the-numbers" id="toc-by-the-numbers">By the
Numbers</a></li>
<li><a href="#use-cases" id="toc-use-cases">Use Cases</a>
<ul>
<li><a href="#enterprise-ai-gateway"
id="toc-enterprise-ai-gateway">Enterprise AI Gateway</a></li>
<li><a href="#complex-problem-solving-think-tank"
id="toc-complex-problem-solving-think-tank">Complex Problem Solving
(Think Tank)</a></li>
<li><a href="#quality-critical-applications"
id="toc-quality-critical-applications">Quality-Critical
Applications</a></li>
<li><a href="#cost-optimization" id="toc-cost-optimization">Cost
Optimization</a></li>
</ul></li>
<li><a href="#competitive-advantages"
id="toc-competitive-advantages">Competitive Advantages</a></li>
<li><a href="#technology-stack" id="toc-technology-stack">Technology
Stack</a></li>
<li><a href="#deployment-model" id="toc-deployment-model">Deployment
Model</a></li>
<li><a href="#pricing-model" id="toc-pricing-model">Pricing
Model</a></li>
<li><a href="#roadmap-highlights" id="toc-roadmap-highlights">Roadmap
Highlights</a></li>
<li><a href="#summary" id="toc-summary">Summary</a></li>
</ul></li>
<li><a href="#radiant-platform-architecture"
id="toc-radiant-platform-architecture">RADIANT Platform Architecture</a>
<ul>
<li><a href="#table-of-contents" id="toc-table-of-contents">Table of
Contents</a></li>
<li><a href="#platform-overview" id="toc-platform-overview">1. Platform
Overview</a>
<ul>
<li><a href="#what-is-radiant-1" id="toc-what-is-radiant-1">1.1 What is
RADIANT?</a></li>
<li><a href="#core-value-proposition"
id="toc-core-value-proposition">1.2 Core Value Proposition</a></li>
<li><a href="#platform-statistics" id="toc-platform-statistics">1.3
Platform Statistics</a></li>
</ul></li>
<li><a href="#system-architecture" id="toc-system-architecture">2.
System Architecture</a>
<ul>
<li><a href="#high-level-architecture"
id="toc-high-level-architecture">2.1 High-Level Architecture</a></li>
<li><a href="#three-component-structure"
id="toc-three-component-structure">2.2 Three-Component
Structure</a></li>
</ul></li>
<li><a href="#component-deep-dive" id="toc-component-deep-dive">3.
Component Deep Dive</a>
<ul>
<li><a href="#model-router-service" id="toc-model-router-service">3.1
Model Router Service</a></li>
<li><a href="#service-architecture" id="toc-service-architecture">3.2
Service Architecture</a></li>
</ul></li>
<li><a href="#data-architecture" id="toc-data-architecture">4. Data
Architecture</a>
<ul>
<li><a href="#database-schema-overview"
id="toc-database-schema-overview">4.1 Database Schema Overview</a></li>
<li><a href="#multi-tenant-data-isolation"
id="toc-multi-tenant-data-isolation">4.2 Multi-Tenant Data
Isolation</a></li>
</ul></li>
<li><a href="#security-architecture" id="toc-security-architecture">5.
Security Architecture</a>
<ul>
<li><a href="#security-layers" id="toc-security-layers">5.1 Security
Layers</a></li>
</ul></li>
<li><a href="#deployment-architecture"
id="toc-deployment-architecture">6. Deployment Architecture</a>
<ul>
<li><a href="#aws-infrastructure" id="toc-aws-infrastructure">6.1 AWS
Infrastructure</a></li>
<li><a href="#cdk-stack-dependencies"
id="toc-cdk-stack-dependencies">6.2 CDK Stack Dependencies</a></li>
</ul></li>
<li><a href="#integration-points" id="toc-integration-points">7.
Integration Points</a>
<ul>
<li><a href="#external-api-integrations"
id="toc-external-api-integrations">7.1 External API
Integrations</a></li>
</ul></li>
</ul></li>
<li><a href="#think-tank-platform-architecture"
id="toc-think-tank-platform-architecture">Think Tank Platform
Architecture</a>
<ul>
<li><a href="#table-of-contents-1" id="toc-table-of-contents-1">Table of
Contents</a></li>
<li><a href="#platform-overview-1" id="toc-platform-overview-1">1.
Platform Overview</a>
<ul>
<li><a href="#what-is-think-tank-1" id="toc-what-is-think-tank-1">1.1
What is Think Tank?</a></li>
<li><a href="#think-tank-vs-traditional-chat"
id="toc-think-tank-vs-traditional-chat">1.2 Think Tank vs Traditional
Chat</a></li>
<li><a href="#key-capabilities" id="toc-key-capabilities">1.3 Key
Capabilities</a></li>
</ul></li>
<li><a href="#core-architecture" id="toc-core-architecture">2. Core
Architecture</a>
<ul>
<li><a href="#system-components" id="toc-system-components">2.1 System
Components</a></li>
<li><a href="#think-tank-engine" id="toc-think-tank-engine">2.2 Think
Tank Engine</a></li>
</ul></li>
<li><a href="#problem-solving-pipeline"
id="toc-problem-solving-pipeline">3. Problem Solving Pipeline</a>
<ul>
<li><a href="#pipeline-stages" id="toc-pipeline-stages">3.1 Pipeline
Stages</a></li>
<li><a href="#step-recording" id="toc-step-recording">3.2 Step
Recording</a></li>
</ul></li>
<li><a href="#session-management" id="toc-session-management">4. Session
Management</a>
<ul>
<li><a href="#session-lifecycle" id="toc-session-lifecycle">4.1 Session
Lifecycle</a></li>
<li><a href="#session-data-model" id="toc-session-data-model">4.2
Session Data Model</a></li>
</ul></li>
<li><a href="#collaboration-features" id="toc-collaboration-features">5.
Collaboration Features</a>
<ul>
<li><a href="#real-time-collaboration"
id="toc-real-time-collaboration">5.1 Real-Time Collaboration</a></li>
</ul></li>
<li><a href="#domain-modes" id="toc-domain-modes">6. Domain Modes</a>
<ul>
<li><a href="#specialized-reasoning-modes"
id="toc-specialized-reasoning-modes">6.1 Specialized Reasoning
Modes</a></li>
</ul></li>
<li><a href="#quality-confidence" id="toc-quality-confidence">7. Quality
&amp; Confidence</a>
<ul>
<li><a href="#confidence-scoring-system"
id="toc-confidence-scoring-system">7.1 Confidence Scoring
System</a></li>
</ul></li>
<li><a href="#user-interface" id="toc-user-interface">8. User
Interface</a>
<ul>
<li><a href="#think-tank-ui-layout" id="toc-think-tank-ui-layout">8.1
Think Tank UI Layout</a></li>
</ul></li>
</ul></li>
<li><a href="#agi-workflow-orchestration"
id="toc-agi-workflow-orchestration">AGI &amp; Workflow Orchestration</a>
<ul>
<li><a href="#overview" id="toc-overview">1. Overview</a>
<ul>
<li><a href="#why-50-300-improvement"
id="toc-why-50-300-improvement">Why 50-300% Improvement?</a></li>
<li><a href="#key-capabilities-1" id="toc-key-capabilities-1">Key
Capabilities</a></li>
<li><a href="#improvement-by-use-case"
id="toc-improvement-by-use-case">Improvement by Use Case</a></li>
</ul></li>
<li><a href="#the-49-orchestration-patterns"
id="toc-the-49-orchestration-patterns">2. The 49 Orchestration
Patterns</a>
<ul>
<li><a href="#pattern-categories" id="toc-pattern-categories">Pattern
Categories</a></li>
</ul></li>
<li><a href="#agi-dynamic-model-selection"
id="toc-agi-dynamic-model-selection">3. AGI Dynamic Model Selection</a>
<ul>
<li><a href="#how-it-works" id="toc-how-it-works">How It Works</a></li>
<li><a href="#domain-detection-keywords"
id="toc-domain-detection-keywords">Domain Detection Keywords</a></li>
</ul></li>
<li><a href="#model-execution-modes" id="toc-model-execution-modes">4.
Model Execution Modes</a></li>
<li><a href="#parallel-execution" id="toc-parallel-execution">5.
Parallel Execution</a>
<ul>
<li><a href="#execution-modes" id="toc-execution-modes">Execution
Modes</a></li>
<li><a href="#synthesis-strategies"
id="toc-synthesis-strategies">Synthesis Strategies</a></li>
</ul></li>
<li><a href="#visual-workflow-editor" id="toc-visual-workflow-editor">6.
Visual Workflow Editor</a>
<ul>
<li><a href="#editor-features" id="toc-editor-features">Editor
Features</a></li>
<li><a href="#step-configuration" id="toc-step-configuration">Step
Configuration</a></li>
</ul></li>
<li><a href="#api-usage" id="toc-api-usage">7. API Usage</a>
<ul>
<li><a href="#execute-workflow" id="toc-execute-workflow">Execute
Workflow</a></li>
</ul></li>
<li><a href="#benefits" id="toc-benefits">8. Benefits</a></li>
</ul></li>
<li><a href="#simultaneous-prompt-execution"
id="toc-simultaneous-prompt-execution">Simultaneous Prompt Execution</a>
<ul>
<li><a href="#overview-1" id="toc-overview-1">Overview</a></li>
<li><a href="#radiant-parallel-execution"
id="toc-radiant-parallel-execution">RADIANT Parallel Execution</a>
<ul>
<li><a href="#configuration"
id="toc-configuration">Configuration</a></li>
<li><a href="#execution-modes-1" id="toc-execution-modes-1">Execution
Modes</a></li>
<li><a href="#implementation"
id="toc-implementation">Implementation</a></li>
<li><a href="#use-cases-1" id="toc-use-cases-1">Use Cases</a></li>
</ul></li>
<li><a href="#think-tank-concurrent-sessions"
id="toc-think-tank-concurrent-sessions">Think Tank Concurrent
Sessions</a>
<ul>
<li><a href="#session-level-parallelism"
id="toc-session-level-parallelism">Session-Level Parallelism</a></li>
<li><a href="#implementation-1"
id="toc-implementation-1">Implementation</a></li>
<li><a href="#session-configuration"
id="toc-session-configuration">Session Configuration</a></li>
<li><a href="#database-schema-support"
id="toc-database-schema-support">Database Schema Support</a></li>
</ul></li>
<li><a href="#performance-benefits"
id="toc-performance-benefits">Performance Benefits</a>
<ul>
<li><a href="#throughput-improvement"
id="toc-throughput-improvement">Throughput Improvement</a></li>
<li><a href="#quality-improvement-from-consensus"
id="toc-quality-improvement-from-consensus">Quality Improvement from
Consensus</a></li>
</ul></li>
<li><a href="#api-usage-1" id="toc-api-usage-1">API Usage</a>
<ul>
<li><a href="#rest-api" id="toc-rest-api">REST API</a></li>
<li><a href="#response" id="toc-response">Response</a></li>
<li><a href="#sdk-usage" id="toc-sdk-usage">SDK Usage</a></li>
</ul></li>
<li><a href="#cost-considerations" id="toc-cost-considerations">Cost
Considerations</a></li>
<li><a href="#feature-categories" id="toc-feature-categories">Feature
Categories</a></li>
<li><a href="#ai-model-management" id="toc-ai-model-management">1. AI
Model Management</a>
<ul>
<li><a href="#model-router-service-1"
id="toc-model-router-service-1">1.1 Model Router Service</a></li>
<li><a href="#model-metadata-service"
id="toc-model-metadata-service">1.2 Model Metadata Service</a></li>
<li><a href="#supported-models-106" id="toc-supported-models-106">1.3
Supported Models (106+)</a></li>
</ul></li>
<li><a href="#orchestration-workflows"
id="toc-orchestration-workflows">2. Orchestration &amp; Workflows</a>
<ul>
<li><a href="#orchestration-patterns-49"
id="toc-orchestration-patterns-49">2.1 Orchestration Patterns
(49)</a></li>
<li><a href="#agi-dynamic-model-selection-1"
id="toc-agi-dynamic-model-selection-1">2.2 AGI Dynamic Model
Selection</a></li>
<li><a href="#model-execution-modes-9"
id="toc-model-execution-modes-9">2.3 Model Execution Modes (9)</a></li>
<li><a href="#parallel-execution-1" id="toc-parallel-execution-1">2.4
Parallel Execution</a></li>
<li><a href="#visual-workflow-editor-1"
id="toc-visual-workflow-editor-1">2.5 Visual Workflow Editor</a></li>
</ul></li>
<li><a href="#think-tank-platform" id="toc-think-tank-platform">3. Think
Tank Platform</a>
<ul>
<li><a href="#problem-solving-engine"
id="toc-problem-solving-engine">3.1 Problem Solving Engine</a></li>
<li><a href="#session-management-1" id="toc-session-management-1">3.2
Session Management</a></li>
<li><a href="#domain-modes-8" id="toc-domain-modes-8">3.3 Domain Modes
(8)</a></li>
<li><a href="#collaboration" id="toc-collaboration">3.4
Collaboration</a></li>
</ul></li>
<li><a href="#billing-cost-management"
id="toc-billing-cost-management">4. Billing &amp; Cost Management</a>
<ul>
<li><a href="#credit-system" id="toc-credit-system">4.1 Credit
System</a></li>
<li><a href="#subscriptions" id="toc-subscriptions">4.2
Subscriptions</a></li>
<li><a href="#cost-management" id="toc-cost-management">4.3 Cost
Management</a></li>
</ul></li>
<li><a href="#multi-tenant-platform" id="toc-multi-tenant-platform">5.
Multi-Tenant Platform</a>
<ul>
<li><a href="#tenant-management" id="toc-tenant-management">5.1 Tenant
Management</a></li>
<li><a href="#user-management" id="toc-user-management">5.2 User
Management</a></li>
<li><a href="#api-key-management" id="toc-api-key-management">5.3 API
Key Management</a></li>
</ul></li>
<li><a href="#security-compliance" id="toc-security-compliance">6.
Security &amp; Compliance</a>
<ul>
<li><a href="#data-security" id="toc-data-security">6.1 Data
Security</a></li>
<li><a href="#authentication" id="toc-authentication">6.2
Authentication</a></li>
<li><a href="#compliance" id="toc-compliance">6.3 Compliance</a></li>
</ul></li>
<li><a href="#analytics-monitoring" id="toc-analytics-monitoring">7.
Analytics &amp; Monitoring</a>
<ul>
<li><a href="#usage-analytics" id="toc-usage-analytics">7.1 Usage
Analytics</a></li>
<li><a href="#model-performance" id="toc-model-performance">7.2 Model
Performance</a></li>
<li><a href="#business-intelligence" id="toc-business-intelligence">7.3
Business Intelligence</a></li>
</ul></li>
<li><a href="#developer-tools" id="toc-developer-tools">8. Developer
Tools</a>
<ul>
<li><a href="#sdk" id="toc-sdk">8.1 SDK</a></li>
<li><a href="#webhooks" id="toc-webhooks">8.2 Webhooks</a></li>
<li><a href="#integrations" id="toc-integrations">8.3
Integrations</a></li>
</ul></li>
<li><a href="#admin-dashboard" id="toc-admin-dashboard">9. Admin
Dashboard</a>
<ul>
<li><a href="#dashboard-pages" id="toc-dashboard-pages">9.1 Dashboard
Pages</a></li>
<li><a href="#ui-features" id="toc-ui-features">9.2 UI Features</a></li>
</ul></li>
<li><a href="#swift-deployer-app" id="toc-swift-deployer-app">10. Swift
Deployer App</a>
<ul>
<li><a href="#deployment-features" id="toc-deployment-features">10.1
Deployment Features</a></li>
<li><a href="#qa-testing" id="toc-qa-testing">10.2 QA &amp;
Testing</a></li>
<li><a href="#ai-assistant" id="toc-ai-assistant">10.3 AI
Assistant</a></li>
<li><a href="#local-storage" id="toc-local-storage">10.4 Local
Storage</a></li>
</ul></li>
</ul></li>
<li><a href="#radiant-services-reference"
id="toc-radiant-services-reference">RADIANT Services Reference</a>
<ul>
<li><a href="#complete-lambda-services-inventory-62-services"
id="toc-complete-lambda-services-inventory-62-services">Complete Lambda
Services Inventory (62 Services)</a>
<ul>
<li><a href="#core-infrastructure-services"
id="toc-core-infrastructure-services">Core Infrastructure
Services</a></li>
<li><a href="#ai-model-services" id="toc-ai-model-services">AI Model
Services</a></li>
<li><a href="#orchestration-services"
id="toc-orchestration-services">Orchestration Services</a></li>
<li><a href="#billing-services" id="toc-billing-services">Billing
Services</a></li>
<li><a href="#cognitive-services" id="toc-cognitive-services">Cognitive
Services</a></li>
<li><a href="#memory-services" id="toc-memory-services">Memory
Services</a></li>
<li><a href="#agi-services" id="toc-agi-services">AGI Services</a></li>
<li><a href="#collaboration-services"
id="toc-collaboration-services">Collaboration Services</a></li>
<li><a href="#additional-services-30-62"
id="toc-additional-services-30-62">Additional Services (30-62)</a></li>
</ul></li>
</ul></li>
<li><a href="#radiant-database-schema-reference"
id="toc-radiant-database-schema-reference">RADIANT Database Schema
Reference</a>
<ul>
<li><a href="#complete-migration-inventory-40-migrations"
id="toc-complete-migration-inventory-40-migrations">Complete Migration
Inventory (40 Migrations)</a>
<ul>
<li><a href="#migration-index" id="toc-migration-index">Migration
Index</a></li>
</ul></li>
<li><a href="#core-tables-migration-001"
id="toc-core-tables-migration-001">Core Tables (Migration 001)</a>
<ul>
<li><a href="#tenants" id="toc-tenants">tenants</a></li>
<li><a href="#users" id="toc-users">users</a></li>
<li><a href="#administrators"
id="toc-administrators">administrators</a></li>
<li><a href="#approval_requests"
id="toc-approval_requests">approval_requests</a></li>
</ul></li>
<li><a href="#think-tank-tables-migration-016"
id="toc-think-tank-tables-migration-016">Think Tank Tables (Migration
016)</a>
<ul>
<li><a href="#thinktank_sessions"
id="toc-thinktank_sessions">thinktank_sessions</a></li>
<li><a href="#thinktank_steps"
id="toc-thinktank_steps">thinktank_steps</a></li>
<li><a href="#thinktank_tools"
id="toc-thinktank_tools">thinktank_tools</a></li>
</ul></li>
<li><a href="#orchestration-tables-migration-024"
id="toc-orchestration-tables-migration-024">Orchestration Tables
(Migration 024)</a>
<ul>
<li><a href="#workflow_definitions"
id="toc-workflow_definitions">workflow_definitions</a></li>
<li><a href="#workflow_tasks"
id="toc-workflow_tasks">workflow_tasks</a></li>
<li><a href="#workflow_executions"
id="toc-workflow_executions">workflow_executions</a></li>
<li><a href="#task_executions"
id="toc-task_executions">task_executions</a></li>
</ul></li>
<li><a href="#billing-tables-migrations-033-035"
id="toc-billing-tables-migrations-033-035">Billing Tables (Migrations
033-035)</a>
<ul>
<li><a href="#credit_balances"
id="toc-credit_balances">credit_balances</a></li>
<li><a href="#credit_transactions"
id="toc-credit_transactions">credit_transactions</a></li>
<li><a href="#subscription_tiers"
id="toc-subscription_tiers">subscription_tiers</a></li>
<li><a href="#subscriptions-1"
id="toc-subscriptions-1">subscriptions</a></li>
</ul></li>
<li><a href="#row-level-security-migration-002"
id="toc-row-level-security-migration-002">Row-Level Security (Migration
002)</a>
<ul>
<li><a href="#rls-pattern" id="toc-rls-pattern">RLS Pattern</a></li>
<li><a href="#setting-tenant-context"
id="toc-setting-tenant-context">Setting Tenant Context</a></li>
<li><a href="#tables-with-rls-enabled"
id="toc-tables-with-rls-enabled">Tables with RLS Enabled:</a></li>
</ul></li>
<li><a href="#common-patterns" id="toc-common-patterns">Common
Patterns</a>
<ul>
<li><a href="#updated-at-trigger" id="toc-updated-at-trigger">Updated At
Trigger</a></li>
<li><a href="#soft-delete-pattern" id="toc-soft-delete-pattern">Soft
Delete Pattern</a></li>
<li><a href="#audit-columns" id="toc-audit-columns">Audit
Columns</a></li>
</ul></li>
</ul></li>
<li><a href="#swift-deployer-app-reference"
id="toc-swift-deployer-app-reference">Swift Deployer App Reference</a>
<ul>
<li><a href="#app-architecture" id="toc-app-architecture">App
Architecture</a>
<ul>
<li><a href="#overview-2" id="toc-overview-2">Overview</a></li>
<li><a href="#file-structure-36-files"
id="toc-file-structure-36-files">File Structure (36 Files)</a></li>
</ul></li>
<li><a href="#models" id="toc-models">Models</a>
<ul>
<li><a href="#configuration.swift"
id="toc-configuration.swift">Configuration.swift</a></li>
<li><a href="#credentials.swift"
id="toc-credentials.swift">Credentials.swift</a></li>
<li><a href="#deployment.swift"
id="toc-deployment.swift">Deployment.swift</a></li>
</ul></li>
<li><a href="#services" id="toc-services">Services</a>
<ul>
<li><a href="#cdkservice.swift"
id="toc-cdkservice.swift">CDKService.swift</a></li>
<li><a href="#deploymentservice.swift"
id="toc-deploymentservice.swift">DeploymentService.swift</a></li>
<li><a href="#aiassistantservice.swift"
id="toc-aiassistantservice.swift">AIAssistantService.swift</a></li>
<li><a href="#localstoragemanager.swift"
id="toc-localstoragemanager.swift">LocalStorageManager.swift</a></li>
<li><a href="#healthcheckservice.swift"
id="toc-healthcheckservice.swift">HealthCheckService.swift</a></li>
</ul></li>
<li><a href="#components" id="toc-components">Components</a>
<ul>
<li><a href="#macoscomponents.swift"
id="toc-macoscomponents.swift">MacOSComponents.swift</a></li>
<li><a href="#appcommands.swift"
id="toc-appcommands.swift">AppCommands.swift</a></li>
</ul></li>
<li><a href="#ui-patterns-10-macos-patterns"
id="toc-ui-patterns-10-macos-patterns">UI Patterns (10 macOS
Patterns)</a></li>
<li><a href="#dashboard-architecture"
id="toc-dashboard-architecture">Dashboard Architecture</a>
<ul>
<li><a href="#technology-stack-1" id="toc-technology-stack-1">Technology
Stack</a></li>
<li><a href="#page-structure" id="toc-page-structure">Page
Structure</a></li>
</ul></li>
<li><a href="#complete-page-inventory-43-pages"
id="toc-complete-page-inventory-43-pages">Complete Page Inventory (43
Pages)</a>
<ul>
<li><a href="#core-administration" id="toc-core-administration">Core
Administration</a></li>
<li><a href="#ai-models" id="toc-ai-models">AI &amp; Models</a></li>
<li><a href="#orchestration"
id="toc-orchestration">Orchestration</a></li>
<li><a href="#think-tank" id="toc-think-tank">Think Tank</a></li>
<li><a href="#billing-cost" id="toc-billing-cost">Billing &amp;
Cost</a></li>
<li><a href="#analytics-monitoring-1"
id="toc-analytics-monitoring-1">Analytics &amp; Monitoring</a></li>
<li><a href="#agi-learning" id="toc-agi-learning">AGI &amp;
Learning</a></li>
<li><a href="#collaboration-features-1"
id="toc-collaboration-features-1">Collaboration &amp; Features</a></li>
</ul></li>
<li><a href="#key-pages-detail" id="toc-key-pages-detail">Key Pages
Detail</a>
<ul>
<li><a href="#overview-dashboard" id="toc-overview-dashboard">Overview
Dashboard (<code>/</code>)</a></li>
<li><a href="#models-page-models" id="toc-models-page-models">Models
Page (<code>/models</code>)</a></li>
<li><a href="#orchestration-patterns-page-orchestration-patterns"
id="toc-orchestration-patterns-page-orchestration-patterns">Orchestration
Patterns Page (<code>/orchestration-patterns</code>)</a></li>
<li><a href="#visual-workflow-editor-orchestration-patternseditor"
id="toc-visual-workflow-editor-orchestration-patternseditor">Visual
Workflow Editor (<code>/orchestration-patterns/editor</code>)</a></li>
<li><a href="#billing-page-billing"
id="toc-billing-page-billing">Billing Page
(<code>/billing</code>)</a></li>
<li><a href="#analytics-page-analytics"
id="toc-analytics-page-analytics">Analytics Page
(<code>/analytics</code>)</a></li>
<li><a href="#security-page-security"
id="toc-security-page-security">Security Page
(<code>/security</code>)</a></li>
<li><a href="#think-tank-page-thinktank"
id="toc-think-tank-page-thinktank">Think Tank Page
(<code>/thinktank</code>)</a></li>
</ul></li>
<li><a href="#component-library" id="toc-component-library">Component
Library</a>
<ul>
<li><a href="#shared-components" id="toc-shared-components">Shared
Components</a></li>
</ul></li>
<li><a href="#api-integration" id="toc-api-integration">API
Integration</a>
<ul>
<li><a href="#api-client-libapi.ts" id="toc-api-client-libapi.ts">API
Client (<code>lib/api.ts</code>)</a></li>
<li><a href="#authentication-libauth.ts"
id="toc-authentication-libauth.ts">Authentication
(<code>lib/auth.ts</code>)</a></li>
</ul></li>
</ul></li>
<li><a href="#compliance-security-standards"
id="toc-compliance-security-standards">Compliance &amp; Security
Standards</a>
<ul>
<li><a href="#overview-3" id="toc-overview-3">Overview</a></li>
<li><a href="#soc-2-type-ii-compliance"
id="toc-soc-2-type-ii-compliance">SOC 2 Type II Compliance</a>
<ul>
<li><a href="#trust-service-criteria"
id="toc-trust-service-criteria">Trust Service Criteria</a></li>
<li><a href="#key-controls" id="toc-key-controls">Key Controls</a></li>
</ul></li>
<li><a href="#hipaa-compliance" id="toc-hipaa-compliance">HIPAA
Compliance</a>
<ul>
<li><a href="#protected-health-information-phi-handling"
id="toc-protected-health-information-phi-handling">Protected Health
Information (PHI) Handling</a></li>
<li><a href="#hipaa-mode-features" id="toc-hipaa-mode-features">HIPAA
Mode Features</a></li>
<li><a href="#phi-sanitization" id="toc-phi-sanitization">PHI
Sanitization</a></li>
</ul></li>
<li><a href="#gdpr-compliance" id="toc-gdpr-compliance">GDPR
Compliance</a>
<ul>
<li><a href="#data-subject-rights" id="toc-data-subject-rights">Data
Subject Rights</a></li>
<li><a href="#data-processing" id="toc-data-processing">Data
Processing</a></li>
<li><a href="#consent-management" id="toc-consent-management">Consent
Management</a></li>
<li><a href="#data-retention" id="toc-data-retention">Data
Retention</a></li>
</ul></li>
<li><a href="#iso-27001-compliance" id="toc-iso-27001-compliance">ISO
27001 Compliance</a>
<ul>
<li><a href="#information-security-management-system-isms"
id="toc-information-security-management-system-isms">Information
Security Management System (ISMS)</a></li>
<li><a href="#annex-a-controls" id="toc-annex-a-controls">Annex A
Controls</a></li>
<li><a href="#risk-assessment-matrix"
id="toc-risk-assessment-matrix">Risk Assessment Matrix</a></li>
</ul></li>
<li><a href="#security-architecture-1"
id="toc-security-architecture-1">Security Architecture</a>
<ul>
<li><a href="#defense-in-depth" id="toc-defense-in-depth">Defense in
Depth</a></li>
<li><a href="#two-person-approval"
id="toc-two-person-approval">Two-Person Approval</a></li>
</ul></li>
<li><a href="#audit-logging" id="toc-audit-logging">Audit Logging</a>
<ul>
<li><a href="#log-structure" id="toc-log-structure">Log
Structure</a></li>
<li><a href="#logged-actions" id="toc-logged-actions">Logged
Actions</a></li>
<li><a href="#log-retention" id="toc-log-retention">Log
Retention</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 id="radiant-think-tank-executive-summary">RADIANT &amp; Think Tank
Executive Summary</h1>
<div data-align="center">
<p><strong>Enterprise AI Platform Overview</strong></p>
<p>Version 4.18.0 | December 2024</p>
<hr />
<p><em>For executives, investors, and decision-makers</em></p>
</div>
<hr />
<h2 id="what-is-radiant">What is RADIANT?</h2>
<p><strong>RADIANT</strong> is an enterprise-grade, multi-tenant AI
platform that provides organizations with unified access to 106+ AI
models through a single API, with intelligent orchestration that
coordinates multiple AI systems to deliver superior results.</p>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│                          ONE PLATFORM                                       │
│                              ↓                                              │
│     ┌──────────────────────────────────────────────────────────────────┐   │
│     │                                                                   │   │
│     │   106+ AI MODELS    •    49 ORCHESTRATION PATTERNS    •    9 MODES    │
│     │                                                                   │   │
│     │   OpenAI • Anthropic • Google • Meta • Mistral • DeepSeek • +10 more  │
│     │                                                                   │   │
│     └──────────────────────────────────────────────────────────────────┘   │
│                              ↓                                              │
│            INTELLIGENT ROUTING  •  COST MANAGEMENT  •  COMPLIANCE           │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="what-is-think-tank">What is Think Tank?</h2>
<p><strong>Think Tank</strong> is RADIANT’s advanced problem-solving
platform that decomposes complex problems into manageable steps, applies
multi-AI reasoning, and synthesizes comprehensive solutions with
confidence scoring.</p>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│   COMPLEX PROBLEM  →  DECOMPOSE  →  REASON  →  EXECUTE  →  SYNTHESIZE      │
│                                                                             │
│   &quot;Design a scalable       Break into      Step-by-step    Multiple      │
│    microservices           5 sub-          chain-of-       AI models     │
│    architecture&quot;           problems        thought         in parallel   │
│                                                                             │
│                                    ↓                                        │
│                                                                             │
│                    COMPREHENSIVE SOLUTION + CONFIDENCE SCORE                │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="key-differentiators">Key Differentiators</h2>
<h3 id="agi-driven-model-selection">1. AGI-Driven Model Selection</h3>
<p>Unlike platforms that use a single AI model, RADIANT’s AGI layer
<strong>automatically selects the optimal combination of models</strong>
based on task analysis:</p>
<table>
<colgroup>
<col style="width: 51%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr>
<th>What We Analyze</th>
<th>What We Select</th>
</tr>
</thead>
<tbody>
<tr>
<td>Problem domain (coding, legal, medical…)</td>
<td>Best models for that domain</td>
</tr>
<tr>
<td>Task complexity</td>
<td>Number of models (2-5)</td>
</tr>
<tr>
<td>Reasoning requirements</td>
<td>Execution mode (thinking, fast, precise…)</td>
</tr>
<tr>
<td>Quality vs speed priority</td>
<td>Parallel execution strategy</td>
</tr>
</tbody>
</table>
<p><strong>Result:</strong> 50-300% better outcomes than single-model
approaches.</p>
<h3 id="proven-orchestration-patterns">2. 49 Proven Orchestration
Patterns</h3>
<p>Research-backed workflows including: - <strong>AI Debate</strong> -
Two AIs argue, judge decides - <strong>Self-Refine</strong> - Generate →
Critique → Improve - <strong>Chain-of-Verification</strong> - Fact-check
every claim - <strong>Tree of Thoughts</strong> - Explore multiple
solution paths</p>
<h3 id="enterprise-grade-security">3. Enterprise-Grade Security</h3>
<table>
<thead>
<tr>
<th>Capability</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Multi-Tenant Isolation</strong></td>
<td>PostgreSQL Row-Level Security</td>
</tr>
<tr>
<td><strong>Compliance</strong></td>
<td>SOC2, HIPAA-ready</td>
</tr>
<tr>
<td><strong>Encryption</strong></td>
<td>At-rest (AES-256) and in-transit (TLS 1.3)</td>
</tr>
<tr>
<td><strong>Audit Logging</strong></td>
<td>Complete activity trail</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="platform-components">Platform Components</h2>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                         RADIANT PLATFORM                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────┐   ┌─────────────────┐   ┌─────────────────┐           │
│  │  SWIFT DEPLOYER │   │ AWS INFRASTRUCTURE │   │ ADMIN DASHBOARD │           │
│  │     (macOS)     │   │                   │   │    (Next.js)    │           │
│  │                 │   │  • 14 CDK Stacks  │   │                 │           │
│  │  One-click      │   │  • Lambda         │   │  Manage:        │           │
│  │  deployment     │   │  • Aurora PG      │   │  • Tenants      │           │
│  │  &amp; management   │   │  • API Gateway    │   │  • Users        │           │
│  │                 │   │  • S3, Redis      │   │  • Billing      │           │
│  │                 │   │                   │   │  • Analytics    │           │
│  └─────────────────┘   └─────────────────┘   └─────────────────┘           │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="by-the-numbers">By the Numbers</h2>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>AI Models</strong></td>
<td>106+ (50 external + 56 self-hosted)</td>
</tr>
<tr>
<td><strong>AI Providers</strong></td>
<td>15+ integrated</td>
</tr>
<tr>
<td><strong>Orchestration Patterns</strong></td>
<td>49 documented workflows</td>
</tr>
<tr>
<td><strong>Execution Modes</strong></td>
<td>9 specialized modes</td>
</tr>
<tr>
<td><strong>Database Migrations</strong></td>
<td>66+ schema versions</td>
</tr>
<tr>
<td><strong>CDK Stacks</strong></td>
<td>14 infrastructure components</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="use-cases">Use Cases</h2>
<h3 id="enterprise-ai-gateway">Enterprise AI Gateway</h3>
<ul>
<li>Unified access to all major AI providers</li>
<li>Centralized cost management and budgeting</li>
<li>Consistent API regardless of backend model</li>
<li>Automatic failover for reliability</li>
</ul>
<h3 id="complex-problem-solving-think-tank">Complex Problem Solving
(Think Tank)</h3>
<ul>
<li>Multi-step technical analysis</li>
<li>Research synthesis with citations</li>
<li>Architecture design with artifacts</li>
<li>Decision support with confidence scores</li>
</ul>
<h3 id="quality-critical-applications">Quality-Critical
Applications</h3>
<ul>
<li>Legal document analysis (precise mode)</li>
<li>Medical information processing (HIPAA compliant)</li>
<li>Financial analysis (multi-model verification)</li>
<li>Code generation (AI debate + critique)</li>
</ul>
<h3 id="cost-optimization">Cost Optimization</h3>
<ul>
<li>Intelligent model routing (use cheaper models when appropriate)</li>
<li>Budget alerts and limits</li>
<li>Usage analytics by team/project</li>
<li>Model performance vs cost analysis</li>
</ul>
<hr />
<h2 id="competitive-advantages">Competitive Advantages</h2>
<table>
<thead>
<tr>
<th>vs. Single-Model APIs</th>
<th>vs. Other Platforms</th>
</tr>
</thead>
<tbody>
<tr>
<td>✓ Multi-model orchestration</td>
<td>✓ 49 research-backed patterns</td>
</tr>
<tr>
<td>✓ Built-in verification</td>
<td>✓ AGI-driven model selection</td>
</tr>
<tr>
<td>✓ Higher accuracy</td>
<td>✓ 9 execution modes</td>
</tr>
<tr>
<td>✓ Reduced bias</td>
<td>✓ Visual workflow editor</td>
</tr>
<tr>
<td>✓ Confidence scoring</td>
<td>✓ Think Tank problem solving</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="technology-stack">Technology Stack</h2>
<table>
<thead>
<tr>
<th>Layer</th>
<th>Technology</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Frontend</strong></td>
<td>Next.js 14, TypeScript, Tailwind CSS, shadcn/ui</td>
</tr>
<tr>
<td><strong>Backend</strong></td>
<td>AWS Lambda (Node.js 20), API Gateway</td>
</tr>
<tr>
<td><strong>Database</strong></td>
<td>Aurora PostgreSQL (Serverless), DynamoDB, Redis</td>
</tr>
<tr>
<td><strong>Infrastructure</strong></td>
<td>AWS CDK (TypeScript), 14 stacks</td>
</tr>
<tr>
<td><strong>Desktop</strong></td>
<td>SwiftUI (macOS 13.0+, Swift 5.9+)</td>
</tr>
<tr>
<td><strong>Security</strong></td>
<td>Cognito, KMS, WAF, Row-Level Security</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="deployment-model">Deployment Model</h2>
<p>RADIANT deploys to <strong>your AWS account</strong>:</p>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│     YOUR AWS ACCOUNT                                                        │
│     ────────────────                                                        │
│                                                                             │
│     ┌─────────────────────────────────────────────────────────────────┐    │
│     │                    RADIANT INFRASTRUCTURE                        │    │
│     │                                                                  │    │
│     │   • Your data stays in your account                             │    │
│     │   • Your compliance requirements met                            │    │
│     │   • Your region/residency requirements                          │    │
│     │   • Full control over infrastructure                            │    │
│     └─────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│     Deployed via Swift Deployer (macOS app) or CLI                         │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="pricing-model">Pricing Model</h2>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 33%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Tier</th>
<th>Target</th>
<th>Includes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Free</strong></td>
<td>Developers</td>
<td>10K tokens/month, 3 models</td>
</tr>
<tr>
<td><strong>Pro</strong></td>
<td>Teams</td>
<td>1M tokens/month, all models, orchestration</td>
</tr>
<tr>
<td><strong>Enterprise</strong></td>
<td>Organizations</td>
<td>Unlimited, SLA, custom patterns, HIPAA</td>
</tr>
</tbody>
</table>
<p>All tiers include: - Full API access - Admin dashboard - Basic
analytics - Email support</p>
<hr />
<h2 id="roadmap-highlights">Roadmap Highlights</h2>
<table>
<thead>
<tr>
<th>Timeframe</th>
<th>Features</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Q1 2026</strong></td>
<td>Mobile SDK, more self-hosted models</td>
</tr>
<tr>
<td><strong>Q2 2026</strong></td>
<td>Fine-tuning pipeline, custom model hosting</td>
</tr>
<tr>
<td><strong>Q3 2026</strong></td>
<td>Multi-region deployment, advanced compliance</td>
</tr>
<tr>
<td><strong>Q4 2026</strong></td>
<td>Marketplace for custom patterns</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="summary">Summary</h2>
<p><strong>RADIANT + Think Tank</strong> delivers:</p>
<ol type="1">
<li><strong>Unified AI Access</strong> - One API for 106+ models across
15+ providers</li>
<li><strong>Intelligent Orchestration</strong> - AGI selects optimal
models and modes</li>
<li><strong>Superior Results</strong> - 49 patterns achieve 50-300%
better outcomes</li>
<li><strong>Enterprise Security</strong> - Multi-tenant, SOC2,
HIPAA-ready</li>
<li><strong>Cost Control</strong> - Budgets, analytics, intelligent
routing</li>
<li><strong>Problem Solving</strong> - Think Tank for complex multi-step
reasoning</li>
</ol>
<hr />
<div data-align="center">
<p><strong>RADIANT v4.18.0 + Think Tank v3.2.0</strong></p>
<p><em>The enterprise platform for intelligent AI orchestration</em></p>
<hr />
<p><strong>Contact:</strong> info@radiant.ai |
<strong>Documentation:</strong> docs.radiant.ai</p>
</div>
<h1 id="radiant-platform-architecture">RADIANT Platform
Architecture</h1>
<div data-align="center">
<p><strong>Enterprise Multi-Tenant AI Platform</strong></p>
<p>Version 4.18.0 | December 2024</p>
<hr />
<p><em>A comprehensive technical architecture document for the RADIANT
AI orchestration platform</em></p>
</div>
<hr />
<h2 id="table-of-contents">Table of Contents</h2>
<ol type="1">
<li><a href="#1-platform-overview">Platform Overview</a></li>
<li><a href="#2-system-architecture">System Architecture</a></li>
<li><a href="#3-component-deep-dive">Component Deep Dive</a></li>
<li><a href="#4-data-architecture">Data Architecture</a></li>
<li><a href="#5-security-architecture">Security Architecture</a></li>
<li><a href="#6-deployment-architecture">Deployment
Architecture</a></li>
<li><a href="#7-integration-points">Integration Points</a></li>
</ol>
<hr />
<h2 id="platform-overview">1. Platform Overview</h2>
<h3 id="what-is-radiant-1">1.1 What is RADIANT?</h3>
<p><strong>RADIANT</strong> (Real-time AI Distribution, Integration, and
Automation Network for Tenants) is an enterprise-grade, multi-tenant
SaaS platform that provides unified access to 106+ AI models across
multiple providers, with intelligent orchestration, cost management, and
comprehensive analytics.</p>
<h3 id="core-value-proposition">1.2 Core Value Proposition</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                        RADIANT VALUE PROPOSITION                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐ │
│   │   UNIFIED   │    │ INTELLIGENT │    │    COST     │    │  ENTERPRISE │ │
│   │   ACCESS    │    │ORCHESTRATION│    │ MANAGEMENT  │    │   SECURITY  │ │
│   │             │    │             │    │             │    │             │ │
│   │  106+ AI    │    │  49 Multi-  │    │  Credits,   │    │  SOC2/HIPAA │ │
│   │  Models     │    │  AI Patterns│    │  Budgets,   │    │  Compliant  │ │
│   │  One API    │    │  AGI Router │    │  Analytics  │    │  Multi-Tenant│ │
│   └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘ │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<h3 id="platform-statistics">1.3 Platform Statistics</h3>
<table>
<colgroup>
<col style="width: 53%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr>
<th>Metric</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>AI Models Supported</strong></td>
<td>106+ (50 external + 56 self-hosted)</td>
</tr>
<tr>
<td><strong>AI Providers Integrated</strong></td>
<td>15+ (OpenAI, Anthropic, Google, Meta, etc.)</td>
</tr>
<tr>
<td><strong>Orchestration Patterns</strong></td>
<td>49 documented patterns</td>
</tr>
<tr>
<td><strong>Model Execution Modes</strong></td>
<td>9 (thinking, research, fast, creative, etc.)</td>
</tr>
<tr>
<td><strong>Database Migrations</strong></td>
<td>66+ schema migrations</td>
</tr>
<tr>
<td><strong>CDK Stacks</strong></td>
<td>14 infrastructure stacks</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="system-architecture">2. System Architecture</h2>
<h3 id="high-level-architecture">2.1 High-Level Architecture</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                          RADIANT PLATFORM ARCHITECTURE                       │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │                         CLIENT LAYER                                   │  │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │  │
│  │  │   Swift     │  │   Admin     │  │  Think Tank │  │   SDK &amp;     │   │  │
│  │  │  Deployer   │  │  Dashboard  │  │  Consumer   │  │    API      │   │  │
│  │  │  (macOS)    │  │  (Next.js)  │  │   App       │  │  Clients    │   │  │
│  │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘   │  │
│  └─────────┼────────────────┼────────────────┼────────────────┼──────────┘  │
│            │                │                │                │             │
│            └────────────────┴────────┬───────┴────────────────┘             │
│                                      │                                      │
│  ┌───────────────────────────────────▼───────────────────────────────────┐  │
│  │                         API GATEWAY LAYER                              │  │
│  │  ┌─────────────────────────────────────────────────────────────────┐  │  │
│  │  │                    Amazon API Gateway                            │  │  │
│  │  │  • REST APIs       • WebSocket APIs      • Rate Limiting         │  │  │
│  │  │  • JWT Auth        • API Keys            • Usage Plans           │  │  │
│  │  └─────────────────────────────────────────────────────────────────┘  │  │
│  └───────────────────────────────────┬───────────────────────────────────┘  │
│                                      │                                      │
│  ┌───────────────────────────────────▼───────────────────────────────────┐  │
│  │                      COMPUTE LAYER (Lambda)                            │  │
│  │                                                                        │  │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌────────────┐ │  │
│  │  │    Model     │  │Orchestration │  │   Billing    │  │   Admin    │ │  │
│  │  │   Router     │  │   Engine     │  │   Service    │  │  Service   │ │  │
│  │  └──────────────┘  └──────────────┘  └──────────────┘  └────────────┘ │  │
│  │                                                                        │  │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌────────────┐ │  │
│  │  │   Think      │  │  Analytics   │  │   Learning   │  │  Webhook   │ │  │
│  │  │   Tank       │  │   Service    │  │   Service    │  │  Service   │ │  │
│  │  └──────────────┘  └──────────────┘  └──────────────┘  └────────────┘ │  │
│  └───────────────────────────────────┬───────────────────────────────────┘  │
│                                      │                                      │
│  ┌───────────────────────────────────▼───────────────────────────────────┐  │
│  │                         DATA LAYER                                     │  │
│  │                                                                        │  │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌────────────┐ │  │
│  │  │   Aurora     │  │  DynamoDB    │  │     S3       │  │   Redis    │ │  │
│  │  │ PostgreSQL   │  │  (Sessions)  │  │  (Storage)   │  │  (Cache)   │ │  │
│  │  │   (RLS)      │  │              │  │              │  │            │ │  │
│  │  └──────────────┘  └──────────────┘  └──────────────┘  └────────────┘ │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │                    EXTERNAL AI PROVIDERS                               │  │
│  │  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ ┌──────────┐ │  │
│  │  │OpenAI  │ │Anthropic│ │ Google │ │  Meta  │ │Mistral │ │ +10 more │ │  │
│  │  │GPT-4o  │ │ Claude  │ │ Gemini │ │ Llama  │ │        │ │          │ │  │
│  │  │  o1    │ │  3.5    │ │  2.0   │ │ 3.1    │ │        │ │          │ │  │
│  │  └────────┘ └────────┘ └────────┘ └────────┘ └────────┘ └──────────┘ │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<h3 id="three-component-structure">2.2 Three-Component Structure</h3>
<p>RADIANT consists of three primary deployment components:</p>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                        THREE COMPONENTS OF RADIANT                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  packages/infrastructure/lambda/shared/services/                            │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                        CORE SERVICES                                 │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │                                                                      │   │
│  │  model-router.service.ts       │  Route requests to AI providers    │   │
│  │  model-metadata.service.ts     │  Live model data &amp; capabilities    │   │
│  │  orchestration-patterns.service│  49 multi-AI workflow patterns     │   │
│  │  superior-orchestration.service│  Guaranteed superior responses     │   │
│  │  learning.service.ts           │  ML feedback &amp; continuous learning │   │
│  │                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                       BILLING SERVICES                               │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │                                                                      │   │
│  │  billing.service.ts            │  Credit &amp; subscription management  │   │
│  │  cost-management.service.ts    │  Budget alerts &amp; cost tracking     │   │
│  │  usage-analytics.service.ts    │  Usage metrics &amp; reporting         │   │
│  │                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                      PLATFORM SERVICES                               │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │                                                                      │   │
│  │  tenant.service.ts             │  Multi-tenant management           │   │
│  │  auth.service.ts               │  Authentication &amp; authorization    │   │
│  │  api-key.service.ts            │  API key lifecycle                 │   │
│  │  webhook.service.ts            │  Event notifications               │   │
│  │  storage.service.ts            │  File &amp; artifact storage           │   │
│  │                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                     THINK TANK SERVICES                              │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │                                                                      │   │
│  │  thinktank-engine.ts           │  Multi-step problem solving        │   │
│  │  thinktank-sessions.ts         │  Conversation management           │   │
│  │  collaboration.service.ts      │  Real-time collaboration           │   │
│  │                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="component-deep-dive">3. Component Deep Dive</h2>
<h3 id="model-router-service">3.1 Model Router Service</h3>
<p>The intelligent core that routes AI requests to optimal
providers:</p>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                          MODEL ROUTER SERVICE                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│                           ┌─────────────┐                                   │
│                           │   Incoming  │                                   │
│                           │   Request   │                                   │
│                           └──────┬──────┘                                   │
│                                  │                                          │
│                                  ▼                                          │
│                    ┌─────────────────────────┐                              │
│                    │   Request Validation    │                              │
│                    │   • API Key Check       │                              │
│                    │   • Rate Limiting       │                              │
│                    │   • Tenant Verification │                              │
│                    └───────────┬─────────────┘                              │
│                                │                                            │
│           ┌────────────────────┼────────────────────┐                       │
│           │                    │                    │                       │
│           ▼                    ▼                    ▼                       │
│   ┌───────────────┐   ┌───────────────┐   ┌───────────────┐                │
│   │  Model        │   │   Budget      │   │   Fallback    │                │
│   │  Selection    │   │   Check       │   │   Logic       │                │
│   │               │   │               │   │               │                │
│   │ • Metadata    │   │ • Credits     │   │ • Primary     │                │
│   │ • Preferences │   │ • Limits      │   │ • Secondary   │                │
│   │ • Capabilities│   │ • Cost Est.   │   │ • Tertiary    │                │
│   └───────┬───────┘   └───────┬───────┘   └───────┬───────┘                │
│           │                   │                   │                         │
│           └───────────────────┼───────────────────┘                         │
│                               │                                             │
│                               ▼                                             │
│              ┌────────────────────────────────┐                             │
│              │     Provider Adapter Layer     │                             │
│              │  ┌────────┐ ┌────────┐ ┌────┐  │                             │
│              │  │OpenAI  │ │Anthropic│ │... │  │                             │
│              │  │Adapter │ │ Adapter │ │    │  │                             │
│              │  └────────┘ └────────┘ └────┘  │                             │
│              └────────────────┬───────────────┘                             │
│                               │                                             │
│                               ▼                                             │
│              ┌────────────────────────────────┐                             │
│              │   Response Processing          │                             │
│              │   • Token Counting             │                             │
│              │   • Cost Calculation           │                             │
│              │   • Usage Recording            │                             │
│              │   • Analytics Event            │                             │
│              └────────────────────────────────┘                             │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<h3 id="service-architecture">3.2 Service Architecture</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                         LAMBDA SERVICES ARCHITECTURE                        │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  packages/infrastructure/lambda/shared/services/                            │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                        CORE SERVICES                                 │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │                                                                      │   │
│  │  model-router.service.ts       │  Route requests to AI providers    │   │
│  │  model-metadata.service.ts     │  Live model data &amp; capabilities    │   │
│  │  orchestration-patterns.service│  49 multi-AI workflow patterns     │   │
│  │  superior-orchestration.service│  Guaranteed superior responses     │   │
│  │  learning.service.ts           │  ML feedback &amp; continuous learning │   │
│  │                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                       BILLING SERVICES                               │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │                                                                      │   │
│  │  billing.service.ts            │  Credit &amp; subscription management  │   │
│  │  cost-management.service.ts    │  Budget alerts &amp; cost tracking     │   │
│  │  usage-analytics.service.ts    │  Usage metrics &amp; reporting         │   │
│  │                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                      PLATFORM SERVICES                               │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │                                                                      │   │
│  │  tenant.service.ts             │  Multi-tenant management           │   │
│  │  auth.service.ts               │  Authentication &amp; authorization    │   │
│  │  api-key.service.ts            │  API key lifecycle                 │   │
│  │  webhook.service.ts            │  Event notifications               │   │
│  │  storage.service.ts            │  File &amp; artifact storage           │   │
│  │                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                     THINK TANK SERVICES                              │   │
│  ├─────────────────────────────────────────────────────────────────────┤   │
│  │                                                                      │   │
│  │  thinktank-engine.ts           │  Multi-step problem solving        │   │
│  │  thinktank-sessions.ts         │  Conversation management           │   │
│  │  collaboration.service.ts      │  Real-time collaboration           │   │
│  │                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="data-architecture">4. Data Architecture</h2>
<h3 id="database-schema-overview">4.1 Database Schema Overview</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                     AURORA POSTGRESQL SCHEMA                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  66+ Migrations in packages/infrastructure/migrations/                      │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  CORE ENTITIES                                                       │   │
│  │  ─────────────                                                       │   │
│  │  tenants                    │  Multi-tenant organizations            │   │
│  │  users                      │  User accounts with roles              │   │
│  │  api_keys                   │  API authentication keys               │   │
│  │  model_configurations       │  Per-tenant model settings             │   │
│  │  model_metadata             │  AI model capabilities &amp; pricing       │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  BILLING &amp; CREDITS                                                   │   │
│  │  ─────────────────                                                   │   │
│  │  credit_accounts            │  Tenant credit balances                │   │
│  │  credit_transactions        │  Credit usage history                  │   │
│  │  subscriptions              │  Plan subscriptions                    │   │
│  │  invoices                   │  Billing invoices                      │   │
│  │  budgets                    │  Spending limits &amp; alerts              │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  ORCHESTRATION                                                       │   │
│  │  ─────────────                                                       │   │
│  │  orchestration_methods      │  Reusable AI method definitions        │   │
│  │  orchestration_workflows    │  49 workflow patterns                  │   │
│  │  workflow_method_bindings   │  Steps linking workflows to methods    │   │
│  │  orchestration_executions   │  Execution history &amp; results           │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  THINK TANK                                                          │   │
│  │  ──────────                                                          │   │
│  │  thinktank_sessions         │  Problem-solving sessions              │   │
│  │  thinktank_conversations    │  Conversation threads                  │   │
│  │  thinktank_messages         │  Individual messages                   │   │
│  │  thinktank_steps            │  Reasoning steps                       │   │
│  │  thinktank_artifacts        │  Generated outputs                     │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  ANALYTICS &amp; LEARNING                                                │   │
│  │  ────────────────────                                                │   │
│  │  usage_events               │  API usage events                      │   │
│  │  analytics_aggregates       │  Pre-computed metrics                  │   │
│  │  learning_interactions      │  ML training data                      │   │
│  │  model_performance          │  Model quality tracking                │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  SECURITY                                                            │   │
│  │  ────────                                                            │   │
│  │  Row-Level Security (RLS) on all tenant tables                       │   │
│  │  SET app.current_tenant_id for automatic filtering                   │   │
│  │  Audit logging on sensitive operations                               │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<h3 id="multi-tenant-data-isolation">4.2 Multi-Tenant Data
Isolation</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                    ROW-LEVEL SECURITY (RLS) MODEL                           │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   Request from Tenant A                     Request from Tenant B           │
│          │                                         │                        │
│          ▼                                         ▼                        │
│   ┌─────────────┐                           ┌─────────────┐                 │
│   │ JWT Token   │                           │ JWT Token   │                 │
│   │ tenant_id=A │                           │ tenant_id=B │                 │
│   └──────┬──────┘                           └──────┬──────┘                 │
│          │                                         │                        │
│          ▼                                         ▼                        │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                    Database Connection                              │  │
│   │   SET app.current_tenant_id = &#39;tenant_id_from_jwt&#39;;                │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                              │                                              │
│                              ▼                                              │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                     RLS Policy Applied                              │  │
│   │                                                                     │  │
│   │   CREATE POLICY tenant_isolation ON table_name                      │  │
│   │   USING (tenant_id = current_setting(&#39;app.current_tenant_id&#39;));    │  │
│   │                                                                     │  │
│   │   Result: Each tenant ONLY sees their own data                     │  │
│   └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│          Tenant A sees:                       Tenant B sees:                │
│   ┌─────────────────────┐              ┌─────────────────────┐             │
│   │   Only Tenant A&#39;s   │              │   Only Tenant B&#39;s   │             │
│   │   - Users           │              │   - Users           │             │
│   │   - API Keys        │              │   - API Keys        │             │
│   │   - Usage Data      │              │   - Usage Data      │             │
│   │   - Conversations   │              │   - Conversations   │             │
│   └─────────────────────┘              └─────────────────────┘             │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="security-architecture">5. Security Architecture</h2>
<h3 id="security-layers">5.1 Security Layers</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                         SECURITY ARCHITECTURE                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  LAYER 1: NETWORK SECURITY                                                  │
│  ─────────────────────────                                                  │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  • VPC with private subnets for database                            │   │
│  │  • WAF rules for API Gateway                                        │   │
│  │  • CloudFront for DDoS protection                                   │   │
│  │  • TLS 1.3 for all connections                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  LAYER 2: AUTHENTICATION                                                    │
│  ───────────────────────                                                    │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  • Cognito User Pools for user authentication                       │   │
│  │  • JWT tokens with tenant claims                                    │   │
│  │  • API Keys with scoped permissions                                 │   │
│  │  • MFA support for admin users                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  LAYER 3: AUTHORIZATION                                                     │
│  ──────────────────────                                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  • Role-based access control (RBAC)                                 │   │
│  │  • Permission sets per tenant                                       │   │
│  │  • Resource-level policies                                          │   │
│  │  • API endpoint authorization                                       │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  LAYER 4: DATA SECURITY                                                     │
│  ─────────────────────                                                      │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  • Row-Level Security (RLS) in PostgreSQL                           │   │
│  │  • Encryption at rest (AES-256)                                     │   │
│  │  • Encryption in transit (TLS)                                      │   │
│  │  • KMS for key management                                           │   │
│  │  • PHI sanitization for HIPAA compliance                            │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  LAYER 5: AUDIT &amp; COMPLIANCE                                                │
│  ───────────────────────────                                                │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  • CloudTrail for API logging                                       │   │
│  │  • Audit tables for data changes                                    │   │
│  │  • Compliance reporting dashboard                                   │   │
│  │  • SOC2 Type II controls                                            │   │
│  │  • HIPAA compliance mode                                            │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="deployment-architecture">6. Deployment Architecture</h2>
<h3 id="aws-infrastructure">6.1 AWS Infrastructure</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                        AWS DEPLOYMENT ARCHITECTURE                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         REGION: us-east-1                           │   │
│  │                                                                      │   │
│  │   ┌─────────────────────┐     ┌─────────────────────┐               │   │
│  │   │   CloudFront CDN    │────▶│   S3 Static Assets  │               │   │
│  │   └──────────┬──────────┘     └─────────────────────┘               │   │
│  │              │                                                       │   │
│  │              ▼                                                       │   │
│  │   ┌─────────────────────┐     ┌─────────────────────┐               │   │
│  │   │   API Gateway       │────▶│   Lambda Functions  │               │   │
│  │   │   (REST + WS)       │     │   (Node.js 20)      │               │   │
│  │   └─────────────────────┘     └──────────┬──────────┘               │   │
│  │                                          │                           │   │
│  │              ┌───────────────────────────┼───────────────┐          │   │
│  │              │                           │               │          │   │
│  │              ▼                           ▼               ▼          │   │
│  │   ┌─────────────────┐       ┌─────────────────┐   ┌──────────┐     │   │
│  │   │  Cognito        │       │  Aurora         │   │  S3      │     │   │
│  │   │  User Pools     │       │  PostgreSQL     │   │  Storage │     │   │
│  │   │                 │       │  (Serverless)   │   │          │     │   │
│  │   └─────────────────┘       └─────────────────┘   └──────────┘     │   │
│  │                                                                      │   │
│  │   ┌─────────────────┐       ┌─────────────────┐   ┌──────────┐     │   │
│  │   │  Secrets        │       │  ElastiCache    │   │  SQS     │     │   │
│  │   │  Manager        │       │  (Redis)        │   │  Queues  │     │   │
│  │   └─────────────────┘       └─────────────────┘   └──────────┘     │   │
│  │                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<h3 id="cdk-stack-dependencies">6.2 CDK Stack Dependencies</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                         CDK STACK DEPENDENCIES                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│                          ┌─────────────────┐                                │
│                          │  NetworkStack   │                                │
│                          │  (VPC, Subnets) │                                │
│                          └────────┬────────┘                                │
│                                   │                                         │
│                    ┌──────────────┼──────────────┐                          │
│                    │              │              │                          │
│                    ▼              ▼              ▼                          │
│           ┌────────────┐  ┌────────────┐  ┌────────────┐                   │
│           │ AuthStack  │  │DatabaseStack│  │StorageStack│                   │
│           │ (Cognito)  │  │ (Aurora)   │  │   (S3)     │                   │
│           └─────┬──────┘  └─────┬──────┘  └─────┬──────┘                   │
│                 │               │               │                           │
│                 └───────────────┼───────────────┘                           │
│                                 │                                           │
│                                 ▼                                           │
│                        ┌────────────────┐                                   │
│                        │    AIStack     │                                   │
│                        │ (Model Router) │                                   │
│                        └───────┬────────┘                                   │
│                                │                                            │
│           ┌────────────────────┼────────────────────┐                       │
│           │                    │                    │                       │
│           ▼                    ▼                    ▼                       │
│    ┌────────────┐      ┌────────────┐      ┌────────────┐                  │
│    │  APIStack  │      │BillingStack│      │ThinkTankStack                 │
│    │            │      │            │      │            │                  │
│    └────────────┘      └────────────┘      └────────────┘                  │
│                                                                             │
│    Additional stacks: AnalyticsStack, WebhookStack, ComplianceStack,       │
│                       MonitoringStack, CDNStack, NotificationStack         │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="integration-points">7. Integration Points</h2>
<h3 id="external-api-integrations">7.1 External API Integrations</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                      EXTERNAL INTEGRATIONS                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  AI PROVIDERS (15+)                                                         │
│  ─────────────────                                                          │
│  ┌────────────┬────────────┬────────────┬────────────┬────────────┐        │
│  │  OpenAI    │ Anthropic  │   Google   │   Meta     │  Mistral   │        │
│  │ GPT-4o, o1 │Claude 3.5  │Gemini 2.0  │Llama 3.1   │  Large     │        │
│  └────────────┴────────────┴────────────┴────────────┴────────────┘        │
│  ┌────────────┬────────────┬────────────┬────────────┬────────────┐        │
│  │  Cohere    │  AI21      │ Perplexity │  DeepSeek  │   xAI      │        │
│  │            │            │   Sonar    │  R1, Chat  │   Grok     │        │
│  └────────────┴────────────┴────────────┴────────────┴────────────┘        │
│                                                                             │
│  PAYMENT PROVIDERS                                                          │
│  ─────────────────                                                          │
│  ┌────────────────────────────────────────────────────────────────────┐    │
│  │  Stripe    │  Credit card processing, subscriptions, invoicing     │    │
│  └────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│  MONITORING &amp; OBSERVABILITY                                                 │
│  ──────────────────────────                                                 │
│  ┌────────────┬────────────┬────────────┬────────────────────────────┐     │
│  │ CloudWatch │   X-Ray    │   Sentry   │   Custom Analytics         │     │
│  │  (Logs)    │  (Traces)  │  (Errors)  │   Dashboard                │     │
│  └────────────┴────────────┴────────────┴────────────────────────────┘     │
│                                                                             │
│  NOTIFICATIONS                                                              │
│  ─────────────                                                              │
│  ┌────────────┬────────────┬────────────┬────────────────────────────┐     │
│  │    SES     │    SNS     │  Webhooks  │   Slack/Teams Integrations │     │
│  │  (Email)   │  (Push)    │  (Custom)  │                            │     │
│  └────────────┴────────────┴────────────┴────────────────────────────┘     │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<div data-align="center">
<p><strong>RADIANT Platform Architecture v4.18.0</strong></p>
<p><em>Building the future of enterprise AI</em></p>
<hr />
<p>© 2024 RADIANT. All Rights Reserved.</p>
</div>
<h1 id="think-tank-platform-architecture">Think Tank Platform
Architecture</h1>
<div data-align="center">
<p><strong>Advanced Multi-Step AI Problem Solving</strong></p>
<p>Version 3.2.0 | December 2024</p>
<hr />
<p><em>A comprehensive technical architecture document for the Think
Tank AI reasoning platform</em></p>
</div>
<hr />
<h2 id="table-of-contents-1">Table of Contents</h2>
<ol type="1">
<li><a href="#1-platform-overview">Platform Overview</a></li>
<li><a href="#2-core-architecture">Core Architecture</a></li>
<li><a href="#3-problem-solving-pipeline">Problem Solving
Pipeline</a></li>
<li><a href="#4-session-management">Session Management</a></li>
<li><a href="#5-collaboration-features">Collaboration Features</a></li>
<li><a href="#6-domain-modes">Domain Modes</a></li>
<li><a href="#7-quality--confidence">Quality &amp; Confidence</a></li>
<li><a href="#8-user-interface">User Interface</a></li>
</ol>
<hr />
<h2 id="platform-overview-1">1. Platform Overview</h2>
<h3 id="what-is-think-tank-1">1.1 What is Think Tank?</h3>
<p><strong>Think Tank</strong> is an advanced AI reasoning platform that
decomposes complex problems into manageable sub-problems, applies
multi-step reasoning, and synthesizes comprehensive solutions using
orchestrated AI models.</p>
<p>Unlike simple chat interfaces, Think Tank: -
<strong>Decomposes</strong> complex problems into sub-tasks -
<strong>Reasons</strong> through each component step-by-step -
<strong>Executes</strong> specialized AI calls for each step -
<strong>Synthesizes</strong> results into coherent solutions -
<strong>Tracks</strong> confidence and quality throughout</p>
<h3 id="think-tank-vs-traditional-chat">1.2 Think Tank vs Traditional
Chat</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                    TRADITIONAL CHAT vs THINK TANK                           │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   TRADITIONAL CHAT                       THINK TANK                         │
│   ────────────────                       ──────────                         │
│                                                                             │
│   User ──▶ AI ──▶ Response               User ──▶ Problem Analysis          │
│                                                        │                    │
│   Single prompt, single response                       ▼                    │
│   No decomposition                            ┌───────────────┐             │
│   No reasoning steps                          │  Decompose    │             │
│   No confidence tracking                      │  into parts   │             │
│   No iterative refinement                     └───────┬───────┘             │
│                                                       │                     │
│                                          ┌────────────┼────────────┐        │
│                                          ▼            ▼            ▼        │
│                                     ┌────────┐  ┌────────┐  ┌────────┐     │
│                                     │ Part 1 │  │ Part 2 │  │ Part 3 │     │
│                                     │ Reason │  │ Reason │  │ Reason │     │
│                                     └───┬────┘  └───┬────┘  └───┬────┘     │
│                                         │           │           │          │
│                                         └─────┬─────┴─────┬─────┘          │
│                                               ▼           ▼                 │
│                                         ┌────────┐  ┌────────┐             │
│                                         │Execute │  │Execute │             │
│                                         │ + Verify│  │ + Verify│            │
│                                         └───┬────┘  └───┬────┘             │
│                                             │           │                   │
│                                             └─────┬─────┘                   │
│                                                   ▼                         │
│                                          ┌───────────────┐                  │
│                                          │  Synthesize   │                  │
│                                          │  Solution     │                  │
│                                          │  (confidence) │                  │
│                                          └───────────────┘                  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<h3 id="key-capabilities">1.3 Key Capabilities</h3>
<table>
<colgroup>
<col style="width: 48%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th>Capability</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Problem Decomposition</strong></td>
<td>Breaks complex questions into manageable sub-problems</td>
</tr>
<tr>
<td><strong>Multi-Step Reasoning</strong></td>
<td>Chain-of-thought with recorded steps</td>
</tr>
<tr>
<td><strong>Domain Specialization</strong></td>
<td>8+ specialized reasoning modes</td>
</tr>
<tr>
<td><strong>Confidence Tracking</strong></td>
<td>Quality scores for every step</td>
</tr>
<tr>
<td><strong>Artifact Generation</strong></td>
<td>Code, documents, diagrams as outputs</td>
</tr>
<tr>
<td><strong>Real-time Collaboration</strong></td>
<td>Multiple users solving together</td>
</tr>
<tr>
<td><strong>Session Persistence</strong></td>
<td>Resume any session later</td>
</tr>
<tr>
<td><strong>Cost Transparency</strong></td>
<td>Token and cost tracking per step</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="core-architecture">2. Core Architecture</h2>
<h3 id="system-components">2.1 System Components</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                       THINK TANK ARCHITECTURE                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐  │
│  │                      CONSUMER INTERFACE LAYER                         │  │
│  │  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐       │  │
│  │  │   Web Client    │  │  Mobile Client  │  │   API Client    │       │  │
│  │  │  (Next.js/React)│  │   (React Native)│  │    (SDK)        │       │  │
│  │  └────────┬────────┘  └────────┬────────┘  └────────┬────────┘       │  │
│  └───────────┼────────────────────┼────────────────────┼────────────────┘  │
│              │                    │                    │                   │
│              └────────────────────┼────────────────────┘                   │
│                                   │                                        │
│  ┌────────────────────────────────▼───────────────────────────────────┐   │
│  │                      THINK TANK ENGINE                              │   │
│  │                                                                     │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              │   │
│  │  │   Session    │  │   Problem    │  │   Step       │              │   │
│  │  │   Manager    │  │  Decomposer  │  │   Executor   │              │   │
│  │  └──────────────┘  └──────────────┘  └──────────────┘              │   │
│  │                                                                     │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              │   │
│  │  │  Reasoning   │  │   Solution   │  │  Confidence  │              │   │
│  │  │   Engine     │  │ Synthesizer  │  │   Scorer     │              │   │
│  │  └──────────────┘  └──────────────┘  └──────────────┘              │   │
│  │                                                                     │   │
│  └────────────────────────────────┬───────────────────────────────────┘   │
│                                   │                                        │
│  ┌────────────────────────────────▼───────────────────────────────────┐   │
│  │                    ORCHESTRATION LAYER                              │   │
│  │                                                                     │   │
│  │  ┌──────────────────────────────────────────────────────────────┐  │   │
│  │  │                OrchestrationPatternsService                   │  │   │
│  │  │  • 49 workflow patterns    • AGI model selection              │  │   │
│  │  │  • Parallel execution      • Mode-aware invocation            │  │   │
│  │  └──────────────────────────────────────────────────────────────┘  │   │
│  │                                                                     │   │
│  │  ┌──────────────────────────────────────────────────────────────┐  │   │
│  │  │                    ModelRouterService                         │  │   │
│  │  │  • 106+ AI models          • Intelligent routing              │  │   │
│  │  │  • Live metadata           • Fallback handling                │  │   │
│  │  └──────────────────────────────────────────────────────────────┘  │   │
│  │                                                                     │   │
│  └────────────────────────────────┬───────────────────────────────────┘   │
│                                   │                                        │
│  ┌────────────────────────────────▼───────────────────────────────────┐   │
│  │                        DATA LAYER                                   │   │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌───────────┐  │   │
│  │  │  Sessions   │  │Conversations│  │  Messages   │  │ Artifacts │  │   │
│  │  │  (Aurora)   │  │  (Aurora)   │  │  (Aurora)   │  │   (S3)    │  │   │
│  │  └─────────────┘  └─────────────┘  └─────────────┘  └───────────┘  │   │
│  └────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<h3 id="think-tank-engine">2.2 Think Tank Engine</h3>
<p>The core engine that powers intelligent problem solving:</p>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                        THINK TANK ENGINE DETAIL                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  class ThinkTankEngine {                                                    │
│                                                                             │
│    ┌─────────────────────────────────────────────────────────────────────┐ │
│    │  async solve(problem: ThinkTankProblem): Promise&lt;ThinkTankResult&gt;   │ │
│    │                                                                      │ │
│    │  1. CREATE SESSION                                                   │ │
│    │     • Initialize session with problem context                        │ │
│    │     • Set domain mode and preferences                                │ │
│    │     • Record start time and user info                                │ │
│    │                                                                      │ │
│    │  2. DECOMPOSE PROBLEM                                                │ │
│    │     • AI analyzes problem structure                                  │ │
│    │     • Identifies sub-problems and dependencies                       │ │
│    │     • Creates execution plan                                         │ │
│    │                                                                      │ │
│    │  3. FOR EACH SUB-PROBLEM:                                            │ │
│    │     ┌───────────────────────────────────────────────────────────┐   │ │
│    │     │  a. REASON                                                 │   │ │
│    │     │     • Chain-of-thought analysis                           │   │ │
│    │     │     • Record reasoning steps                              │   │ │
│    │     │                                                            │   │ │
│    │     │  b. EXECUTE                                                │   │ │
│    │     │     • Call appropriate AI model(s)                        │   │ │
│    │     │     • May use parallel execution                          │   │ │
│    │     │     • Track tokens and cost                               │   │ │
│    │     │                                                            │   │ │
│    │     │  c. RECORD STEP                                            │   │ │
│    │     │     • Save step result with confidence                    │   │ │
│    │     │     • Update session state                                │   │ │
│    │     └───────────────────────────────────────────────────────────┘   │ │
│    │                                                                      │ │
│    │  4. SYNTHESIZE SOLUTION                                              │ │
│    │     • Combine all step results                                       │ │
│    │     • Generate final answer with reasoning                           │ │
│    │     • Calculate overall confidence                                   │ │
│    │                                                                      │ │
│    │  5. RETURN RESULT                                                    │ │
│    │     • Solution with confidence score                                 │ │
│    │     • All recorded steps                                             │ │
│    │     • Total cost and token usage                                     │ │
│    └─────────────────────────────────────────────────────────────────────┘ │
│  }                                                                          │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="problem-solving-pipeline">3. Problem Solving Pipeline</h2>
<h3 id="pipeline-stages">3.1 Pipeline Stages</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                     PROBLEM SOLVING PIPELINE                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  USER INPUT                                                                 │
│  ══════════                                                                 │
│  &quot;Design a scalable microservices architecture for an e-commerce           │
│   platform that handles 10M daily users with real-time inventory&quot;          │
│                                                                             │
│       │                                                                     │
│       ▼                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  STAGE 1: PROBLEM ANALYSIS                                          │   │
│  │  ─────────────────────────                                          │   │
│  │  • Identify problem type: System Design                             │   │
│  │  • Detect domain: Engineering/Architecture                          │   │
│  │  • Assess complexity: High                                          │   │
│  │  • Select domain mode: Engineering Mode                             │   │
│  │  • Choose orchestration pattern: Decomposed Prompting               │   │
│  └──────────────────────────────────┬──────────────────────────────────┘   │
│                                     │                                       │
│       ▼                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  STAGE 2: DECOMPOSITION                                             │   │
│  │  ─────────────────────                                              │   │
│  │  Sub-Problem 1: Requirements Analysis                               │   │
│  │  Sub-Problem 2: Service Identification                              │   │
│  │  Sub-Problem 3: Data Architecture                                   │   │
│  │  Sub-Problem 4: Communication Patterns                              │   │
│  │  Sub-Problem 5: Scalability Design                                  │   │
│  │  Sub-Problem 6: Infrastructure                                      │   │
│  │                                                                     │   │
│  │  Dependencies: [1] → [2,3] → [4] → [5] → [6]                       │   │
│  └──────────────────────────────────┬──────────────────────────────────┘   │
│                                     │                                       │
│       ▼                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  STAGE 3: STEP-BY-STEP EXECUTION                                    │   │
│  │  ───────────────────────────────                                    │   │
│  │                                                                     │   │
│  │  Step 1: Requirements ───────────────────────────────────────────   │   │
│  │  │ Model: Claude 3.5 (thinking mode)                                │   │
│  │  │ Tokens: 2,450 │ Cost: $0.024 │ Confidence: 0.92                 │   │
│  │  │ Output: Detailed requirements document                          │   │
│  │  └──────────────────────────────────────────────────────────────   │   │
│  │                                                                     │   │
│  │  Step 2: Service Identification ─────────────────────────────────   │   │
│  │  │ Model: GPT-4o + Claude (parallel, merge synthesis)              │   │
│  │  │ Tokens: 3,200 │ Cost: $0.041 │ Confidence: 0.89                 │   │
│  │  │ Output: 12 microservices identified with boundaries             │   │
│  │  └──────────────────────────────────────────────────────────────   │   │
│  │                                                                     │   │
│  │  [Steps 3-6 continue...]                                            │   │
│  └──────────────────────────────────┬──────────────────────────────────┘   │
│                                     │                                       │
│       ▼                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  STAGE 4: SYNTHESIS                                                 │   │
│  │  ─────────────────                                                  │   │
│  │  • Combine all step outputs                                         │   │
│  │  • Generate comprehensive solution document                         │   │
│  │  • Include architecture diagram (artifact)                          │   │
│  │  • Validate consistency across steps                                │   │
│  │  • Calculate final confidence: 0.88                                 │   │
│  └──────────────────────────────────┬──────────────────────────────────┘   │
│                                     │                                       │
│       ▼                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  FINAL OUTPUT                                                       │   │
│  │  ────────────                                                       │   │
│  │  • Complete microservices architecture document                     │   │
│  │  • Service interaction diagrams                                     │   │
│  │  • Database schema recommendations                                  │   │
│  │  • Infrastructure as code templates                                 │   │
│  │  • Scaling strategies and benchmarks                                │   │
│  │                                                                     │   │
│  │  Total: 12,400 tokens │ $0.18 │ 6 steps │ 45 seconds                │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<h3 id="step-recording">3.2 Step Recording</h3>
<p>Every reasoning step is recorded with comprehensive metadata:</p>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                          STEP RECORD STRUCTURE                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  interface ThinkTankStep {                                                  │
│    stepId: string;                    // Unique step identifier            │
│    sessionId: string;                 // Parent session                    │
│    stepOrder: number;                 // Execution order                   │
│    stepType: StepType;                // decompose | reason | execute | .. │
│    title: string;                     // Human-readable step name          │
│    description: string;               // What this step does               │
│                                                                             │
│    // Execution Details                                                     │
│    input: {                                                                 │
│      prompt: string;                  // Input to AI                       │
│      context: Record&lt;string, any&gt;;    // Previous step outputs             │
│      parameters: Record&lt;string, any&gt;; // Step-specific params              │
│    };                                                                       │
│                                                                             │
│    output: {                                                                │
│      response: string;                // AI response                       │
│      artifacts: Artifact[];           // Generated files/diagrams          │
│      structuredData?: any;            // Parsed structured output          │
│    };                                                                       │
│                                                                             │
│    // Model &amp; Cost                                                          │
│    modelUsed: string;                 // Which AI model                    │
│    modelMode: ModelMode;              // thinking | fast | creative | ..   │
│    tokensUsed: number;                // Total tokens                      │
│    costCents: number;                 // Cost in cents                     │
│    latencyMs: number;                 // Execution time                    │
│                                                                             │
│    // Quality                                                               │
│    confidence: number;                // 0-1 confidence score              │
│    reasoning: string;                 // Explanation of confidence         │
│                                                                             │
│    // Parallel Execution (if applicable)                                    │
│    wasParallel: boolean;                                                    │
│    parallelModels?: string[];         // Models used in parallel           │
│    synthesisStrategy?: string;        // How results were combined         │
│                                                                             │
│    // Timestamps                                                            │
│    startedAt: Date;                                                         │
│    completedAt: Date;                                                       │
│  }                                                                          │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="session-management">4. Session Management</h2>
<h3 id="session-lifecycle">4.1 Session Lifecycle</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                         SESSION LIFECYCLE                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│    ┌─────────┐                                                              │
│    │  NEW    │  User starts a new problem-solving session                  │
│    └────┬────┘                                                              │
│         │                                                                   │
│         ▼                                                                   │
│    ┌─────────┐                                                              │
│    │ ACTIVE  │  Session is being worked on                                 │
│    └────┬────┘  • Steps executing                                          │
│         │       • User can interact                                         │
│         │       • Real-time updates                                         │
│         │                                                                   │
│    ┌────┴────────────────────────────┐                                     │
│    │                                  │                                     │
│    ▼                                  ▼                                     │
│  ┌─────────┐                    ┌─────────┐                                │
│  │ PAUSED  │                    │COMPLETED│  All steps finished            │
│  └────┬────┘                    └────┬────┘  • Solution synthesized        │
│       │                              │       • Confidence calculated        │
│       │ User resumes                 │                                      │
│       │                              │                                      │
│       ▼                              ▼                                      │
│  ┌─────────┐                    ┌─────────┐                                │
│  │ ACTIVE  │                    │ARCHIVED │  Moved to long-term storage    │
│  └─────────┘                    └─────────┘                                │
│                                                                             │
│                                                                             │
│  Session States:                                                            │
│  ───────────────                                                            │
│  • NEW        - Just created, no work done                                 │
│  • ACTIVE     - Currently processing or awaiting input                     │
│  • PAUSED     - User paused, can resume                                    │
│  • COMPLETED  - All steps done, solution ready                             │
│  • ARCHIVED   - Moved to cold storage                                      │
│  • FAILED     - Unrecoverable error occurred                               │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<h3 id="session-data-model">4.2 Session Data Model</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                         SESSION DATA MODEL                                  │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         SESSION                                      │   │
│  │  sessionId: uuid                                                    │   │
│  │  tenantId: uuid                                                     │   │
│  │  userId: uuid                                                       │   │
│  │  title: string                                                      │   │
│  │  status: SessionStatus                                              │   │
│  │  domainMode: DomainMode                                             │   │
│  │  createdAt: timestamp                                               │   │
│  │  updatedAt: timestamp                                               │   │
│  └────────────────────────────────┬────────────────────────────────────┘   │
│                                   │                                         │
│                                   │ has many                                │
│                                   ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                       CONVERSATIONS                                  │   │
│  │  conversationId: uuid                                               │   │
│  │  sessionId: uuid (FK)                                               │   │
│  │  title: string                                                      │   │
│  │  createdAt: timestamp                                               │   │
│  └────────────────────────────────┬────────────────────────────────────┘   │
│                                   │                                         │
│                                   │ has many                                │
│                                   ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         MESSAGES                                     │   │
│  │  messageId: uuid                                                    │   │
│  │  conversationId: uuid (FK)                                          │   │
│  │  role: &#39;user&#39; | &#39;assistant&#39; | &#39;system&#39;                              │   │
│  │  content: text                                                      │   │
│  │  createdAt: timestamp                                               │   │
│  └────────────────────────────────┬────────────────────────────────────┘   │
│                                   │                                         │
│                                   │ has many                                │
│                                   ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                           STEPS                                      │   │
│  │  stepId: uuid                                                       │   │
│  │  sessionId: uuid (FK)                                               │   │
│  │  stepOrder: integer                                                 │   │
│  │  stepType: StepType                                                 │   │
│  │  input: jsonb                                                       │   │
│  │  output: jsonb                                                      │   │
│  │  modelUsed: string                                                  │   │
│  │  tokensUsed: integer                                                │   │
│  │  costCents: decimal                                                 │   │
│  │  confidence: decimal                                                │   │
│  │  startedAt: timestamp                                               │   │
│  │  completedAt: timestamp                                             │   │
│  └────────────────────────────────┬────────────────────────────────────┘   │
│                                   │                                         │
│                                   │ has many                                │
│                                   ▼                                         │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │                         ARTIFACTS                                    │   │
│  │  artifactId: uuid                                                   │   │
│  │  stepId: uuid (FK)                                                  │   │
│  │  type: &#39;code&#39; | &#39;diagram&#39; | &#39;document&#39; | &#39;data&#39;                     │   │
│  │  filename: string                                                   │   │
│  │  mimeType: string                                                   │   │
│  │  s3Key: string                                                      │   │
│  │  sizeBytes: integer                                                 │   │
│  │  createdAt: timestamp                                               │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="collaboration-features">5. Collaboration Features</h2>
<h3 id="real-time-collaboration">5.1 Real-Time Collaboration</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                      REAL-TIME COLLABORATION                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│                    ┌─────────────────────────────┐                          │
│                    │      Think Tank Session      │                          │
│                    │   &quot;Architecture Design #42&quot;  │                          │
│                    └──────────────┬──────────────┘                          │
│                                   │                                         │
│              ┌────────────────────┼────────────────────┐                    │
│              │                    │                    │                    │
│              ▼                    ▼                    ▼                    │
│      ┌─────────────┐      ┌─────────────┐      ┌─────────────┐             │
│      │   User A    │      │   User B    │      │   User C    │             │
│      │  (Owner)    │      │  (Editor)   │      │  (Viewer)   │             │
│      └──────┬──────┘      └──────┬──────┘      └──────┬──────┘             │
│             │                    │                    │                     │
│             │                    │                    │                     │
│      ┌──────▼────────────────────▼────────────────────▼──────┐             │
│      │                  WebSocket Connection                  │             │
│      │             (Real-time event streaming)               │             │
│      └───────────────────────────┬───────────────────────────┘             │
│                                  │                                          │
│                                  ▼                                          │
│      ┌───────────────────────────────────────────────────────┐             │
│      │                 Event Types                            │             │
│      │                                                        │             │
│      │  • step.started      - A new step is executing        │             │
│      │  • step.progress     - Step progress update           │             │
│      │  • step.completed    - Step finished with result      │             │
│      │  • message.added     - New message in conversation    │             │
│      │  • cursor.moved      - User cursor position           │             │
│      │  • user.joined       - New collaborator joined        │             │
│      │  • user.left         - Collaborator left              │             │
│      │  • artifact.created  - New artifact generated         │             │
│      │  • session.status    - Session state changed          │             │
│      └───────────────────────────────────────────────────────┘             │
│                                                                             │
│                                                                             │
│  COLLABORATION ROLES:                                                       │
│  ────────────────────                                                       │
│                                                                             │
│  ┌────────────┬────────────────────────────────────────────────────────┐   │
│  │   Role     │   Permissions                                          │   │
│  ├────────────┼────────────────────────────────────────────────────────┤   │
│  │   Owner    │   Full control, manage collaborators, delete session  │   │
│  │   Editor   │   Add messages, trigger steps, view all content       │   │
│  │   Viewer   │   Read-only access to session and results             │   │
│  │   Commenter│   View + add comments, no step triggering             │   │
│  └────────────┴────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="domain-modes">6. Domain Modes</h2>
<h3 id="specialized-reasoning-modes">6.1 Specialized Reasoning
Modes</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                         DOMAIN MODES                                        │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  Think Tank adapts its reasoning approach based on problem domain:          │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  🔬 RESEARCH MODE                                                   │   │
│  │  ──────────────                                                     │   │
│  │  Best for: Academic research, literature review, fact-finding       │   │
│  │  Models: Perplexity Sonar, Claude (deep_research mode)              │   │
│  │  Features:                                                          │   │
│  │  • Source citation                                                  │   │
│  │  • Cross-reference verification                                     │   │
│  │  • Comprehensive literature synthesis                               │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  💻 ENGINEERING MODE                                                │   │
│  │  ────────────────                                                   │   │
│  │  Best for: System design, architecture, technical problems          │   │
│  │  Models: Claude, GPT-4o, DeepSeek (code mode)                       │   │
│  │  Features:                                                          │   │
│  │  • Code generation as artifacts                                     │   │
│  │  • Architecture diagrams                                            │   │
│  │  • Technical trade-off analysis                                     │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  🧮 ANALYTICAL MODE                                                 │   │
│  │  ───────────────                                                    │   │
│  │  Best for: Data analysis, math, statistics, quantitative problems   │   │
│  │  Models: o1, Claude (thinking mode), DeepSeek R1                    │   │
│  │  Features:                                                          │   │
│  │  • Step-by-step mathematical reasoning                              │   │
│  │  • Statistical analysis                                             │   │
│  │  • Proof verification                                               │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  🎨 CREATIVE MODE                                                   │   │
│  │  ─────────────                                                      │   │
│  │  Best for: Writing, brainstorming, ideation, design                 │   │
│  │  Models: Claude, GPT-4o (creative mode, high temperature)           │   │
│  │  Features:                                                          │   │
│  │  • Multiple creative alternatives                                   │   │
│  │  • Iterative refinement                                             │   │
│  │  • Style adaptation                                                 │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  ⚖️ LEGAL MODE                                                      │   │
│  │  ──────────                                                         │   │
│  │  Best for: Contract analysis, compliance, legal research            │   │
│  │  Models: Claude (precise mode), GPT-4o                              │   │
│  │  Features:                                                          │   │
│  │  • Citation of legal precedents                                     │   │
│  │  • Risk assessment                                                  │   │
│  │  • Compliance checking                                              │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  🏥 MEDICAL MODE (HIPAA Compliant)                                  │   │
│  │  ─────────────────────────────                                      │   │
│  │  Best for: Clinical analysis, medical research (non-diagnostic)     │   │
│  │  Models: Claude (precise mode), approved medical models             │   │
│  │  Features:                                                          │   │
│  │  • PHI sanitization                                                 │   │
│  │  • Medical literature citation                                      │   │
│  │  • Disclaimer generation                                            │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  📊 BUSINESS MODE                                                   │   │
│  │  ─────────────                                                      │   │
│  │  Best for: Strategy, planning, market analysis, business problems   │   │
│  │  Models: GPT-4o, Claude, Gemini                                     │   │
│  │  Features:                                                          │   │
│  │  • Framework application (SWOT, Porter&#39;s, etc.)                     │   │
│  │  • Financial modeling                                               │   │
│  │  • Competitive analysis                                             │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  🎯 GENERAL MODE                                                    │   │
│  │  ────────────                                                       │   │
│  │  Best for: Mixed problems, general questions                        │   │
│  │  Models: Automatically selected based on sub-problem analysis       │   │
│  │  Features:                                                          │   │
│  │  • Dynamic mode switching per step                                  │   │
│  │  • Balanced approach                                                │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="quality-confidence">7. Quality &amp; Confidence</h2>
<h3 id="confidence-scoring-system">7.1 Confidence Scoring System</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                      CONFIDENCE SCORING SYSTEM                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  Every step and the final solution receives a confidence score (0-1):       │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  CONFIDENCE FACTORS                                                  │   │
│  │                                                                      │   │
│  │  ┌────────────────────┬──────────────────────────────────────────┐  │   │
│  │  │  Factor            │  Contribution                             │  │   │
│  │  ├────────────────────┼──────────────────────────────────────────┤  │   │
│  │  │  Model Agreement   │  +0.2 if parallel models agree            │  │   │
│  │  │  Reasoning Depth   │  +0.15 for thorough chain-of-thought     │  │   │
│  │  │  Source Quality    │  +0.15 for cited/verified sources        │  │   │
│  │  │  Task Complexity   │  -0.1 for very complex sub-problems      │  │   │
│  │  │  Model Confidence  │  +0.1 for high model self-confidence     │  │   │
│  │  │  Consistency       │  +0.1 for consistency with prior steps   │  │   │
│  │  │  Verification      │  +0.2 if verified by second model        │  │   │
│  │  └────────────────────┴──────────────────────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  CONFIDENCE LEVELS                                                   │   │
│  │                                                                      │   │
│  │   0.9 - 1.0  │████████████████████│  VERY HIGH  - Strong consensus  │   │
│  │   0.7 - 0.9  │████████████████    │  HIGH       - Reliable          │   │
│  │   0.5 - 0.7  │████████████        │  MODERATE   - Review recommended│   │
│  │   0.3 - 0.5  │████████            │  LOW        - Uncertain         │   │
│  │   0.0 - 0.3  │████                │  VERY LOW   - Needs verification│   │
│  │                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  FINAL SOLUTION CONFIDENCE                                          │   │
│  │                                                                      │   │
│  │  Formula:                                                            │   │
│  │  ─────────                                                           │   │
│  │  final_confidence = weighted_avg(step_confidences) × synthesis_factor│   │
│  │                                                                      │   │
│  │  Where:                                                              │   │
│  │  • step weights based on importance/complexity                      │   │
│  │  • synthesis_factor accounts for integration quality                │   │
│  │                                                                      │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="user-interface">8. User Interface</h2>
<h3 id="think-tank-ui-layout">8.1 Think Tank UI Layout</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                       THINK TANK USER INTERFACE                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  ┌──────────┐ Think Tank                      [New] [Share] [Export]│   │
│  │  │   Logo   │ Problem: &quot;Design microservices architecture...&quot;       │   │
│  │  └──────────┘ Mode: Engineering │ Confidence: 0.88 │ Cost: $0.18   │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────┬───────────────────────────────────────┬───────────────┐   │
│  │             │                                       │               │   │
│  │  SESSIONS   │          MAIN CONVERSATION            │    DETAILS    │   │
│  │             │                                       │               │   │
│  │  ▼ Today    │  ┌─────────────────────────────────┐  │  STEPS        │   │
│  │  │ Arch #42 │  │ 👤 You                          │  │  ────────     │   │
│  │  │ Data Q   │  │ Design a scalable microservices │  │  ✅ Step 1    │   │
│  │             │  │ architecture for an e-commerce  │  │     0.92      │   │
│  │  ▼ Yesterday│  │ platform that handles 10M...    │  │  ✅ Step 2    │   │
│  │  │ ML Model │  └─────────────────────────────────┘  │     0.89      │   │
│  │  │ Security │                                       │  ✅ Step 3    │   │
│  │             │  ┌─────────────────────────────────┐  │     0.91      │   │
│  │  ▼ Last Week│  │ 🤖 Think Tank                   │  │  ⏳ Step 4    │   │
│  │  │ API Des  │  │                                 │  │     Running   │   │
│  │  │ Budget   │  │ I&#39;ll approach this problem by:  │  │  ⬜ Step 5    │   │
│  │             │  │                                 │  │  ⬜ Step 6    │   │
│  │             │  │ 1. Analyzing requirements...    │  │               │   │
│  │             │  │ 2. Identifying services...      │  │  ────────────│   │
│  │  [+ New]    │  │ 3. Designing data flow...       │  │  ARTIFACTS    │   │
│  │             │  │                                 │  │  ────────     │   │
│  │             │  │ ┌─────────────────────────────┐ │  │  📄 arch.md  │   │
│  │             │  │ │ Step 4 Progress: 65%       │ │  │  📊 diagram  │   │
│  │             │  │ │ █████████░░░░░             │ │  │  💻 docker   │   │
│  │             │  │ │ Analyzing data patterns... │ │  │               │   │
│  │             │  │ └─────────────────────────────┘ │  │  ────────────│   │
│  │             │  │                                 │  │  MODELS USED  │   │
│  │             │  └─────────────────────────────────┘  │  ────────     │   │
│  │             │                                       │  Claude 3.5   │   │
│  │             │  ┌─────────────────────────────────┐  │  GPT-4o       │   │
│  │             │  │ 💬 Ask a follow-up question... │  │  o1           │   │
│  │             │  └─────────────────────────────────┘  │               │   │
│  │             │                                       │               │   │
│  └─────────────┴───────────────────────────────────────┴───────────────┘   │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<div data-align="center">
<p><strong>Think Tank Platform Architecture v3.2.0</strong></p>
<p><em>Advanced AI reasoning for complex problems</em></p>
<hr />
<p>© 2024 RADIANT. All Rights Reserved.</p>
</div>
<h1 id="agi-workflow-orchestration">AGI &amp; Workflow
Orchestration</h1>
<div data-align="center">
<p><strong>Intelligent Multi-Model AI Orchestration</strong></p>
<p>Version 4.18.0 | December 2024</p>
</div>
<hr />
<h2 id="overview">1. Overview</h2>
<p>RADIANT’s AGI Orchestration Layer coordinates multiple AI models
using 49 proven patterns to achieve <strong>50-300% quality
improvement</strong> over single-model approaches through intelligent
model selection, parallel execution, and result synthesis.</p>
<h3 id="why-50-300-improvement">Why 50-300% Improvement?</h3>
<p>RADIANT achieves dramatic quality improvements through four
synergistic capabilities:</p>
<pre><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                    QUALITY IMPROVEMENT ARCHITECTURE                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  1. FULL MULTI-AI ORCHESTRATION                    (+50-100%)       │   │
│  │     • Multiple models work together on same problem                 │   │
│  │     • Different models catch different errors                       │   │
│  │     • Consensus mechanisms eliminate hallucinations                 │   │
│  │     • Parallel execution = best of all models                       │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  2. SIMULATED AGI ORCHESTRATION                    (+75-150%)       │   │
│  │     • Intelligent task analysis and decomposition                   │   │
│  │     • Dynamic model + mode selection per sub-task                   │   │
│  │     • Self-reflection and metacognition                             │   │
│  │     • Automatic pattern selection based on problem type             │   │
│  │     • Confidence scoring and quality gates                          │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  3. SPECIALTY SELF-HOSTED MODELS (56 models)       (+50-100%)       │   │
│  │     • Domain-specific fine-tuned models                             │   │
│  │     • Code-specialized models (DeepSeek, CodeLlama)                 │   │
│  │     • Math-specialized models                                       │   │
│  │     • Legal/Medical/Financial domain models                         │   │
│  │     • No rate limits, full control                                  │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │  4. 49 RESEARCH-BACKED PATTERNS                    (+25-75%)        │   │
│  │     • AI Debate: adversarial improvement                            │   │
│  │     • Self-Refine: iterative enhancement                            │   │
│  │     • Chain-of-Verification: fact-checking pipeline                 │   │
│  │     • Tree of Thoughts: exploration of solution space               │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│  COMBINED EFFECT: 50-300% QUALITY IMPROVEMENT                              │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘</code></pre>
<h3 id="key-capabilities-1">Key Capabilities</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>Improvement</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>49 Patterns</strong></td>
<td>Proven orchestration workflows from AI research</td>
<td>+25-75%</td>
</tr>
<tr>
<td><strong>106+ Models</strong></td>
<td>50 external + 56 self-hosted specialty models</td>
<td>+50-100%</td>
</tr>
<tr>
<td><strong>Simulated AGI</strong></td>
<td>Intelligent orchestration with metacognition</td>
<td>+75-150%</td>
</tr>
<tr>
<td><strong>9 Modes</strong></td>
<td>Thinking, Research, Fast, Creative, Precise, Code, Vision,
Long-context, Standard</td>
<td>+25-50%</td>
</tr>
<tr>
<td><strong>Parallel Execution</strong></td>
<td>Multiple models simultaneously with synthesis</td>
<td>+50-100%</td>
</tr>
</tbody>
</table>
<h3 id="improvement-by-use-case">Improvement by Use Case</h3>
<table>
<thead>
<tr>
<th>Use Case</th>
<th>Single Model</th>
<th>RADIANT Orchestrated</th>
<th>Improvement</th>
</tr>
</thead>
<tbody>
<tr>
<td>Complex coding</td>
<td>60% accuracy</td>
<td>95% accuracy</td>
<td><strong>+58%</strong></td>
</tr>
<tr>
<td>Legal analysis</td>
<td>70% accuracy</td>
<td>96% accuracy</td>
<td><strong>+37%</strong></td>
</tr>
<tr>
<td>Research synthesis</td>
<td>65% completeness</td>
<td>98% completeness</td>
<td><strong>+51%</strong></td>
</tr>
<tr>
<td>Creative writing</td>
<td>Good quality</td>
<td>Publication-ready</td>
<td><strong>+100-200%</strong></td>
</tr>
<tr>
<td>Multi-step reasoning</td>
<td>55% correct</td>
<td>94% correct</td>
<td><strong>+71%</strong></td>
</tr>
<tr>
<td>Fact verification</td>
<td>75% accurate</td>
<td>99% accurate</td>
<td><strong>+32%</strong></td>
</tr>
<tr>
<td>Code review</td>
<td>Catches 60% bugs</td>
<td>Catches 95% bugs</td>
<td><strong>+58%</strong></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="the-49-orchestration-patterns">2. The 49 Orchestration
Patterns</h2>
<h3 id="pattern-categories">Pattern Categories</h3>
<pre><code>CATEGORY 1: CONSENSUS &amp; AGGREGATION (Patterns 1-7)
├── Self-Consistency (SC)
├── Universal Self-Consistency  
├── Multi-Agent Debate Voting
├── Diverse Verifier (DiVeRSe)
├── Meta-Reasoning
├── Ensemble Refinement
└── Sample-and-Marginalize

CATEGORY 2: DEBATE &amp; DELIBERATION (Patterns 8-14)
├── AI Debate (SOD)
├── Multi-Agent Debate
├── Consultancy Model
├── Society of Mind
├── Cross-Examination
├── Red-Team/Blue-Team
└── Adversarial Collaboration

CATEGORY 3: CRITIQUE &amp; REFINEMENT (Patterns 15-21)
├── Self-Refine
├── Reflexion
├── Constitutional AI
├── CRITIC
├── Recursive Criticism
├── Iterative Refinement
└── Self-Taught Reasoner

CATEGORY 4: VERIFICATION &amp; VALIDATION (Patterns 22-28)
├── Chain-of-Verification
├── Fact-Checking Pipeline
├── Step-by-Step Verification
├── Process Reward Model
├── Outcome Reward Model
├── Dual-Process Verification
└── LLM-as-Judge

CATEGORY 5: DECOMPOSITION (Patterns 29-35)
├── Least-to-Most
├── Decomposed Prompting
├── Tree of Thoughts
├── Skeleton-of-Thought
├── Plan-and-Solve
├── Graph of Thoughts
└── Recursive Decomposition

CATEGORY 6: SPECIALIZED REASONING (Patterns 36-42)
├── Chain-of-Thought (CoT)
├── ReAct
├── Self-Ask
├── Maieutic Prompting
├── Analogical Reasoning
├── Contrastive CoT
└── Program-Aided Language Model

CATEGORY 7: MULTI-MODEL ROUTING (Patterns 43-46)
├── Mixture of Experts
├── Speculative Decoding
├── FrugalGPT
└── Model Cascading

CATEGORY 8: ENSEMBLE METHODS (Patterns 47-49)
├── Model Ensemble
├── Boosted Prompting
└── Blended RAG</code></pre>
<hr />
<h2 id="agi-dynamic-model-selection">3. AGI Dynamic Model Selection</h2>
<h3 id="how-it-works">How It Works</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────┐
│                   AGI MODEL SELECTION FLOW                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  PROMPT: &quot;Write recursive TSP algorithm with dynamic programming&quot;
│                           │                                     │
│                           ▼                                     │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  1. DOMAIN DETECTION                                    │   │
│  │     Keywords: &quot;algorithm&quot;, &quot;recursive&quot;, &quot;programming&quot;   │   │
│  │     Detected: CODING (0.85)                            │   │
│  └─────────────────────────────────────────────────────────┘   │
│                           │                                     │
│                           ▼                                     │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  2. TASK ANALYSIS                                       │   │
│  │     • Complexity: HIGH                                  │   │
│  │     • Requires Reasoning: YES                          │   │
│  │     • Requires Precision: YES                          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                           │                                     │
│                           ▼                                     │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  3. QUERY LIVE MODEL METADATA                           │   │
│  │     modelMetadataService.getAllMetadata()               │   │
│  │     Returns: 106 models with capabilities, pricing      │   │
│  └─────────────────────────────────────────────────────────┘   │
│                           │                                     │
│                           ▼                                     │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  4. SCORE &amp; SELECT WITH MODES                           │   │
│  │                                                         │   │
│  │  ┌────────────────────┬───────┬─────────────────────┐  │   │
│  │  │ Model              │ Score │ Mode                │  │   │
│  │  ├────────────────────┼───────┼─────────────────────┤  │   │
│  │  │ Claude 3.5 Sonnet  │ 0.94  │ 🧠 thinking         │  │   │
│  │  │ OpenAI o1          │ 0.92  │ 🧠 thinking         │  │   │
│  │  │ DeepSeek R1        │ 0.88  │ 💻 code             │  │   │
│  │  └────────────────────┴───────┴─────────────────────┘  │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘</code></pre>
<h3 id="domain-detection-keywords">Domain Detection Keywords</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 32%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Domain</th>
<th>Keywords</th>
<th>Best Models</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>coding</strong></td>
<td>code, function, algorithm, debug</td>
<td>Claude, o1, DeepSeek</td>
</tr>
<tr>
<td><strong>math</strong></td>
<td>calculate, equation, proof, theorem</td>
<td>o1, Claude, DeepSeek R1</td>
</tr>
<tr>
<td><strong>reasoning</strong></td>
<td>think, logic, step by step, why</td>
<td>o1, Claude, DeepSeek R1</td>
</tr>
<tr>
<td><strong>research</strong></td>
<td>comprehensive, investigate, explore</td>
<td>Perplexity, Gemini Deep</td>
</tr>
<tr>
<td><strong>creative</strong></td>
<td>write, story, imagine, design</td>
<td>Claude, GPT-4o</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="model-execution-modes">4. Model Execution Modes</h2>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 44%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th>Mode</th>
<th>Icon</th>
<th>Auto-Selected When</th>
<th>Parameters</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>thinking</strong></td>
<td>🧠</td>
<td>requiresReasoning + o1/claude/r1</td>
<td>thinkingBudget: 10000</td>
</tr>
<tr>
<td><strong>deep_research</strong></td>
<td>🔬</td>
<td>requiresResearch + perplexity</td>
<td>searchDepth: comprehensive</td>
</tr>
<tr>
<td><strong>fast</strong></td>
<td>⚡</td>
<td>flash/turbo/mini models</td>
<td>maxTokens: 2048</td>
</tr>
<tr>
<td><strong>creative</strong></td>
<td>🎨</td>
<td>requiresCreativity</td>
<td>temperature: 0.9</td>
</tr>
<tr>
<td><strong>precise</strong></td>
<td>🎯</td>
<td>requiresPrecision</td>
<td>temperature: 0.1</td>
</tr>
<tr>
<td><strong>code</strong></td>
<td>💻</td>
<td>coding domain</td>
<td>temperature: 0.2</td>
</tr>
<tr>
<td><strong>vision</strong></td>
<td>👁️</td>
<td>vision-capable models</td>
<td>enableVision: true</td>
</tr>
<tr>
<td><strong>long_context</strong></td>
<td>📄</td>
<td>large context windows</td>
<td>maxTokens: 16384</td>
</tr>
<tr>
<td><strong>standard</strong></td>
<td>─</td>
<td>default fallback</td>
<td>default params</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="parallel-execution">5. Parallel Execution</h2>
<h3 id="execution-modes">Execution Modes</h3>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Behavior</th>
<th>Latency</th>
<th>Best For</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>all</strong></td>
<td>Wait for all models</td>
<td>Slowest model</td>
<td>Maximum quality</td>
</tr>
<tr>
<td><strong>race</strong></td>
<td>First success wins</td>
<td>Fastest model</td>
<td>Low latency</td>
</tr>
<tr>
<td><strong>quorum</strong></td>
<td>Wait for X%</td>
<td>Second fastest</td>
<td>Balance</td>
</tr>
</tbody>
</table>
<h3 id="synthesis-strategies">Synthesis Strategies</h3>
<table>
<thead>
<tr>
<th>Strategy</th>
<th>How It Works</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>best_of</strong></td>
<td>Select highest confidence response</td>
</tr>
<tr>
<td><strong>vote</strong></td>
<td>Choose most common answer (majority)</td>
</tr>
<tr>
<td><strong>weighted</strong></td>
<td>Score by confidence × (1/latency)</td>
</tr>
<tr>
<td><strong>merge</strong></td>
<td>AI combines all responses into one</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="visual-workflow-editor">6. Visual Workflow Editor</h2>
<h3 id="editor-features">Editor Features</h3>
<ul>
<li><strong>Method Palette</strong> - Drag-and-drop 16 method types</li>
<li><strong>Canvas</strong> - Visual workflow with nodes and
connections</li>
<li><strong>Step Configuration</strong> - 4 tabs: General, Params,
Parallel, Advanced</li>
<li><strong>Zoom/Pan</strong> - Canvas navigation controls</li>
<li><strong>Test &amp; Save</strong> - Execute and persist
workflows</li>
</ul>
<h3 id="step-configuration">Step Configuration</h3>
<pre><code>┌─────────────────────────────────────────────────────────────────┐
│  [General] [Params] [Parallel] [Advanced]                      │
├─────────────────────────────────────────────────────────────────┤
│  PARALLEL TAB                                                   │
│                                                                 │
│  🔵 Enable Parallel Execution              [ON]                │
│  🧠 AGI Model Selection                    [ON]                │
│                                                                 │
│  Min Models: [2]    Max Models: [5]                            │
│  Domain Hints: [coding, reasoning]                             │
│                                                                 │
│  Preferred Modes:                                               │
│  [✓] thinking  [✓] deep_research  [ ] fast                    │
│  [ ] creative  [✓] precise        [✓] code                    │
│                                                                 │
│  Execution Mode: [All (wait for all)]                          │
│  Synthesis: [Weighted (confidence + speed)]                    │
│  Timeout: [30000] ms                                           │
└─────────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h2 id="api-usage">7. API Usage</h2>
<h3 id="execute-workflow">Execute Workflow</h3>
<div class="sourceCode" id="cb31"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> orchestrationService<span class="op">.</span><span class="fu">executeWorkflow</span>({</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  tenantId<span class="op">:</span> <span class="st">&#39;tenant-123&#39;</span><span class="op">,</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  workflowCode<span class="op">:</span> <span class="st">&#39;SOD&#39;</span><span class="op">,</span>  <span class="co">// AI Debate pattern</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  prompt<span class="op">:</span> <span class="st">&#39;Should we prioritize AI safety over capabilities?&#39;</span><span class="op">,</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  configOverrides<span class="op">:</span> {</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    parallelExecution<span class="op">:</span> {</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>      enabled<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>      agiModelSelection<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>      minModels<span class="op">:</span> <span class="dv">3</span><span class="op">,</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>      preferredModes<span class="op">:</span> [<span class="st">&#39;thinking&#39;</span>]<span class="op">,</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>      synthesisStrategy<span class="op">:</span> <span class="st">&#39;weighted&#39;</span><span class="op">,</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="co">// Result includes:</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a><span class="co">// - response: Final synthesized answer</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a><span class="co">// - confidence: 0-1 quality score</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="co">// - steps: Array of step results</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a><span class="co">// - modelsUsed: Models that participated</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a><span class="co">// - totalCost: Cost in cents</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a><span class="co">// - totalLatency: Time in ms</span></span></code></pre></div>
<hr />
<h2 id="benefits">8. Benefits</h2>
<table>
<thead>
<tr>
<th>Benefit</th>
<th>Single Model</th>
<th>Orchestrated AI</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Accuracy</strong></td>
<td>~75%</td>
<td>~92%</td>
</tr>
<tr>
<td><strong>Bias</strong></td>
<td>Single perspective</td>
<td>Multi-perspective</td>
</tr>
<tr>
<td><strong>Verification</strong></td>
<td>None</td>
<td>Built-in</td>
</tr>
<tr>
<td><strong>Confidence</strong></td>
<td>Unknown</td>
<td>Measured</td>
</tr>
<tr>
<td><strong>Reliability</strong></td>
<td>One point of failure</td>
<td>Redundant</td>
</tr>
</tbody>
</table>
<hr />
<div data-align="center">
<p><strong>RADIANT AGI Orchestration v4.18.0</strong></p>
<p><em>Intelligent multi-model AI coordination</em></p>
</div>
<h1 id="simultaneous-prompt-execution">Simultaneous Prompt
Execution</h1>
<h2 id="overview-1">Overview</h2>
<p>Both RADIANT and Think Tank support <strong>simultaneous prompt
execution</strong> - the ability to run multiple AI prompts in parallel
across different models. This capability enables dramatic quality
improvements through consensus mechanisms and significant throughput
gains for high-volume applications.</p>
<hr />
<h2 id="radiant-parallel-execution">RADIANT Parallel Execution</h2>
<h3 id="configuration">Configuration</h3>
<div class="sourceCode" id="cb32"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> ParallelExecutionConfig {</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  enabled<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  mode<span class="op">:</span> <span class="st">&#39;all&#39;</span> <span class="op">|</span> <span class="st">&#39;race&#39;</span> <span class="op">|</span> <span class="st">&#39;quorum&#39;</span><span class="op">;</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  models<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  minModels<span class="op">?:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  maxModels<span class="op">?:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  agiModelSelection<span class="op">?:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  domainHints<span class="op">?:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  timeoutMs<span class="op">?:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  failureStrategy<span class="op">:</span> <span class="st">&#39;fail_fast&#39;</span> <span class="op">|</span> <span class="st">&#39;best_effort&#39;</span><span class="op">;</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="execution-modes-1">Execution Modes</h3>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Description</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>all</strong></td>
<td>Wait for all models to complete</td>
<td>Consensus, synthesis</td>
</tr>
<tr>
<td><strong>race</strong></td>
<td>Return first successful response</td>
<td>Speed-critical</td>
</tr>
<tr>
<td><strong>quorum</strong></td>
<td>Return when majority agree</td>
<td>Balanced quality/speed</td>
</tr>
</tbody>
</table>
<h3 id="implementation">Implementation</h3>
<div class="sourceCode" id="cb33"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> ParallelExecutionService {</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">executeParallel</span>(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    prompt<span class="op">:</span> <span class="dt">string</span><span class="op">,</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    config<span class="op">:</span> ParallelExecutionConfig</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  )<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>ParallelResult<span class="op">&gt;</span> {</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> models <span class="op">=</span> config<span class="op">.</span><span class="at">agiModelSelection</span> </span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>      <span class="op">?</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">agiSelectModels</span>(prompt<span class="op">,</span> config)</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span> config<span class="op">.</span><span class="at">models</span><span class="op">;</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Launch all models simultaneously</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> promises <span class="op">=</span> models<span class="op">.</span><span class="fu">map</span>(model <span class="kw">=&gt;</span> </span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">executeWithTimeout</span>(prompt<span class="op">,</span> model<span class="op">,</span> config<span class="op">.</span><span class="at">timeoutMs</span>)</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> (config<span class="op">.</span><span class="at">mode</span>) {</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;all&#39;</span><span class="op">:</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">waitForAll</span>(promises)<span class="op">;</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;race&#39;</span><span class="op">:</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">waitForFirst</span>(promises)<span class="op">;</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;quorum&#39;</span><span class="op">:</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">waitForQuorum</span>(promises<span class="op">,</span> config<span class="op">.</span><span class="at">minModels</span>)<span class="op">;</span></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">async</span> <span class="fu">waitForAll</span>(</span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>    promises<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>ModelResponse<span class="op">&gt;</span>[]</span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>  )<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>ParallelResult<span class="op">&gt;</span> {</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> results <span class="op">=</span> <span class="cf">await</span> <span class="bu">Promise</span><span class="op">.</span><span class="fu">allSettled</span>(promises)<span class="op">;</span></span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> successful <span class="op">=</span> results</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">filter</span>((r)<span class="op">:</span> r <span class="kw">is</span> PromiseFulfilledResult<span class="op">&lt;</span>ModelResponse<span class="op">&gt;</span> <span class="kw">=&gt;</span> </span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>        r<span class="op">.</span><span class="at">status</span> <span class="op">===</span> <span class="st">&#39;fulfilled&#39;</span>)</span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">map</span>(r <span class="kw">=&gt;</span> r<span class="op">.</span><span class="at">value</span>)<span class="op">;</span></span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Synthesize consensus from all responses</span></span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> synthesis <span class="op">=</span> <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">synthesizeResponses</span>(successful)<span class="op">;</span></span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a>      responses<span class="op">:</span> successful<span class="op">,</span></span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a>      synthesis<span class="op">,</span></span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a>      consensusScore<span class="op">:</span> <span class="kw">this</span><span class="op">.</span><span class="fu">calculateConsensus</span>(successful)<span class="op">,</span></span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a>      totalLatencyMs<span class="op">:</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="op">...</span>successful<span class="op">.</span><span class="fu">map</span>(r <span class="kw">=&gt;</span> r<span class="op">.</span><span class="at">latencyMs</span>))</span>
<span id="cb33-42"><a href="#cb33-42" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb33-43"><a href="#cb33-43" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb33-44"><a href="#cb33-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb33-45"><a href="#cb33-45" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> <span class="kw">async</span> <span class="fu">waitForQuorum</span>(</span>
<span id="cb33-46"><a href="#cb33-46" aria-hidden="true" tabindex="-1"></a>    promises<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>ModelResponse<span class="op">&gt;</span>[]<span class="op">,</span></span>
<span id="cb33-47"><a href="#cb33-47" aria-hidden="true" tabindex="-1"></a>    minModels<span class="op">:</span> <span class="dt">number</span> <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">ceil</span>(promises<span class="op">.</span><span class="at">length</span> <span class="op">/</span> <span class="dv">2</span>)</span>
<span id="cb33-48"><a href="#cb33-48" aria-hidden="true" tabindex="-1"></a>  )<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>ParallelResult<span class="op">&gt;</span> {</span>
<span id="cb33-49"><a href="#cb33-49" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> results<span class="op">:</span> ModelResponse[] <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb33-50"><a href="#cb33-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-51"><a href="#cb33-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Promise</span>((resolve) <span class="kw">=&gt;</span> {</span>
<span id="cb33-52"><a href="#cb33-52" aria-hidden="true" tabindex="-1"></a>      promises<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">async</span> (promise) <span class="kw">=&gt;</span> {</span>
<span id="cb33-53"><a href="#cb33-53" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span> {</span>
<span id="cb33-54"><a href="#cb33-54" aria-hidden="true" tabindex="-1"></a>          <span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> promise<span class="op">;</span></span>
<span id="cb33-55"><a href="#cb33-55" aria-hidden="true" tabindex="-1"></a>          results<span class="op">.</span><span class="fu">push</span>(result)<span class="op">;</span></span>
<span id="cb33-56"><a href="#cb33-56" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb33-57"><a href="#cb33-57" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> (results<span class="op">.</span><span class="at">length</span> <span class="op">&gt;=</span> minModels) {</span>
<span id="cb33-58"><a href="#cb33-58" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Check if results agree</span></span>
<span id="cb33-59"><a href="#cb33-59" aria-hidden="true" tabindex="-1"></a>            <span class="kw">const</span> consensus <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">checkConsensus</span>(results)<span class="op">;</span></span>
<span id="cb33-60"><a href="#cb33-60" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> (consensus<span class="op">.</span><span class="at">agreement</span> <span class="op">&gt;=</span> <span class="fl">0.7</span>) {</span>
<span id="cb33-61"><a href="#cb33-61" aria-hidden="true" tabindex="-1"></a>              <span class="fu">resolve</span>({</span>
<span id="cb33-62"><a href="#cb33-62" aria-hidden="true" tabindex="-1"></a>                responses<span class="op">:</span> results<span class="op">,</span></span>
<span id="cb33-63"><a href="#cb33-63" aria-hidden="true" tabindex="-1"></a>                synthesis<span class="op">:</span> consensus<span class="op">.</span><span class="at">synthesized</span><span class="op">,</span></span>
<span id="cb33-64"><a href="#cb33-64" aria-hidden="true" tabindex="-1"></a>                consensusScore<span class="op">:</span> consensus<span class="op">.</span><span class="at">agreement</span><span class="op">,</span></span>
<span id="cb33-65"><a href="#cb33-65" aria-hidden="true" tabindex="-1"></a>                earlyTermination<span class="op">:</span> <span class="kw">true</span></span>
<span id="cb33-66"><a href="#cb33-66" aria-hidden="true" tabindex="-1"></a>              })<span class="op">;</span></span>
<span id="cb33-67"><a href="#cb33-67" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb33-68"><a href="#cb33-68" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb33-69"><a href="#cb33-69" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">catch</span> (error) {</span>
<span id="cb33-70"><a href="#cb33-70" aria-hidden="true" tabindex="-1"></a>          <span class="co">// Continue waiting for other models</span></span>
<span id="cb33-71"><a href="#cb33-71" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb33-72"><a href="#cb33-72" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb33-73"><a href="#cb33-73" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb33-74"><a href="#cb33-74" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb33-75"><a href="#cb33-75" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="use-cases-1">Use Cases</h3>
<h4 id="consensus-verification">1. Consensus Verification</h4>
<div class="sourceCode" id="cb34"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Run same prompt on 3 models, synthesize agreement</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> parallelExecution<span class="op">.</span><span class="fu">executeParallel</span>(</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;What is the capital of France?&quot;</span><span class="op">,</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    enabled<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    mode<span class="op">:</span> <span class="st">&#39;all&#39;</span><span class="op">,</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    models<span class="op">:</span> [<span class="st">&#39;claude-3-5-sonnet&#39;</span><span class="op">,</span> <span class="st">&#39;gpt-4o&#39;</span><span class="op">,</span> <span class="st">&#39;gemini-1.5-pro&#39;</span>]<span class="op">,</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    agiModelSelection<span class="op">:</span> <span class="kw">false</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="co">// consensusScore: 1.0 - all models agree &quot;Paris&quot;</span></span></code></pre></div>
<h4 id="code-review-with-multiple-perspectives">2. Code Review with
Multiple Perspectives</h4>
<div class="sourceCode" id="cb35"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Different models find different issues</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> parallelExecution<span class="op">.</span><span class="fu">executeParallel</span>(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  codeToReview<span class="op">,</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    enabled<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    mode<span class="op">:</span> <span class="st">&#39;all&#39;</span><span class="op">,</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    models<span class="op">:</span> [<span class="st">&#39;claude-3-5-sonnet&#39;</span><span class="op">,</span> <span class="st">&#39;deepseek-coder-v2&#39;</span><span class="op">,</span> <span class="st">&#39;gpt-4o&#39;</span>]<span class="op">,</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    domainHints<span class="op">:</span> [<span class="st">&#39;code&#39;</span><span class="op">,</span> <span class="st">&#39;security&#39;</span><span class="op">,</span> <span class="st">&#39;performance&#39;</span>]</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Synthesis combines all found issues</span></span></code></pre></div>
<h4 id="creative-writing-enhancement">3. Creative Writing
Enhancement</h4>
<div class="sourceCode" id="cb36"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Generate multiple creative variations</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> parallelExecution<span class="op">.</span><span class="fu">executeParallel</span>(</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Write a tagline for an AI company&quot;</span><span class="op">,</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    enabled<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    mode<span class="op">:</span> <span class="st">&#39;all&#39;</span><span class="op">,</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    models<span class="op">:</span> [<span class="st">&#39;claude-3-5-sonnet&#39;</span><span class="op">,</span> <span class="st">&#39;gpt-4o&#39;</span>]<span class="op">,</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">// High temperature for diversity</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Get best elements from each response</span></span></code></pre></div>
<hr />
<h2 id="think-tank-concurrent-sessions">Think Tank Concurrent
Sessions</h2>
<h3 id="session-level-parallelism">Session-Level Parallelism</h3>
<p>Think Tank supports concurrent execution at multiple levels:</p>
<ol type="1">
<li><strong>Parallel Steps</strong> - Independent reasoning steps run
simultaneously</li>
<li><strong>Multi-Model Steps</strong> - Same step runs on multiple
models</li>
<li><strong>Parallel Sessions</strong> - Multiple sessions execute
concurrently</li>
</ol>
<h3 id="implementation-1">Implementation</h3>
<div class="sourceCode" id="cb37"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> ConcurrentSessionService {</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Execute independent steps in parallel</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">executeParallelSteps</span>(</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    sessionId<span class="op">:</span> <span class="dt">string</span><span class="op">,</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    steps<span class="op">:</span> ThinkTankStep[]</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  )<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>StepResult[]<span class="op">&gt;</span> {</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Identify which steps can run in parallel</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> { independent<span class="op">,</span> dependent } <span class="op">=</span> <span class="kw">this</span><span class="op">.</span><span class="fu">analyzeDependen</span>(steps)<span class="op">;</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Run independent steps simultaneously</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> independentResults <span class="op">=</span> <span class="cf">await</span> <span class="bu">Promise</span><span class="op">.</span><span class="fu">all</span>(</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>      independent<span class="op">.</span><span class="fu">map</span>(step <span class="kw">=&gt;</span> <span class="kw">this</span><span class="op">.</span><span class="fu">executeStep</span>(sessionId<span class="op">,</span> step))</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Run dependent steps sequentially</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> dependentResults <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">const</span> step <span class="kw">of</span> dependent) {</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>      dependentResults<span class="op">.</span><span class="fu">push</span>(<span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="fu">executeStep</span>(sessionId<span class="op">,</span> step))<span class="op">;</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="op">...</span>independentResults<span class="op">,</span> <span class="op">...</span>dependentResults]<span class="op">;</span></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Run same step on multiple models for consensus</span></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">executeWithMultipleModels</span>(</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>    sessionId<span class="op">:</span> <span class="dt">string</span><span class="op">,</span></span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a>    step<span class="op">:</span> ThinkTankStep<span class="op">,</span></span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>    models<span class="op">:</span> <span class="dt">string</span>[]</span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>  )<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>ConsensusResult<span class="op">&gt;</span> {</span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Execute simultaneously on all models</span></span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> responses <span class="op">=</span> <span class="cf">await</span> <span class="bu">Promise</span><span class="op">.</span><span class="fu">all</span>(</span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>      models<span class="op">.</span><span class="fu">map</span>(model <span class="kw">=&gt;</span> </span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">executeStepWithModel</span>(sessionId<span class="op">,</span> step<span class="op">,</span> model)</span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Synthesize consensus</span></span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">synthesizeConsensus</span>(responses)<span class="op">;</span></span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb37-41"><a href="#cb37-41" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Parallel problem decomposition</span></span>
<span id="cb37-42"><a href="#cb37-42" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">parallelDecompose</span>(</span>
<span id="cb37-43"><a href="#cb37-43" aria-hidden="true" tabindex="-1"></a>    sessionId<span class="op">:</span> <span class="dt">string</span><span class="op">,</span></span>
<span id="cb37-44"><a href="#cb37-44" aria-hidden="true" tabindex="-1"></a>    problem<span class="op">:</span> <span class="dt">string</span></span>
<span id="cb37-45"><a href="#cb37-45" aria-hidden="true" tabindex="-1"></a>  )<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>DecompositionResult<span class="op">&gt;</span> {</span>
<span id="cb37-46"><a href="#cb37-46" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Multiple models decompose the problem differently</span></span>
<span id="cb37-47"><a href="#cb37-47" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> decompositions <span class="op">=</span> <span class="cf">await</span> <span class="bu">Promise</span><span class="op">.</span><span class="fu">all</span>([</span>
<span id="cb37-48"><a href="#cb37-48" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">decomposeWith</span>(problem<span class="op">,</span> <span class="st">&#39;claude-3-5-sonnet&#39;</span>)<span class="op">,</span></span>
<span id="cb37-49"><a href="#cb37-49" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">decomposeWith</span>(problem<span class="op">,</span> <span class="st">&#39;gpt-4o&#39;</span>)<span class="op">,</span></span>
<span id="cb37-50"><a href="#cb37-50" aria-hidden="true" tabindex="-1"></a>      <span class="kw">this</span><span class="op">.</span><span class="fu">decomposeWith</span>(problem<span class="op">,</span> <span class="st">&#39;gemini-1.5-pro&#39;</span>)</span>
<span id="cb37-51"><a href="#cb37-51" aria-hidden="true" tabindex="-1"></a>    ])<span class="op">;</span></span>
<span id="cb37-52"><a href="#cb37-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-53"><a href="#cb37-53" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Merge decompositions for comprehensive coverage</span></span>
<span id="cb37-54"><a href="#cb37-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">mergeDecompositions</span>(decompositions)<span class="op">;</span></span>
<span id="cb37-55"><a href="#cb37-55" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb37-56"><a href="#cb37-56" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="session-configuration">Session Configuration</h3>
<div class="sourceCode" id="cb38"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> ThinkTankSessionConfig {</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  sessionId<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  parallelExecution<span class="op">:</span> {</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    enabled<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    maxConcurrentSteps<span class="op">:</span> <span class="dt">number</span><span class="op">;</span>      <span class="co">// Default: 5</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    maxConcurrentModels<span class="op">:</span> <span class="dt">number</span><span class="op">;</span>     <span class="co">// Default: 3</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    consensusThreshold<span class="op">:</span> <span class="dt">number</span><span class="op">;</span>      <span class="co">// 0-1, default: 0.7</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    timeoutPerStepMs<span class="op">:</span> <span class="dt">number</span><span class="op">;</span>        <span class="co">// Default: 30000</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  modelSelection<span class="op">:</span> {</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    automatic<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span>              <span class="co">// AGI selects models</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>    preferredModels<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    domainHint<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="database-schema-support">Database Schema Support</h3>
<div class="sourceCode" id="cb39"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Session configuration for parallel execution</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> thinktank_sessions <span class="kw">ADD</span> <span class="kw">COLUMN</span> parallel_execution_config JSONB <span class="kw">DEFAULT</span> <span class="st">&#39;{</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="st">  &quot;enabled&quot;: true,</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="st">  &quot;maxConcurrentSteps&quot;: 5,</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="st">  &quot;maxConcurrentModels&quot;: 3,</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="st">  &quot;consensusThreshold&quot;: 0.7</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="st">}&#39;</span>;</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="co">-- Track parallel step executions</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> thinktank_parallel_executions (</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> UUID <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">DEFAULT</span> uuid_generate_v4(),</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>    session_id UUID <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">REFERENCES</span> thinktank_sessions(<span class="kw">id</span>),</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>    step_id UUID <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">REFERENCES</span> thinktank_steps(<span class="kw">id</span>),</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>    model_id <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>    started_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>    completed_at TIMESTAMPTZ,</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>    response TEXT,</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>    tokens_used <span class="dt">INTEGER</span>,</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>    latency_ms <span class="dt">INTEGER</span>,</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>    included_in_consensus <span class="dt">BOOLEAN</span> <span class="kw">DEFAULT</span> <span class="kw">true</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<hr />
<h2 id="performance-benefits">Performance Benefits</h2>
<h3 id="throughput-improvement">Throughput Improvement</h3>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Sequential</th>
<th>Parallel</th>
<th>Improvement</th>
</tr>
</thead>
<tbody>
<tr>
<td>3 models, consensus</td>
<td>9s</td>
<td>3.5s</td>
<td><strong>2.6x faster</strong></td>
</tr>
<tr>
<td>5-step reasoning</td>
<td>25s</td>
<td>8s</td>
<td><strong>3.1x faster</strong></td>
</tr>
<tr>
<td>Code review (3 perspectives)</td>
<td>12s</td>
<td>4.5s</td>
<td><strong>2.7x faster</strong></td>
</tr>
</tbody>
</table>
<h3 id="quality-improvement-from-consensus">Quality Improvement from
Consensus</h3>
<table>
<thead>
<tr>
<th>Task</th>
<th>Single Model</th>
<th>3-Model Consensus</th>
<th>Improvement</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fact verification</td>
<td>85%</td>
<td>99%</td>
<td><strong>+16%</strong></td>
</tr>
<tr>
<td>Code correctness</td>
<td>78%</td>
<td>95%</td>
<td><strong>+22%</strong></td>
</tr>
<tr>
<td>Reasoning accuracy</td>
<td>72%</td>
<td>94%</td>
<td><strong>+31%</strong></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="api-usage-1">API Usage</h2>
<h3 id="rest-api">REST API</h3>
<pre class="http"><code>POST /api/v1/chat/completions
Content-Type: application/json
Authorization: Bearer {api_key}

{
  &quot;messages&quot;: [{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Explain quantum computing&quot;}],
  &quot;parallel&quot;: {
    &quot;enabled&quot;: true,
    &quot;mode&quot;: &quot;all&quot;,
    &quot;models&quot;: [&quot;claude-3-5-sonnet&quot;, &quot;gpt-4o&quot;, &quot;gemini-1.5-pro&quot;]
  }
}</code></pre>
<h3 id="response">Response</h3>
<div class="sourceCode" id="cb41"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;par_abc123&quot;</span><span class="fu">,</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;object&quot;</span><span class="fu">:</span> <span class="st">&quot;parallel.completion&quot;</span><span class="fu">,</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;responses&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;model&quot;</span><span class="fu">:</span> <span class="st">&quot;claude-3-5-sonnet&quot;</span><span class="fu">,</span> <span class="dt">&quot;content&quot;</span><span class="fu">:</span> <span class="st">&quot;...&quot;</span><span class="fu">,</span> <span class="dt">&quot;latency_ms&quot;</span><span class="fu">:</span> <span class="dv">2100</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;model&quot;</span><span class="fu">:</span> <span class="st">&quot;gpt-4o&quot;</span><span class="fu">,</span> <span class="dt">&quot;content&quot;</span><span class="fu">:</span> <span class="st">&quot;...&quot;</span><span class="fu">,</span> <span class="dt">&quot;latency_ms&quot;</span><span class="fu">:</span> <span class="dv">1800</span><span class="fu">}</span><span class="ot">,</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;model&quot;</span><span class="fu">:</span> <span class="st">&quot;gemini-1.5-pro&quot;</span><span class="fu">,</span> <span class="dt">&quot;content&quot;</span><span class="fu">:</span> <span class="st">&quot;...&quot;</span><span class="fu">,</span> <span class="dt">&quot;latency_ms&quot;</span><span class="fu">:</span> <span class="dv">2300</span><span class="fu">}</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;synthesis&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;content&quot;</span><span class="fu">:</span> <span class="st">&quot;...&quot;</span><span class="fu">,</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;consensus_score&quot;</span><span class="fu">:</span> <span class="fl">0.92</span><span class="fu">,</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;method&quot;</span><span class="fu">:</span> <span class="st">&quot;weighted_merge&quot;</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;usage&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;total_tokens&quot;</span><span class="fu">:</span> <span class="dv">4521</span><span class="fu">,</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;total_cost_usd&quot;</span><span class="fu">:</span> <span class="fl">0.0234</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="sdk-usage">SDK Usage</h3>
<div class="sourceCode" id="cb42"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { RadiantClient } <span class="im">from</span> <span class="st">&#39;@radiant/sdk&#39;</span><span class="op">;</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> client <span class="op">=</span> <span class="kw">new</span> <span class="fu">RadiantClient</span>({ apiKey<span class="op">:</span> <span class="st">&#39;your-key&#39;</span> })<span class="op">;</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Parallel execution</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> client<span class="op">.</span><span class="at">chat</span><span class="op">.</span><span class="at">completions</span><span class="op">.</span><span class="fu">create</span>({</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  messages<span class="op">:</span> [{ role<span class="op">:</span> <span class="st">&#39;user&#39;</span><span class="op">,</span> content<span class="op">:</span> <span class="st">&#39;Analyze this contract...&#39;</span> }]<span class="op">,</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>  parallel<span class="op">:</span> {</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>    enabled<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>    mode<span class="op">:</span> <span class="st">&#39;all&#39;</span><span class="op">,</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    models<span class="op">:</span> [<span class="st">&#39;claude-3-5-sonnet&#39;</span><span class="op">,</span> <span class="st">&#39;gpt-4o&#39;</span>]</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(result<span class="op">.</span><span class="at">synthesis</span><span class="op">.</span><span class="at">content</span>)<span class="op">;</span></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Consensus: </span><span class="sc">${</span>result<span class="op">.</span><span class="at">synthesis</span><span class="op">.</span><span class="at">consensus_score</span><span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span></code></pre></div>
<hr />
<h2 id="cost-considerations">Cost Considerations</h2>
<p>Parallel execution uses multiple models, which increases costs but
provides:</p>
<table>
<thead>
<tr>
<th>Trade-off</th>
<th>Single Model</th>
<th>Parallel (3 models)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cost</td>
<td>$0.01</td>
<td>$0.03</td>
</tr>
<tr>
<td>Quality</td>
<td>75%</td>
<td>95%</td>
</tr>
<tr>
<td>Latency</td>
<td>3s</td>
<td>3.5s</td>
</tr>
<tr>
<td>Reliability</td>
<td>99%</td>
<td>99.99%</td>
</tr>
</tbody>
</table>
<p><strong>Cost-Effective Strategies:</strong></p>
<ol type="1">
<li><strong>Use parallel for critical tasks only</strong></li>
<li><strong>Start with cheaper models, escalate if
disagreement</strong></li>
<li><strong>Use quorum mode to terminate early on
agreement</strong></li>
<li><strong>Cache consensus results for repeated queries</strong> #
RADIANT &amp; Think Tank Complete Features List</li>
</ol>
<div data-align="center">
<p><strong>Comprehensive Feature Reference</strong></p>
<p>Version 4.18.0 | December 2024</p>
</div>
<hr />
<h2 id="feature-categories">Feature Categories</h2>
<ol type="1">
<li><a href="#1-ai-model-management">AI Model Management</a></li>
<li><a href="#2-orchestration--workflows">Orchestration &amp;
Workflows</a></li>
<li><a href="#3-think-tank-platform">Think Tank Platform</a></li>
<li><a href="#4-billing--cost-management">Billing &amp; Cost
Management</a></li>
<li><a href="#5-multi-tenant-platform">Multi-Tenant Platform</a></li>
<li><a href="#6-security--compliance">Security &amp; Compliance</a></li>
<li><a href="#7-analytics--monitoring">Analytics &amp;
Monitoring</a></li>
<li><a href="#8-developer-tools">Developer Tools</a></li>
<li><a href="#9-admin-dashboard">Admin Dashboard</a></li>
<li><a href="#10-swift-deployer-app">Swift Deployer App</a></li>
</ol>
<hr />
<h2 id="ai-model-management">1. AI Model Management</h2>
<h3 id="model-router-service-1">1.1 Model Router Service</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Unified API</strong></td>
<td>Single API endpoint for 106+ AI models</td>
<td>Developers use one API regardless of provider</td>
</tr>
<tr>
<td><strong>Model Fallback</strong></td>
<td>Automatic failover to backup models</td>
<td>Ensures reliability when primary model fails</td>
</tr>
<tr>
<td><strong>Rate Limiting</strong></td>
<td>Per-tenant and per-model limits</td>
<td>Prevents abuse and manages costs</td>
</tr>
<tr>
<td><strong>Request Routing</strong></td>
<td>Intelligent routing to optimal provider</td>
<td>Minimizes latency, maximizes availability</td>
</tr>
</tbody>
</table>
<h3 id="model-metadata-service">1.2 Model Metadata Service</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Live Model Data</strong></td>
<td>Real-time model availability and capabilities</td>
<td>AGI uses current data for model selection</td>
</tr>
<tr>
<td><strong>Capability Scores</strong></td>
<td>0-1 scores for reasoning, coding, creative, etc.</td>
<td>Enables intelligent model matching to tasks</td>
</tr>
<tr>
<td><strong>Pricing Data</strong></td>
<td>Input/output token costs per model</td>
<td>Supports cost estimation and budgeting</td>
</tr>
<tr>
<td><strong>AI Research</strong></td>
<td>Automated metadata updates via AI</td>
<td>Keeps model info current without manual work</td>
</tr>
<tr>
<td><strong>Admin Override</strong></td>
<td>Manual corrections to AI-gathered data</td>
<td>Admins can fix inaccuracies</td>
</tr>
</tbody>
</table>
<h3 id="supported-models-106">1.3 Supported Models (106+)</h3>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 25%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Provider</th>
<th>Models</th>
<th>Specialties</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>OpenAI</strong></td>
<td>GPT-4o, GPT-4o-mini, o1, o1-mini, o3</td>
<td>General, reasoning, multimodal</td>
</tr>
<tr>
<td><strong>Anthropic</strong></td>
<td>Claude 3.5 Sonnet, Claude 3 Opus/Haiku</td>
<td>Reasoning, coding, safety</td>
</tr>
<tr>
<td><strong>Google</strong></td>
<td>Gemini 2.0 Flash/Pro, Gemini Deep Research</td>
<td>Speed, multimodal, research</td>
</tr>
<tr>
<td><strong>Meta</strong></td>
<td>Llama 3.1 (8B/70B/405B)</td>
<td>Open source, customizable</td>
</tr>
<tr>
<td><strong>Mistral</strong></td>
<td>Mistral Large, Codestral</td>
<td>European, code</td>
</tr>
<tr>
<td><strong>DeepSeek</strong></td>
<td>DeepSeek R1, DeepSeek Chat</td>
<td>Reasoning, cost-effective</td>
</tr>
<tr>
<td><strong>Perplexity</strong></td>
<td>Sonar Pro, Sonar</td>
<td>Real-time research</td>
</tr>
<tr>
<td><strong>xAI</strong></td>
<td>Grok 2</td>
<td>Real-time knowledge</td>
</tr>
<tr>
<td><strong>Cohere</strong></td>
<td>Command R+, Embed</td>
<td>Enterprise, RAG</td>
</tr>
<tr>
<td><strong>+6 more</strong></td>
<td>56 self-hosted models</td>
<td>Custom deployments</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="orchestration-workflows">2. Orchestration &amp; Workflows</h2>
<h3 id="orchestration-patterns-49">2.1 Orchestration Patterns (49)</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Pattern Library</strong></td>
<td>49 proven multi-AI workflows</td>
<td>Pre-built solutions for complex tasks</td>
</tr>
<tr>
<td><strong>Pattern Selection</strong></td>
<td>Automatic best pattern for task</td>
<td>Users don’t need to know which pattern to use</td>
</tr>
<tr>
<td><strong>Custom Workflows</strong></td>
<td>Create/modify workflow patterns</td>
<td>Tenants can build their own patterns</td>
</tr>
</tbody>
</table>
<p><strong>Pattern Categories:</strong> - Consensus &amp; Aggregation
(7) - Debate &amp; Deliberation (7) - Critique &amp; Refinement (7) -
Verification &amp; Validation (7) - Decomposition (7) - Specialized
Reasoning (7) - Multi-Model Routing (4) - Ensemble Methods (3)</p>
<h3 id="agi-dynamic-model-selection-1">2.2 AGI Dynamic Model
Selection</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Domain Detection</strong></td>
<td>Identifies coding, math, legal, etc. from prompt</td>
<td>Matches models to domain expertise</td>
</tr>
<tr>
<td><strong>Task Analysis</strong></td>
<td>Detects complexity, reasoning needs</td>
<td>Selects appropriate model count and modes</td>
</tr>
<tr>
<td><strong>Live Scoring</strong></td>
<td>Scores all available models for task</td>
<td>Always uses best current models</td>
</tr>
<tr>
<td><strong>Mode Assignment</strong></td>
<td>Selects optimal mode per model</td>
<td>Maximizes each model’s effectiveness</td>
</tr>
</tbody>
</table>
<h3 id="model-execution-modes-9">2.3 Model Execution Modes (9)</h3>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr>
<th>Mode</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>🧠 Thinking</strong></td>
<td>Extended reasoning (o1, Claude)</td>
<td>Complex problems requiring deep thought</td>
</tr>
<tr>
<td><strong>🔬 Deep Research</strong></td>
<td>Comprehensive research (Perplexity)</td>
<td>Fact-finding, literature review</td>
</tr>
<tr>
<td><strong>⚡ Fast</strong></td>
<td>Speed-optimized (Flash models)</td>
<td>Quick queries, autocomplete</td>
</tr>
<tr>
<td><strong>🎨 Creative</strong></td>
<td>High temperature output</td>
<td>Writing, brainstorming</td>
</tr>
<tr>
<td><strong>🎯 Precise</strong></td>
<td>Low temperature, factual</td>
<td>Data extraction, compliance</td>
</tr>
<tr>
<td><strong>💻 Code</strong></td>
<td>Code-optimized settings</td>
<td>Programming tasks</td>
</tr>
<tr>
<td><strong>👁️ Vision</strong></td>
<td>Multimodal with images</td>
<td>Image analysis</td>
</tr>
<tr>
<td><strong>📄 Long Context</strong></td>
<td>Extended context window</td>
<td>Large documents</td>
</tr>
<tr>
<td><strong>─ Standard</strong></td>
<td>Default parameters</td>
<td>General use</td>
</tr>
</tbody>
</table>
<h3 id="parallel-execution-1">2.4 Parallel Execution</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Multi-Model Calls</strong></td>
<td>Execute 2-10 models simultaneously</td>
<td>Higher quality through diversity</td>
</tr>
<tr>
<td><strong>Execution Modes</strong></td>
<td>All, Race, Quorum</td>
<td>Balance quality vs latency</td>
</tr>
<tr>
<td><strong>Result Synthesis</strong></td>
<td>Best-of, Vote, Weighted, Merge</td>
<td>Combine multiple responses optimally</td>
</tr>
<tr>
<td><strong>Timeout Handling</strong></td>
<td>Per-model timeouts</td>
<td>Prevents slow models from blocking</td>
</tr>
<tr>
<td><strong>Failure Strategy</strong></td>
<td>Fail-fast, Continue, Fallback</td>
<td>Graceful degradation</td>
</tr>
</tbody>
</table>
<h3 id="visual-workflow-editor-1">2.5 Visual Workflow Editor</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Drag-and-Drop</strong></td>
<td>Visual workflow design</td>
<td>Non-technical users can build workflows</td>
</tr>
<tr>
<td><strong>Method Palette</strong></td>
<td>16 reusable method types</td>
<td>Building blocks for any workflow</td>
</tr>
<tr>
<td><strong>Step Configuration</strong></td>
<td>4-tab config panel</td>
<td>Fine-grained control per step</td>
</tr>
<tr>
<td><strong>Canvas Controls</strong></td>
<td>Zoom, pan, fit</td>
<td>Navigate complex workflows</td>
</tr>
<tr>
<td><strong>Test &amp; Save</strong></td>
<td>Execute and persist</td>
<td>Validate before deployment</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="think-tank-platform">3. Think Tank Platform</h2>
<h3 id="problem-solving-engine">3.1 Problem Solving Engine</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Problem Decomposition</strong></td>
<td>Breaks complex problems into parts</td>
<td>Makes hard problems tractable</td>
</tr>
<tr>
<td><strong>Multi-Step Reasoning</strong></td>
<td>Chain-of-thought with recorded steps</td>
<td>Transparent reasoning process</td>
</tr>
<tr>
<td><strong>Solution Synthesis</strong></td>
<td>Combines step outputs into answer</td>
<td>Coherent final solutions</td>
</tr>
<tr>
<td><strong>Confidence Scoring</strong></td>
<td>0-1 quality score per step and overall</td>
<td>Users know reliability</td>
</tr>
</tbody>
</table>
<h3 id="session-management-1">3.2 Session Management</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Persistent Sessions</strong></td>
<td>Save and resume any session</td>
<td>Long-running problem solving</td>
</tr>
<tr>
<td><strong>Session History</strong></td>
<td>All steps recorded with metadata</td>
<td>Audit trail, learning</td>
</tr>
<tr>
<td><strong>Conversation Threads</strong></td>
<td>Multiple conversations per session</td>
<td>Organize follow-ups</td>
</tr>
<tr>
<td><strong>Artifact Storage</strong></td>
<td>Code, diagrams, documents as outputs</td>
<td>Tangible deliverables</td>
</tr>
</tbody>
</table>
<h3 id="domain-modes-8">3.3 Domain Modes (8)</h3>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr>
<th>Mode</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>🔬 Research</strong></td>
<td>Academic research, fact-finding</td>
<td>Source citation, verification</td>
</tr>
<tr>
<td><strong>💻 Engineering</strong></td>
<td>System design, architecture</td>
<td>Code artifacts, diagrams</td>
</tr>
<tr>
<td><strong>🧮 Analytical</strong></td>
<td>Math, statistics, data analysis</td>
<td>Step-by-step proofs</td>
</tr>
<tr>
<td><strong>🎨 Creative</strong></td>
<td>Writing, ideation, design</td>
<td>Multiple alternatives</td>
</tr>
<tr>
<td><strong>⚖️ Legal</strong></td>
<td>Contracts, compliance</td>
<td>Risk assessment</td>
</tr>
<tr>
<td><strong>🏥 Medical</strong></td>
<td>Clinical analysis (HIPAA)</td>
<td>PHI sanitization</td>
</tr>
<tr>
<td><strong>📊 Business</strong></td>
<td>Strategy, planning</td>
<td>Framework application</td>
</tr>
<tr>
<td><strong>🎯 General</strong></td>
<td>Mixed problems</td>
<td>Dynamic mode switching</td>
</tr>
</tbody>
</table>
<h3 id="collaboration">3.4 Collaboration</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Real-Time Sync</strong></td>
<td>WebSocket live updates</td>
<td>Multiple users see changes instantly</td>
</tr>
<tr>
<td><strong>Collaboration Roles</strong></td>
<td>Owner, Editor, Viewer, Commenter</td>
<td>Appropriate access control</td>
</tr>
<tr>
<td><strong>Cursor Presence</strong></td>
<td>See other users’ positions</td>
<td>Awareness of collaborators</td>
</tr>
<tr>
<td><strong>Shared Sessions</strong></td>
<td>Invite others to sessions</td>
<td>Team problem solving</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="billing-cost-management">4. Billing &amp; Cost Management</h2>
<h3 id="credit-system">4.1 Credit System</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Credit Accounts</strong></td>
<td>Pre-paid credit balances</td>
<td>Simple usage-based billing</td>
</tr>
<tr>
<td><strong>Credit Transactions</strong></td>
<td>Detailed usage history</td>
<td>Transparency on spending</td>
</tr>
<tr>
<td><strong>Auto-Refill</strong></td>
<td>Automatic top-up at threshold</td>
<td>Uninterrupted service</td>
</tr>
<tr>
<td><strong>Credit Alerts</strong></td>
<td>Low balance notifications</td>
<td>Avoid service interruption</td>
</tr>
</tbody>
</table>
<h3 id="subscriptions">4.2 Subscriptions</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Plan Tiers</strong></td>
<td>Free Trial, Individual, Pro, Enterprise</td>
<td>Options for all user types</td>
</tr>
<tr>
<td><strong>Feature Gating</strong></td>
<td>Features by plan level</td>
<td>Upsell path</td>
</tr>
<tr>
<td><strong>Usage Limits</strong></td>
<td>Tokens/requests per plan</td>
<td>Fair resource allocation</td>
</tr>
<tr>
<td><strong>Stripe Integration</strong></td>
<td>Payment processing</td>
<td>Industry-standard payments</td>
</tr>
</tbody>
</table>
<h3 id="cost-management">4.3 Cost Management</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Budget Alerts</strong></td>
<td>Spending limit notifications</td>
<td>Prevent cost overruns</td>
</tr>
<tr>
<td><strong>Cost Estimation</strong></td>
<td>Pre-request cost estimates</td>
<td>Informed decisions</td>
</tr>
<tr>
<td><strong>Usage Analytics</strong></td>
<td>Spend by model, user, time</td>
<td>Optimize usage patterns</td>
</tr>
<tr>
<td><strong>Invoice Generation</strong></td>
<td>Automated monthly invoices</td>
<td>Accounting integration</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="multi-tenant-platform">5. Multi-Tenant Platform</h2>
<h3 id="tenant-management">5.1 Tenant Management</h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Tenant Isolation</strong></td>
<td>Complete data separation</td>
<td>Security, privacy</td>
</tr>
<tr>
<td><strong>Tenant Settings</strong></td>
<td>Per-tenant configuration</td>
<td>Customization</td>
</tr>
<tr>
<td><strong>Tenant Onboarding</strong></td>
<td>Self-service signup</td>
<td>Scalable growth</td>
</tr>
<tr>
<td><strong>Tenant Suspension</strong></td>
<td>Disable/enable tenants</td>
<td>Account management</td>
</tr>
</tbody>
</table>
<h3 id="user-management">5.2 User Management</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>User Accounts</strong></td>
<td>Individual user identities</td>
<td>Personalization, audit</td>
</tr>
<tr>
<td><strong>Role-Based Access</strong></td>
<td>Admin, User, Viewer roles</td>
<td>Appropriate permissions</td>
</tr>
<tr>
<td><strong>User Preferences</strong></td>
<td>Model preferences, settings</td>
<td>Personal customization</td>
</tr>
<tr>
<td><strong>User Activity</strong></td>
<td>Usage tracking per user</td>
<td>Analytics, billing</td>
</tr>
</tbody>
</table>
<h3 id="api-key-management">5.3 API Key Management</h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>API Key Generation</strong></td>
<td>Create scoped keys</td>
<td>Programmatic access</td>
</tr>
<tr>
<td><strong>Key Rotation</strong></td>
<td>Scheduled key rotation</td>
<td>Security best practice</td>
</tr>
<tr>
<td><strong>Key Scopes</strong></td>
<td>Limit key permissions</td>
<td>Least privilege</td>
</tr>
<tr>
<td><strong>Key Analytics</strong></td>
<td>Usage per key</td>
<td>Monitor applications</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="security-compliance">6. Security &amp; Compliance</h2>
<h3 id="data-security">6.1 Data Security</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Row-Level Security</strong></td>
<td>PostgreSQL RLS policies</td>
<td>Automatic tenant isolation</td>
</tr>
<tr>
<td><strong>Encryption at Rest</strong></td>
<td>AES-256 encryption</td>
<td>Data protection</td>
</tr>
<tr>
<td><strong>Encryption in Transit</strong></td>
<td>TLS 1.3</td>
<td>Secure communication</td>
</tr>
<tr>
<td><strong>KMS Key Management</strong></td>
<td>AWS KMS for secrets</td>
<td>Secure key storage</td>
</tr>
</tbody>
</table>
<h3 id="authentication">6.2 Authentication</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Cognito Integration</strong></td>
<td>AWS Cognito user pools</td>
<td>Enterprise-grade auth</td>
</tr>
<tr>
<td><strong>JWT Tokens</strong></td>
<td>Secure session tokens</td>
<td>Stateless auth</td>
</tr>
<tr>
<td><strong>MFA Support</strong></td>
<td>Multi-factor authentication</td>
<td>Enhanced security</td>
</tr>
<tr>
<td><strong>SSO/SAML</strong></td>
<td>Enterprise SSO integration</td>
<td>Corporate identity</td>
</tr>
</tbody>
</table>
<h3 id="compliance">6.3 Compliance</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SOC2 Controls</strong></td>
<td>Security controls</td>
<td>Enterprise compliance</td>
</tr>
<tr>
<td><strong>HIPAA Mode</strong></td>
<td>Healthcare compliance</td>
<td>Medical use cases</td>
</tr>
<tr>
<td><strong>PHI Sanitization</strong></td>
<td>Automatic PII detection</td>
<td>Protect patient data</td>
</tr>
<tr>
<td><strong>Audit Logging</strong></td>
<td>Comprehensive audit trail</td>
<td>Compliance reporting</td>
</tr>
<tr>
<td><strong>Data Residency</strong></td>
<td>Region-specific deployment</td>
<td>Regulatory requirements</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="analytics-monitoring">7. Analytics &amp; Monitoring</h2>
<h3 id="usage-analytics">7.1 Usage Analytics</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Request Metrics</strong></td>
<td>Requests by model, user, time</td>
<td>Usage patterns</td>
</tr>
<tr>
<td><strong>Token Tracking</strong></td>
<td>Input/output token counts</td>
<td>Cost attribution</td>
</tr>
<tr>
<td><strong>Latency Metrics</strong></td>
<td>Response time tracking</td>
<td>Performance monitoring</td>
</tr>
<tr>
<td><strong>Error Rates</strong></td>
<td>Failure tracking</td>
<td>Reliability monitoring</td>
</tr>
</tbody>
</table>
<h3 id="model-performance">7.2 Model Performance</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Quality Scores</strong></td>
<td>Model quality over time</td>
<td>Identify degradation</td>
</tr>
<tr>
<td><strong>Comparison Reports</strong></td>
<td>Model vs model analysis</td>
<td>Model selection</td>
</tr>
<tr>
<td><strong>A/B Testing</strong></td>
<td>Test model variations</td>
<td>Optimize choices</td>
</tr>
<tr>
<td><strong>Learning Data</strong></td>
<td>ML training data collection</td>
<td>Continuous improvement</td>
</tr>
</tbody>
</table>
<h3 id="business-intelligence">7.3 Business Intelligence</h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Dashboard</strong></td>
<td>Executive metrics view</td>
<td>Quick status</td>
</tr>
<tr>
<td><strong>Custom Reports</strong></td>
<td>Build custom analytics</td>
<td>Specific insights</td>
</tr>
<tr>
<td><strong>Export</strong></td>
<td>CSV/PDF export</td>
<td>External analysis</td>
</tr>
<tr>
<td><strong>Alerts</strong></td>
<td>Threshold notifications</td>
<td>Proactive monitoring</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="developer-tools">8. Developer Tools</h2>
<h3 id="sdk">8.1 SDK</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>TypeScript SDK</strong></td>
<td>Type-safe client library</td>
<td>Developer productivity</td>
</tr>
<tr>
<td><strong>API Documentation</strong></td>
<td>OpenAPI/Swagger docs</td>
<td>Self-service integration</td>
</tr>
<tr>
<td><strong>Code Examples</strong></td>
<td>Sample implementations</td>
<td>Quick start</td>
</tr>
<tr>
<td><strong>Playground</strong></td>
<td>Interactive API testing</td>
<td>Experimentation</td>
</tr>
</tbody>
</table>
<h3 id="webhooks">8.2 Webhooks</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Event Webhooks</strong></td>
<td>Push notifications for events</td>
<td>Real-time integrations</td>
</tr>
<tr>
<td><strong>Webhook Management</strong></td>
<td>Create, update, delete hooks</td>
<td>Self-service config</td>
</tr>
<tr>
<td><strong>Retry Logic</strong></td>
<td>Automatic retry on failure</td>
<td>Reliability</td>
</tr>
<tr>
<td><strong>Webhook Logs</strong></td>
<td>Delivery history</td>
<td>Debugging</td>
</tr>
</tbody>
</table>
<h3 id="integrations">8.3 Integrations</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Slack Integration</strong></td>
<td>Notifications to Slack</td>
<td>Team communication</td>
</tr>
<tr>
<td><strong>Zapier Connect</strong></td>
<td>5000+ app integrations</td>
<td>Automation</td>
</tr>
<tr>
<td><strong>Custom Webhooks</strong></td>
<td>HTTP POST to any endpoint</td>
<td>Flexible integration</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="admin-dashboard">9. Admin Dashboard</h2>
<h3 id="dashboard-pages">9.1 Dashboard Pages</h3>
<table>
<thead>
<tr>
<th>Page</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Overview</strong></td>
<td>System health, key metrics</td>
<td>At-a-glance status</td>
</tr>
<tr>
<td><strong>Tenants</strong></td>
<td>Tenant management</td>
<td>Customer administration</td>
</tr>
<tr>
<td><strong>Users</strong></td>
<td>User administration</td>
<td>Access control</td>
</tr>
<tr>
<td><strong>Models</strong></td>
<td>Model configuration</td>
<td>AI management</td>
</tr>
<tr>
<td><strong>Orchestration</strong></td>
<td>Workflow patterns</td>
<td>Pattern management</td>
</tr>
<tr>
<td><strong>Analytics</strong></td>
<td>Usage reports</td>
<td>Business intelligence</td>
</tr>
<tr>
<td><strong>Billing</strong></td>
<td>Revenue, invoices</td>
<td>Financial management</td>
</tr>
<tr>
<td><strong>Security</strong></td>
<td>Audit logs, compliance</td>
<td>Security oversight</td>
</tr>
<tr>
<td><strong>Settings</strong></td>
<td>Platform configuration</td>
<td>System settings</td>
</tr>
</tbody>
</table>
<h3 id="ui-features">9.2 UI Features</h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Responsive Design</strong></td>
<td>Mobile-friendly</td>
<td>Access anywhere</td>
</tr>
<tr>
<td><strong>Dark Mode</strong></td>
<td>Light/dark themes</td>
<td>User preference</td>
</tr>
<tr>
<td><strong>Search</strong></td>
<td>Global search</td>
<td>Find anything quickly</td>
</tr>
<tr>
<td><strong>Filters</strong></td>
<td>Advanced filtering</td>
<td>Narrow results</td>
</tr>
<tr>
<td><strong>Bulk Actions</strong></td>
<td>Multi-select operations</td>
<td>Efficiency</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="swift-deployer-app">10. Swift Deployer App</h2>
<h3 id="deployment-features">10.1 Deployment Features</h3>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 37%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>CDK Deployment</strong></td>
<td>One-click AWS deployment</td>
<td>Simple infrastructure setup</td>
</tr>
<tr>
<td><strong>Progress Tracking</strong></td>
<td>Real-time deployment status</td>
<td>Visibility into process</td>
</tr>
<tr>
<td><strong>Stack Management</strong></td>
<td>Deploy individual stacks</td>
<td>Granular control</td>
</tr>
<tr>
<td><strong>Rollback</strong></td>
<td>Revert failed deployments</td>
<td>Safety net</td>
</tr>
</tbody>
</table>
<h3 id="qa-testing">10.2 QA &amp; Testing</h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Test Suites</strong></td>
<td>Run unit/integration tests</td>
<td>Quality assurance</td>
</tr>
<tr>
<td><strong>Test Results</strong></td>
<td>Pass/fail reporting</td>
<td>Quick feedback</td>
</tr>
<tr>
<td><strong>Coverage Reports</strong></td>
<td>Code coverage metrics</td>
<td>Quality metrics</td>
</tr>
</tbody>
</table>
<h3 id="ai-assistant">10.3 AI Assistant</h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Deployment Guidance</strong></td>
<td>AI helps with deployment</td>
<td>Reduces errors</td>
</tr>
<tr>
<td><strong>Error Diagnosis</strong></td>
<td>AI analyzes failures</td>
<td>Faster resolution</td>
</tr>
<tr>
<td><strong>Best Practices</strong></td>
<td>AI suggests improvements</td>
<td>Optimization</td>
</tr>
</tbody>
</table>
<h3 id="local-storage">10.4 Local Storage</h3>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
<th>How It Fits</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SQLCipher DB</strong></td>
<td>Encrypted local storage</td>
<td>Secure credentials</td>
</tr>
<tr>
<td><strong>AWS Profiles</strong></td>
<td>Multiple AWS accounts</td>
<td>Environment management</td>
</tr>
<tr>
<td><strong>Deployment History</strong></td>
<td>Past deployment records</td>
<td>Audit trail</td>
</tr>
</tbody>
</table>
<hr />
<div data-align="center">
<p><strong>RADIANT Feature Reference v4.18.0</strong></p>
<p><em>106+ models • 49 patterns • 9 modes • Enterprise-grade</em></p>
</div>
<h1 id="radiant-services-reference">RADIANT Services Reference</h1>
<h2 id="complete-lambda-services-inventory-62-services">Complete Lambda
Services Inventory (62 Services)</h2>
<h3 id="core-infrastructure-services">Core Infrastructure Services</h3>
<h4 id="brainrouter-brain-router.ts">1. BrainRouter
(<code>brain-router.ts</code>)</h4>
<p><strong>Purpose:</strong> Central routing service that directs
incoming requests to appropriate handlers based on task type.</p>
<p><strong>Key Methods:</strong> -
<code>routeTask(task: Task): Promise&lt;TaskResult&gt;</code> - Routes
task to handler - <code>analyzeTaskType(input: string): TaskType</code>
- Determines task classification -
<code>selectHandler(taskType: TaskType): Handler</code> - Selects
appropriate handler</p>
<p><strong>Task Types:</strong> | Type | Description | Handler |
|——|————-|———| | <code>generation</code> | Text generation |
ModelRouterService | | <code>analysis</code> | Data analysis |
AnalyticsService | | <code>transformation</code> | Content
transformation | TransformService | | <code>orchestration</code> |
Multi-step workflow | OrchestrationService | | <code>conversation</code>
| Chat interaction | ConversationService |</p>
<hr />
<h4 id="thermalstateservice-thermal-state.ts">2. ThermalStateService
(<code>thermal-state.ts</code>)</h4>
<p><strong>Purpose:</strong> Monitors system thermal state and adjusts
workload distribution.</p>
<p><strong>Key Methods:</strong> -
<code>getSystemState(): ThermalState</code> - Current system state -
<code>adjustWorkload(state: ThermalState): void</code> - Modify
processing -
<code>recordMetric(name: string, value: number): void</code> - Track
metrics</p>
<p><strong>States:</strong> - <code>nominal</code> - Normal operation -
<code>elevated</code> - Increased load - <code>throttled</code> -
Reduced capacity - <code>critical</code> - Emergency mode</p>
<hr />
<h4 id="metricscollector-metrics-collector.ts">3. MetricsCollector
(<code>metrics-collector.ts</code>)</h4>
<p><strong>Purpose:</strong> Collects and aggregates system metrics for
monitoring.</p>
<p><strong>Key Methods:</strong> -
<code>recordLatency(service: string, ms: number): void</code> -
<code>recordTokenUsage(model: string, input: number, output: number): void</code>
- <code>recordCost(tenantId: string, cents: number): void</code> -
<code>getMetrics(timeRange: TimeRange): MetricsSummary</code></p>
<p><strong>Metrics Tracked:</strong> - API latency (p50, p95, p99) -
Token usage by model - Cost by tenant - Error rates - Provider
health</p>
<hr />
<h4 id="errorlogger-error-logger.ts">4. ErrorLogger
(<code>error-logger.ts</code>)</h4>
<p><strong>Purpose:</strong> Structured error logging with context
preservation.</p>
<p><strong>Key Methods:</strong> -
<code>logError(error: Error, context: ErrorContext): void</code> -
<code>logWarning(message: string, data: object): void</code> -
<code>getRecentErrors(count: number): ErrorLog[]</code></p>
<p><strong>Error Categories:</strong> - <code>PROVIDER_ERROR</code> - AI
provider failures - <code>VALIDATION_ERROR</code> - Input validation -
<code>AUTH_ERROR</code> - Authentication failures -
<code>RATE_LIMIT</code> - Rate limiting triggered -
<code>INTERNAL_ERROR</code> - System errors</p>
<hr />
<h4 id="credentialsmanager-credentials-manager.ts">5. CredentialsManager
(<code>credentials-manager.ts</code>)</h4>
<p><strong>Purpose:</strong> Secure management of API keys and
credentials.</p>
<p><strong>Key Methods:</strong> -
<code>getCredential(provider: string): Promise&lt;string&gt;</code> -
<code>rotateCredential(provider: string): Promise&lt;void&gt;</code> -
<code>validateCredential(provider: string): Promise&lt;boolean&gt;</code></p>
<p><strong>Supported Providers:</strong> - OpenAI, Anthropic, Google,
Mistral - Groq, Perplexity, xAI, Together - Cohere, DeepSeek,
Replicate</p>
<hr />
<h3 id="ai-model-services">AI Model Services</h3>
<h4 id="modelrouterservice-model-router.service.ts">6.
ModelRouterService (<code>model-router.service.ts</code>)</h4>
<p><strong>Purpose:</strong> Routes AI requests to optimal provider with
fallback.</p>
<p><strong>Architecture:</strong></p>
<pre><code>Request → Validate → Select Provider → Execute → Fallback (if needed) → Response</code></pre>
<p><strong>Model Registry (24 Models):</strong></p>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 18%" />
<col style="width: 26%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr>
<th>Model ID</th>
<th>Provider</th>
<th>Capabilities</th>
<th>Cost ($/1K tokens)</th>
</tr>
</thead>
<tbody>
<tr>
<td>anthropic/claude-3-5-sonnet</td>
<td>bedrock</td>
<td>reasoning, coding, vision</td>
<td>$0.003/$0.015</td>
</tr>
<tr>
<td>anthropic/claude-3-haiku</td>
<td>bedrock</td>
<td>fast, efficient</td>
<td>$0.00025/$0.00125</td>
</tr>
<tr>
<td>meta/llama-3.1-70b</td>
<td>bedrock</td>
<td>reasoning, open-source</td>
<td>$0.00099/$0.00099</td>
</tr>
<tr>
<td>amazon/titan-text-express</td>
<td>bedrock</td>
<td>fast, aws-native</td>
<td>$0.0002/$0.0006</td>
</tr>
<tr>
<td>openai/gpt-4o</td>
<td>litellm</td>
<td>reasoning, vision</td>
<td>$0.005/$0.015</td>
</tr>
<tr>
<td>openai/gpt-4o-mini</td>
<td>litellm</td>
<td>fast, efficient</td>
<td>$0.00015/$0.0006</td>
</tr>
<tr>
<td>openai/o1</td>
<td>litellm</td>
<td>reasoning, math</td>
<td>$0.015/$0.060</td>
</tr>
<tr>
<td>openai/o1-mini</td>
<td>litellm</td>
<td>reasoning, coding</td>
<td>$0.003/$0.012</td>
</tr>
<tr>
<td>google/gemini-1.5-pro</td>
<td>litellm</td>
<td>reasoning, long-context</td>
<td>$0.00125/$0.005</td>
</tr>
<tr>
<td>google/gemini-1.5-flash</td>
<td>litellm</td>
<td>fast, vision</td>
<td>$0.000075/$0.0003</td>
</tr>
<tr>
<td>mistral/mistral-large</td>
<td>litellm</td>
<td>reasoning, multilingual</td>
<td>$0.003/$0.009</td>
</tr>
<tr>
<td>mistral/codestral</td>
<td>litellm</td>
<td>coding</td>
<td>$0.001/$0.003</td>
</tr>
<tr>
<td>cohere/command-r-plus</td>
<td>litellm</td>
<td>reasoning, rag</td>
<td>$0.003/$0.015</td>
</tr>
<tr>
<td>deepseek/deepseek-coder-v2</td>
<td>litellm</td>
<td>coding</td>
<td>$0.00014/$0.00028</td>
</tr>
<tr>
<td>groq/llama-3.1-70b-versatile</td>
<td>groq</td>
<td>fast, reasoning</td>
<td>$0.00059/$0.00079</td>
</tr>
<tr>
<td>groq/llama-3.1-8b-instant</td>
<td>groq</td>
<td>instant, fast</td>
<td>$0.00005/$0.00008</td>
</tr>
<tr>
<td>groq/mixtral-8x7b</td>
<td>groq</td>
<td>fast, moe</td>
<td>$0.00024/$0.00024</td>
</tr>
<tr>
<td>perplexity/sonar-large</td>
<td>perplexity</td>
<td>search, citations</td>
<td>$0.001/$0.001</td>
</tr>
<tr>
<td>perplexity/sonar-small</td>
<td>perplexity</td>
<td>search, fast</td>
<td>$0.0002/$0.0002</td>
</tr>
<tr>
<td>xai/grok-beta</td>
<td>xai</td>
<td>reasoning, realtime</td>
<td>$0.005/$0.015</td>
</tr>
<tr>
<td>together/llama-3.1-405b</td>
<td>together</td>
<td>reasoning, large</td>
<td>$0.005/$0.015</td>
</tr>
</tbody>
</table>
<p><strong>Fallback Chains:</strong></p>
<pre><code>bedrock  → litellm → groq
litellm  → bedrock → groq
groq     → litellm → bedrock
perplexity → litellm
xai      → litellm → groq
together → litellm → groq</code></pre>
<p><strong>Provider Health Tracking:</strong> - <code>isHealthy</code>:
boolean - <code>latencyMs</code>: number - <code>errorCount</code>:
number - <code>consecutiveFailures</code>: number (&gt;= 3 marks
unhealthy)</p>
<hr />
<h4 id="modelmetadataservice-model-metadata.service.ts">7.
ModelMetadataService (<code>model-metadata.service.ts</code>)</h4>
<p><strong>Purpose:</strong> Manages live model capabilities, pricing,
and availability.</p>
<p><strong>Key Methods:</strong> -
<code>getMetadata(modelId: string): Promise&lt;ModelMetadata&gt;</code>
- <code>getAllMetadata(): Promise&lt;ModelMetadata[]&gt;</code> -
<code>updateMetadata(modelId: string, data: Partial&lt;ModelMetadata&gt;): Promise&lt;void&gt;</code>
- <code>refreshFromInternet(): Promise&lt;void&gt;</code> - AI-powered
metadata updates</p>
<p><strong>Metadata Structure:</strong></p>
<div class="sourceCode" id="cb45"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> ModelMetadata {</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  modelId<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  provider<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  displayName<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  description<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  capabilities<span class="op">:</span> {</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    reasoning<span class="op">:</span> <span class="dt">number</span><span class="op">;</span>      <span class="co">// 0-1 score</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>    coding<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>    creative<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    factual<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>    math<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>    vision<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>    longContext<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>  contextWindow<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>  maxOutputTokens<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>  pricing<span class="op">:</span> {</span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>    inputPer1kTokens<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>    outputPer1kTokens<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>    currency<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>  availability<span class="op">:</span> {</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>    isAvailable<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>    regions<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>    lastChecked<span class="op">:</span> <span class="bu">Date</span><span class="op">;</span></span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>  performance<span class="op">:</span> {</span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>    avgLatencyMs<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>    throughputTokensPerSec<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h4 id="modelselectionservice-model-selection-service.ts">8.
ModelSelectionService (<code>model-selection-service.ts</code>)</h4>
<p><strong>Purpose:</strong> Intelligent model selection based on task
characteristics.</p>
<p><strong>Selection Algorithm:</strong> 1. <strong>Domain
Detection</strong> - Identify problem domain from keywords 2.
<strong>Task Analysis</strong> - Determine complexity, requirements 3.
<strong>Model Scoring</strong> - Score each model for task fit 4.
<strong>Mode Assignment</strong> - Select optimal execution mode 5.
<strong>Cost/Quality Balance</strong> - Apply user preferences</p>
<p><strong>Domain Keywords:</strong> | Domain | Keywords | |——–|———-| |
coding | code, function, algorithm, debug, implement, API | | math |
calculate, equation, formula, solve, proof | | legal | contract, law,
compliance, regulation, liability | | medical | diagnosis, treatment,
symptom, clinical, patient | | research | study, analyze, evidence,
literature, methodology | | creative | write, story, design, brainstorm,
creative |</p>
<hr />
<h3 id="orchestration-services">Orchestration Services</h3>
<h4
id="orchestrationpatternsservice-orchestration-patterns.service.ts">9.
OrchestrationPatternsService
(<code>orchestration-patterns.service.ts</code>)</h4>
<p><strong>Purpose:</strong> Manages 49 orchestration patterns with
parameterized methods.</p>
<p><strong>Pattern Categories (8):</strong></p>
<table style="width:100%;">
<colgroup>
<col style="width: 37%" />
<col style="width: 25%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Category</th>
<th>Count</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td>Consensus &amp; Aggregation</td>
<td>7</td>
<td>Self-Consistency, Meta-Reasoning, Mixture-of-Agents</td>
</tr>
<tr>
<td>Debate &amp; Deliberation</td>
<td>7</td>
<td>AI Debate, Society of Mind, Socratic Dialogue</td>
</tr>
<tr>
<td>Critique &amp; Refinement</td>
<td>7</td>
<td>Self-Refine, Reflexion, Constitutional AI</td>
</tr>
<tr>
<td>Verification &amp; Validation</td>
<td>7</td>
<td>Chain-of-Verification, LLM-as-Judge, Fact-Check</td>
</tr>
<tr>
<td>Decomposition</td>
<td>7</td>
<td>Least-to-Most, Tree of Thoughts, Skeleton-of-Thought</td>
</tr>
<tr>
<td>Specialized Reasoning</td>
<td>7</td>
<td>Chain-of-Thought, ReAct, Self-Ask</td>
</tr>
<tr>
<td>Multi-Model Routing</td>
<td>4</td>
<td>Mixture of Experts, FrugalGPT, Cascading</td>
</tr>
<tr>
<td>Ensemble Methods</td>
<td>3</td>
<td>Model Ensemble, Blended RAG, Speculative Decoding</td>
</tr>
</tbody>
</table>
<p><strong>All 49 Patterns:</strong></p>
<ol type="1">
<li><strong>Self-Consistency</strong> - Multiple samples, majority
vote</li>
<li><strong>Universal Self-Consistency</strong> - Free-form answer
selection</li>
<li><strong>Meta-Reasoning</strong> - Compare reasoning paths</li>
<li><strong>DiVeRSe</strong> - Diverse verifier ensemble</li>
<li><strong>Mixture-of-Agents</strong> - Multi-agent aggregation</li>
<li><strong>LLM-Blender</strong> - Pairwise ranking fusion</li>
<li><strong>Multi-Agent Consensus</strong> - Agent negotiation</li>
<li><strong>AI Debate</strong> - Adversarial debate with judge</li>
<li><strong>Multi-Agent Debate</strong> - Multi-party debate</li>
<li><strong>Society of Mind</strong> - Agent specialization</li>
<li><strong>ChatEval</strong> - Multi-agent evaluation</li>
<li><strong>ReConcile</strong> - Confidence-weighted discussion</li>
<li><strong>Socratic Dialogue</strong> - Question-based exploration</li>
<li><strong>Diplomatic Consensus</strong> - Negotiated agreement</li>
<li><strong>Self-Refine</strong> - Iterative refinement</li>
<li><strong>Reflexion</strong> - Verbal reinforcement learning</li>
<li><strong>CRITIC</strong> - External tool verification</li>
<li><strong>Iterative Refinement</strong> - Multi-pass improvement</li>
<li><strong>Constitutional AI</strong> - Principle-based critique</li>
<li><strong>Progressive Refinement</strong> - Staged quality
improvement</li>
<li><strong>Expert Refinement</strong> - Domain expert review</li>
<li><strong>Chain-of-Verification</strong> - Claim verification
chain</li>
<li><strong>LLM-as-Judge</strong> - Model evaluation</li>
<li><strong>Self-Verification</strong> - Self-checking</li>
<li><strong>G-Eval</strong> - Structured evaluation</li>
<li><strong>Cross-Validation</strong> - Multi-model validation</li>
<li><strong>Fact-Check Chain</strong> - Fact verification pipeline</li>
<li><strong>Consensus Validation</strong> - Agreement-based
validation</li>
<li><strong>Least-to-Most</strong> - Simple to complex
decomposition</li>
<li><strong>Decomposed Prompting</strong> - Sub-task breakdown</li>
<li><strong>Tree of Thoughts</strong> - Branching exploration</li>
<li><strong>Graph of Thoughts</strong> - Graph-based reasoning</li>
<li><strong>Skeleton-of-Thought</strong> - Parallel point expansion</li>
<li><strong>Plan-and-Solve</strong> - Planning then execution</li>
<li><strong>Recursive Decomposition</strong> - Hierarchical
breakdown</li>
<li><strong>Chain-of-Thought</strong> - Step-by-step reasoning</li>
<li><strong>Self-Ask</strong> - Sub-question generation</li>
<li><strong>ReAct</strong> - Reasoning + Acting</li>
<li><strong>Program-of-Thoughts</strong> - Code-based reasoning</li>
<li><strong>Analogical Reasoning</strong> - Example-based reasoning</li>
<li><strong>Maieutic Prompting</strong> - Tree explanation</li>
<li><strong>Contrastive CoT</strong> - Valid/invalid contrast</li>
<li><strong>Mixture of Experts</strong> - Specialized routing</li>
<li><strong>FrugalGPT</strong> - Cost-optimized cascading</li>
<li><strong>Router Chain</strong> - Capability-based routing</li>
<li><strong>Speculative Routing</strong> - Predictive routing</li>
<li><strong>Model Ensemble</strong> - Multi-model combination</li>
<li><strong>Blended RAG</strong> - RAG ensemble</li>
<li><strong>Speculative Decoding</strong> - Draft-verify
acceleration</li>
</ol>
<hr />
<h4 id="workflowengine-workflow-engine.ts">10. WorkflowEngine
(<code>workflow-engine.ts</code>)</h4>
<p><strong>Purpose:</strong> Executes DAG-based workflows with task
dependencies.</p>
<p><strong>Key Methods:</strong> -
<code>createWorkflow(definition: WorkflowDefinition): Promise&lt;string&gt;</code>
-
<code>addTask(workflowId: string, task: Task): Promise&lt;void&gt;</code>
-
<code>startExecution(workflowId: string, params: object): Promise&lt;string&gt;</code>
-
<code>updateExecutionStatus(executionId: string, status: Status): Promise&lt;void&gt;</code></p>
<p><strong>Workflow Definition:</strong></p>
<div class="sourceCode" id="cb46"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> WorkflowDefinition {</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  workflowId<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  name<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  description<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  category<span class="op">:</span> <span class="st">&#39;generation&#39;</span> <span class="op">|</span> <span class="st">&#39;analysis&#39;</span> <span class="op">|</span> <span class="st">&#39;transformation&#39;</span> <span class="op">|</span> <span class="st">&#39;pipeline&#39;</span> <span class="op">|</span> <span class="st">&#39;custom&#39;</span><span class="op">;</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  dagDefinition<span class="op">:</span> {</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    nodes<span class="op">:</span> TaskNode[]<span class="op">;</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    edges<span class="op">:</span> Edge[]<span class="op">;</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  inputSchema<span class="op">:</span> JSONSchema<span class="op">;</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  outputSchema<span class="op">:</span> JSONSchema<span class="op">;</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>  defaultParameters<span class="op">:</span> <span class="bu">Record</span><span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">any</span><span class="op">&gt;;</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>  timeoutSeconds<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>  maxRetries<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> TaskNode {</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>  taskId<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>  taskType<span class="op">:</span> <span class="st">&#39;model_inference&#39;</span> <span class="op">|</span> <span class="st">&#39;transformation&#39;</span> <span class="op">|</span> <span class="st">&#39;condition&#39;</span> <span class="op">|</span> <span class="st">&#39;parallel&#39;</span> <span class="op">|</span> <span class="st">&#39;aggregation&#39;</span><span class="op">;</span></span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>  config<span class="op">:</span> <span class="dt">object</span><span class="op">;</span></span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>  dependsOn<span class="op">:</span> <span class="dt">string</span>[]<span class="op">;</span></span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>  conditionExpression<span class="op">?:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h4 id="responsesynthesisservice-response-synthesis.service.ts">11.
ResponseSynthesisService
(<code>response-synthesis.service.ts</code>)</h4>
<p><strong>Purpose:</strong> Synthesizes responses from multiple AI
models.</p>
<p><strong>Synthesis Strategies:</strong></p>
<table>
<thead>
<tr>
<th>Strategy</th>
<th>Description</th>
<th>Best For</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>best_of</code></td>
<td>Select highest confidence response</td>
<td>Quality-critical</td>
</tr>
<tr>
<td><code>vote</code></td>
<td>Majority voting on answer</td>
<td>Factual questions</td>
</tr>
<tr>
<td><code>weighted</code></td>
<td>Confidence × (1/latency) weighted</td>
<td>Balanced</td>
</tr>
<tr>
<td><code>merge</code></td>
<td>AI combines all responses</td>
<td>Complex analysis</td>
</tr>
</tbody>
</table>
<p><strong>Merge Algorithm:</strong></p>
<pre><code>1. Collect all responses with metadata
2. Extract key points from each
3. Identify agreements and conflicts
4. Generate unified response
5. Apply conflict resolution
6. Calculate final confidence</code></pre>
<hr />
<h3 id="billing-services">Billing Services</h3>
<h4 id="billingservice-billing.ts">12. BillingService
(<code>billing.ts</code>)</h4>
<p><strong>Purpose:</strong> Manages credits, subscriptions, and
billing.</p>
<p><strong>Key Methods:</strong> -
<code>getSubscription(tenantId: string): Promise&lt;Subscription&gt;</code>
-
<code>getCreditBalance(tenantId: string): Promise&lt;CreditBalance&gt;</code>
-
<code>addCredits(tenantId: string, amount: number, type: string): Promise&lt;number&gt;</code>
-
<code>useCredits(tenantId: string, amount: number): Promise&lt;{success, newBalance}&gt;</code>
-
<code>purchaseCredits(tenantId: string, amount: number, price: number): Promise&lt;string&gt;</code></p>
<p><strong>Subscription Tiers:</strong> | Tier | Monthly Price | Annual
Price | Credits/User | |——|————–|————–|————–| | Free Trial | $0 | - |
100 | | Individual | $19 | $190 | 1,000 | | Pro | $49 | $490 | 5,000 | |
Team | $199 | $1,990 | 25,000 | | Enterprise | Custom | Custom | Custom
|</p>
<p><strong>Volume Discounts:</strong> | Credit Amount | Discount | Bonus
Credits | |—————|———-|—————| | 10-19 | 5% | 0 | | 20-49 | 10% | 0 | |
50-99 | 15% | 5% | | 100+ | 25% | 10% |</p>
<p><strong>Transaction Types:</strong> - <code>purchase</code> - Credit
purchase - <code>bonus</code> - Promotional credits -
<code>refund</code> - Refunded credits - <code>usage</code> - Credits
consumed - <code>transfer_in</code> / <code>transfer_out</code> - Credit
transfers - <code>subscription_allocation</code> - Monthly allocation -
<code>expiration</code> - Expired credits - <code>adjustment</code> -
Manual adjustment</p>
<hr />
<h4 id="storagebillingservice-storage-billing.ts">13.
StorageBillingService (<code>storage-billing.ts</code>)</h4>
<p><strong>Purpose:</strong> Tracks storage costs per tenant.</p>
<p><strong>Billable Storage:</strong> - Uploaded files - Generated
artifacts - Session history - Conversation logs</p>
<p><strong>Pricing:</strong> - $0.023 per GB/month (Standard) - $0.0125
per GB/month (Infrequent) - $0.004 per GB/month (Archive)</p>
<hr />
<h3 id="cognitive-services">Cognitive Services</h3>
<h4 id="cognitivebrainservice-cognitive-brain.service.ts">14.
CognitiveBrainService (<code>cognitive-brain.service.ts</code>)</h4>
<p><strong>Purpose:</strong> High-level cognitive processing and
reasoning.</p>
<p><strong>Cognitive Capabilities:</strong> - Working memory management
- Attention allocation - Abstract reasoning - Analogy formation -
Concept learning</p>
<hr />
<h4 id="reasoningengine-reasoning-engine.ts">15. ReasoningEngine
(<code>reasoning-engine.ts</code>)</h4>
<p><strong>Purpose:</strong> Chain-of-thought and multi-step
reasoning.</p>
<p><strong>Reasoning Modes:</strong> | Mode | Description | |——|————-| |
<code>deductive</code> | From general to specific | |
<code>inductive</code> | From specific to general | |
<code>abductive</code> | Best explanation inference | |
<code>analogical</code> | Similarity-based reasoning |</p>
<hr />
<h4 id="causalreasoningservice-causal-reasoning.service.ts">16.
CausalReasoningService (<code>causal-reasoning.service.ts</code>)</h4>
<p><strong>Purpose:</strong> Causal inference and counterfactual
reasoning.</p>
<p><strong>Methods:</strong> -
<code>identifyCauses(effect: string): Promise&lt;Cause[]&gt;</code> -
<code>predictEffects(cause: string): Promise&lt;Effect[]&gt;</code> -
<code>counterfactual(scenario: string, change: string): Promise&lt;string&gt;</code></p>
<hr />
<h4 id="goalplanningservice-goal-planning.service.ts">17.
GoalPlanningService (<code>goal-planning.service.ts</code>)</h4>
<p><strong>Purpose:</strong> Goal decomposition and planning.</p>
<p><strong>Planning Algorithm:</strong></p>
<pre><code>1. Parse high-level goal
2. Identify subgoals
3. Determine dependencies
4. Sequence actions
5. Allocate resources
6. Execute and monitor</code></pre>
<hr />
<h4 id="metacognitionservice-metacognition.service.ts">18.
MetacognitionService (<code>metacognition.service.ts</code>)</h4>
<p><strong>Purpose:</strong> Self-reflection and learning from
mistakes.</p>
<p><strong>Metacognitive Functions:</strong> - Confidence calibration -
Error detection - Strategy selection - Performance monitoring</p>
<hr />
<h3 id="memory-services">Memory Services</h3>
<h4 id="memoryservice-memory-service.ts">19. MemoryService
(<code>memory-service.ts</code>)</h4>
<p><strong>Purpose:</strong> Persistent memory across sessions.</p>
<p><strong>Memory Types:</strong> - <strong>Short-term</strong>: Current
session context - <strong>Long-term</strong>: Cross-session knowledge -
<strong>Episodic</strong>: Event-based memories -
<strong>Semantic</strong>: Factual knowledge</p>
<hr />
<h4 id="episodicmemoryservice-episodic-memory.service.ts">20.
EpisodicMemoryService (<code>episodic-memory.service.ts</code>)</h4>
<p><strong>Purpose:</strong> Event-based memory storage and
retrieval.</p>
<p><strong>Key Methods:</strong> -
<code>recordEpisode(event: Episode): Promise&lt;void&gt;</code> -
<code>retrieveRelevant(query: string, limit: number): Promise&lt;Episode[]&gt;</code>
- <code>consolidate(): Promise&lt;void&gt;</code> - Memory
optimization</p>
<hr />
<h4 id="memoryconsolidationservice-memory-consolidation.service.ts">21.
MemoryConsolidationService
(<code>memory-consolidation.service.ts</code>)</h4>
<p><strong>Purpose:</strong> Optimizes memory storage by consolidating
similar memories.</p>
<hr />
<h4 id="timemachineservice-time-machine.ts">22. TimeMachineService
(<code>time-machine.ts</code>)</h4>
<p><strong>Purpose:</strong> Access historical state at any point in
time.</p>
<p><strong>Key Methods:</strong> -
<code>getStateAt(timestamp: Date): Promise&lt;SystemState&gt;</code> -
<code>getDiff(from: Date, to: Date): Promise&lt;StateDiff&gt;</code> -
<code>restore(timestamp: Date): Promise&lt;void&gt;</code></p>
<hr />
<h3 id="agi-services">AGI Services</h3>
<h4 id="agiorchestratorservice-agi-orchestrator.service.ts">23.
AGIOrchestratorService (<code>agi-orchestrator.service.ts</code>)</h4>
<p><strong>Purpose:</strong> Coordinates AGI capabilities across
services.</p>
<hr />
<h4 id="advancedagiservice-advanced-agi.service.ts">24.
AdvancedAGIService (<code>advanced-agi.service.ts</code>)</h4>
<p><strong>Purpose:</strong> Advanced AGI features including
self-improvement.</p>
<hr />
<h4 id="agicompleteservice-agi-complete.service.ts">25.
AGICompleteService (<code>agi-complete.service.ts</code>)</h4>
<p><strong>Purpose:</strong> Complete AGI pipeline from input to
output.</p>
<hr />
<h4 id="agiextensionsservice-agi-extensions.service.ts">26.
AGIExtensionsService (<code>agi-extensions.service.ts</code>)</h4>
<p><strong>Purpose:</strong> Extensible AGI capabilities.</p>
<hr />
<h3 id="collaboration-services">Collaboration Services</h3>
<h4 id="collaborationservice-collaboration.ts">27. CollaborationService
(<code>collaboration.ts</code>)</h4>
<p><strong>Purpose:</strong> Real-time collaboration features.</p>
<p><strong>WebSocket Events:</strong> | Event | Direction | Description
| |——-|———–|————-| | <code>join_session</code> | Client→Server | Join
collaborative session | | <code>leave_session</code> | Client→Server |
Leave session | | <code>cursor_move</code> | Bidirectional | Cursor
position update | | <code>content_update</code> | Bidirectional |
Content change | | <code>user_joined</code> | Server→Client | New user
notification | | <code>user_left</code> | Server→Client | User left
notification |</p>
<hr />
<h4 id="concurrentsessionmanager-concurrent-session.ts">28.
ConcurrentSessionManager (<code>concurrent-session.ts</code>)</h4>
<p><strong>Purpose:</strong> Manages concurrent user sessions.</p>
<p><strong>Key Methods:</strong> -
<code>createSession(config: SessionConfig): Promise&lt;string&gt;</code>
-
<code>joinSession(sessionId: string, userId: string): Promise&lt;void&gt;</code>
-
<code>getSessionState(sessionId: string): Promise&lt;SessionState&gt;</code>
-
<code>broadcastUpdate(sessionId: string, update: Update): Promise&lt;void&gt;</code></p>
<hr />
<h4 id="teamservice-team-service.ts">29. TeamService
(<code>team-service.ts</code>)</h4>
<p><strong>Purpose:</strong> Team and organization management.</p>
<p><strong>Key Methods:</strong> -
<code>createTeam(tenantId: string, name: string): Promise&lt;string&gt;</code>
-
<code>addMember(teamId: string, userId: string, role: string): Promise&lt;void&gt;</code>
-
<code>getTeamMembers(teamId: string): Promise&lt;Member[]&gt;</code></p>
<hr />
<h3 id="additional-services-30-62">Additional Services (30-62)</h3>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 33%" />
<col style="width: 22%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>#</th>
<th>Service</th>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>30</td>
<td>NeuralEngine</td>
<td><code>neural-engine.ts</code></td>
<td>Neural network operations</td>
</tr>
<tr>
<td>31</td>
<td>AutoResolveService</td>
<td><code>auto-resolve.ts</code></td>
<td>Automatic conflict resolution</td>
</tr>
<tr>
<td>32</td>
<td>CanvasService</td>
<td><code>canvas-service.ts</code></td>
<td>Visual canvas artifacts</td>
</tr>
<tr>
<td>33</td>
<td>PersonaService</td>
<td><code>persona-service.ts</code></td>
<td>AI persona management</td>
</tr>
<tr>
<td>34</td>
<td>SchedulerService</td>
<td><code>scheduler-service.ts</code></td>
<td>Task scheduling</td>
</tr>
<tr>
<td>35</td>
<td>LicenseService</td>
<td><code>license-service.ts</code></td>
<td>License management</td>
</tr>
<tr>
<td>36</td>
<td>UnifiedModelRegistry</td>
<td><code>unified-model-registry.ts</code></td>
<td>Central model registry</td>
</tr>
<tr>
<td>37</td>
<td>GrandfatheringService</td>
<td><code>grandfathering-service.ts</code></td>
<td>Legacy migration</td>
</tr>
<tr>
<td>38</td>
<td>VoiceVideoService</td>
<td><code>voice-video.ts</code></td>
<td>Voice/video processing</td>
</tr>
<tr>
<td>39</td>
<td>ResultMergingService</td>
<td><code>result-merging.ts</code></td>
<td>Merge results</td>
</tr>
<tr>
<td>40</td>
<td>WorldModelService</td>
<td><code>world-model.service.ts</code></td>
<td>World state modeling</td>
</tr>
<tr>
<td>41</td>
<td>MultiAgentService</td>
<td><code>multi-agent.service.ts</code></td>
<td>Multi-agent coordination</td>
</tr>
<tr>
<td>42</td>
<td>TheoryOfMindService</td>
<td><code>theory-of-mind.service.ts</code></td>
<td>Mental state modeling</td>
</tr>
<tr>
<td>43</td>
<td>MultimodalBindingService</td>
<td><code>multimodal-binding.service.ts</code></td>
<td>Cross-modal binding</td>
</tr>
<tr>
<td>44</td>
<td>SkillExecutionService</td>
<td><code>skill-execution.service.ts</code></td>
<td>Skill execution</td>
</tr>
<tr>
<td>45</td>
<td>AutonomousAgentService</td>
<td><code>autonomous-agent.service.ts</code></td>
<td>Autonomous operations</td>
</tr>
<tr>
<td>46</td>
<td>ConsciousnessService</td>
<td><code>consciousness.service.ts</code></td>
<td>Consciousness modeling</td>
</tr>
<tr>
<td>47</td>
<td>ConfigEngineService</td>
<td><code>config-engine.service.ts</code></td>
<td>Configuration engine</td>
</tr>
<tr>
<td>48</td>
<td>SelfImprovementService</td>
<td><code>self-improvement.service.ts</code></td>
<td>Self-improvement</td>
</tr>
<tr>
<td>49</td>
<td>MoralCompassService</td>
<td><code>moral-compass.service.ts</code></td>
<td>Ethical reasoning</td>
</tr>
<tr>
<td>50</td>
<td>MLTrainingService</td>
<td><code>ml-training.service.ts</code></td>
<td>ML model training</td>
</tr>
<tr>
<td>51</td>
<td>LearningService</td>
<td><code>learning.service.ts</code></td>
<td>Learning data collection</td>
</tr>
<tr>
<td>52</td>
<td>FeedbackService</td>
<td><code>feedback.service.ts</code></td>
<td>User feedback</td>
</tr>
<tr>
<td>53</td>
<td>FeedbackLearningService</td>
<td><code>feedback-learning.ts</code></td>
<td>Learn from feedback</td>
</tr>
<tr>
<td>54</td>
<td>WorkflowProposalService</td>
<td><code>workflow-proposals.ts</code></td>
<td>Workflow improvements</td>
</tr>
<tr>
<td>55</td>
<td>AppIsolationService</td>
<td><code>app-isolation.ts</code></td>
<td>App-level isolation</td>
</tr>
<tr>
<td>56</td>
<td>LocalizationService</td>
<td><code>localization.ts</code></td>
<td>i18n support</td>
</tr>
<tr>
<td>57</td>
<td>MigrationApprovalService</td>
<td><code>migration-approval.ts</code></td>
<td>Migration approval</td>
</tr>
<tr>
<td>58</td>
<td>SuperiorOrchestrationService</td>
<td><code>superior-orchestration.service.ts</code></td>
<td>Superior responses</td>
</tr>
<tr>
<td>59</td>
<td>RadiantUnifiedService</td>
<td><code>radiant-unified.service.ts</code></td>
<td>Unified API</td>
</tr>
<tr>
<td>60</td>
<td>NeuralOrchestrationService</td>
<td><code>neural-orchestration.ts</code></td>
<td>Neural orchestration</td>
</tr>
<tr>
<td>61</td>
<td>AuditService</td>
<td><code>audit.ts</code></td>
<td>Audit logging</td>
</tr>
<tr>
<td>62</td>
<td>APIKeysService</td>
<td><code>api-keys.ts</code></td>
<td>API key management</td>
</tr>
</tbody>
</table>
<h1 id="radiant-database-schema-reference">RADIANT Database Schema
Reference</h1>
<h2 id="complete-migration-inventory-40-migrations">Complete Migration
Inventory (40 Migrations)</h2>
<h3 id="migration-index">Migration Index</h3>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 28%" />
<col style="width: 41%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr>
<th>#</th>
<th>Migration</th>
<th>Tables Created</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>001</td>
<td>initial_schema</td>
<td>tenants, users, administrators, invitations, approval_requests</td>
<td>Core platform tables</td>
</tr>
<tr>
<td>002</td>
<td>tenant_isolation</td>
<td>RLS policies</td>
<td>Row-level security</td>
</tr>
<tr>
<td>003</td>
<td>ai_models</td>
<td>ai_models, model_capabilities</td>
<td>Model registry</td>
</tr>
<tr>
<td>004</td>
<td>usage_billing</td>
<td>usage_records, invoices</td>
<td>Usage tracking</td>
</tr>
<tr>
<td>005</td>
<td>admin_approval</td>
<td>approval_workflows</td>
<td>Admin approvals</td>
</tr>
<tr>
<td>006</td>
<td>self_hosted_models</td>
<td>self_hosted_models, model_deployments</td>
<td>Self-hosted AI</td>
</tr>
<tr>
<td>007</td>
<td>external_providers</td>
<td>external_providers, provider_configs</td>
<td>Provider management</td>
</tr>
<tr>
<td>010</td>
<td>visual_ai_pipeline</td>
<td>visual_pipelines, pipeline_stages</td>
<td>Visual AI processing</td>
</tr>
<tr>
<td>011</td>
<td>brain_router</td>
<td>routing_rules, task_classifications</td>
<td>Request routing</td>
</tr>
<tr>
<td>012</td>
<td>metrics_analytics</td>
<td>metrics, analytics_snapshots</td>
<td>Analytics</td>
</tr>
<tr>
<td>013</td>
<td>neural_engine</td>
<td>neural_configs, neural_executions</td>
<td>Neural processing</td>
</tr>
<tr>
<td>014</td>
<td>error_logging</td>
<td>error_logs, error_patterns</td>
<td>Error tracking</td>
</tr>
<tr>
<td>015</td>
<td>credentials_registry</td>
<td>credentials, credential_rotations</td>
<td>Credential management</td>
</tr>
<tr>
<td>016</td>
<td>think_tank</td>
<td>thinktank_sessions, thinktank_steps, thinktank_tools</td>
<td>Think Tank</td>
</tr>
<tr>
<td>017</td>
<td>concurrent_chat</td>
<td>chat_sessions, chat_messages</td>
<td>Chat management</td>
</tr>
<tr>
<td>018</td>
<td>realtime_collaboration</td>
<td>collaborations, collaboration_members</td>
<td>Real-time collab</td>
</tr>
<tr>
<td>019</td>
<td>persistent_memory</td>
<td>memories, memory_associations</td>
<td>Memory system</td>
</tr>
<tr>
<td>020</td>
<td>focus_personas</td>
<td>personas, persona_configs</td>
<td>AI personas</td>
</tr>
<tr>
<td>021</td>
<td>team_plans</td>
<td>teams, team_members, team_plans</td>
<td>Team management</td>
</tr>
<tr>
<td>022</td>
<td>provider_registry</td>
<td>providers, provider_health</td>
<td>Provider registry</td>
</tr>
<tr>
<td>023</td>
<td>time_machine</td>
<td>snapshots, snapshot_diffs</td>
<td>Time machine</td>
</tr>
<tr>
<td>024</td>
<td>orchestration_engine</td>
<td>workflow_definitions, workflow_tasks, workflow_executions,
task_executions</td>
<td>Orchestration</td>
</tr>
<tr>
<td>025</td>
<td>license_management</td>
<td>licenses, license_activations</td>
<td>Licensing</td>
</tr>
<tr>
<td>026</td>
<td>unified_model_registry</td>
<td>unified_models, model_versions</td>
<td>Model registry</td>
</tr>
<tr>
<td>027</td>
<td>feedback_learning</td>
<td>feedback, learning_samples</td>
<td>Feedback system</td>
</tr>
<tr>
<td>028</td>
<td>neural_orchestration</td>
<td>neural_workflows, neural_steps</td>
<td>Neural orchestration</td>
</tr>
<tr>
<td>029</td>
<td>workflow_proposals</td>
<td>proposals, proposal_evidence</td>
<td>Workflow improvements</td>
</tr>
<tr>
<td>030</td>
<td>app_isolation</td>
<td>app_contexts, app_permissions</td>
<td>App isolation</td>
</tr>
<tr>
<td>031</td>
<td>internationalization</td>
<td>locales, translations</td>
<td>i18n</td>
</tr>
<tr>
<td>032</td>
<td>dynamic_configuration</td>
<td>configs, config_history</td>
<td>Dynamic config</td>
</tr>
<tr>
<td>033</td>
<td>billing_credits</td>
<td>credit_balances, credit_transactions, credit_purchases</td>
<td>Credits</td>
</tr>
<tr>
<td>034</td>
<td>storage_billing</td>
<td>storage_usage, storage_costs</td>
<td>Storage billing</td>
</tr>
<tr>
<td>035</td>
<td>versioned_subscriptions</td>
<td>subscription_tiers, subscriptions</td>
<td>Subscriptions</td>
</tr>
<tr>
<td>036</td>
<td>dual_admin_approval</td>
<td>dual_approvals, approval_chains</td>
<td>Dual approval</td>
</tr>
<tr>
<td>037</td>
<td>canvas_artifacts</td>
<td>canvases, canvas_elements</td>
<td>Canvas</td>
</tr>
<tr>
<td>038</td>
<td>scheduled_prompts</td>
<td>scheduled_prompts, prompt_executions</td>
<td>Scheduling</td>
</tr>
<tr>
<td>039</td>
<td>auto_resolve</td>
<td>auto_resolutions, resolution_rules</td>
<td>Auto-resolve</td>
</tr>
<tr>
<td>040</td>
<td>model_selection_pricing</td>
<td>model_pricing, selection_history</td>
<td>Pricing</td>
</tr>
<tr>
<td>041</td>
<td>admin_billing_enhancements</td>
<td>billing_reports, revenue_tracking</td>
<td>Billing enhancements</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="core-tables-migration-001">Core Tables (Migration 001)</h2>
<h3 id="tenants">tenants</h3>
<p>Primary multi-tenant organization table.</p>
<div class="sourceCode" id="cb49"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> tenants (</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> UUID <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">DEFAULT</span> uuid_generate_v4(),</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    name <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">UNIQUE</span>,</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    display_name <span class="dt">VARCHAR</span>(<span class="dv">200</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">domain</span> <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>    settings JSONB <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>    status <span class="dt">VARCHAR</span>(<span class="dv">20</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;active&#39;</span> </span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">CHECK</span> (status <span class="kw">IN</span> (<span class="st">&#39;active&#39;</span>, <span class="st">&#39;suspended&#39;</span>, <span class="st">&#39;pending&#39;</span>)),</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>    created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>    updated_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW()</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a><span class="co">-- Indexes</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_tenants_name <span class="kw">ON</span> tenants(name);</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_tenants_domain <span class="kw">ON</span> tenants(<span class="kw">domain</span>) <span class="kw">WHERE</span> <span class="kw">domain</span> <span class="kw">IS</span> <span class="kw">NOT</span> <span class="kw">NULL</span>;</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_tenants_status <span class="kw">ON</span> tenants(status);</span></code></pre></div>
<p><strong>Settings JSON Structure:</strong></p>
<div class="sourceCode" id="cb50"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;branding&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;logo_url&quot;</span><span class="fu">:</span> <span class="st">&quot;string&quot;</span><span class="fu">,</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;primary_color&quot;</span><span class="fu">:</span> <span class="st">&quot;#hex&quot;</span><span class="fu">,</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;company_name&quot;</span><span class="fu">:</span> <span class="st">&quot;string&quot;</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;limits&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;max_users&quot;</span><span class="fu">:</span> <span class="dv">100</span><span class="fu">,</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;max_api_keys&quot;</span><span class="fu">:</span> <span class="dv">10</span><span class="fu">,</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;monthly_token_limit&quot;</span><span class="fu">:</span> <span class="dv">1000000</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;features&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;think_tank_enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;orchestration_enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;collaboration_enabled&quot;</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;compliance&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;hipaa_mode&quot;</span><span class="fu">:</span> <span class="kw">false</span><span class="fu">,</span></span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;data_retention_days&quot;</span><span class="fu">:</span> <span class="dv">90</span></span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<hr />
<h3 id="users">users</h3>
<p>End users within tenants.</p>
<div class="sourceCode" id="cb51"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> users (</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> UUID <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">DEFAULT</span> uuid_generate_v4(),</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    tenant_id UUID <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">REFERENCES</span> tenants(<span class="kw">id</span>) <span class="kw">ON</span> <span class="kw">DELETE</span> <span class="kw">CASCADE</span>,</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    cognito_user_id <span class="dt">VARCHAR</span>(<span class="dv">128</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>    email <span class="dt">VARCHAR</span>(<span class="dv">255</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>    display_name <span class="dt">VARCHAR</span>(<span class="dv">200</span>),</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">role</span> <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;user&#39;</span> </span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">CHECK</span> (<span class="kw">role</span> <span class="kw">IN</span> (<span class="st">&#39;user&#39;</span>, <span class="st">&#39;power_user&#39;</span>, <span class="st">&#39;admin&#39;</span>)),</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>    status <span class="dt">VARCHAR</span>(<span class="dv">20</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;active&#39;</span> </span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">CHECK</span> (status <span class="kw">IN</span> (<span class="st">&#39;active&#39;</span>, <span class="st">&#39;suspended&#39;</span>, <span class="st">&#39;pending&#39;</span>)),</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>    settings JSONB <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>    created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>    updated_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">UNIQUE</span> (tenant_id, email),</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">UNIQUE</span> (cognito_user_id)</span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a><span class="co">-- Indexes</span></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_users_tenant_id <span class="kw">ON</span> users(tenant_id);</span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_users_email <span class="kw">ON</span> users(email);</span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_users_cognito_user_id <span class="kw">ON</span> users(cognito_user_id);</span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_users_status <span class="kw">ON</span> users(status);</span></code></pre></div>
<p><strong>User Roles:</strong> | Role | Permissions | |——|————-| |
<code>user</code> | Basic API access, own resources | |
<code>power_user</code> | + Create API keys, advanced features | |
<code>admin</code> | + Manage users, view analytics |</p>
<hr />
<h3 id="administrators">administrators</h3>
<p>Platform administrators (separate from tenant users).</p>
<div class="sourceCode" id="cb52"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> administrators (</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> UUID <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">DEFAULT</span> uuid_generate_v4(),</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    cognito_user_id <span class="dt">VARCHAR</span>(<span class="dv">128</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">UNIQUE</span>,</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    email <span class="dt">VARCHAR</span>(<span class="dv">255</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">UNIQUE</span>,</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    display_name <span class="dt">VARCHAR</span>(<span class="dv">200</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">role</span> <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;admin&#39;</span> </span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">CHECK</span> (<span class="kw">role</span> <span class="kw">IN</span> (<span class="st">&#39;super_admin&#39;</span>, <span class="st">&#39;admin&#39;</span>, <span class="st">&#39;operator&#39;</span>, <span class="st">&#39;auditor&#39;</span>)),</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    permissions TEXT[] <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>    mfa_enabled <span class="dt">BOOLEAN</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="kw">false</span>,</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>    last_login_at TIMESTAMPTZ,</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>    created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>    updated_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>    invited_by UUID <span class="kw">REFERENCES</span> administrators(<span class="kw">id</span>)</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<p><strong>Admin Roles:</strong> | Role | Description | Permissions |
|——|————-|————-| | <code>super_admin</code> | Full platform access | All
operations | | <code>admin</code> | Standard admin | Manage tenants,
users, models | | <code>operator</code> | Operations | View logs, manage
deployments | | <code>auditor</code> | Read-only audit | View all,
modify none |</p>
<hr />
<h3 id="approval_requests">approval_requests</h3>
<p>Two-person approval system.</p>
<div class="sourceCode" id="cb53"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> approval_requests (</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> UUID <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">DEFAULT</span> uuid_generate_v4(),</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    requester_id UUID <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">REFERENCES</span> administrators(<span class="kw">id</span>),</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    action_type <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    resource_type <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>    resource_id <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    payload JSONB <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>    status <span class="dt">VARCHAR</span>(<span class="dv">20</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;pending&#39;</span> </span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">CHECK</span> (status <span class="kw">IN</span> (<span class="st">&#39;pending&#39;</span>, <span class="st">&#39;approved&#39;</span>, <span class="st">&#39;rejected&#39;</span>, <span class="st">&#39;expired&#39;</span>)),</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>    required_approvals <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="dv">1</span>,</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>    approvals JSONB <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;[]&#39;</span>,</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>    expires_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>    created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>    updated_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW()</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<p><strong>Action Types Requiring Approval:</strong> -
<code>delete_tenant</code> - Delete a tenant -
<code>modify_billing</code> - Change billing settings -
<code>grant_super_admin</code> - Elevate to super admin -
<code>bulk_data_export</code> - Export all data -
<code>disable_security_feature</code> - Disable security</p>
<hr />
<h2 id="think-tank-tables-migration-016">Think Tank Tables (Migration
016)</h2>
<h3 id="thinktank_sessions">thinktank_sessions</h3>
<p>Problem-solving session tracking.</p>
<div class="sourceCode" id="cb54"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> thinktank_sessions (</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> UUID <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">DEFAULT</span> uuid_generate_v4(),</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    tenant_id UUID <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">REFERENCES</span> tenants(<span class="kw">id</span>) <span class="kw">ON</span> <span class="kw">DELETE</span> <span class="kw">CASCADE</span>,</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    user_id UUID <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">REFERENCES</span> users(<span class="kw">id</span>) <span class="kw">ON</span> <span class="kw">DELETE</span> <span class="kw">CASCADE</span>,</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>    problem_summary TEXT,</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">domain</span> <span class="dt">VARCHAR</span>(<span class="dv">50</span>),</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>    complexity <span class="dt">VARCHAR</span>(<span class="dv">20</span>) <span class="kw">CHECK</span> (complexity <span class="kw">IN</span> (<span class="st">&#39;low&#39;</span>, <span class="st">&#39;medium&#39;</span>, <span class="st">&#39;high&#39;</span>, <span class="st">&#39;extreme&#39;</span>)),</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>    total_steps <span class="dt">INTEGER</span> <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>    avg_confidence <span class="dt">DECIMAL</span>(<span class="dv">3</span>, <span class="dv">2</span>),</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>    solution_found <span class="dt">BOOLEAN</span> <span class="kw">DEFAULT</span> <span class="kw">false</span>,</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    total_tokens <span class="dt">INTEGER</span> <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>    total_cost <span class="dt">DECIMAL</span>(<span class="dv">10</span>, <span class="dv">6</span>) <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>    created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>    completed_at TIMESTAMPTZ</span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a><span class="co">-- Indexes</span></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_thinktank_sessions_tenant <span class="kw">ON</span> thinktank_sessions(tenant_id, created_at <span class="kw">DESC</span>);</span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_thinktank_sessions_user <span class="kw">ON</span> thinktank_sessions(user_id);</span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a><span class="co">-- RLS</span></span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> thinktank_sessions <span class="kw">ENABLE</span> <span class="kw">ROW</span> <span class="kw">LEVEL</span> SECURITY;</span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> POLICY thinktank_sessions_isolation <span class="kw">ON</span> thinktank_sessions</span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">FOR</span> <span class="kw">ALL</span> <span class="kw">USING</span> (tenant_id <span class="op">=</span> current_setting(<span class="st">&#39;app.current_tenant_id&#39;</span>, <span class="kw">true</span>):<span class="ch">:uuid</span>);</span></code></pre></div>
<p><strong>Domains:</strong> - <code>research</code> - Academic research
- <code>engineering</code> - Technical problems -
<code>analytical</code> - Data analysis - <code>creative</code> -
Creative tasks - <code>legal</code> - Legal analysis -
<code>medical</code> - Medical queries (HIPAA) - <code>business</code> -
Business strategy - <code>general</code> - General problems</p>
<hr />
<h3 id="thinktank_steps">thinktank_steps</h3>
<p>Individual reasoning steps within sessions.</p>
<div class="sourceCode" id="cb55"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> thinktank_steps (</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> UUID <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">DEFAULT</span> uuid_generate_v4(),</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    session_id UUID <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">REFERENCES</span> thinktank_sessions(<span class="kw">id</span>) <span class="kw">ON</span> <span class="kw">DELETE</span> <span class="kw">CASCADE</span>,</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>    step_number <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>    step_type <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> </span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">CHECK</span> (step_type <span class="kw">IN</span> (<span class="st">&#39;decompose&#39;</span>, <span class="st">&#39;reason&#39;</span>, <span class="st">&#39;execute&#39;</span>, <span class="st">&#39;verify&#39;</span>, <span class="st">&#39;synthesize&#39;</span>)),</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    description TEXT,</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>    reasoning TEXT,</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>    result TEXT,</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>    confidence <span class="dt">DECIMAL</span>(<span class="dv">3</span>, <span class="dv">2</span>) <span class="kw">CHECK</span> (confidence <span class="op">&gt;=</span> <span class="dv">0</span> <span class="kw">AND</span> confidence <span class="op">&lt;=</span> <span class="dv">1</span>),</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>    model_used <span class="dt">VARCHAR</span>(<span class="dv">100</span>),</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>    tokens_used <span class="dt">INTEGER</span>,</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>    duration_ms <span class="dt">INTEGER</span>,</span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>    created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW()</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a><span class="co">-- Indexes</span></span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_thinktank_steps_session <span class="kw">ON</span> thinktank_steps(session_id, step_number);</span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a><span class="co">-- RLS</span></span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> thinktank_steps <span class="kw">ENABLE</span> <span class="kw">ROW</span> <span class="kw">LEVEL</span> SECURITY;</span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> POLICY thinktank_steps_isolation <span class="kw">ON</span> thinktank_steps</span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">FOR</span> <span class="kw">ALL</span> <span class="kw">USING</span> (</span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a>        session_id <span class="kw">IN</span> (<span class="kw">SELECT</span> <span class="kw">id</span> <span class="kw">FROM</span> thinktank_sessions </span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a>                       <span class="kw">WHERE</span> tenant_id <span class="op">=</span> current_setting(<span class="st">&#39;app.current_tenant_id&#39;</span>, <span class="kw">true</span>):<span class="ch">:uuid</span>)</span>
<span id="cb55-26"><a href="#cb55-26" aria-hidden="true" tabindex="-1"></a>    );</span></code></pre></div>
<p><strong>Step Types:</strong> | Type | Description | Typical Model |
|——|————-|—————| | <code>decompose</code> | Break problem into parts |
Claude 3.5 | | <code>reason</code> | Chain-of-thought reasoning | o1,
Claude | | <code>execute</code> | Execute solution step | Task-specific
| | <code>verify</code> | Verify result accuracy | Different model | |
<code>synthesize</code> | Combine into final answer | Claude 3.5 |</p>
<hr />
<h3 id="thinktank_tools">thinktank_tools</h3>
<p>Available tools for Think Tank.</p>
<div class="sourceCode" id="cb56"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> thinktank_tools (</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> UUID <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">DEFAULT</span> uuid_generate_v4(),</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    tool_name <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">UNIQUE</span>,</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>    tool_type <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    description TEXT,</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>    parameters_schema JSONB <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    implementation TEXT,</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>    is_active <span class="dt">BOOLEAN</span> <span class="kw">DEFAULT</span> <span class="kw">true</span>,</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>    created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW()</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a><span class="co">-- Default tools</span></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> thinktank_tools (tool_name, tool_type, description, parameters_schema) <span class="kw">VALUES</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;web_search&#39;</span>, <span class="st">&#39;search&#39;</span>, <span class="st">&#39;Search the web for information&#39;</span>, <span class="st">&#39;{&quot;query&quot;: &quot;string&quot;}&#39;</span>),</span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;calculator&#39;</span>, <span class="st">&#39;compute&#39;</span>, <span class="st">&#39;Perform mathematical calculations&#39;</span>, <span class="st">&#39;{&quot;expression&quot;: &quot;string&quot;}&#39;</span>),</span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;code_executor&#39;</span>, <span class="st">&#39;compute&#39;</span>, <span class="st">&#39;Execute code snippets&#39;</span>, <span class="st">&#39;{&quot;language&quot;: &quot;string&quot;, &quot;code&quot;: &quot;string&quot;}&#39;</span>),</span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;file_reader&#39;</span>, <span class="st">&#39;io&#39;</span>, <span class="st">&#39;Read file contents&#39;</span>, <span class="st">&#39;{&quot;path&quot;: &quot;string&quot;}&#39;</span>),</span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;api_caller&#39;</span>, <span class="st">&#39;network&#39;</span>, <span class="st">&#39;Make API requests&#39;</span>, <span class="st">&#39;{&quot;url&quot;: &quot;string&quot;, &quot;method&quot;: &quot;string&quot;, &quot;body&quot;: &quot;object&quot;}&#39;</span>);</span></code></pre></div>
<hr />
<h2 id="orchestration-tables-migration-024">Orchestration Tables
(Migration 024)</h2>
<h3 id="workflow_definitions">workflow_definitions</h3>
<p>Workflow pattern definitions.</p>
<div class="sourceCode" id="cb57"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> workflow_definitions (</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> UUID <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">DEFAULT</span> uuid_generate_v4(),</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>    workflow_id <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">UNIQUE</span>,</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    name <span class="dt">VARCHAR</span>(<span class="dv">200</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    description TEXT,</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">category</span> <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> </span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">CHECK</span> (<span class="kw">category</span> <span class="kw">IN</span> (<span class="st">&#39;generation&#39;</span>, <span class="st">&#39;analysis&#39;</span>, <span class="st">&#39;transformation&#39;</span>, <span class="st">&#39;pipeline&#39;</span>, <span class="st">&#39;custom&#39;</span>)),</span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>    version <span class="dt">VARCHAR</span>(<span class="dv">20</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;1.0.0&#39;</span>,</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>    dag_definition JSONB <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>    input_schema JSONB <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>    output_schema JSONB <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>    default_parameters JSONB <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>    timeout_seconds <span class="dt">INTEGER</span> <span class="kw">DEFAULT</span> <span class="dv">3600</span>,</span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>    max_retries <span class="dt">INTEGER</span> <span class="kw">DEFAULT</span> <span class="dv">3</span>,</span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>    min_tier <span class="dt">INTEGER</span> <span class="kw">DEFAULT</span> <span class="dv">1</span>,</span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>    is_active <span class="dt">BOOLEAN</span> <span class="kw">DEFAULT</span> <span class="kw">true</span>,</span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>    requires_audit_trail <span class="dt">BOOLEAN</span> <span class="kw">DEFAULT</span> <span class="kw">false</span>,</span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>    hipaa_compliant <span class="dt">BOOLEAN</span> <span class="kw">DEFAULT</span> <span class="kw">false</span>,</span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a>    created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a>    updated_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a>    created_by UUID</span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<p><strong>DAG Definition Structure:</strong></p>
<div class="sourceCode" id="cb58"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;nodes&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;taskId&quot;</span><span class="fu">:</span> <span class="st">&quot;decompose&quot;</span><span class="fu">,</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;taskType&quot;</span><span class="fu">:</span> <span class="st">&quot;model_inference&quot;</span><span class="fu">,</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;modelId&quot;</span><span class="fu">:</span> <span class="st">&quot;anthropic/claude-3-5-sonnet&quot;</span><span class="fu">,</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;config&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;systemPrompt&quot;</span><span class="fu">:</span> <span class="st">&quot;Break down the problem...&quot;</span><span class="fu">,</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>        <span class="dt">&quot;temperature&quot;</span><span class="fu">:</span> <span class="fl">0.3</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">},</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;dependsOn&quot;</span><span class="fu">:</span> <span class="ot">[]</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;taskId&quot;</span><span class="fu">:</span> <span class="st">&quot;solve_part_1&quot;</span><span class="fu">,</span></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;taskType&quot;</span><span class="fu">:</span> <span class="st">&quot;model_inference&quot;</span><span class="fu">,</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;dependsOn&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;decompose&quot;</span><span class="ot">]</span></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;edges&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span><span class="dt">&quot;from&quot;</span><span class="fu">:</span> <span class="st">&quot;decompose&quot;</span><span class="fu">,</span> <span class="dt">&quot;to&quot;</span><span class="fu">:</span> <span class="st">&quot;solve_part_1&quot;</span><span class="fu">}</span></span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<hr />
<h3 id="workflow_tasks">workflow_tasks</h3>
<p>Individual tasks within workflows.</p>
<div class="sourceCode" id="cb59"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> workflow_tasks (</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> UUID <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">DEFAULT</span> uuid_generate_v4(),</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>    workflow_id UUID <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">REFERENCES</span> workflow_definitions(<span class="kw">id</span>) <span class="kw">ON</span> <span class="kw">DELETE</span> <span class="kw">CASCADE</span>,</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    task_id <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>    name <span class="dt">VARCHAR</span>(<span class="dv">200</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    description TEXT,</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>    task_type <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> </span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>        <span class="kw">CHECK</span> (task_type <span class="kw">IN</span> (<span class="st">&#39;model_inference&#39;</span>, <span class="st">&#39;transformation&#39;</span>, <span class="st">&#39;condition&#39;</span>, </span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>                             <span class="st">&#39;parallel&#39;</span>, <span class="st">&#39;aggregation&#39;</span>, <span class="st">&#39;external_api&#39;</span>, <span class="st">&#39;human_review&#39;</span>)),</span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>    model_id <span class="dt">VARCHAR</span>(<span class="dv">100</span>),</span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>    service_id <span class="dt">VARCHAR</span>(<span class="dv">100</span>),</span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>    config JSONB <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a>    input_mapping JSONB <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>    output_mapping JSONB <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>    sequence_order <span class="dt">INTEGER</span> <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a>    depends_on TEXT[] <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a>    condition_expression TEXT,</span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a>    timeout_seconds <span class="dt">INTEGER</span> <span class="kw">DEFAULT</span> <span class="dv">300</span>,</span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a>    created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a>    updated_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">UNIQUE</span>(workflow_id, task_id)</span>
<span id="cb59-26"><a href="#cb59-26" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<p><strong>Task Types:</strong> | Type | Description | Example |
|——|————-|———| | <code>model_inference</code> | AI model call | Generate
text | | <code>transformation</code> | Data transformation | Format
output | | <code>condition</code> | Conditional branching | If
confidence &gt; 0.8 | | <code>parallel</code> | Parallel execution |
Call 3 models | | <code>aggregation</code> | Combine results | Merge
responses | | <code>external_api</code> | External API call | Web search
| | <code>human_review</code> | Human-in-the-loop | Approval step |</p>
<hr />
<h3 id="workflow_executions">workflow_executions</h3>
<p>Workflow execution tracking.</p>
<div class="sourceCode" id="cb60"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> workflow_executions (</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> UUID <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">DEFAULT</span> uuid_generate_v4(),</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>    workflow_id UUID <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">REFERENCES</span> workflow_definitions(<span class="kw">id</span>),</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    tenant_id UUID <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">REFERENCES</span> tenants(<span class="kw">id</span>) <span class="kw">ON</span> <span class="kw">DELETE</span> <span class="kw">CASCADE</span>,</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>    user_id UUID <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    status <span class="dt">VARCHAR</span>(<span class="dv">20</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;pending&#39;</span> </span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">CHECK</span> (status <span class="kw">IN</span> (<span class="st">&#39;pending&#39;</span>, <span class="st">&#39;running&#39;</span>, <span class="st">&#39;paused&#39;</span>, <span class="st">&#39;completed&#39;</span>, <span class="st">&#39;failed&#39;</span>, <span class="st">&#39;cancelled&#39;</span>)),</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>    input_parameters JSONB <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>    resolved_parameters JSONB <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>    output_data JSONB,</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>    error_message TEXT,</span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>    error_details JSONB,</span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a>    started_at TIMESTAMPTZ,</span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>    completed_at TIMESTAMPTZ,</span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a>    duration_ms <span class="dt">INTEGER</span>,</span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a>    estimated_cost_usd <span class="dt">DECIMAL</span>(<span class="dv">10</span>, <span class="dv">4</span>),</span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a>    actual_cost_usd <span class="dt">DECIMAL</span>(<span class="dv">10</span>, <span class="dv">4</span>),</span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-24"><a href="#cb60-24" aria-hidden="true" tabindex="-1"></a>    checkpoint_data JSONB,</span>
<span id="cb60-25"><a href="#cb60-25" aria-hidden="true" tabindex="-1"></a>    priority <span class="dt">INTEGER</span> <span class="kw">DEFAULT</span> <span class="dv">5</span> <span class="kw">CHECK</span> (priority <span class="op">&gt;=</span> <span class="dv">1</span> <span class="kw">AND</span> priority <span class="op">&lt;=</span> <span class="dv">10</span>),</span>
<span id="cb60-26"><a href="#cb60-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb60-27"><a href="#cb60-27" aria-hidden="true" tabindex="-1"></a>    created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb60-28"><a href="#cb60-28" aria-hidden="true" tabindex="-1"></a>    updated_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW()</span>
<span id="cb60-29"><a href="#cb60-29" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb60-30"><a href="#cb60-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-31"><a href="#cb60-31" aria-hidden="true" tabindex="-1"></a><span class="co">-- RLS</span></span>
<span id="cb60-32"><a href="#cb60-32" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> workflow_executions <span class="kw">ENABLE</span> <span class="kw">ROW</span> <span class="kw">LEVEL</span> SECURITY;</span>
<span id="cb60-33"><a href="#cb60-33" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> POLICY workflow_executions_isolation <span class="kw">ON</span> workflow_executions</span>
<span id="cb60-34"><a href="#cb60-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">FOR</span> <span class="kw">ALL</span> <span class="kw">USING</span> (tenant_id <span class="op">=</span> current_setting(<span class="st">&#39;app.current_tenant_id&#39;</span>, <span class="kw">true</span>):<span class="ch">:uuid</span>);</span></code></pre></div>
<hr />
<h3 id="task_executions">task_executions</h3>
<p>Individual task execution tracking.</p>
<div class="sourceCode" id="cb61"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> task_executions (</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> UUID <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">DEFAULT</span> uuid_generate_v4(),</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>    workflow_execution_id UUID <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">REFERENCES</span> workflow_executions(<span class="kw">id</span>) <span class="kw">ON</span> <span class="kw">DELETE</span> <span class="kw">CASCADE</span>,</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    task_id <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>    status <span class="dt">VARCHAR</span>(<span class="dv">20</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;pending&#39;</span> </span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">CHECK</span> (status <span class="kw">IN</span> (<span class="st">&#39;pending&#39;</span>, <span class="st">&#39;running&#39;</span>, <span class="st">&#39;completed&#39;</span>, <span class="st">&#39;failed&#39;</span>, <span class="st">&#39;skipped&#39;</span>, <span class="st">&#39;retrying&#39;</span>)),</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>    attempt_number <span class="dt">INTEGER</span> <span class="kw">DEFAULT</span> <span class="dv">1</span>,</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>    input_data JSONB,</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>    output_data JSONB,</span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>    error_message TEXT,</span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>    error_code <span class="dt">VARCHAR</span>(<span class="dv">50</span>),</span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>    started_at TIMESTAMPTZ,</span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>    completed_at TIMESTAMPTZ,</span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>    duration_ms <span class="dt">INTEGER</span>,</span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>    resource_usage JSONB <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>    cost_usd <span class="dt">DECIMAL</span>(<span class="dv">10</span>, <span class="dv">4</span>),</span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a>    created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW()</span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<hr />
<h2 id="billing-tables-migrations-033-035">Billing Tables (Migrations
033-035)</h2>
<h3 id="credit_balances">credit_balances</h3>
<p>Tenant credit balance tracking.</p>
<div class="sourceCode" id="cb62"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> credit_balances (</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>    tenant_id UUID <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">REFERENCES</span> tenants(<span class="kw">id</span>) <span class="kw">ON</span> <span class="kw">DELETE</span> <span class="kw">CASCADE</span>,</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    balance <span class="dt">DECIMAL</span>(<span class="dv">12</span>, <span class="dv">4</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    lifetime_purchased <span class="dt">DECIMAL</span>(<span class="dv">12</span>, <span class="dv">4</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    lifetime_used <span class="dt">DECIMAL</span>(<span class="dv">12</span>, <span class="dv">4</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    lifetime_bonus <span class="dt">DECIMAL</span>(<span class="dv">12</span>, <span class="dv">4</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>    low_balance_alert_threshold <span class="dt">DECIMAL</span>(<span class="dv">12</span>, <span class="dv">4</span>),</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>    last_low_balance_alert TIMESTAMPTZ,</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>    auto_purchase_enabled <span class="dt">BOOLEAN</span> <span class="kw">DEFAULT</span> <span class="kw">false</span>,</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>    auto_purchase_threshold <span class="dt">DECIMAL</span>(<span class="dv">12</span>, <span class="dv">4</span>),</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>    auto_purchase_amount <span class="dt">DECIMAL</span>(<span class="dv">12</span>, <span class="dv">4</span>),</span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>    created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>    updated_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW()</span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<hr />
<h3 id="credit_transactions">credit_transactions</h3>
<p>Credit transaction history.</p>
<div class="sourceCode" id="cb63"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> credit_transactions (</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> UUID <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">DEFAULT</span> uuid_generate_v4(),</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>    tenant_id UUID <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">REFERENCES</span> tenants(<span class="kw">id</span>) <span class="kw">ON</span> <span class="kw">DELETE</span> <span class="kw">CASCADE</span>,</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    transaction_type <span class="dt">VARCHAR</span>(<span class="dv">30</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> </span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">CHECK</span> (transaction_type <span class="kw">IN</span> (<span class="st">&#39;purchase&#39;</span>, <span class="st">&#39;bonus&#39;</span>, <span class="st">&#39;refund&#39;</span>, <span class="st">&#39;usage&#39;</span>, </span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">&#39;transfer_in&#39;</span>, <span class="st">&#39;transfer_out&#39;</span>, </span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">&#39;subscription_allocation&#39;</span>, <span class="st">&#39;expiration&#39;</span>, <span class="st">&#39;adjustment&#39;</span>)),</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>    amount <span class="dt">DECIMAL</span>(<span class="dv">12</span>, <span class="dv">4</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>    balance_after <span class="dt">DECIMAL</span>(<span class="dv">12</span>, <span class="dv">4</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>    description TEXT,</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>    reference_id <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>    created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW()</span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a><span class="co">-- Indexes</span></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_credit_transactions_tenant <span class="kw">ON</span> credit_transactions(tenant_id, created_at <span class="kw">DESC</span>);</span></code></pre></div>
<hr />
<h3 id="subscription_tiers">subscription_tiers</h3>
<p>Available subscription plans.</p>
<div class="sourceCode" id="cb64"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> subscription_tiers (</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>    display_name <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>    description TEXT,</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    price_monthly <span class="dt">DECIMAL</span>(<span class="dv">10</span>, <span class="dv">2</span>),</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>    price_annual <span class="dt">DECIMAL</span>(<span class="dv">10</span>, <span class="dv">2</span>),</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>    included_credits_per_user <span class="dt">DECIMAL</span>(<span class="dv">10</span>, <span class="dv">2</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>    features JSONB <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>    limits JSONB <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;{}&#39;</span>,</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>    is_public <span class="dt">BOOLEAN</span> <span class="kw">DEFAULT</span> <span class="kw">true</span>,</span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>    sort_order <span class="dt">INTEGER</span> <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>    created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW()</span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>);</span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a><span class="co">-- Default tiers</span></span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a><span class="kw">INSERT</span> <span class="kw">INTO</span> subscription_tiers (<span class="kw">id</span>, display_name, price_monthly, price_annual, included_credits_per_user, features) <span class="kw">VALUES</span></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a>(<span class="st">&#39;free&#39;</span>, <span class="st">&#39;Free&#39;</span>, <span class="dv">0</span>, <span class="kw">NULL</span>, <span class="dv">100</span>, <span class="st">&#39;{&quot;think_tank&quot;: false, &quot;orchestration&quot;: false, &quot;models&quot;: [&quot;gpt-4o-mini&quot;, &quot;claude-3-haiku&quot;]}&#39;</span>),</span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>(<span class="st">&#39;pro&#39;</span>, <span class="st">&#39;Pro&#39;</span>, <span class="dv">49</span>, <span class="dv">490</span>, <span class="dv">5000</span>, <span class="st">&#39;{&quot;think_tank&quot;: true, &quot;orchestration&quot;: true, &quot;models&quot;: &quot;all&quot;}&#39;</span>),</span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>(<span class="st">&#39;team&#39;</span>, <span class="st">&#39;Team&#39;</span>, <span class="dv">199</span>, <span class="dv">1990</span>, <span class="dv">25000</span>, <span class="st">&#39;{&quot;think_tank&quot;: true, &quot;orchestration&quot;: true, &quot;collaboration&quot;: true, &quot;models&quot;: &quot;all&quot;}&#39;</span>),</span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a>(<span class="st">&#39;enterprise&#39;</span>, <span class="st">&#39;Enterprise&#39;</span>, <span class="kw">NULL</span>, <span class="kw">NULL</span>, <span class="dv">0</span>, <span class="st">&#39;{&quot;think_tank&quot;: true, &quot;orchestration&quot;: true, &quot;collaboration&quot;: true, &quot;models&quot;: &quot;all&quot;, &quot;custom_models&quot;: true}&#39;</span>);</span></code></pre></div>
<hr />
<h3 id="subscriptions-1">subscriptions</h3>
<p>Active tenant subscriptions.</p>
<div class="sourceCode" id="cb65"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> subscriptions (</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">id</span> UUID <span class="kw">PRIMARY</span> <span class="kw">KEY</span> <span class="kw">DEFAULT</span> uuid_generate_v4(),</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    tenant_id UUID <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">REFERENCES</span> tenants(<span class="kw">id</span>) <span class="kw">ON</span> <span class="kw">DELETE</span> <span class="kw">CASCADE</span>,</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    tier_id <span class="dt">VARCHAR</span>(<span class="dv">50</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">REFERENCES</span> subscription_tiers(<span class="kw">id</span>),</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    status <span class="dt">VARCHAR</span>(<span class="dv">20</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="st">&#39;active&#39;</span> </span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">CHECK</span> (status <span class="kw">IN</span> (<span class="st">&#39;active&#39;</span>, <span class="st">&#39;cancelled&#39;</span>, <span class="st">&#39;past_due&#39;</span>, <span class="st">&#39;trialing&#39;</span>, <span class="st">&#39;paused&#39;</span>)),</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    billing_cycle <span class="dt">VARCHAR</span>(<span class="dv">10</span>) <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">CHECK</span> (billing_cycle <span class="kw">IN</span> (<span class="st">&#39;monthly&#39;</span>, <span class="st">&#39;annual&#39;</span>)),</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    seats_purchased <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="dv">1</span>,</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>    seats_used <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> <span class="dv">0</span>,</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>    current_period_start TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>    current_period_end TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>    cancel_at_period_end <span class="dt">BOOLEAN</span> <span class="kw">DEFAULT</span> <span class="kw">false</span>,</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>    cancelled_at TIMESTAMPTZ,</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>    stripe_customer_id <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>    stripe_subscription_id <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>    created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>    updated_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW()</span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>);</span></code></pre></div>
<hr />
<h2 id="row-level-security-migration-002">Row-Level Security (Migration
002)</h2>
<h3 id="rls-pattern">RLS Pattern</h3>
<p>All tenant-scoped tables use this pattern:</p>
<div class="sourceCode" id="cb66"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Enable RLS on table</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> {table_name} <span class="kw">ENABLE</span> <span class="kw">ROW</span> <span class="kw">LEVEL</span> SECURITY;</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Create isolation policy</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> POLICY {table_name}_isolation <span class="kw">ON</span> {table_name}</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">FOR</span> <span class="kw">ALL</span> <span class="kw">USING</span> (tenant_id <span class="op">=</span> current_setting(<span class="st">&#39;app.current_tenant_id&#39;</span>, <span class="kw">true</span>):<span class="ch">:uuid</span>);</span></code></pre></div>
<h3 id="setting-tenant-context">Setting Tenant Context</h3>
<p>Every request sets the tenant context before queries:</p>
<div class="sourceCode" id="cb67"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SET</span> app.current_tenant_id <span class="op">=</span> <span class="st">&#39;{tenant_uuid}&#39;</span>;</span></code></pre></div>
<h3 id="tables-with-rls-enabled">Tables with RLS Enabled:</h3>
<ul>
<li>users</li>
<li>thinktank_sessions</li>
<li>thinktank_steps</li>
<li>workflow_executions</li>
<li>task_executions</li>
<li>credit_transactions</li>
<li>subscriptions</li>
<li>chat_sessions</li>
<li>chat_messages</li>
<li>collaborations</li>
<li>memories</li>
<li>feedback</li>
<li>api_keys</li>
<li>(all tenant-scoped tables)</li>
</ul>
<hr />
<h2 id="common-patterns">Common Patterns</h2>
<h3 id="updated-at-trigger">Updated At Trigger</h3>
<div class="sourceCode" id="cb68"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">OR</span> <span class="kw">REPLACE</span> <span class="kw">FUNCTION</span> update_updated_at_column()</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>RETURNS <span class="kw">TRIGGER</span> <span class="kw">AS</span> $$</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="cf">BEGIN</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">NEW</span>.updated_at <span class="op">=</span> NOW();</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">RETURN</span> <span class="kw">NEW</span>;</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="cf">END</span>;</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>$$ LANGUAGE plpgsql;</span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a><span class="co">-- Apply to tables</span></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TRIGGER</span> update_{<span class="kw">table</span>}_updated_at </span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">BEFORE</span> <span class="kw">UPDATE</span> <span class="kw">ON</span> {<span class="kw">table</span>}</span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">FOR</span> <span class="kw">EACH</span> <span class="kw">ROW</span> <span class="kw">EXECUTE</span> <span class="kw">FUNCTION</span> update_updated_at_column();</span></code></pre></div>
<h3 id="soft-delete-pattern">Soft Delete Pattern</h3>
<div class="sourceCode" id="cb69"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Add columns</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>deleted_at TIMESTAMPTZ,</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>deleted_by UUID,</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="co">-- Query with filter</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> deleted_at <span class="kw">IS</span> <span class="kw">NULL</span></span></code></pre></div>
<h3 id="audit-columns">Audit Columns</h3>
<div class="sourceCode" id="cb70"><pre
class="sourceCode sql"><code class="sourceCode sql"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>created_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>updated_at TIMESTAMPTZ <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">DEFAULT</span> NOW(),</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>created_by UUID,</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>updated_by UUID</span></code></pre></div>
<h1 id="swift-deployer-app-reference">Swift Deployer App Reference</h1>
<h2 id="app-architecture">App Architecture</h2>
<h3 id="overview-2">Overview</h3>
<p>The Swift Deployer is a native macOS application for deploying and
managing RADIANT infrastructure to AWS.</p>
<p><strong>Requirements:</strong> - macOS 13.0 (Ventura) or later -
Swift 5.9+ - Xcode 15+</p>
<h3 id="file-structure-36-files">File Structure (36 Files)</h3>
<pre><code>apps/swift-deployer/
├── Package.swift
└── Sources/RadiantDeployer/
    ├── RadiantDeployerApp.swift          # App entry point
    ├── AppState.swift                    # Global state management
    │
    ├── Config/
    │   └── RadiantConfig.swift           # App configuration
    │
    ├── Models/ (6 files)
    │   ├── Configuration.swift           # Deployment configuration
    │   ├── Credentials.swift             # AWS credentials model
    │   ├── Deployment.swift              # Deployment state model
    │   ├── DomainConfiguration.swift     # Domain settings
    │   ├── InstallationParameters.swift  # Install params
    │   └── ManagedApp.swift              # Managed app model
    │
    ├── Services/ (21 files)
    │   ├── AIAssistantService.swift      # AI deployment assistant
    │   ├── AIRegistryService.swift       # AI model registry
    │   ├── APIService.swift              # API communication
    │   ├── AWSService.swift              # AWS SDK wrapper
    │   ├── AuditLogger.swift             # Audit logging
    │   ├── CDKService.swift              # CDK deployment
    │   ├── CredentialService.swift       # Credential management
    │   ├── DNSService.swift              # DNS configuration
    │   ├── DatabaseService.swift         # Local SQLite/SQLCipher
    │   ├── DeploymentLockService.swift   # Deployment locking
    │   ├── DeploymentService.swift       # Main deployment logic
    │   ├── GitHubPackageRegistry.swift   # Package downloads
    │   ├── HealthCheckService.swift      # Health monitoring
    │   ├── LocalStorageManager.swift     # Encrypted local storage
    │   ├── MultiRegionService.swift      # Multi-region deployment
    │   ├── OnePasswordService.swift      # 1Password integration
    │   ├── PackageService.swift          # Package management
    │   ├── SeedDataService.swift         # Database seeding
    │   ├── SnapshotService.swift         # State snapshots
    │   ├── TimeoutService.swift          # Timeout handling
    │   └── VoiceInputService.swift       # Voice commands
    │
    ├── Views/ (8+ files)
    │   ├── ABTestingView.swift           # A/B testing config
    │   ├── ContentView.swift             # Main content
    │   ├── DeploymentView.swift          # Deployment UI
    │   ├── SettingsView.swift            # App settings
    │   └── ... (other views)
    │
    └── Components/ (4 files)
        ├── MacOSComponents.swift         # Design tokens &amp; components
        ├── AppCommands.swift             # Menu bar commands
        ├── DataTableComponents.swift     # Table components
        └── DetailViewComponents.swift    # Detail view patterns</code></pre>
<hr />
<h2 id="models">Models</h2>
<h3 id="configuration.swift">Configuration.swift</h3>
<p>Deployment configuration model.</p>
<div class="sourceCode" id="cb72"><pre
class="sourceCode swift"><code class="sourceCode swift"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> DeploymentConfiguration<span class="op">:</span> <span class="dt">Codable</span><span class="op">,</span> <span class="dt">Sendable</span> <span class="op">{</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">appId</span><span class="op">:</span> String</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">environment</span><span class="op">:</span> Environment</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">tier</span><span class="op">:</span> Int</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">region</span><span class="op">:</span> AWSRegion</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">domain</span><span class="op">:</span> String<span class="op">?</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">enabledStacks</span><span class="op">:</span> Set<span class="op">&lt;</span>StackName<span class="op">&gt;</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">customParameters</span><span class="op">:</span> <span class="op">[</span>String<span class="op">:</span> String<span class="op">]</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a><span class="kw">enum</span> Environment<span class="op">:</span> <span class="dt">String</span><span class="op">,</span> <span class="dt">Codable</span><span class="op">,</span> <span class="dt">CaseIterable</span><span class="op">,</span> <span class="dt">Sendable</span> <span class="op">{</span></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> development <span class="op">=</span> <span class="st">&quot;dev&quot;</span></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> staging <span class="op">=</span> <span class="st">&quot;staging&quot;</span></span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> production <span class="op">=</span> <span class="st">&quot;prod&quot;</span></span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a><span class="kw">enum</span> StackName<span class="op">:</span> <span class="dt">String</span><span class="op">,</span> <span class="dt">Codable</span><span class="op">,</span> <span class="dt">CaseIterable</span><span class="op">,</span> <span class="dt">Sendable</span> <span class="op">{</span></span>
<span id="cb72-18"><a href="#cb72-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> networking</span>
<span id="cb72-19"><a href="#cb72-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> foundation</span>
<span id="cb72-20"><a href="#cb72-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> data</span>
<span id="cb72-21"><a href="#cb72-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> storage</span>
<span id="cb72-22"><a href="#cb72-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> auth</span>
<span id="cb72-23"><a href="#cb72-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> ai</span>
<span id="cb72-24"><a href="#cb72-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> api</span>
<span id="cb72-25"><a href="#cb72-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> admin</span>
<span id="cb72-26"><a href="#cb72-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> batch</span>
<span id="cb72-27"><a href="#cb72-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> collaboration</span>
<span id="cb72-28"><a href="#cb72-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> monitoring</span>
<span id="cb72-29"><a href="#cb72-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> security</span>
<span id="cb72-30"><a href="#cb72-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> webhooks</span>
<span id="cb72-31"><a href="#cb72-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> scheduledTasks</span>
<span id="cb72-32"><a href="#cb72-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> multiRegion</span>
<span id="cb72-33"><a href="#cb72-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="credentials.swift">Credentials.swift</h3>
<p>AWS credentials model.</p>
<div class="sourceCode" id="cb73"><pre
class="sourceCode swift"><code class="sourceCode swift"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> AWSCredentials<span class="op">:</span> <span class="dt">Codable</span><span class="op">,</span> <span class="dt">Sendable</span> <span class="op">{</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="va">accessKeyId</span><span class="op">:</span> String</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="va">secretAccessKey</span><span class="op">:</span> String</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="va">sessionToken</span><span class="op">:</span> String<span class="op">?</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="va">region</span><span class="op">:</span> String</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="va">profile</span><span class="op">:</span> String<span class="op">?</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="va">expiresAt</span><span class="op">:</span> Date<span class="op">?</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">isExpired</span><span class="op">:</span> Bool <span class="op">{</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">guard</span> <span class="kw">let</span> <span class="va">expiresAt</span> <span class="cf">else</span> <span class="op">{</span> <span class="kw">return</span> <span class="kw">false</span> <span class="op">}</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> Date<span class="op">()</span> <span class="op">&gt;</span> expiresAt</span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> CredentialProfile<span class="op">:</span> <span class="dt">Codable</span><span class="op">,</span> <span class="dt">Identifiable</span><span class="op">,</span> <span class="dt">Sendable</span> <span class="op">{</span></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="va">id</span><span class="op">:</span> UUID</span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">name</span><span class="op">:</span> String</span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">credentials</span><span class="op">:</span> AWSCredentials</span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">isDefault</span><span class="op">:</span> Bool</span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">lastUsed</span><span class="op">:</span> Date<span class="op">?</span></span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="deployment.swift">Deployment.swift</h3>
<p>Deployment state tracking.</p>
<div class="sourceCode" id="cb74"><pre
class="sourceCode swift"><code class="sourceCode swift"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Deployment<span class="op">:</span> <span class="dt">Codable</span><span class="op">,</span> <span class="dt">Identifiable</span><span class="op">,</span> <span class="dt">Sendable</span> <span class="op">{</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="va">id</span><span class="op">:</span> UUID</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">configuration</span><span class="op">:</span> DeploymentConfiguration</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">status</span><span class="op">:</span> DeploymentStatus</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">stackStatuses</span><span class="op">:</span> <span class="op">[</span>StackName<span class="op">:</span> StackStatus<span class="op">]</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">startedAt</span><span class="op">:</span> Date</span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">completedAt</span><span class="op">:</span> Date<span class="op">?</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">errorMessage</span><span class="op">:</span> String<span class="op">?</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">outputs</span><span class="op">:</span> <span class="op">[</span>String<span class="op">:</span> String<span class="op">]</span></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a><span class="kw">enum</span> DeploymentStatus<span class="op">:</span> <span class="dt">String</span><span class="op">,</span> <span class="dt">Codable</span><span class="op">,</span> <span class="dt">Sendable</span> <span class="op">{</span></span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> pending</span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> preparing</span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> deploying</span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> verifying</span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> completed</span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> failed</span>
<span id="cb74-19"><a href="#cb74-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> rollingBack</span>
<span id="cb74-20"><a href="#cb74-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> cancelled</span>
<span id="cb74-21"><a href="#cb74-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb74-22"><a href="#cb74-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-23"><a href="#cb74-23" aria-hidden="true" tabindex="-1"></a><span class="kw">enum</span> StackStatus<span class="op">:</span> <span class="dt">String</span><span class="op">,</span> <span class="dt">Codable</span><span class="op">,</span> <span class="dt">Sendable</span> <span class="op">{</span></span>
<span id="cb74-24"><a href="#cb74-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> pending</span>
<span id="cb74-25"><a href="#cb74-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> creating</span>
<span id="cb74-26"><a href="#cb74-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> updating</span>
<span id="cb74-27"><a href="#cb74-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> complete</span>
<span id="cb74-28"><a href="#cb74-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> failed</span>
<span id="cb74-29"><a href="#cb74-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> rollbackInProgress</span>
<span id="cb74-30"><a href="#cb74-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> rollbackComplete</span>
<span id="cb74-31"><a href="#cb74-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> deleted</span>
<span id="cb74-32"><a href="#cb74-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h2 id="services">Services</h2>
<h3 id="cdkservice.swift">CDKService.swift</h3>
<p>AWS CDK deployment service.</p>
<div class="sourceCode" id="cb75"><pre
class="sourceCode swift"><code class="sourceCode swift"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="cf">actor</span> CDKService <span class="op">{</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">let</span> <span class="va">shell</span><span class="op">:</span> ShellService</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">let</span> <span class="va">logger</span><span class="op">:</span> AuditLogger</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Deploy a single stack</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">func</span> <span class="fu">deployStack</span><span class="op">(</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">_</span> <span class="va">stack</span><span class="op">:</span> <span class="dt">StackName</span><span class="op">,</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">config</span><span class="op">:</span> <span class="dt">DeploymentConfiguration</span><span class="op">,</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>        <span class="va">credentials</span><span class="op">:</span> <span class="dt">AWSCredentials</span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">)</span> <span class="fu">async</span> <span class="kw">throws</span> -&gt; <span class="fu">StackOutput</span> <span class="op">{</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">command</span> <span class="op">=</span> buildCDKCommand<span class="op">(</span></span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>            action<span class="op">:</span> <span class="st">&quot;deploy&quot;</span><span class="op">,</span></span>
<span id="cb75-13"><a href="#cb75-13" aria-hidden="true" tabindex="-1"></a>            stack<span class="op">:</span> stack<span class="op">,</span></span>
<span id="cb75-14"><a href="#cb75-14" aria-hidden="true" tabindex="-1"></a>            config<span class="op">:</span> config</span>
<span id="cb75-15"><a href="#cb75-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">)</span></span>
<span id="cb75-16"><a href="#cb75-16" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb75-17"><a href="#cb75-17" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="cf">try</span> <span class="cf">await</span> shell<span class="op">.</span>execute<span class="op">(</span></span>
<span id="cb75-18"><a href="#cb75-18" aria-hidden="true" tabindex="-1"></a>            command<span class="op">,</span></span>
<span id="cb75-19"><a href="#cb75-19" aria-hidden="true" tabindex="-1"></a>            environment<span class="op">:</span> credentials<span class="op">.</span>asEnvironment<span class="op">()</span></span>
<span id="cb75-20"><a href="#cb75-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">)</span></span>
<span id="cb75-21"><a href="#cb75-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb75-22"><a href="#cb75-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb75-23"><a href="#cb75-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Deploy all stacks in dependency order</span></span>
<span id="cb75-24"><a href="#cb75-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">func</span> <span class="fu">deployAllStacks</span><span class="op">(</span></span>
<span id="cb75-25"><a href="#cb75-25" aria-hidden="true" tabindex="-1"></a>        <span class="va">config</span><span class="op">:</span> <span class="dt">DeploymentConfiguration</span><span class="op">,</span></span>
<span id="cb75-26"><a href="#cb75-26" aria-hidden="true" tabindex="-1"></a>        <span class="va">credentials</span><span class="op">:</span> <span class="dt">AWSCredentials</span><span class="op">,</span></span>
<span id="cb75-27"><a href="#cb75-27" aria-hidden="true" tabindex="-1"></a>        <span class="va">progressHandler</span><span class="op">:</span> @<span class="dt">Sendable</span> (<span class="va">StackName</span><span class="op">,</span> <span class="va">StackStatus</span><span class="op">)</span> -&gt; <span class="fu">Void</span></span>
<span id="cb75-28"><a href="#cb75-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">)</span> <span class="cf">async</span> <span class="kw">throws</span> <span class="op">-&gt;</span> DeploymentResult <span class="op">{</span></span>
<span id="cb75-29"><a href="#cb75-29" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">orderedStacks</span> <span class="op">=</span> topologicalSort<span class="op">(</span>config<span class="op">.</span>enabledStacks<span class="op">)</span></span>
<span id="cb75-30"><a href="#cb75-30" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> <span class="va">outputs</span><span class="op">:</span> <span class="op">[</span>StackName<span class="op">:</span> StackOutput<span class="op">]</span> <span class="op">=</span> <span class="op">[:]</span></span>
<span id="cb75-31"><a href="#cb75-31" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb75-32"><a href="#cb75-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> stack <span class="cf">in</span> orderedStacks <span class="op">{</span></span>
<span id="cb75-33"><a href="#cb75-33" aria-hidden="true" tabindex="-1"></a>            progressHandler<span class="op">(</span>stack<span class="op">,</span> <span class="op">.</span>creating<span class="op">)</span></span>
<span id="cb75-34"><a href="#cb75-34" aria-hidden="true" tabindex="-1"></a>            <span class="cf">do</span> <span class="op">{</span></span>
<span id="cb75-35"><a href="#cb75-35" aria-hidden="true" tabindex="-1"></a>                outputs<span class="op">[</span>stack<span class="op">]</span> <span class="op">=</span> <span class="cf">try</span> <span class="cf">await</span> deployStack<span class="op">(</span>stack<span class="op">,</span> config<span class="op">:</span> config<span class="op">,</span> credentials<span class="op">:</span> credentials<span class="op">)</span></span>
<span id="cb75-36"><a href="#cb75-36" aria-hidden="true" tabindex="-1"></a>                progressHandler<span class="op">(</span>stack<span class="op">,</span> <span class="op">.</span>complete<span class="op">)</span></span>
<span id="cb75-37"><a href="#cb75-37" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span> <span class="cf">catch</span> <span class="op">{</span></span>
<span id="cb75-38"><a href="#cb75-38" aria-hidden="true" tabindex="-1"></a>                progressHandler<span class="op">(</span>stack<span class="op">,</span> <span class="op">.</span>failed<span class="op">)</span></span>
<span id="cb75-39"><a href="#cb75-39" aria-hidden="true" tabindex="-1"></a>                <span class="kw">throw</span> DeploymentError<span class="op">.</span>stackFailed<span class="op">(</span>stack<span class="op">,</span> error<span class="op">)</span></span>
<span id="cb75-40"><a href="#cb75-40" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb75-41"><a href="#cb75-41" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb75-42"><a href="#cb75-42" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb75-43"><a href="#cb75-43" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> DeploymentResult<span class="op">(</span>outputs<span class="op">:</span> outputs<span class="op">)</span></span>
<span id="cb75-44"><a href="#cb75-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb75-45"><a href="#cb75-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb75-46"><a href="#cb75-46" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Stack dependency order</span></span>
<span id="cb75-47"><a href="#cb75-47" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">func</span> <span class="fu">topologicalSort</span><span class="op">(</span><span class="va">_</span> <span class="va">stacks</span><span class="op">:</span> <span class="dt">Set</span>&lt;<span class="va">StackName</span>&gt;<span class="op">)</span> -&gt; [<span class="fu">StackName</span>] <span class="op">{</span></span>
<span id="cb75-48"><a href="#cb75-48" aria-hidden="true" tabindex="-1"></a>        <span class="co">// networking → foundation → data/storage/auth → ai → api/admin → rest</span></span>
<span id="cb75-49"><a href="#cb75-49" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">order</span><span class="op">:</span> <span class="op">[</span>StackName<span class="op">]</span> <span class="op">=</span> <span class="op">[</span></span>
<span id="cb75-50"><a href="#cb75-50" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>networking<span class="op">,</span> <span class="op">.</span>foundation<span class="op">,</span> <span class="op">.</span>data<span class="op">,</span> <span class="op">.</span>storage<span class="op">,</span> <span class="op">.</span>auth<span class="op">,</span></span>
<span id="cb75-51"><a href="#cb75-51" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>ai<span class="op">,</span> <span class="op">.</span>api<span class="op">,</span> <span class="op">.</span>admin<span class="op">,</span> <span class="op">.</span>batch<span class="op">,</span> <span class="op">.</span>collaboration<span class="op">,</span></span>
<span id="cb75-52"><a href="#cb75-52" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>monitoring<span class="op">,</span> <span class="op">.</span>security<span class="op">,</span> <span class="op">.</span>webhooks<span class="op">,</span> <span class="op">.</span>scheduledTasks<span class="op">,</span> <span class="op">.</span>multiRegion</span>
<span id="cb75-53"><a href="#cb75-53" aria-hidden="true" tabindex="-1"></a>        <span class="op">]</span></span>
<span id="cb75-54"><a href="#cb75-54" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> order<span class="op">.</span>filter <span class="op">{</span> stacks<span class="op">.</span>contains<span class="op">(</span>$<span class="dv">0</span><span class="op">)</span> <span class="op">}</span></span>
<span id="cb75-55"><a href="#cb75-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb75-56"><a href="#cb75-56" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="deploymentservice.swift">DeploymentService.swift</h3>
<p>Main deployment orchestration.</p>
<div class="sourceCode" id="cb76"><pre
class="sourceCode swift"><code class="sourceCode swift"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="at">@MainActor</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> DeploymentService<span class="op">:</span> <span class="dt">ObservableObject</span> <span class="op">{</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Published</span> <span class="kw">var</span> <span class="va">currentDeployment</span><span class="op">:</span> Deployment<span class="op">?</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Published</span> <span class="kw">var</span> <span class="va">deploymentHistory</span><span class="op">:</span> <span class="op">[</span>Deployment<span class="op">]</span> <span class="op">=</span> <span class="op">[]</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Published</span> <span class="kw">var</span> <span class="va">isDeploying</span> <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">let</span> <span class="va">cdkService</span><span class="op">:</span> CDKService</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">let</span> <span class="va">healthService</span><span class="op">:</span> HealthCheckService</span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">let</span> <span class="va">auditLogger</span><span class="op">:</span> AuditLogger</span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">let</span> <span class="va">localStorage</span><span class="op">:</span> LocalStorageManager</span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">func</span> <span class="fu">startDeployment</span><span class="op">(</span><span class="va">config</span><span class="op">:</span> <span class="dt">DeploymentConfiguration</span><span class="op">)</span> <span class="fu">async</span> <span class="kw">throws</span> <span class="op">{</span></span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">guard</span> <span class="op">!</span>isDeploying <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a>            <span class="kw">throw</span> DeploymentError<span class="op">.</span>alreadyInProgress</span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a>        isDeploying <span class="op">=</span> <span class="kw">true</span></span>
<span id="cb76-18"><a href="#cb76-18" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">deployment</span> <span class="op">=</span> Deployment<span class="op">(</span></span>
<span id="cb76-19"><a href="#cb76-19" aria-hidden="true" tabindex="-1"></a>            id<span class="op">:</span> UUID<span class="op">(),</span></span>
<span id="cb76-20"><a href="#cb76-20" aria-hidden="true" tabindex="-1"></a>            configuration<span class="op">:</span> config<span class="op">,</span></span>
<span id="cb76-21"><a href="#cb76-21" aria-hidden="true" tabindex="-1"></a>            status<span class="op">:</span> <span class="op">.</span>preparing<span class="op">,</span></span>
<span id="cb76-22"><a href="#cb76-22" aria-hidden="true" tabindex="-1"></a>            stackStatuses<span class="op">:</span> <span class="op">[:],</span></span>
<span id="cb76-23"><a href="#cb76-23" aria-hidden="true" tabindex="-1"></a>            startedAt<span class="op">:</span> Date<span class="op">()</span></span>
<span id="cb76-24"><a href="#cb76-24" aria-hidden="true" tabindex="-1"></a>        <span class="op">)</span></span>
<span id="cb76-25"><a href="#cb76-25" aria-hidden="true" tabindex="-1"></a>        currentDeployment <span class="op">=</span> deployment</span>
<span id="cb76-26"><a href="#cb76-26" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb76-27"><a href="#cb76-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">do</span> <span class="op">{</span></span>
<span id="cb76-28"><a href="#cb76-28" aria-hidden="true" tabindex="-1"></a>            <span class="co">// 1. Validate configuration</span></span>
<span id="cb76-29"><a href="#cb76-29" aria-hidden="true" tabindex="-1"></a>            <span class="cf">try</span> <span class="cf">await</span> validateConfiguration<span class="op">(</span>config<span class="op">)</span></span>
<span id="cb76-30"><a href="#cb76-30" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb76-31"><a href="#cb76-31" aria-hidden="true" tabindex="-1"></a>            <span class="co">// 2. Acquire deployment lock</span></span>
<span id="cb76-32"><a href="#cb76-32" aria-hidden="true" tabindex="-1"></a>            <span class="cf">try</span> <span class="cf">await</span> acquireLock<span class="op">(</span>config<span class="op">.</span>appId<span class="op">)</span></span>
<span id="cb76-33"><a href="#cb76-33" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb76-34"><a href="#cb76-34" aria-hidden="true" tabindex="-1"></a>            <span class="co">// 3. Deploy stacks</span></span>
<span id="cb76-35"><a href="#cb76-35" aria-hidden="true" tabindex="-1"></a>            currentDeployment<span class="op">?.</span>status <span class="op">=</span> <span class="op">.</span>deploying</span>
<span id="cb76-36"><a href="#cb76-36" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> <span class="va">result</span> <span class="op">=</span> <span class="cf">try</span> <span class="cf">await</span> cdkService<span class="op">.</span>deployAllStacks<span class="op">(</span></span>
<span id="cb76-37"><a href="#cb76-37" aria-hidden="true" tabindex="-1"></a>                config<span class="op">:</span> config<span class="op">,</span></span>
<span id="cb76-38"><a href="#cb76-38" aria-hidden="true" tabindex="-1"></a>                credentials<span class="op">:</span> <span class="cf">try</span> <span class="cf">await</span> getCredentials<span class="op">(),</span></span>
<span id="cb76-39"><a href="#cb76-39" aria-hidden="true" tabindex="-1"></a>                progressHandler<span class="op">:</span> <span class="op">{</span> <span class="op">[</span><span class="kw">weak</span> <span class="kw">self</span><span class="op">]</span> stack<span class="op">,</span> status <span class="cf">in</span></span>
<span id="cb76-40"><a href="#cb76-40" aria-hidden="true" tabindex="-1"></a>                    Task <span class="op">{</span> <span class="at">@MainActor</span> <span class="cf">in</span></span>
<span id="cb76-41"><a href="#cb76-41" aria-hidden="true" tabindex="-1"></a>                        <span class="kw">self</span><span class="op">?.</span>currentDeployment<span class="op">?.</span>stackStatuses<span class="op">[</span>stack<span class="op">]</span> <span class="op">=</span> status</span>
<span id="cb76-42"><a href="#cb76-42" aria-hidden="true" tabindex="-1"></a>                    <span class="op">}</span></span>
<span id="cb76-43"><a href="#cb76-43" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb76-44"><a href="#cb76-44" aria-hidden="true" tabindex="-1"></a>            <span class="op">)</span></span>
<span id="cb76-45"><a href="#cb76-45" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb76-46"><a href="#cb76-46" aria-hidden="true" tabindex="-1"></a>            <span class="co">// 4. Verify deployment</span></span>
<span id="cb76-47"><a href="#cb76-47" aria-hidden="true" tabindex="-1"></a>            currentDeployment<span class="op">?.</span>status <span class="op">=</span> <span class="op">.</span>verifying</span>
<span id="cb76-48"><a href="#cb76-48" aria-hidden="true" tabindex="-1"></a>            <span class="cf">try</span> <span class="cf">await</span> healthService<span class="op">.</span>verifyDeployment<span class="op">(</span>result<span class="op">)</span></span>
<span id="cb76-49"><a href="#cb76-49" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb76-50"><a href="#cb76-50" aria-hidden="true" tabindex="-1"></a>            <span class="co">// 5. Complete</span></span>
<span id="cb76-51"><a href="#cb76-51" aria-hidden="true" tabindex="-1"></a>            currentDeployment<span class="op">?.</span>status <span class="op">=</span> <span class="op">.</span>completed</span>
<span id="cb76-52"><a href="#cb76-52" aria-hidden="true" tabindex="-1"></a>            currentDeployment<span class="op">?.</span>completedAt <span class="op">=</span> Date<span class="op">()</span></span>
<span id="cb76-53"><a href="#cb76-53" aria-hidden="true" tabindex="-1"></a>            currentDeployment<span class="op">?.</span>outputs <span class="op">=</span> result<span class="op">.</span>flatOutputs</span>
<span id="cb76-54"><a href="#cb76-54" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb76-55"><a href="#cb76-55" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">catch</span> <span class="op">{</span></span>
<span id="cb76-56"><a href="#cb76-56" aria-hidden="true" tabindex="-1"></a>            currentDeployment<span class="op">?.</span>status <span class="op">=</span> <span class="op">.</span>failed</span>
<span id="cb76-57"><a href="#cb76-57" aria-hidden="true" tabindex="-1"></a>            currentDeployment<span class="op">?.</span>errorMessage <span class="op">=</span> error<span class="op">.</span>localizedDescription</span>
<span id="cb76-58"><a href="#cb76-58" aria-hidden="true" tabindex="-1"></a>            <span class="kw">throw</span> error</span>
<span id="cb76-59"><a href="#cb76-59" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> finally <span class="op">{</span></span>
<span id="cb76-60"><a href="#cb76-60" aria-hidden="true" tabindex="-1"></a>            isDeploying <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb76-61"><a href="#cb76-61" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="kw">let</span> <span class="va">deployment</span> <span class="op">=</span> currentDeployment <span class="op">{</span></span>
<span id="cb76-62"><a href="#cb76-62" aria-hidden="true" tabindex="-1"></a>                deploymentHistory<span class="op">.</span>append<span class="op">(</span>deployment<span class="op">)</span></span>
<span id="cb76-63"><a href="#cb76-63" aria-hidden="true" tabindex="-1"></a>                <span class="cf">try</span><span class="op">?</span> <span class="cf">await</span> localStorage<span class="op">.</span>saveDeployment<span class="op">(</span>deployment<span class="op">)</span></span>
<span id="cb76-64"><a href="#cb76-64" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb76-65"><a href="#cb76-65" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb76-66"><a href="#cb76-66" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb76-67"><a href="#cb76-67" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb76-68"><a href="#cb76-68" aria-hidden="true" tabindex="-1"></a>    <span class="kw">func</span> <span class="fu">rollback</span><span class="op">(</span><span class="va">deploymentId</span><span class="op">:</span> <span class="dt">UUID</span><span class="op">)</span> <span class="fu">async</span> <span class="kw">throws</span> <span class="op">{</span></span>
<span id="cb76-69"><a href="#cb76-69" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Rollback implementation</span></span>
<span id="cb76-70"><a href="#cb76-70" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb76-71"><a href="#cb76-71" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="aiassistantservice.swift">AIAssistantService.swift</h3>
<p>AI-powered deployment assistant.</p>
<div class="sourceCode" id="cb77"><pre
class="sourceCode swift"><code class="sourceCode swift"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="cf">actor</span> AIAssistantService <span class="op">{</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">let</span> <span class="va">apiService</span><span class="op">:</span> APIService</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> AssistantResponse<span class="op">:</span> <span class="dt">Sendable</span> <span class="op">{</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">message</span><span class="op">:</span> String</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">suggestions</span><span class="op">:</span> <span class="op">[</span>Suggestion<span class="op">]</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">actions</span><span class="op">:</span> <span class="op">[</span>SuggestedAction<span class="op">]</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">enum</span> SuggestedAction<span class="op">:</span> <span class="dt">Sendable</span> <span class="op">{</span></span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> deployStack<span class="op">(</span>StackName<span class="op">)</span></span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> checkHealth</span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> viewLogs<span class="op">(</span>String<span class="op">)</span></span>
<span id="cb77-14"><a href="#cb77-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> runDiagnostics</span>
<span id="cb77-15"><a href="#cb77-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> contactSupport</span>
<span id="cb77-16"><a href="#cb77-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb77-17"><a href="#cb77-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb77-18"><a href="#cb77-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Get deployment guidance</span></span>
<span id="cb77-19"><a href="#cb77-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">func</span> <span class="fu">getDeploymentGuidance</span><span class="op">(</span></span>
<span id="cb77-20"><a href="#cb77-20" aria-hidden="true" tabindex="-1"></a>        <span class="va">for</span> <span class="va">config</span><span class="op">:</span> <span class="dt">DeploymentConfiguration</span><span class="op">,</span></span>
<span id="cb77-21"><a href="#cb77-21" aria-hidden="true" tabindex="-1"></a>        <span class="va">currentStatus</span><span class="op">:</span> <span class="dt">DeploymentStatus</span><span class="op">?</span></span>
<span id="cb77-22"><a href="#cb77-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">)</span> <span class="fu">async</span> <span class="kw">throws</span> -&gt; <span class="fu">AssistantResponse</span> <span class="op">{</span></span>
<span id="cb77-23"><a href="#cb77-23" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">prompt</span> <span class="op">=</span> buildGuidancePrompt<span class="op">(</span>config<span class="op">:</span> config<span class="op">,</span> status<span class="op">:</span> currentStatus<span class="op">)</span></span>
<span id="cb77-24"><a href="#cb77-24" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">response</span> <span class="op">=</span> <span class="cf">try</span> <span class="cf">await</span> apiService<span class="op">.</span>chat<span class="op">(</span></span>
<span id="cb77-25"><a href="#cb77-25" aria-hidden="true" tabindex="-1"></a>            messages<span class="op">:</span> <span class="op">[.</span><span class="kw">init</span><span class="op">(</span>role<span class="op">:</span> <span class="op">.</span>user<span class="op">,</span> content<span class="op">:</span> prompt<span class="op">)],</span></span>
<span id="cb77-26"><a href="#cb77-26" aria-hidden="true" tabindex="-1"></a>            model<span class="op">:</span> <span class="st">&quot;anthropic/claude-3-haiku&quot;</span></span>
<span id="cb77-27"><a href="#cb77-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">)</span></span>
<span id="cb77-28"><a href="#cb77-28" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> parseAssistantResponse<span class="op">(</span>response<span class="op">)</span></span>
<span id="cb77-29"><a href="#cb77-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb77-30"><a href="#cb77-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb77-31"><a href="#cb77-31" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Diagnose deployment error</span></span>
<span id="cb77-32"><a href="#cb77-32" aria-hidden="true" tabindex="-1"></a>    <span class="kw">func</span> <span class="fu">diagnoseError</span><span class="op">(</span></span>
<span id="cb77-33"><a href="#cb77-33" aria-hidden="true" tabindex="-1"></a>        <span class="va">error</span><span class="op">:</span> <span class="dt">Error</span><span class="op">,</span></span>
<span id="cb77-34"><a href="#cb77-34" aria-hidden="true" tabindex="-1"></a>        <span class="va">stackName</span><span class="op">:</span> <span class="dt">StackName</span><span class="op">,</span></span>
<span id="cb77-35"><a href="#cb77-35" aria-hidden="true" tabindex="-1"></a>        <span class="va">logs</span><span class="op">:</span> <span class="dt">String</span></span>
<span id="cb77-36"><a href="#cb77-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">)</span> <span class="fu">async</span> <span class="kw">throws</span> -&gt; <span class="fu">AssistantResponse</span> <span class="op">{</span></span>
<span id="cb77-37"><a href="#cb77-37" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">prompt</span> <span class="op">=</span> <span class="st">&quot;&quot;&quot;</span></span>
<span id="cb77-38"><a href="#cb77-38" aria-hidden="true" tabindex="-1"></a><span class="st">        Analyze this AWS CDK deployment error and provide:</span></span>
<span id="cb77-39"><a href="#cb77-39" aria-hidden="true" tabindex="-1"></a><span class="st">        1. Root cause analysis</span></span>
<span id="cb77-40"><a href="#cb77-40" aria-hidden="true" tabindex="-1"></a><span class="st">        2. Specific fix steps</span></span>
<span id="cb77-41"><a href="#cb77-41" aria-hidden="true" tabindex="-1"></a><span class="st">        3. Prevention recommendations</span></span>
<span id="cb77-42"><a href="#cb77-42" aria-hidden="true" tabindex="-1"></a><span class="st">        </span></span>
<span id="cb77-43"><a href="#cb77-43" aria-hidden="true" tabindex="-1"></a><span class="st">        Stack: </span><span class="er">\(</span><span class="st">stackName.rawValue)</span></span>
<span id="cb77-44"><a href="#cb77-44" aria-hidden="true" tabindex="-1"></a><span class="st">        Error: </span><span class="er">\(</span><span class="st">error.localizedDescription)</span></span>
<span id="cb77-45"><a href="#cb77-45" aria-hidden="true" tabindex="-1"></a><span class="st">        Logs:</span></span>
<span id="cb77-46"><a href="#cb77-46" aria-hidden="true" tabindex="-1"></a><span class="st">        </span><span class="er">\(</span><span class="st">logs.prefix(2000))</span></span>
<span id="cb77-47"><a href="#cb77-47" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;&quot;&quot;</span></span>
<span id="cb77-48"><a href="#cb77-48" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb77-49"><a href="#cb77-49" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">response</span> <span class="op">=</span> <span class="cf">try</span> <span class="cf">await</span> apiService<span class="op">.</span>chat<span class="op">(</span></span>
<span id="cb77-50"><a href="#cb77-50" aria-hidden="true" tabindex="-1"></a>            messages<span class="op">:</span> <span class="op">[.</span><span class="kw">init</span><span class="op">(</span>role<span class="op">:</span> <span class="op">.</span>user<span class="op">,</span> content<span class="op">:</span> prompt<span class="op">)],</span></span>
<span id="cb77-51"><a href="#cb77-51" aria-hidden="true" tabindex="-1"></a>            model<span class="op">:</span> <span class="st">&quot;anthropic/claude-3-5-sonnet&quot;</span></span>
<span id="cb77-52"><a href="#cb77-52" aria-hidden="true" tabindex="-1"></a>        <span class="op">)</span></span>
<span id="cb77-53"><a href="#cb77-53" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> parseAssistantResponse<span class="op">(</span>response<span class="op">)</span></span>
<span id="cb77-54"><a href="#cb77-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb77-55"><a href="#cb77-55" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="localstoragemanager.swift">LocalStorageManager.swift</h3>
<p>Encrypted local storage using SQLCipher.</p>
<div class="sourceCode" id="cb78"><pre
class="sourceCode swift"><code class="sourceCode swift"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="cf">actor</span> LocalStorageManager <span class="op">{</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">let</span> <span class="va">db</span><span class="op">:</span> Connection</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">let</span> <span class="va">encryptionKey</span><span class="op">:</span> String</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">init</span><span class="op">()</span> <span class="kw">throws</span> <span class="op">{</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">path</span> <span class="op">=</span> LocalStorageManager<span class="op">.</span>databasePath</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>        db <span class="op">=</span> <span class="cf">try</span> Connection<span class="op">(</span>path<span class="op">)</span></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>        encryptionKey <span class="op">=</span> <span class="cf">try</span> KeychainService<span class="op">.</span>getOrCreateDatabaseKey<span class="op">()</span></span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span> db<span class="op">.</span>key<span class="op">(</span>encryptionKey<span class="op">)</span></span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span> createTablesIfNeeded<span class="op">()</span></span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Tables</span></span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">func</span> <span class="fu">createTablesIfNeeded</span><span class="op">()</span> <span class="kw">throws</span> <span class="op">{</span></span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span> db<span class="op">.</span>execute<span class="op">(</span><span class="st">&quot;&quot;&quot;</span></span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a><span class="st">            CREATE TABLE IF NOT EXISTS deployments (</span></span>
<span id="cb78-17"><a href="#cb78-17" aria-hidden="true" tabindex="-1"></a><span class="st">                id TEXT PRIMARY KEY,</span></span>
<span id="cb78-18"><a href="#cb78-18" aria-hidden="true" tabindex="-1"></a><span class="st">                data BLOB NOT NULL,</span></span>
<span id="cb78-19"><a href="#cb78-19" aria-hidden="true" tabindex="-1"></a><span class="st">                created_at INTEGER NOT NULL</span></span>
<span id="cb78-20"><a href="#cb78-20" aria-hidden="true" tabindex="-1"></a><span class="st">            );</span></span>
<span id="cb78-21"><a href="#cb78-21" aria-hidden="true" tabindex="-1"></a><span class="st">            </span></span>
<span id="cb78-22"><a href="#cb78-22" aria-hidden="true" tabindex="-1"></a><span class="st">            CREATE TABLE IF NOT EXISTS credentials (</span></span>
<span id="cb78-23"><a href="#cb78-23" aria-hidden="true" tabindex="-1"></a><span class="st">                id TEXT PRIMARY KEY,</span></span>
<span id="cb78-24"><a href="#cb78-24" aria-hidden="true" tabindex="-1"></a><span class="st">                profile_name TEXT NOT NULL,</span></span>
<span id="cb78-25"><a href="#cb78-25" aria-hidden="true" tabindex="-1"></a><span class="st">                encrypted_data BLOB NOT NULL,</span></span>
<span id="cb78-26"><a href="#cb78-26" aria-hidden="true" tabindex="-1"></a><span class="st">                is_default INTEGER DEFAULT 0,</span></span>
<span id="cb78-27"><a href="#cb78-27" aria-hidden="true" tabindex="-1"></a><span class="st">                last_used INTEGER</span></span>
<span id="cb78-28"><a href="#cb78-28" aria-hidden="true" tabindex="-1"></a><span class="st">            );</span></span>
<span id="cb78-29"><a href="#cb78-29" aria-hidden="true" tabindex="-1"></a><span class="st">            </span></span>
<span id="cb78-30"><a href="#cb78-30" aria-hidden="true" tabindex="-1"></a><span class="st">            CREATE TABLE IF NOT EXISTS settings (</span></span>
<span id="cb78-31"><a href="#cb78-31" aria-hidden="true" tabindex="-1"></a><span class="st">                key TEXT PRIMARY KEY,</span></span>
<span id="cb78-32"><a href="#cb78-32" aria-hidden="true" tabindex="-1"></a><span class="st">                value TEXT NOT NULL</span></span>
<span id="cb78-33"><a href="#cb78-33" aria-hidden="true" tabindex="-1"></a><span class="st">            );</span></span>
<span id="cb78-34"><a href="#cb78-34" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;&quot;&quot;</span><span class="op">)</span></span>
<span id="cb78-35"><a href="#cb78-35" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb78-36"><a href="#cb78-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb78-37"><a href="#cb78-37" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Save deployment</span></span>
<span id="cb78-38"><a href="#cb78-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">func</span> <span class="fu">saveDeployment</span><span class="op">(</span><span class="va">_</span> <span class="va">deployment</span><span class="op">:</span> <span class="dt">Deployment</span><span class="op">)</span> <span class="kw">throws</span> <span class="op">{</span></span>
<span id="cb78-39"><a href="#cb78-39" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">data</span> <span class="op">=</span> <span class="cf">try</span> JSONEncoder<span class="op">().</span>encode<span class="op">(</span>deployment<span class="op">)</span></span>
<span id="cb78-40"><a href="#cb78-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span> db<span class="op">.</span>run<span class="op">(</span><span class="st">&quot;&quot;&quot;</span></span>
<span id="cb78-41"><a href="#cb78-41" aria-hidden="true" tabindex="-1"></a><span class="st">            INSERT OR REPLACE INTO deployments (id, data, created_at)</span></span>
<span id="cb78-42"><a href="#cb78-42" aria-hidden="true" tabindex="-1"></a><span class="st">            VALUES (?, ?, ?)</span></span>
<span id="cb78-43"><a href="#cb78-43" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;&quot;&quot;</span><span class="op">,</span> deployment<span class="op">.</span>id<span class="op">.</span>uuidString<span class="op">,</span> data<span class="op">,</span> Date<span class="op">().</span>timeIntervalSince1970<span class="op">)</span></span>
<span id="cb78-44"><a href="#cb78-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb78-45"><a href="#cb78-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb78-46"><a href="#cb78-46" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Get deployment history</span></span>
<span id="cb78-47"><a href="#cb78-47" aria-hidden="true" tabindex="-1"></a>    <span class="kw">func</span> <span class="fu">getDeploymentHistory</span><span class="op">()</span> <span class="kw">throws</span> -&gt; [<span class="fu">Deployment</span>] <span class="op">{</span></span>
<span id="cb78-48"><a href="#cb78-48" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">rows</span> <span class="op">=</span> <span class="cf">try</span> db<span class="op">.</span>prepare<span class="op">(</span><span class="st">&quot;&quot;&quot;</span></span>
<span id="cb78-49"><a href="#cb78-49" aria-hidden="true" tabindex="-1"></a><span class="st">            SELECT data FROM deployments ORDER BY created_at DESC LIMIT 100</span></span>
<span id="cb78-50"><a href="#cb78-50" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;&quot;&quot;</span><span class="op">)</span></span>
<span id="cb78-51"><a href="#cb78-51" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="cf">try</span> rows<span class="op">.</span>compactMap <span class="op">{</span> row <span class="cf">in</span></span>
<span id="cb78-52"><a href="#cb78-52" aria-hidden="true" tabindex="-1"></a>            <span class="cf">guard</span> <span class="kw">let</span> <span class="va">data</span> <span class="op">=</span> row<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="kw">as</span><span class="op">?</span> Data <span class="cf">else</span> <span class="op">{</span> <span class="kw">return</span> <span class="kw">nil</span> <span class="op">}</span></span>
<span id="cb78-53"><a href="#cb78-53" aria-hidden="true" tabindex="-1"></a>            <span class="kw">return</span> <span class="cf">try</span> JSONDecoder<span class="op">().</span>decode<span class="op">(</span>Deployment<span class="op">.</span><span class="kw">self</span><span class="op">,</span> from<span class="op">:</span> data<span class="op">)</span></span>
<span id="cb78-54"><a href="#cb78-54" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb78-55"><a href="#cb78-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb78-56"><a href="#cb78-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb78-57"><a href="#cb78-57" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Credential management</span></span>
<span id="cb78-58"><a href="#cb78-58" aria-hidden="true" tabindex="-1"></a>    <span class="kw">func</span> <span class="fu">saveCredentials</span><span class="op">(</span><span class="va">_</span> <span class="va">credentials</span><span class="op">:</span> <span class="dt">CredentialProfile</span><span class="op">)</span> <span class="kw">throws</span> <span class="op">{</span></span>
<span id="cb78-59"><a href="#cb78-59" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">encrypted</span> <span class="op">=</span> <span class="cf">try</span> encrypt<span class="op">(</span>credentials<span class="op">)</span></span>
<span id="cb78-60"><a href="#cb78-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span> db<span class="op">.</span>run<span class="op">(</span><span class="st">&quot;&quot;&quot;</span></span>
<span id="cb78-61"><a href="#cb78-61" aria-hidden="true" tabindex="-1"></a><span class="st">            INSERT OR REPLACE INTO credentials (id, profile_name, encrypted_data, is_default, last_used)</span></span>
<span id="cb78-62"><a href="#cb78-62" aria-hidden="true" tabindex="-1"></a><span class="st">            VALUES (?, ?, ?, ?, ?)</span></span>
<span id="cb78-63"><a href="#cb78-63" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;&quot;&quot;</span><span class="op">,</span> credentials<span class="op">.</span>id<span class="op">.</span>uuidString<span class="op">,</span> credentials<span class="op">.</span>name<span class="op">,</span> encrypted<span class="op">,</span> </span>
<span id="cb78-64"><a href="#cb78-64" aria-hidden="true" tabindex="-1"></a>             credentials<span class="op">.</span>isDefault <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">0</span><span class="op">,</span> credentials<span class="op">.</span>lastUsed<span class="op">?.</span>timeIntervalSince1970<span class="op">)</span></span>
<span id="cb78-65"><a href="#cb78-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb78-66"><a href="#cb78-66" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="healthcheckservice.swift">HealthCheckService.swift</h3>
<p>Deployment health verification.</p>
<div class="sourceCode" id="cb79"><pre
class="sourceCode swift"><code class="sourceCode swift"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="cf">actor</span> HealthCheckService <span class="op">{</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> HealthCheckResult<span class="op">:</span> <span class="dt">Sendable</span> <span class="op">{</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">service</span><span class="op">:</span> String</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">status</span><span class="op">:</span> HealthStatus</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">latencyMs</span><span class="op">:</span> Int<span class="op">?</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">message</span><span class="op">:</span> String<span class="op">?</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">enum</span> HealthStatus<span class="op">:</span> <span class="dt">Sendable</span> <span class="op">{</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> healthy</span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> degraded</span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> unhealthy</span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> unknown</span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">func</span> <span class="fu">verifyDeployment</span><span class="op">(</span><span class="va">_</span> <span class="va">result</span><span class="op">:</span> <span class="dt">DeploymentResult</span><span class="op">)</span> <span class="fu">async</span> <span class="kw">throws</span> <span class="op">{</span></span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a>        <span class="kw">var</span> <span class="va">checks</span><span class="op">:</span> <span class="op">[</span>HealthCheckResult<span class="op">]</span> <span class="op">=</span> <span class="op">[]</span></span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Check API Gateway</span></span>
<span id="cb79-20"><a href="#cb79-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">let</span> <span class="va">apiUrl</span> <span class="op">=</span> result<span class="op">.</span>outputs<span class="op">[</span><span class="st">&quot;ApiUrl&quot;</span><span class="op">]</span> <span class="op">{</span></span>
<span id="cb79-21"><a href="#cb79-21" aria-hidden="true" tabindex="-1"></a>            checks<span class="op">.</span>append<span class="op">(</span><span class="cf">await</span> checkEndpoint<span class="op">(</span>apiUrl <span class="op">+</span> <span class="st">&quot;/health&quot;</span><span class="op">,</span> service<span class="op">:</span> <span class="st">&quot;API Gateway&quot;</span><span class="op">))</span></span>
<span id="cb79-22"><a href="#cb79-22" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb79-23"><a href="#cb79-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb79-24"><a href="#cb79-24" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Check LiteLLM</span></span>
<span id="cb79-25"><a href="#cb79-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">let</span> <span class="va">litellmUrl</span> <span class="op">=</span> result<span class="op">.</span>outputs<span class="op">[</span><span class="st">&quot;LiteLLMUrl&quot;</span><span class="op">]</span> <span class="op">{</span></span>
<span id="cb79-26"><a href="#cb79-26" aria-hidden="true" tabindex="-1"></a>            checks<span class="op">.</span>append<span class="op">(</span><span class="cf">await</span> checkEndpoint<span class="op">(</span>litellmUrl <span class="op">+</span> <span class="st">&quot;/health&quot;</span><span class="op">,</span> service<span class="op">:</span> <span class="st">&quot;LiteLLM&quot;</span><span class="op">))</span></span>
<span id="cb79-27"><a href="#cb79-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb79-28"><a href="#cb79-28" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb79-29"><a href="#cb79-29" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Check Database</span></span>
<span id="cb79-30"><a href="#cb79-30" aria-hidden="true" tabindex="-1"></a>        checks<span class="op">.</span>append<span class="op">(</span><span class="cf">await</span> checkDatabase<span class="op">(</span>result<span class="op">.</span>outputs<span class="op">[</span><span class="st">&quot;DatabaseEndpoint&quot;</span><span class="op">]))</span></span>
<span id="cb79-31"><a href="#cb79-31" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb79-32"><a href="#cb79-32" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Evaluate results</span></span>
<span id="cb79-33"><a href="#cb79-33" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">unhealthy</span> <span class="op">=</span> checks<span class="op">.</span>filter <span class="op">{</span> $<span class="fl">0.</span>status <span class="op">==</span> <span class="op">.</span>unhealthy <span class="op">}</span></span>
<span id="cb79-34"><a href="#cb79-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">!</span>unhealthy<span class="op">.</span>isEmpty <span class="op">{</span></span>
<span id="cb79-35"><a href="#cb79-35" aria-hidden="true" tabindex="-1"></a>            <span class="kw">throw</span> HealthCheckError<span class="op">.</span>servicesUnhealthy<span class="op">(</span>unhealthy<span class="op">)</span></span>
<span id="cb79-36"><a href="#cb79-36" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb79-37"><a href="#cb79-37" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb79-38"><a href="#cb79-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb79-39"><a href="#cb79-39" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">func</span> <span class="fu">checkEndpoint</span><span class="op">(</span><span class="va">_</span> <span class="va">url</span><span class="op">:</span> <span class="dt">String</span><span class="op">,</span> <span class="va">service</span><span class="op">:</span> <span class="dt">String</span><span class="op">)</span> <span class="fu">async</span> -&gt; <span class="fu">HealthCheckResult</span> <span class="op">{</span></span>
<span id="cb79-40"><a href="#cb79-40" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> <span class="va">start</span> <span class="op">=</span> Date<span class="op">()</span></span>
<span id="cb79-41"><a href="#cb79-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">do</span> <span class="op">{</span></span>
<span id="cb79-42"><a href="#cb79-42" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> (<span class="va">_</span><span class="op">,</span> response<span class="op">)</span> <span class="op">=</span> <span class="cf">try</span> <span class="cf">await</span> URLSession<span class="op">.</span>shared<span class="op">.</span>data<span class="op">(</span>from<span class="op">:</span> URL<span class="op">(</span>string<span class="op">:</span> url<span class="op">)!)</span></span>
<span id="cb79-43"><a href="#cb79-43" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> <span class="va">httpResponse</span> <span class="op">=</span> response <span class="kw">as</span><span class="op">!</span> HTTPURLResponse</span>
<span id="cb79-44"><a href="#cb79-44" aria-hidden="true" tabindex="-1"></a>            <span class="kw">let</span> <span class="va">latency</span> <span class="op">=</span> Int<span class="op">(</span>Date<span class="op">().</span>timeIntervalSince<span class="op">(</span>start<span class="op">)</span> <span class="op">*</span> <span class="dv">1000</span><span class="op">)</span></span>
<span id="cb79-45"><a href="#cb79-45" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb79-46"><a href="#cb79-46" aria-hidden="true" tabindex="-1"></a>            <span class="kw">return</span> HealthCheckResult<span class="op">(</span></span>
<span id="cb79-47"><a href="#cb79-47" aria-hidden="true" tabindex="-1"></a>                service<span class="op">:</span> service<span class="op">,</span></span>
<span id="cb79-48"><a href="#cb79-48" aria-hidden="true" tabindex="-1"></a>                status<span class="op">:</span> httpResponse<span class="op">.</span>statusCode <span class="op">==</span> <span class="dv">200</span> <span class="op">?</span> <span class="op">.</span>healthy <span class="op">:</span> <span class="op">.</span>degraded<span class="op">,</span></span>
<span id="cb79-49"><a href="#cb79-49" aria-hidden="true" tabindex="-1"></a>                latencyMs<span class="op">:</span> latency<span class="op">,</span></span>
<span id="cb79-50"><a href="#cb79-50" aria-hidden="true" tabindex="-1"></a>                message<span class="op">:</span> <span class="kw">nil</span></span>
<span id="cb79-51"><a href="#cb79-51" aria-hidden="true" tabindex="-1"></a>            <span class="op">)</span></span>
<span id="cb79-52"><a href="#cb79-52" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">catch</span> <span class="op">{</span></span>
<span id="cb79-53"><a href="#cb79-53" aria-hidden="true" tabindex="-1"></a>            <span class="kw">return</span> HealthCheckResult<span class="op">(</span></span>
<span id="cb79-54"><a href="#cb79-54" aria-hidden="true" tabindex="-1"></a>                service<span class="op">:</span> service<span class="op">,</span></span>
<span id="cb79-55"><a href="#cb79-55" aria-hidden="true" tabindex="-1"></a>                status<span class="op">:</span> <span class="op">.</span>unhealthy<span class="op">,</span></span>
<span id="cb79-56"><a href="#cb79-56" aria-hidden="true" tabindex="-1"></a>                latencyMs<span class="op">:</span> <span class="kw">nil</span><span class="op">,</span></span>
<span id="cb79-57"><a href="#cb79-57" aria-hidden="true" tabindex="-1"></a>                message<span class="op">:</span> error<span class="op">.</span>localizedDescription</span>
<span id="cb79-58"><a href="#cb79-58" aria-hidden="true" tabindex="-1"></a>            <span class="op">)</span></span>
<span id="cb79-59"><a href="#cb79-59" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb79-60"><a href="#cb79-60" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb79-61"><a href="#cb79-61" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h2 id="components">Components</h2>
<h3 id="macoscomponents.swift">MacOSComponents.swift</h3>
<p>Design tokens and reusable components.</p>
<div class="sourceCode" id="cb80"><pre
class="sourceCode swift"><code class="sourceCode swift"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Design Tokens</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="kw">enum</span> RadiantSpacing <span class="op">{</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">static</span> <span class="kw">let</span> <span class="va">xxs</span><span class="op">:</span> CGFloat <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">static</span> <span class="kw">let</span> <span class="va">xs</span><span class="op">:</span> CGFloat <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">static</span> <span class="kw">let</span> <span class="va">sm</span><span class="op">:</span> CGFloat <span class="op">=</span> <span class="dv">8</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">static</span> <span class="kw">let</span> <span class="va">md</span><span class="op">:</span> CGFloat <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">static</span> <span class="kw">let</span> <span class="va">lg</span><span class="op">:</span> CGFloat <span class="op">=</span> <span class="dv">16</span></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">static</span> <span class="kw">let</span> <span class="va">xl</span><span class="op">:</span> CGFloat <span class="op">=</span> <span class="dv">24</span></span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a><span class="kw">enum</span> RadiantRadius <span class="op">{</span></span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">static</span> <span class="kw">let</span> <span class="va">sm</span><span class="op">:</span> CGFloat <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">static</span> <span class="kw">let</span> <span class="va">md</span><span class="op">:</span> CGFloat <span class="op">=</span> <span class="dv">8</span></span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">static</span> <span class="kw">let</span> <span class="va">lg</span><span class="op">:</span> CGFloat <span class="op">=</span> <span class="dv">12</span></span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">static</span> <span class="kw">let</span> <span class="va">xl</span><span class="op">:</span> CGFloat <span class="op">=</span> <span class="dv">16</span></span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-18"><a href="#cb80-18" aria-hidden="true" tabindex="-1"></a><span class="co">// Status Badge Component</span></span>
<span id="cb80-19"><a href="#cb80-19" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> StatusBadge<span class="op">:</span> <span class="dt">View</span> <span class="op">{</span></span>
<span id="cb80-20"><a href="#cb80-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="va">status</span><span class="op">:</span> String</span>
<span id="cb80-21"><a href="#cb80-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="va">color</span><span class="op">:</span> Color</span>
<span id="cb80-22"><a href="#cb80-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb80-23"><a href="#cb80-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">body</span><span class="op">:</span> some View <span class="op">{</span></span>
<span id="cb80-24"><a href="#cb80-24" aria-hidden="true" tabindex="-1"></a>        Text<span class="op">(</span>status<span class="op">)</span></span>
<span id="cb80-25"><a href="#cb80-25" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>font<span class="op">(.</span>caption<span class="op">)</span></span>
<span id="cb80-26"><a href="#cb80-26" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>fontWeight<span class="op">(.</span>medium<span class="op">)</span></span>
<span id="cb80-27"><a href="#cb80-27" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>padding<span class="op">(.</span>horizontal<span class="op">,</span> RadiantSpacing<span class="op">.</span>sm<span class="op">)</span></span>
<span id="cb80-28"><a href="#cb80-28" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>padding<span class="op">(.</span>vertical<span class="op">,</span> RadiantSpacing<span class="op">.</span>xxs<span class="op">)</span></span>
<span id="cb80-29"><a href="#cb80-29" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>background<span class="op">(</span>color<span class="op">.</span>opacity<span class="op">(</span><span class="fl">0.15</span><span class="op">))</span></span>
<span id="cb80-30"><a href="#cb80-30" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>foregroundColor<span class="op">(</span>color<span class="op">)</span></span>
<span id="cb80-31"><a href="#cb80-31" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>cornerRadius<span class="op">(</span>RadiantRadius<span class="op">.</span>sm<span class="op">)</span></span>
<span id="cb80-32"><a href="#cb80-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb80-33"><a href="#cb80-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb80-34"><a href="#cb80-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-35"><a href="#cb80-35" aria-hidden="true" tabindex="-1"></a><span class="co">// Progress Indicator</span></span>
<span id="cb80-36"><a href="#cb80-36" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> DeploymentProgressView<span class="op">:</span> <span class="dt">View</span> <span class="op">{</span></span>
<span id="cb80-37"><a href="#cb80-37" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="va">stacks</span><span class="op">:</span> <span class="op">[</span>StackName<span class="op">]</span></span>
<span id="cb80-38"><a href="#cb80-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> <span class="va">statuses</span><span class="op">:</span> <span class="op">[</span>StackName<span class="op">:</span> StackStatus<span class="op">]</span></span>
<span id="cb80-39"><a href="#cb80-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb80-40"><a href="#cb80-40" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">body</span><span class="op">:</span> some View <span class="op">{</span></span>
<span id="cb80-41"><a href="#cb80-41" aria-hidden="true" tabindex="-1"></a>        VStack<span class="op">(</span>alignment<span class="op">:</span> <span class="op">.</span>leading<span class="op">,</span> spacing<span class="op">:</span> RadiantSpacing<span class="op">.</span>sm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb80-42"><a href="#cb80-42" aria-hidden="true" tabindex="-1"></a>            ForEach<span class="op">(</span>stacks<span class="op">,</span> id<span class="op">:</span> \<span class="op">.</span><span class="kw">self</span><span class="op">)</span> <span class="op">{</span> stack <span class="cf">in</span></span>
<span id="cb80-43"><a href="#cb80-43" aria-hidden="true" tabindex="-1"></a>                HStack <span class="op">{</span></span>
<span id="cb80-44"><a href="#cb80-44" aria-hidden="true" tabindex="-1"></a>                    statusIcon<span class="op">(</span><span class="cf">for</span><span class="op">:</span> statuses<span class="op">[</span>stack<span class="op">]</span> <span class="op">??</span> <span class="op">.</span>pending<span class="op">)</span></span>
<span id="cb80-45"><a href="#cb80-45" aria-hidden="true" tabindex="-1"></a>                    Text<span class="op">(</span>stack<span class="op">.</span>rawValue<span class="op">)</span></span>
<span id="cb80-46"><a href="#cb80-46" aria-hidden="true" tabindex="-1"></a>                        <span class="op">.</span>font<span class="op">(.</span>system<span class="op">(.</span>body<span class="op">,</span> design<span class="op">:</span> <span class="op">.</span>monospaced<span class="op">))</span></span>
<span id="cb80-47"><a href="#cb80-47" aria-hidden="true" tabindex="-1"></a>                    Spacer<span class="op">()</span></span>
<span id="cb80-48"><a href="#cb80-48" aria-hidden="true" tabindex="-1"></a>                    StatusBadge<span class="op">(</span></span>
<span id="cb80-49"><a href="#cb80-49" aria-hidden="true" tabindex="-1"></a>                        status<span class="op">:</span> <span class="op">(</span>statuses<span class="op">[</span>stack<span class="op">]</span> <span class="op">??</span> <span class="op">.</span>pending<span class="op">).</span>rawValue<span class="op">,</span></span>
<span id="cb80-50"><a href="#cb80-50" aria-hidden="true" tabindex="-1"></a>                        color<span class="op">:</span> statusColor<span class="op">(</span>statuses<span class="op">[</span>stack<span class="op">]</span> <span class="op">??</span> <span class="op">.</span>pending<span class="op">)</span></span>
<span id="cb80-51"><a href="#cb80-51" aria-hidden="true" tabindex="-1"></a>                    <span class="op">)</span></span>
<span id="cb80-52"><a href="#cb80-52" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb80-53"><a href="#cb80-53" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb80-54"><a href="#cb80-54" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb80-55"><a href="#cb80-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb80-56"><a href="#cb80-56" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="appcommands.swift">AppCommands.swift</h3>
<p>Menu bar commands with keyboard shortcuts.</p>
<div class="sourceCode" id="cb81"><pre
class="sourceCode swift"><code class="sourceCode swift"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> AppCommands<span class="op">:</span> <span class="dt">Commands</span> <span class="op">{</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">@ObservedObject</span> <span class="kw">var</span> <span class="va">appState</span><span class="op">:</span> AppState</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> <span class="va">body</span><span class="op">:</span> some Commands <span class="op">{</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>        CommandGroup<span class="op">(</span>replacing<span class="op">:</span> <span class="op">.</span>newItem<span class="op">)</span> <span class="op">{</span></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>            Button<span class="op">(</span><span class="st">&quot;New Deployment&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>                appState<span class="op">.</span>showNewDeploymentSheet <span class="op">=</span> <span class="kw">true</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>keyboardShortcut<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">,</span> modifiers<span class="op">:</span> <span class="op">.</span>command<span class="op">)</span></span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a>            Button<span class="op">(</span><span class="st">&quot;Import Configuration...&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a>                appState<span class="op">.</span>importConfiguration<span class="op">()</span></span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>keyboardShortcut<span class="op">(</span><span class="st">&quot;i&quot;</span><span class="op">,</span> modifiers<span class="op">:</span> <span class="op">[.</span>command<span class="op">,</span> <span class="op">.</span>shift<span class="op">])</span></span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb81-16"><a href="#cb81-16" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb81-17"><a href="#cb81-17" aria-hidden="true" tabindex="-1"></a>        CommandMenu<span class="op">(</span><span class="st">&quot;Deployment&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb81-18"><a href="#cb81-18" aria-hidden="true" tabindex="-1"></a>            Button<span class="op">(</span><span class="st">&quot;Deploy All Stacks&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb81-19"><a href="#cb81-19" aria-hidden="true" tabindex="-1"></a>                Task <span class="op">{</span> <span class="cf">await</span> appState<span class="op">.</span>deployAll<span class="op">()</span> <span class="op">}</span></span>
<span id="cb81-20"><a href="#cb81-20" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb81-21"><a href="#cb81-21" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>keyboardShortcut<span class="op">(</span><span class="st">&quot;d&quot;</span><span class="op">,</span> modifiers<span class="op">:</span> <span class="op">[.</span>command<span class="op">,</span> <span class="op">.</span>shift<span class="op">])</span></span>
<span id="cb81-22"><a href="#cb81-22" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>disabled<span class="op">(</span>appState<span class="op">.</span>isDeploying<span class="op">)</span></span>
<span id="cb81-23"><a href="#cb81-23" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb81-24"><a href="#cb81-24" aria-hidden="true" tabindex="-1"></a>            Button<span class="op">(</span><span class="st">&quot;Stop Deployment&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb81-25"><a href="#cb81-25" aria-hidden="true" tabindex="-1"></a>                appState<span class="op">.</span>stopDeployment<span class="op">()</span></span>
<span id="cb81-26"><a href="#cb81-26" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb81-27"><a href="#cb81-27" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>keyboardShortcut<span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">,</span> modifiers<span class="op">:</span> <span class="op">.</span>command<span class="op">)</span></span>
<span id="cb81-28"><a href="#cb81-28" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>disabled<span class="op">(!</span>appState<span class="op">.</span>isDeploying<span class="op">)</span></span>
<span id="cb81-29"><a href="#cb81-29" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb81-30"><a href="#cb81-30" aria-hidden="true" tabindex="-1"></a>            Divider<span class="op">()</span></span>
<span id="cb81-31"><a href="#cb81-31" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb81-32"><a href="#cb81-32" aria-hidden="true" tabindex="-1"></a>            Button<span class="op">(</span><span class="st">&quot;View Logs&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb81-33"><a href="#cb81-33" aria-hidden="true" tabindex="-1"></a>                appState<span class="op">.</span>showLogs <span class="op">=</span> <span class="kw">true</span></span>
<span id="cb81-34"><a href="#cb81-34" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb81-35"><a href="#cb81-35" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>keyboardShortcut<span class="op">(</span><span class="st">&quot;l&quot;</span><span class="op">,</span> modifiers<span class="op">:</span> <span class="op">[.</span>command<span class="op">,</span> <span class="op">.</span>option<span class="op">])</span></span>
<span id="cb81-36"><a href="#cb81-36" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb81-37"><a href="#cb81-37" aria-hidden="true" tabindex="-1"></a>            Button<span class="op">(</span><span class="st">&quot;Run Health Check&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb81-38"><a href="#cb81-38" aria-hidden="true" tabindex="-1"></a>                Task <span class="op">{</span> <span class="cf">await</span> appState<span class="op">.</span>runHealthCheck<span class="op">()</span> <span class="op">}</span></span>
<span id="cb81-39"><a href="#cb81-39" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb81-40"><a href="#cb81-40" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>keyboardShortcut<span class="op">(</span><span class="st">&quot;h&quot;</span><span class="op">,</span> modifiers<span class="op">:</span> <span class="op">[.</span>command<span class="op">,</span> <span class="op">.</span>shift<span class="op">])</span></span>
<span id="cb81-41"><a href="#cb81-41" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb81-42"><a href="#cb81-42" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb81-43"><a href="#cb81-43" aria-hidden="true" tabindex="-1"></a>        CommandMenu<span class="op">(</span><span class="st">&quot;AWS&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb81-44"><a href="#cb81-44" aria-hidden="true" tabindex="-1"></a>            Button<span class="op">(</span><span class="st">&quot;Switch Profile...&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb81-45"><a href="#cb81-45" aria-hidden="true" tabindex="-1"></a>                appState<span class="op">.</span>showProfileSwitcher <span class="op">=</span> <span class="kw">true</span></span>
<span id="cb81-46"><a href="#cb81-46" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb81-47"><a href="#cb81-47" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>keyboardShortcut<span class="op">(</span><span class="st">&quot;p&quot;</span><span class="op">,</span> modifiers<span class="op">:</span> <span class="op">[.</span>command<span class="op">,</span> <span class="op">.</span>option<span class="op">])</span></span>
<span id="cb81-48"><a href="#cb81-48" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb81-49"><a href="#cb81-49" aria-hidden="true" tabindex="-1"></a>            Button<span class="op">(</span><span class="st">&quot;Refresh Credentials&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb81-50"><a href="#cb81-50" aria-hidden="true" tabindex="-1"></a>                Task <span class="op">{</span> <span class="cf">await</span> appState<span class="op">.</span>refreshCredentials<span class="op">()</span> <span class="op">}</span></span>
<span id="cb81-51"><a href="#cb81-51" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb81-52"><a href="#cb81-52" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span>keyboardShortcut<span class="op">(</span><span class="st">&quot;r&quot;</span><span class="op">,</span> modifiers<span class="op">:</span> <span class="op">[.</span>command<span class="op">,</span> <span class="op">.</span>shift<span class="op">])</span></span>
<span id="cb81-53"><a href="#cb81-53" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb81-54"><a href="#cb81-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb81-55"><a href="#cb81-55" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h2 id="ui-patterns-10-macos-patterns">UI Patterns (10 macOS
Patterns)</h2>
<p>The Swift Deployer follows these macOS design patterns:</p>
<ol type="1">
<li><strong>NavigationSplitView</strong> - Sidebar + Content +
Inspector</li>
<li><strong>Liquid Glass</strong> - On navigation/controls only</li>
<li><strong>Toolbar-as-Command-Center</strong> - Grouped actions +
overflow</li>
<li><strong>Scroll Edge Effects</strong> - Floating UI legibility</li>
<li><strong>Master List → Detail</strong> - 3-level navigation</li>
<li><strong>Search as First-Class</strong> - Toolbar trailing
position</li>
<li><strong>Tables for Data</strong> - Lists for collections</li>
<li><strong>Multi-Select + Context Menus</strong> - Drag &amp; drop
support</li>
<li><strong>Full Menu Bar</strong> - Keyboard shortcuts</li>
<li><strong>Settings Window + Inspectors</strong> - macOS-native
patterns # Admin Dashboard Reference</li>
</ol>
<h2 id="dashboard-architecture">Dashboard Architecture</h2>
<h3 id="technology-stack-1">Technology Stack</h3>
<ul>
<li><strong>Framework:</strong> Next.js 14 (App Router)</li>
<li><strong>Language:</strong> TypeScript</li>
<li><strong>Styling:</strong> Tailwind CSS</li>
<li><strong>Components:</strong> shadcn/ui</li>
<li><strong>Icons:</strong> Lucide React</li>
<li><strong>State:</strong> React Query, Zustand</li>
<li><strong>Forms:</strong> React Hook Form, Zod</li>
</ul>
<h3 id="page-structure">Page Structure</h3>
<pre><code>apps/admin-dashboard/
├── app/
│   ├── layout.tsx              # Root layout
│   ├── page.tsx                # Landing/login
│   └── (dashboard)/            # Dashboard routes (43 pages)
│       ├── layout.tsx          # Dashboard layout with sidebar
│       ├── page.tsx            # Overview dashboard
│       └── [module]/page.tsx   # Individual modules
├── components/
│   ├── ui/                     # shadcn/ui components
│   ├── workflow-editor/        # Visual workflow editor
│   └── shared/                 # Shared components
└── lib/
    ├── api.ts                  # API client
    ├── auth.ts                 # Auth utilities
    └── utils.ts                # Helper functions</code></pre>
<hr />
<h2 id="complete-page-inventory-43-pages">Complete Page Inventory (43
Pages)</h2>
<h3 id="core-administration">Core Administration</h3>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 31%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr>
<th>Page</th>
<th>Route</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Overview</td>
<td><code>/</code></td>
<td>System health, key metrics, quick actions</td>
</tr>
<tr>
<td>Administrators</td>
<td><code>/administrators</code></td>
<td>Manage admin users, roles, permissions</td>
</tr>
<tr>
<td>Audit Logs</td>
<td><code>/audit-logs</code></td>
<td>View all system audit events</td>
</tr>
<tr>
<td>AWS Logs</td>
<td><code>/aws-logs</code></td>
<td>CloudWatch log viewer</td>
</tr>
<tr>
<td>Security</td>
<td><code>/security</code></td>
<td>Security settings, WAF, compliance</td>
</tr>
<tr>
<td>Settings</td>
<td><code>/settings</code></td>
<td>Platform configuration</td>
</tr>
<tr>
<td>System Config</td>
<td><code>/system-config</code></td>
<td>Advanced system settings</td>
</tr>
</tbody>
</table>
<h3 id="ai-models">AI &amp; Models</h3>
<table>
<thead>
<tr>
<th>Page</th>
<th>Route</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Models</td>
<td><code>/models</code></td>
<td>AI model configuration</td>
</tr>
<tr>
<td>Model Metadata</td>
<td><code>/model-metadata</code></td>
<td>Model capabilities &amp; pricing</td>
</tr>
<tr>
<td>User Models</td>
<td><code>/user-models</code></td>
<td>Per-tenant model access</td>
</tr>
<tr>
<td>Providers</td>
<td><code>/providers</code></td>
<td>AI provider management</td>
</tr>
</tbody>
</table>
<h3 id="orchestration">Orchestration</h3>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 31%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr>
<th>Page</th>
<th>Route</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Orchestration</td>
<td><code>/orchestration</code></td>
<td>Workflow management</td>
</tr>
<tr>
<td>Orchestration Patterns</td>
<td><code>/orchestration-patterns</code></td>
<td>49 patterns library</td>
</tr>
<tr>
<td>Orchestration Editor</td>
<td><code>/orchestration-patterns/editor</code></td>
<td>Visual workflow editor</td>
</tr>
</tbody>
</table>
<h3 id="think-tank">Think Tank</h3>
<table>
<thead>
<tr>
<th>Page</th>
<th>Route</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Think Tank</td>
<td><code>/thinktank</code></td>
<td>Session management</td>
</tr>
<tr>
<td>Cognition</td>
<td><code>/cognition</code></td>
<td>Cognitive settings</td>
</tr>
<tr>
<td>Cognitive Brain</td>
<td><code>/cognitive-brain</code></td>
<td>Brain configuration</td>
</tr>
<tr>
<td>Consciousness</td>
<td><code>/consciousness</code></td>
<td>Consciousness monitoring</td>
</tr>
<tr>
<td>Metacognition</td>
<td><code>/metacognition</code></td>
<td>Self-reflection settings</td>
</tr>
<tr>
<td>Planning</td>
<td><code>/planning</code></td>
<td>Goal planning</td>
</tr>
<tr>
<td>World Model</td>
<td><code>/world-model</code></td>
<td>World model state</td>
</tr>
</tbody>
</table>
<h3 id="billing-cost">Billing &amp; Cost</h3>
<table>
<thead>
<tr>
<th>Page</th>
<th>Route</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Billing</td>
<td><code>/billing</code></td>
<td>Revenue, invoices, subscriptions</td>
</tr>
<tr>
<td>Cost</td>
<td><code>/cost</code></td>
<td>Cost analytics, budgets</td>
</tr>
</tbody>
</table>
<h3 id="analytics-monitoring-1">Analytics &amp; Monitoring</h3>
<table>
<thead>
<tr>
<th>Page</th>
<th>Route</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Analytics</td>
<td><code>/analytics</code></td>
<td>Usage analytics</td>
</tr>
<tr>
<td>Reports</td>
<td><code>/reports</code></td>
<td>Generated reports</td>
</tr>
<tr>
<td>Health</td>
<td><code>/health</code></td>
<td>System health dashboard</td>
</tr>
<tr>
<td>Deployments</td>
<td><code>/deployments</code></td>
<td>Deployment history</td>
</tr>
</tbody>
</table>
<h3 id="agi-learning">AGI &amp; Learning</h3>
<table>
<thead>
<tr>
<th>Page</th>
<th>Route</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Agents</td>
<td><code>/agents</code></td>
<td>Autonomous agents</td>
</tr>
<tr>
<td>Learning</td>
<td><code>/learning</code></td>
<td>ML training data</td>
</tr>
<tr>
<td>ML Training</td>
<td><code>/ml-training</code></td>
<td>Model training jobs</td>
</tr>
<tr>
<td>Self-Improvement</td>
<td><code>/self-improvement</code></td>
<td>Self-improvement logs</td>
</tr>
<tr>
<td>Moral Compass</td>
<td><code>/moral-compass</code></td>
<td>Ethical guidelines</td>
</tr>
<tr>
<td>Feedback</td>
<td><code>/feedback</code></td>
<td>User feedback</td>
</tr>
</tbody>
</table>
<h3 id="collaboration-features-1">Collaboration &amp; Features</h3>
<table>
<thead>
<tr>
<th>Page</th>
<th>Route</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Time Machine</td>
<td><code>/time-machine</code></td>
<td>Historical state access</td>
</tr>
<tr>
<td>Storage</td>
<td><code>/storage</code></td>
<td>File storage management</td>
</tr>
<tr>
<td>Notifications</td>
<td><code>/notifications</code></td>
<td>Notification settings</td>
</tr>
<tr>
<td>Localization</td>
<td><code>/localization</code></td>
<td>i18n management</td>
</tr>
<tr>
<td>Configuration</td>
<td><code>/configuration</code></td>
<td>Dynamic configuration</td>
</tr>
<tr>
<td>Compliance</td>
<td><code>/compliance</code></td>
<td>Compliance dashboard</td>
</tr>
<tr>
<td>Geographic</td>
<td><code>/geographic</code></td>
<td>Geographic settings</td>
</tr>
<tr>
<td>Multi-Region</td>
<td><code>/multi-region</code></td>
<td>Multi-region config</td>
</tr>
<tr>
<td>Experiments</td>
<td><code>/experiments</code></td>
<td>A/B testing</td>
</tr>
<tr>
<td>Migrations</td>
<td><code>/migrations</code></td>
<td>Database migrations</td>
</tr>
<tr>
<td>Services</td>
<td><code>/services</code></td>
<td>Service status</td>
</tr>
<tr>
<td>Request Handler</td>
<td><code>/request-handler</code></td>
<td>Request routing</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="key-pages-detail">Key Pages Detail</h2>
<h3 id="overview-dashboard">Overview Dashboard (<code>/</code>)</h3>
<p><strong>Metrics Displayed:</strong> - Active tenants (24h) - Total
API requests (24h) - Total tokens processed - Revenue (MTD) - Error rate
- Average latency</p>
<p><strong>Quick Actions:</strong> - View recent errors - Check provider
health - Review pending approvals - Generate report</p>
<p><strong>Charts:</strong> - Requests over time (7d) - Token usage by
model - Revenue trend - Error rate trend</p>
<hr />
<h3 id="models-page-models">Models Page (<code>/models</code>)</h3>
<p><strong>Features:</strong> - List all 106+ models - Filter by
provider, capability - Enable/disable models - Set model pricing
overrides - Configure fallback chains - View usage statistics</p>
<p><strong>Model Card Display:</strong></p>
<pre><code>┌─────────────────────────────────────────────┐
│ anthropic/claude-3-5-sonnet                 │
│ ─────────────────────────────────────────── │
│ Provider: Bedrock (primary), LiteLLM (fb)   │
│ Capabilities: reasoning, coding, vision     │
│ Context: 200K tokens                        │
│ Pricing: $3.00/$15.00 per 1M tokens         │
│ Status: ● Enabled                           │
│ Usage (24h): 1.2M tokens                    │
│                                             │
│ [Configure] [Disable] [View Stats]          │
└─────────────────────────────────────────────┘</code></pre>
<hr />
<h3
id="orchestration-patterns-page-orchestration-patterns">Orchestration
Patterns Page (<code>/orchestration-patterns</code>)</h3>
<p><strong>Features:</strong> - Browse 49 patterns by category - Search
patterns - View pattern details - Edit pattern workflows - Create custom
patterns - View execution statistics</p>
<p><strong>Pattern Categories Tabs:</strong> - Consensus &amp;
Aggregation (7) - Debate &amp; Deliberation (7) - Critique &amp;
Refinement (7) - Verification &amp; Validation (7) - Decomposition (7) -
Specialized Reasoning (7) - Multi-Model Routing (4) - Ensemble Methods
(3)</p>
<p><strong>Pattern Detail View:</strong></p>
<pre><code>┌─────────────────────────────────────────────────────────────┐
│ AI Debate                                      [Edit] [Test] │
│ ─────────────────────────────────────────────────────────── │
│ Category: Debate &amp; Deliberation                             │
│ Quality Improvement: +25-40%                                │
│ Typical Latency: High (10-30s)                              │
│ Min Models: 3                                               │
│                                                             │
│ Description:                                                │
│ Two AI models debate opposing positions while a third       │
│ model judges the arguments and synthesizes a final answer.  │
│                                                             │
│ Best For:                                                   │
│ • Controversial topics                                      │
│ • Complex decisions                                         │
│ • Exploring multiple perspectives                           │
│                                                             │
│ Workflow Steps:                                             │
│ 1. Generate Pro Argument (Claude)                           │
│ 2. Generate Con Argument (GPT-4o)                           │
│ 3. Judge Arguments (Claude - thinking mode)                 │
│ 4. Synthesize Final Answer                                  │
│                                                             │
│ Executions (30d): 1,247  |  Avg Quality: 0.89               │
└─────────────────────────────────────────────────────────────┘</code></pre>
<hr />
<h3 id="visual-workflow-editor-orchestration-patternseditor">Visual
Workflow Editor (<code>/orchestration-patterns/editor</code>)</h3>
<p><strong>Features:</strong> - Drag-and-drop workflow design - 16
method palette - Node connection editing - Step configuration (4 tabs) -
Zoom, pan, fit controls - Test execution - Save/load workflows</p>
<p><strong>Method Palette (16 Methods):</strong> | Method | Category |
Description | |——–|———-|————-| | Generate | Core | Generate text
response | | Analyze | Core | Analyze input | | Transform | Core |
Transform data | | Validate | Core | Validate output | | Critique |
Refinement | Critique response | | Refine | Refinement | Improve
response | | Decompose | Decomposition | Break into parts | | Synthesize
| Aggregation | Combine results | | Judge | Evaluation | Evaluate
quality | | Vote | Consensus | Majority voting | | Debate_Pro | Debate |
Pro argument | | Debate_Con | Debate | Con argument | | Verify |
Verification | Fact-check | | Search | External | Web search | |
Execute_Code | External | Run code | | Custom | Custom | Custom logic
|</p>
<p><strong>Step Configuration Tabs:</strong> 1. <strong>General</strong>
- Name, order, model, output variable 2. <strong>Parameters</strong> -
Method-specific parameters 3. <strong>Advanced</strong> - Conditions,
iterations, dependencies 4. <strong>Parallel</strong> - Parallel
execution settings, AGI selection</p>
<hr />
<h3 id="billing-page-billing">Billing Page (<code>/billing</code>)</h3>
<p><strong>Sections:</strong></p>
<p><strong>Revenue Overview:</strong> - Monthly Recurring Revenue (MRR)
- Annual Recurring Revenue (ARR) - Revenue growth % - Churn rate</p>
<p><strong>Subscription Management:</strong> - Active subscriptions by
tier - Upcoming renewals - Cancelled subscriptions - Trial
conversions</p>
<p><strong>Credit Management:</strong> - Total credits sold - Credits
consumed - Credit purchase history - Low balance alerts</p>
<p><strong>Invoice Management:</strong> - Generate invoices - View
invoice history - Export to CSV - Send invoice reminders</p>
<hr />
<h3 id="analytics-page-analytics">Analytics Page
(<code>/analytics</code>)</h3>
<p><strong>Dashboard Sections:</strong></p>
<p><strong>Usage Analytics:</strong> - Requests by model - Tokens by
tenant - Peak usage times - Geographic distribution</p>
<p><strong>Performance Analytics:</strong> - Latency percentiles (p50,
p95, p99) - Error rates by endpoint - Provider availability - Cache hit
rates</p>
<p><strong>Business Analytics:</strong> - Cost per request - Revenue per
tenant - Feature adoption - User engagement</p>
<p><strong>Custom Reports:</strong> - Date range selection - Dimension
grouping - Metric selection - Export options (CSV, PDF, JSON)</p>
<hr />
<h3 id="security-page-security">Security Page
(<code>/security</code>)</h3>
<p><strong>Sections:</strong></p>
<p><strong>Authentication:</strong> - Cognito configuration - MFA
enforcement - Session settings - Password policies</p>
<p><strong>API Security:</strong> - Rate limiting rules - IP allowlists
- API key management - Request validation</p>
<p><strong>Compliance:</strong> - SOC2 status - HIPAA mode toggle - Data
retention settings - Audit log retention</p>
<p><strong>WAF Configuration:</strong> - Rule management - Blocked
requests - Rate limit thresholds - Custom rules</p>
<hr />
<h3 id="think-tank-page-thinktank">Think Tank Page
(<code>/thinktank</code>)</h3>
<p><strong>Features:</strong> - View all sessions across tenants -
Filter by domain, status, confidence - Session detail view -
Step-by-step reasoning display - Cost and token tracking</p>
<p><strong>Session List View:</strong></p>
<pre><code>┌─────────────────────────────────────────────────────────────┐
│ Session ID    │ Tenant  │ Domain    │ Steps │ Conf  │ Cost  │
│ ───────────── │ ─────── │ ───────── │ ───── │ ───── │ ───── │
│ abc123...     │ Acme    │ Engineering│ 6     │ 0.92  │ $0.45 │
│ def456...     │ Beta    │ Research  │ 8     │ 0.87  │ $0.72 │
│ ghi789...     │ Acme    │ Legal     │ 4     │ 0.95  │ $0.28 │
└─────────────────────────────────────────────────────────────┘</code></pre>
<p><strong>Session Detail View:</strong></p>
<pre><code>Problem: &quot;Design a microservices architecture for 10M daily users&quot;
Domain: Engineering | Complexity: High | Status: Completed

Step 1: Decompose [Claude 3.5] ✓ (conf: 0.94)
├─ Identified 5 sub-problems
└─ Duration: 2.3s | Tokens: 1,247

Step 2: Requirements Analysis [Claude + GPT-4o parallel] ✓ (conf: 0.91)
├─ Synthesized from 2 models
└─ Duration: 4.1s | Tokens: 3,892

Step 3-5: [...]

Step 6: Synthesize Final Solution [Claude 3.5 thinking] ✓ (conf: 0.89)
├─ Generated comprehensive solution
└─ Duration: 5.7s | Tokens: 2,156

Total: 6 steps | 18.2s | 12,453 tokens | $0.45
Final Confidence: 0.89</code></pre>
<hr />
<h2 id="component-library">Component Library</h2>
<h3 id="shared-components">Shared Components</h3>
<p><strong>DataTable:</strong> - Sortable columns - Pagination - Row
selection - Export functionality - Column visibility toggle</p>
<p><strong>StatusBadge:</strong> - Status indicator with color -
Configurable variants - Icon support</p>
<p><strong>MetricCard:</strong> - Large number display - Trend indicator
- Comparison to previous period</p>
<p><strong>Chart Components:</strong> - LineChart (time series) -
BarChart (comparisons) - PieChart (distributions) - AreaChart
(cumulative)</p>
<p><strong>Form Components:</strong> - Input with validation - Select
with search - DateRangePicker - JSONEditor - CodeEditor</p>
<hr />
<h2 id="api-integration">API Integration</h2>
<h3 id="api-client-libapi.ts">API Client (<code>lib/api.ts</code>)</h3>
<div class="sourceCode" id="cb87"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { QueryClient } <span class="im">from</span> <span class="st">&#39;@tanstack/react-query&#39;</span><span class="op">;</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> API_BASE <span class="op">=</span> <span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">NEXT_PUBLIC_API_URL</span><span class="op">;</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">const</span> apiClient <span class="op">=</span> {</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// GET request</span></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="kw">get</span><span class="op">&lt;</span>T<span class="op">&gt;</span>(path<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>T<span class="op">&gt;</span> {</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="vs">`</span><span class="sc">${</span>API_BASE<span class="sc">}${</span>path<span class="sc">}</span><span class="vs">`</span><span class="op">,</span> {</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>      headers<span class="op">:</span> <span class="cf">await</span> <span class="fu">getAuthHeaders</span>()<span class="op">,</span></span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>response<span class="op">.</span><span class="at">ok</span>) <span class="cf">throw</span> <span class="kw">new</span> <span class="fu">APIError</span>(response)<span class="op">;</span></span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> response<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">// POST request</span></span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">post</span><span class="op">&lt;</span>T<span class="op">&gt;</span>(path<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> data<span class="op">:</span> <span class="dt">unknown</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>T<span class="op">&gt;</span> {</span>
<span id="cb87-17"><a href="#cb87-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="vs">`</span><span class="sc">${</span>API_BASE<span class="sc">}${</span>path<span class="sc">}</span><span class="vs">`</span><span class="op">,</span> {</span>
<span id="cb87-18"><a href="#cb87-18" aria-hidden="true" tabindex="-1"></a>      method<span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></span>
<span id="cb87-19"><a href="#cb87-19" aria-hidden="true" tabindex="-1"></a>      headers<span class="op">:</span> {</span>
<span id="cb87-20"><a href="#cb87-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span><span class="op">,</span></span>
<span id="cb87-21"><a href="#cb87-21" aria-hidden="true" tabindex="-1"></a>        <span class="op">...</span>(<span class="cf">await</span> <span class="fu">getAuthHeaders</span>())<span class="op">,</span></span>
<span id="cb87-22"><a href="#cb87-22" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb87-23"><a href="#cb87-23" aria-hidden="true" tabindex="-1"></a>      body<span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(data)<span class="op">,</span></span>
<span id="cb87-24"><a href="#cb87-24" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb87-25"><a href="#cb87-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>response<span class="op">.</span><span class="at">ok</span>) <span class="cf">throw</span> <span class="kw">new</span> <span class="fu">APIError</span>(response)<span class="op">;</span></span>
<span id="cb87-26"><a href="#cb87-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> response<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb87-27"><a href="#cb87-27" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb87-28"><a href="#cb87-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb87-29"><a href="#cb87-29" aria-hidden="true" tabindex="-1"></a>  <span class="co">// React Query hooks</span></span>
<span id="cb87-30"><a href="#cb87-30" aria-hidden="true" tabindex="-1"></a>  useModels<span class="op">:</span> () <span class="kw">=&gt;</span> <span class="fu">useQuery</span>([<span class="st">&#39;models&#39;</span>]<span class="op">,</span> () <span class="kw">=&gt;</span> apiClient<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;/admin/models&#39;</span>))<span class="op">,</span></span>
<span id="cb87-31"><a href="#cb87-31" aria-hidden="true" tabindex="-1"></a>  useTenants<span class="op">:</span> () <span class="kw">=&gt;</span> <span class="fu">useQuery</span>([<span class="st">&#39;tenants&#39;</span>]<span class="op">,</span> () <span class="kw">=&gt;</span> apiClient<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;/admin/tenants&#39;</span>))<span class="op">,</span></span>
<span id="cb87-32"><a href="#cb87-32" aria-hidden="true" tabindex="-1"></a>  useAnalytics<span class="op">:</span> (range<span class="op">:</span> <span class="dt">string</span>) <span class="kw">=&gt;</span> </span>
<span id="cb87-33"><a href="#cb87-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">useQuery</span>([<span class="st">&#39;analytics&#39;</span><span class="op">,</span> range]<span class="op">,</span> () <span class="kw">=&gt;</span> apiClient<span class="op">.</span><span class="fu">get</span>(<span class="vs">`/admin/analytics?range=</span><span class="sc">${</span>range<span class="sc">}</span><span class="vs">`</span>))<span class="op">,</span></span>
<span id="cb87-34"><a href="#cb87-34" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span></code></pre></div>
<h3 id="authentication-libauth.ts">Authentication
(<code>lib/auth.ts</code>)</h3>
<div class="sourceCode" id="cb88"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { Amplify<span class="op">,</span> Auth } <span class="im">from</span> <span class="st">&#39;aws-amplify&#39;</span><span class="op">;</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">async</span> <span class="kw">function</span> <span class="fu">getAuthHeaders</span>()<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>Headers<span class="op">&gt;</span> {</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> session <span class="op">=</span> <span class="cf">await</span> Auth<span class="op">.</span><span class="fu">currentSession</span>()<span class="op">;</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Authorization&#39;</span><span class="op">:</span> <span class="vs">`Bearer </span><span class="sc">${</span>session<span class="op">.</span><span class="fu">getIdToken</span>()<span class="op">.</span><span class="fu">getJwtToken</span>()<span class="sc">}</span><span class="vs">`</span><span class="op">,</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">function</span> <span class="fu">useAuth</span>() {</span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [user<span class="op">,</span> setUser] <span class="op">=</span> <span class="fu">useState</span><span class="op">&lt;</span>CognitoUser <span class="op">|</span> <span class="dt">null</span><span class="op">&gt;</span>(<span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> [loading<span class="op">,</span> setLoading] <span class="op">=</span> <span class="fu">useState</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-14"><a href="#cb88-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">useEffect</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb88-15"><a href="#cb88-15" aria-hidden="true" tabindex="-1"></a>    Auth<span class="op">.</span><span class="fu">currentAuthenticatedUser</span>()</span>
<span id="cb88-16"><a href="#cb88-16" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">then</span>(setUser)</span>
<span id="cb88-17"><a href="#cb88-17" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">catch</span>(() <span class="kw">=&gt;</span> <span class="fu">setUser</span>(<span class="kw">null</span>))</span>
<span id="cb88-18"><a href="#cb88-18" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">finally</span>(() <span class="kw">=&gt;</span> <span class="fu">setLoading</span>(<span class="kw">false</span>))<span class="op">;</span></span>
<span id="cb88-19"><a href="#cb88-19" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> [])<span class="op">;</span></span>
<span id="cb88-20"><a href="#cb88-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-21"><a href="#cb88-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> { user<span class="op">,</span> loading<span class="op">,</span> signIn<span class="op">,</span> signOut }<span class="op">;</span></span>
<span id="cb88-22"><a href="#cb88-22" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h1 id="compliance-security-standards">Compliance &amp; Security
Standards</h1>
<h2 id="overview-3">Overview</h2>
<p>RADIANT implements comprehensive compliance frameworks to meet
enterprise security requirements across multiple regulatory
standards.</p>
<hr />
<h2 id="soc-2-type-ii-compliance">SOC 2 Type II Compliance</h2>
<h3 id="trust-service-criteria">Trust Service Criteria</h3>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 27%" />
<col style="width: 44%" />
</colgroup>
<thead>
<tr>
<th>Category</th>
<th>Controls</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Security</strong></td>
<td>Access control, encryption, monitoring</td>
<td>Cognito, KMS, CloudWatch</td>
</tr>
<tr>
<td><strong>Availability</strong></td>
<td>Redundancy, failover, SLAs</td>
<td>Multi-AZ, auto-scaling</td>
</tr>
<tr>
<td><strong>Processing Integrity</strong></td>
<td>Data validation, error handling</td>
<td>Input validation, checksums</td>
</tr>
<tr>
<td><strong>Confidentiality</strong></td>
<td>Data classification, encryption</td>
<td>RLS, AES-256, TLS 1.3</td>
</tr>
<tr>
<td><strong>Privacy</strong></td>
<td>Data handling, consent</td>
<td>GDPR controls, retention policies</td>
</tr>
</tbody>
</table>
<h3 id="key-controls">Key Controls</h3>
<ol type="1">
<li><strong>Access Management</strong>
<ul>
<li>Multi-factor authentication (MFA) required for admins</li>
<li>Role-based access control (RBAC)</li>
<li>API key rotation policies</li>
<li>Session timeout enforcement</li>
</ul></li>
<li><strong>Encryption</strong>
<ul>
<li>At rest: AES-256 via AWS KMS</li>
<li>In transit: TLS 1.3 minimum</li>
<li>Database: Aurora encryption enabled</li>
<li>Secrets: AWS Secrets Manager</li>
</ul></li>
<li><strong>Audit Logging</strong>
<ul>
<li>All API requests logged</li>
<li>Admin actions tracked</li>
<li>CloudTrail for AWS operations</li>
<li>90-day retention minimum</li>
</ul></li>
</ol>
<hr />
<h2 id="hipaa-compliance">HIPAA Compliance</h2>
<h3 id="protected-health-information-phi-handling">Protected Health
Information (PHI) Handling</h3>
<p>RADIANT supports HIPAA-compliant deployments with enhanced
controls:</p>
<table>
<thead>
<tr>
<th>Requirement</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Access Controls</strong></td>
<td>User authentication, authorization, audit</td>
</tr>
<tr>
<td><strong>Audit Controls</strong></td>
<td>Complete activity logging, tamper-evident</td>
</tr>
<tr>
<td><strong>Integrity Controls</strong></td>
<td>Data validation, checksums, versioning</td>
</tr>
<tr>
<td><strong>Transmission Security</strong></td>
<td>TLS 1.3, encrypted channels only</td>
</tr>
</tbody>
</table>
<h3 id="hipaa-mode-features">HIPAA Mode Features</h3>
<p>When HIPAA mode is enabled:</p>
<div class="sourceCode" id="cb89"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> HIPAAConfig {</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  enabled<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  phiDetection<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span>        <span class="co">// Scan for PHI in requests</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>  enhancedLogging<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span>     <span class="co">// Additional audit details</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>  dataRetentionDays<span class="op">:</span> <span class="dt">number</span><span class="op">;</span>    <span class="co">// Configurable retention</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>  encryptionRequired<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span>  <span class="co">// Force encryption</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>  accessReviewDays<span class="op">:</span> <span class="dt">number</span><span class="op">;</span>     <span class="co">// Periodic access review</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="phi-sanitization">PHI Sanitization</h3>
<div class="sourceCode" id="cb90"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Automatic PHI detection and handling</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> PHISanitizationService {</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">private</span> patterns <span class="op">=</span> [</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>    <span class="ss">/</span><span class="sc">\b\d{3}</span><span class="ss">-</span><span class="sc">\d{2}</span><span class="ss">-</span><span class="sc">\d{4}\b</span><span class="ss">/</span><span class="op">,</span>     <span class="co">// SSN</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>    <span class="ss">/</span><span class="sc">\b\d{9}\b</span><span class="ss">/</span><span class="op">,</span>                  <span class="co">// MRN</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>    <span class="ss">/</span><span class="sc">\b[A-Z]{2}\d{6,8}\b</span><span class="ss">/</span><span class="op">,</span>       <span class="co">// License numbers</span></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// ... additional patterns</span></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">;</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">sanitize</span>(input<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>SanitizedInput<span class="op">&gt;</span> {</span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Detect and redact PHI before processing</span></span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> sanitized <span class="op">=</span> input<span class="op">;</span></span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (<span class="kw">const</span> pattern <span class="kw">of</span> <span class="kw">this</span><span class="op">.</span><span class="at">patterns</span>) {</span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a>      sanitized <span class="op">=</span> sanitized<span class="op">.</span><span class="fu">replace</span>(pattern<span class="op">,</span> <span class="st">&#39;[REDACTED]&#39;</span>)<span class="op">;</span></span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb90-16"><a href="#cb90-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> { original<span class="op">:</span> input<span class="op">,</span> sanitized<span class="op">,</span> phiDetected<span class="op">:</span> sanitized <span class="op">!==</span> input }<span class="op">;</span></span>
<span id="cb90-17"><a href="#cb90-17" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb90-18"><a href="#cb90-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h2 id="gdpr-compliance">GDPR Compliance</h2>
<h3 id="data-subject-rights">Data Subject Rights</h3>
<p>RADIANT implements all required GDPR data subject rights:</p>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 43%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Right</th>
<th>Implementation</th>
<th>API Endpoint</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Right to Access</strong></td>
<td>Export all user data</td>
<td><code>GET /api/gdpr/export</code></td>
</tr>
<tr>
<td><strong>Right to Rectification</strong></td>
<td>Update personal data</td>
<td><code>PATCH /api/users/{id}</code></td>
</tr>
<tr>
<td><strong>Right to Erasure</strong></td>
<td>Delete all user data</td>
<td><code>DELETE /api/gdpr/erase</code></td>
</tr>
<tr>
<td><strong>Right to Portability</strong></td>
<td>Export in machine-readable format</td>
<td><code>GET /api/gdpr/export?format=json</code></td>
</tr>
<tr>
<td><strong>Right to Object</strong></td>
<td>Opt-out of processing</td>
<td><code>POST /api/gdpr/object</code></td>
</tr>
<tr>
<td><strong>Right to Restrict</strong></td>
<td>Limit processing</td>
<td><code>POST /api/gdpr/restrict</code></td>
</tr>
</tbody>
</table>
<h3 id="data-processing">Data Processing</h3>
<div class="sourceCode" id="cb91"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> GDPRDataRequest {</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  subjectId<span class="op">:</span> <span class="dt">string</span><span class="op">;</span>          <span class="co">// User identifier</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  requestType<span class="op">:</span> <span class="st">&#39;access&#39;</span> <span class="op">|</span> <span class="st">&#39;rectification&#39;</span> <span class="op">|</span> <span class="st">&#39;erasure&#39;</span> <span class="op">|</span> <span class="st">&#39;portability&#39;</span> <span class="op">|</span> <span class="st">&#39;object&#39;</span> <span class="op">|</span> <span class="st">&#39;restrict&#39;</span><span class="op">;</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>  requestedBy<span class="op">:</span> <span class="dt">string</span><span class="op">;</span>        <span class="co">// Requester (user or DPO)</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>  verificationMethod<span class="op">:</span> <span class="dt">string</span><span class="op">;</span> <span class="co">// How identity was verified</span></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>  deadline<span class="op">:</span> <span class="bu">Date</span><span class="op">;</span>             <span class="co">// 30-day compliance deadline</span></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a><span class="im">export</span> <span class="kw">class</span> GDPRService {</span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">handleDataRequest</span>(request<span class="op">:</span> GDPRDataRequest)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span>GDPRResponse<span class="op">&gt;</span> {</span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Log the request</span></span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="at">auditLogger</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&#39;gdpr_request&#39;</span><span class="op">,</span> request)<span class="op">;</span></span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-14"><a href="#cb91-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> (request<span class="op">.</span><span class="at">requestType</span>) {</span>
<span id="cb91-15"><a href="#cb91-15" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;access&#39;</span><span class="op">:</span></span>
<span id="cb91-16"><a href="#cb91-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">exportUserData</span>(request<span class="op">.</span><span class="at">subjectId</span>)<span class="op">;</span></span>
<span id="cb91-17"><a href="#cb91-17" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;erasure&#39;</span><span class="op">:</span></span>
<span id="cb91-18"><a href="#cb91-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">eraseUserData</span>(request<span class="op">.</span><span class="at">subjectId</span>)<span class="op">;</span></span>
<span id="cb91-19"><a href="#cb91-19" aria-hidden="true" tabindex="-1"></a>      <span class="cf">case</span> <span class="st">&#39;portability&#39;</span><span class="op">:</span></span>
<span id="cb91-20"><a href="#cb91-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">this</span><span class="op">.</span><span class="fu">exportPortableData</span>(request<span class="op">.</span><span class="at">subjectId</span>)<span class="op">;</span></span>
<span id="cb91-21"><a href="#cb91-21" aria-hidden="true" tabindex="-1"></a>      <span class="co">// ... other handlers</span></span>
<span id="cb91-22"><a href="#cb91-22" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb91-23"><a href="#cb91-23" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb91-24"><a href="#cb91-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb91-25"><a href="#cb91-25" aria-hidden="true" tabindex="-1"></a>  <span class="kw">async</span> <span class="fu">eraseUserData</span>(userId<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span><span class="dt">void</span><span class="op">&gt;</span> {</span>
<span id="cb91-26"><a href="#cb91-26" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Cascade delete across all tables</span></span>
<span id="cb91-27"><a href="#cb91-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="kw">this</span><span class="op">.</span><span class="at">db</span><span class="op">.</span><span class="fu">transaction</span>(<span class="kw">async</span> (tx) <span class="kw">=&gt;</span> {</span>
<span id="cb91-28"><a href="#cb91-28" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> tx<span class="op">.</span><span class="fu">delete</span>(<span class="st">&#39;thinktank_steps&#39;</span>)<span class="op">.</span><span class="fu">where</span>(<span class="st">&#39;session_id&#39;</span><span class="op">,</span> <span class="st">&#39;in&#39;</span><span class="op">,</span> </span>
<span id="cb91-29"><a href="#cb91-29" aria-hidden="true" tabindex="-1"></a>        tx<span class="op">.</span><span class="fu">select</span>(<span class="st">&#39;id&#39;</span>)<span class="op">.</span><span class="fu">from</span>(<span class="st">&#39;thinktank_sessions&#39;</span>)<span class="op">.</span><span class="fu">where</span>(<span class="st">&#39;user_id&#39;</span><span class="op">,</span> userId))<span class="op">;</span></span>
<span id="cb91-30"><a href="#cb91-30" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> tx<span class="op">.</span><span class="fu">delete</span>(<span class="st">&#39;thinktank_sessions&#39;</span>)<span class="op">.</span><span class="fu">where</span>(<span class="st">&#39;user_id&#39;</span><span class="op">,</span> userId)<span class="op">;</span></span>
<span id="cb91-31"><a href="#cb91-31" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> tx<span class="op">.</span><span class="fu">delete</span>(<span class="st">&#39;usage_records&#39;</span>)<span class="op">.</span><span class="fu">where</span>(<span class="st">&#39;user_id&#39;</span><span class="op">,</span> userId)<span class="op">;</span></span>
<span id="cb91-32"><a href="#cb91-32" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> tx<span class="op">.</span><span class="fu">delete</span>(<span class="st">&#39;api_keys&#39;</span>)<span class="op">.</span><span class="fu">where</span>(<span class="st">&#39;user_id&#39;</span><span class="op">,</span> userId)<span class="op">;</span></span>
<span id="cb91-33"><a href="#cb91-33" aria-hidden="true" tabindex="-1"></a>      <span class="cf">await</span> tx<span class="op">.</span><span class="fu">delete</span>(<span class="st">&#39;users&#39;</span>)<span class="op">.</span><span class="fu">where</span>(<span class="st">&#39;id&#39;</span><span class="op">,</span> userId)<span class="op">;</span></span>
<span id="cb91-34"><a href="#cb91-34" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb91-35"><a href="#cb91-35" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb91-36"><a href="#cb91-36" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="consent-management">Consent Management</h3>
<div class="sourceCode" id="cb92"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> ConsentRecord {</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  userId<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>  consentType<span class="op">:</span> <span class="st">&#39;marketing&#39;</span> <span class="op">|</span> <span class="st">&#39;analytics&#39;</span> <span class="op">|</span> <span class="st">&#39;ai_training&#39;</span> <span class="op">|</span> <span class="st">&#39;data_sharing&#39;</span><span class="op">;</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>  granted<span class="op">:</span> <span class="dt">boolean</span><span class="op">;</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>  grantedAt<span class="op">:</span> <span class="bu">Date</span><span class="op">;</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>  ipAddress<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>  userAgent<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>  version<span class="op">:</span> <span class="dt">string</span><span class="op">;</span>  <span class="co">// Consent policy version</span></span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a><span class="co">// All processing requires valid consent</span></span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">checkConsent</span>(userId<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> purpose<span class="op">:</span> <span class="dt">string</span>)<span class="op">:</span> <span class="bu">Promise</span><span class="op">&lt;</span><span class="dt">boolean</span><span class="op">&gt;</span> {</span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> consent <span class="op">=</span> <span class="cf">await</span> db<span class="op">.</span><span class="fu">query</span>(</span>
<span id="cb92-14"><a href="#cb92-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;SELECT granted FROM consent_records WHERE user_id = $1 AND consent_type = $2&#39;</span><span class="op">,</span></span>
<span id="cb92-15"><a href="#cb92-15" aria-hidden="true" tabindex="-1"></a>    [userId<span class="op">,</span> purpose]</span>
<span id="cb92-16"><a href="#cb92-16" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb92-17"><a href="#cb92-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> consent<span class="op">?.</span><span class="at">granted</span> <span class="op">===</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb92-18"><a href="#cb92-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="data-retention">Data Retention</h3>
<table>
<thead>
<tr>
<th>Data Type</th>
<th>Retention Period</th>
<th>Basis</th>
</tr>
</thead>
<tbody>
<tr>
<td>User accounts</td>
<td>Until deletion requested</td>
<td>Contract</td>
</tr>
<tr>
<td>Session data</td>
<td>90 days</td>
<td>Legitimate interest</td>
</tr>
<tr>
<td>Audit logs</td>
<td>7 years</td>
<td>Legal requirement</td>
</tr>
<tr>
<td>Usage analytics</td>
<td>2 years</td>
<td>Legitimate interest</td>
</tr>
<tr>
<td>AI training data</td>
<td>Until consent withdrawn</td>
<td>Consent</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="iso-27001-compliance">ISO 27001 Compliance</h2>
<h3 id="information-security-management-system-isms">Information
Security Management System (ISMS)</h3>
<p>RADIANT’s infrastructure aligns with ISO 27001:2022 requirements:</p>
<h3 id="annex-a-controls">Annex A Controls</h3>
<h4 id="a.5-organizational-controls">A.5 Organizational Controls</h4>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 34%" />
<col style="width: 42%" />
</colgroup>
<thead>
<tr>
<th>Control</th>
<th>Description</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td>A.5.1</td>
<td>Policies for information security</td>
<td>Documented security policies</td>
</tr>
<tr>
<td>A.5.2</td>
<td>Information security roles</td>
<td>Defined RACI matrix</td>
</tr>
<tr>
<td>A.5.3</td>
<td>Segregation of duties</td>
<td>Role-based access, dual approval</td>
</tr>
<tr>
<td>A.5.7</td>
<td>Threat intelligence</td>
<td>AWS GuardDuty, threat feeds</td>
</tr>
<tr>
<td>A.5.15</td>
<td>Access control</td>
<td>Cognito + IAM + RLS</td>
</tr>
<tr>
<td>A.5.23</td>
<td>Information security for cloud</td>
<td>AWS Well-Architected</td>
</tr>
<tr>
<td>A.5.29</td>
<td>Information security during disruption</td>
<td>DR procedures</td>
</tr>
</tbody>
</table>
<h4 id="a.6-people-controls">A.6 People Controls</h4>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 34%" />
<col style="width: 42%" />
</colgroup>
<thead>
<tr>
<th>Control</th>
<th>Description</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td>A.6.1</td>
<td>Screening</td>
<td>Background checks for admins</td>
</tr>
<tr>
<td>A.6.3</td>
<td>Information security awareness</td>
<td>Training programs</td>
</tr>
<tr>
<td>A.6.5</td>
<td>Responsibilities after termination</td>
<td>Access revocation procedures</td>
</tr>
</tbody>
</table>
<h4 id="a.7-physical-controls">A.7 Physical Controls</h4>
<table>
<thead>
<tr>
<th>Control</th>
<th>Description</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td>A.7.1</td>
<td>Physical security perimeters</td>
<td>AWS data center security</td>
</tr>
<tr>
<td>A.7.4</td>
<td>Physical security monitoring</td>
<td>AWS compliance certifications</td>
</tr>
</tbody>
</table>
<h4 id="a.8-technological-controls">A.8 Technological Controls</h4>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 34%" />
<col style="width: 42%" />
</colgroup>
<thead>
<tr>
<th>Control</th>
<th>Description</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td>A.8.1</td>
<td>User endpoint devices</td>
<td>MDM for admin devices</td>
</tr>
<tr>
<td>A.8.2</td>
<td>Privileged access rights</td>
<td>IAM policies, MFA required</td>
</tr>
<tr>
<td>A.8.3</td>
<td>Information access restriction</td>
<td>RLS, tenant isolation</td>
</tr>
<tr>
<td>A.8.4</td>
<td>Access to source code</td>
<td>GitHub branch protection</td>
</tr>
<tr>
<td>A.8.5</td>
<td>Secure authentication</td>
<td>Cognito, JWT, API keys</td>
</tr>
<tr>
<td>A.8.7</td>
<td>Protection against malware</td>
<td>WAF, input validation</td>
</tr>
<tr>
<td>A.8.9</td>
<td>Configuration management</td>
<td>CDK, Infrastructure as Code</td>
</tr>
<tr>
<td>A.8.10</td>
<td>Information deletion</td>
<td>GDPR erasure, retention policies</td>
</tr>
<tr>
<td>A.8.11</td>
<td>Data masking</td>
<td>PHI sanitization, PII redaction</td>
</tr>
<tr>
<td>A.8.12</td>
<td>Data leakage prevention</td>
<td>DLP policies, egress controls</td>
</tr>
<tr>
<td>A.8.15</td>
<td>Logging</td>
<td>CloudWatch, audit trails</td>
</tr>
<tr>
<td>A.8.16</td>
<td>Monitoring activities</td>
<td>CloudWatch alarms, dashboards</td>
</tr>
<tr>
<td>A.8.20</td>
<td>Networks security</td>
<td>VPC, security groups, NACLs</td>
</tr>
<tr>
<td>A.8.22</td>
<td>Segregation of networks</td>
<td>Private subnets, VPC endpoints</td>
</tr>
<tr>
<td>A.8.24</td>
<td>Use of cryptography</td>
<td>KMS, TLS 1.3, AES-256</td>
</tr>
<tr>
<td>A.8.25</td>
<td>Secure development lifecycle</td>
<td>Code review, security scanning</td>
</tr>
<tr>
<td>A.8.28</td>
<td>Secure coding</td>
<td>OWASP guidelines, linting</td>
</tr>
</tbody>
</table>
<h3 id="risk-assessment-matrix">Risk Assessment Matrix</h3>
<table>
<thead>
<tr>
<th>Risk Category</th>
<th>Likelihood</th>
<th>Impact</th>
<th>Controls</th>
</tr>
</thead>
<tbody>
<tr>
<td>Data breach</td>
<td>Low</td>
<td>Critical</td>
<td>Encryption, RLS, monitoring</td>
</tr>
<tr>
<td>Service outage</td>
<td>Medium</td>
<td>High</td>
<td>Multi-AZ, auto-scaling, DR</td>
</tr>
<tr>
<td>Unauthorized access</td>
<td>Low</td>
<td>Critical</td>
<td>MFA, RBAC, audit logging</td>
</tr>
<tr>
<td>Insider threat</td>
<td>Low</td>
<td>High</td>
<td>Segregation, dual approval</td>
</tr>
<tr>
<td>Supply chain attack</td>
<td>Low</td>
<td>High</td>
<td>Dependency scanning, SBOMs</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="security-architecture-1">Security Architecture</h2>
<h3 id="defense-in-depth">Defense in Depth</h3>
<pre><code>┌─────────────────────────────────────────────────────────────┐
│                      INTERNET                                │
└─────────────────────────┬───────────────────────────────────┘
                          │
┌─────────────────────────▼───────────────────────────────────┐
│                    AWS WAF                                   │
│     Rate limiting, SQL injection, XSS protection            │
└─────────────────────────┬───────────────────────────────────┘
                          │
┌─────────────────────────▼───────────────────────────────────┐
│                 CloudFront / ALB                            │
│              TLS 1.3 termination                            │
└─────────────────────────┬───────────────────────────────────┘
                          │
┌─────────────────────────▼───────────────────────────────────┐
│                  API Gateway                                 │
│         JWT validation, API key auth                        │
└─────────────────────────┬───────────────────────────────────┘
                          │
┌─────────────────────────▼───────────────────────────────────┐
│                    VPC (Private)                            │
│  ┌──────────────────────────────────────────────────────┐  │
│  │                  Lambda Functions                     │  │
│  │           Input validation, RLS context              │  │
│  └────────────────────────┬─────────────────────────────┘  │
│                           │                                  │
│  ┌────────────────────────▼─────────────────────────────┐  │
│  │              Aurora PostgreSQL                        │  │
│  │        Row-Level Security, Encryption                │  │
│  └──────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘</code></pre>
<h3 id="two-person-approval">Two-Person Approval</h3>
<p>Sensitive operations require dual admin approval:</p>
<div class="sourceCode" id="cb94"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> ApprovalRequest {</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  id<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  requesterId<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  actionType<span class="op">:</span> <span class="st">&#39;delete_tenant&#39;</span> <span class="op">|</span> <span class="st">&#39;modify_billing&#39;</span> <span class="op">|</span> <span class="st">&#39;grant_super_admin&#39;</span> <span class="op">|</span> </span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>              <span class="st">&#39;bulk_export&#39;</span> <span class="op">|</span> <span class="st">&#39;disable_security&#39;</span><span class="op">;</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>  resourceId<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>  payload<span class="op">:</span> <span class="bu">Record</span><span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">unknown</span><span class="op">&gt;;</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>  status<span class="op">:</span> <span class="st">&#39;pending&#39;</span> <span class="op">|</span> <span class="st">&#39;approved&#39;</span> <span class="op">|</span> <span class="st">&#39;rejected&#39;</span> <span class="op">|</span> <span class="st">&#39;expired&#39;</span><span class="op">;</span></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>  requiredApprovals<span class="op">:</span> <span class="dt">number</span><span class="op">;</span>  <span class="co">// Usually 2</span></span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>  approvals<span class="op">:</span> Approval[]<span class="op">;</span></span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>  expiresAt<span class="op">:</span> <span class="bu">Date</span><span class="op">;</span></span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a><span class="co">// Cannot approve own requests</span></span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">approveRequest</span>(requestId<span class="op">:</span> <span class="dt">string</span><span class="op">,</span> approverId<span class="op">:</span> <span class="dt">string</span>) {</span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> request <span class="op">=</span> <span class="cf">await</span> <span class="fu">getRequest</span>(requestId)<span class="op">;</span></span>
<span id="cb94-17"><a href="#cb94-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb94-18"><a href="#cb94-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (request<span class="op">.</span><span class="at">requesterId</span> <span class="op">===</span> approverId) {</span>
<span id="cb94-19"><a href="#cb94-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Cannot approve own request&#39;</span>)<span class="op">;</span></span>
<span id="cb94-20"><a href="#cb94-20" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb94-21"><a href="#cb94-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb94-22"><a href="#cb94-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (request<span class="op">.</span><span class="at">approvals</span><span class="op">.</span><span class="fu">some</span>(a <span class="kw">=&gt;</span> a<span class="op">.</span><span class="at">approverId</span> <span class="op">===</span> approverId)) {</span>
<span id="cb94-23"><a href="#cb94-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Already approved&#39;</span>)<span class="op">;</span></span>
<span id="cb94-24"><a href="#cb94-24" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb94-25"><a href="#cb94-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb94-26"><a href="#cb94-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Add approval</span></span>
<span id="cb94-27"><a href="#cb94-27" aria-hidden="true" tabindex="-1"></a>  request<span class="op">.</span><span class="at">approvals</span><span class="op">.</span><span class="fu">push</span>({ approverId<span class="op">,</span> approvedAt<span class="op">:</span> <span class="kw">new</span> <span class="bu">Date</span>() })<span class="op">;</span></span>
<span id="cb94-28"><a href="#cb94-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb94-29"><a href="#cb94-29" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Execute if threshold met</span></span>
<span id="cb94-30"><a href="#cb94-30" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (request<span class="op">.</span><span class="at">approvals</span><span class="op">.</span><span class="at">length</span> <span class="op">&gt;=</span> request<span class="op">.</span><span class="at">requiredApprovals</span>) {</span>
<span id="cb94-31"><a href="#cb94-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">await</span> <span class="fu">executeApprovedAction</span>(request)<span class="op">;</span></span>
<span id="cb94-32"><a href="#cb94-32" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb94-33"><a href="#cb94-33" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h2 id="audit-logging">Audit Logging</h2>
<h3 id="log-structure">Log Structure</h3>
<div class="sourceCode" id="cb95"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> AuditLog {</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  id<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>  timestamp<span class="op">:</span> <span class="bu">Date</span><span class="op">;</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>  tenantId<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>  userId<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>  adminId<span class="op">?:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>  action<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>  resourceType<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a>  resourceId<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a>  ipAddress<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a>  userAgent<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a>  requestId<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a>  oldValue<span class="op">?:</span> <span class="bu">Record</span><span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">unknown</span><span class="op">&gt;;</span></span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a>  newValue<span class="op">?:</span> <span class="bu">Record</span><span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">unknown</span><span class="op">&gt;;</span></span>
<span id="cb95-15"><a href="#cb95-15" aria-hidden="true" tabindex="-1"></a>  result<span class="op">:</span> <span class="st">&#39;success&#39;</span> <span class="op">|</span> <span class="st">&#39;failure&#39;</span><span class="op">;</span></span>
<span id="cb95-16"><a href="#cb95-16" aria-hidden="true" tabindex="-1"></a>  errorMessage<span class="op">?:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb95-17"><a href="#cb95-17" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="logged-actions">Logged Actions</h3>
<ul>
<li>All authentication events (login, logout, MFA)</li>
<li>All API requests with parameters</li>
<li>All data modifications (create, update, delete)</li>
<li>All admin actions</li>
<li>All security events (failed auth, rate limits)</li>
<li>All GDPR requests</li>
<li>All compliance-related operations</li>
</ul>
<h3 id="log-retention">Log Retention</h3>
<table>
<thead>
<tr>
<th>Log Type</th>
<th>Retention</th>
<th>Storage</th>
</tr>
</thead>
<tbody>
<tr>
<td>API Access</td>
<td>90 days</td>
<td>CloudWatch</td>
</tr>
<tr>
<td>Security Events</td>
<td>1 year</td>
<td>S3 + Glacier</td>
</tr>
<tr>
<td>Audit Trail</td>
<td>7 years</td>
<td>S3 + Glacier</td>
</tr>
<tr>
<td>GDPR Requests</td>
<td>7 years</td>
<td>Aurora</td>
</tr>
</tbody>
</table>
</body>
</html>
