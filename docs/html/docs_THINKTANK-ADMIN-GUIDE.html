<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>THINKTANK ADMIN GUIDE - RADIANT Documentation</title>
  
<style>
@media print {
  body { font-size: 11pt !important; }
  pre { page-break-inside: avoid; }
  h1, h2, h3 { page-break-after: avoid; }
  .no-print { display: none !important; }
}

* { box-sizing: border-box; }

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  line-height: 1.7;
  color: #1d1d1f;
  max-width: 900px;
  margin: 0 auto;
  padding: 40px 30px;
  background: white;
}

h1 {
  color: #1d1d1f;
  border-bottom: 3px solid #0071e3;
  padding-bottom: 12px;
  font-size: 28px;
  margin-top: 0;
}

h2 {
  color: #1d1d1f;
  border-bottom: 1px solid #d2d2d7;
  padding-bottom: 8px;
  font-size: 22px;
  margin-top: 40px;
}

h3 { color: #1d1d1f; font-size: 18px; margin-top: 30px; }
h4 { color: #1d1d1f; font-size: 16px; margin-top: 25px; }

a { color: #0071e3; text-decoration: none; }
a:hover { text-decoration: underline; }

code {
  background: #f5f5f7;
  padding: 2px 6px;
  border-radius: 4px;
  font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
  font-size: 0.9em;
  color: #1d1d1f;
}

pre {
  background: #1d1d1f;
  color: #f5f5f7;
  padding: 20px;
  border-radius: 10px;
  overflow-x: auto;
  font-size: 13px;
  line-height: 1.5;
}

pre code {
  background: transparent;
  padding: 0;
  color: inherit;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin: 20px 0;
  font-size: 14px;
}

th, td {
  border: 1px solid #d2d2d7;
  padding: 12px 15px;
  text-align: left;
}

th {
  background: #0071e3;
  color: white;
  font-weight: 600;
}

tr:nth-child(even) { background: #f5f5f7; }

blockquote {
  border-left: 4px solid #0071e3;
  margin: 20px 0;
  padding: 15px 25px;
  background: #f5f5f7;
  border-radius: 0 8px 8px 0;
}

blockquote p { margin: 0; }

img { max-width: 100%; height: auto; border-radius: 8px; }

hr {
  border: none;
  border-top: 1px solid #d2d2d7;
  margin: 40px 0;
}

ul, ol { padding-left: 25px; }
li { margin: 8px 0; }

.header-bar {
  background: linear-gradient(135deg, #0071e3 0%, #00c6ff 100%);
  color: white;
  padding: 20px 30px;
  margin: -40px -30px 30px -30px;
  border-radius: 0 0 16px 16px;
}

.header-bar h1 {
  color: white;
  border: none;
  margin: 0;
  padding: 0;
}

.header-bar .meta {
  font-size: 13px;
  opacity: 0.9;
  margin-top: 8px;
}

.print-btn {
  position: fixed;
  top: 20px;
  right: 20px;
  background: #0071e3;
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  box-shadow: 0 4px 12px rgba(0,113,227,0.3);
}

.print-btn:hover { background: #0077ed; }

.mermaid {
  background: #f5f5f7;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
  margin: 20px 0;
}

.footer {
  margin-top: 60px;
  padding-top: 20px;
  border-top: 1px solid #d2d2d7;
  color: #86868b;
  font-size: 12px;
  text-align: center;
}
</style>

</head>
<body>
  <button class="print-btn no-print" onclick="window.print()">ğŸ–¨ï¸ Print / Save as PDF</button>
  
  <div class="header-bar">
    <h1>THINKTANK ADMIN GUIDE</h1>
    <div class="meta">RADIANT v5.52.29 | docs/THINKTANK-ADMIN-GUIDE.md</div>
  </div>
  
  <h1 id="think-tank---administrator-guide">Think Tank - Administrator Guide</h1>
<blockquote>
<p><strong>Configuration and administration of Think Tank AI features</strong></p>
<p>Version: 3.10.0 | Platform: RADIANT 5.52.6 Last Updated: January 2026</p>
</blockquote>
<hr />
<h2 id="overview">Overview</h2>
<p>This guide covers administrative features specific to <strong>Think Tank</strong>, the consumer-facing AI assistant platform. For platform-level administration (tenants, billing, infrastructure), see <a href="./RADIANT-ADMIN-GUIDE.md">RADIANT-ADMIN-GUIDE.md</a>.</p>
<hr />
<h2 id="table-of-contents">Table of Contents</h2>
<ol type="1">
<li><a href="#1-think-tank-admin-features">Think Tank Admin Features</a></li>
<li><a href="#2-user-rules-system">User Rules System</a></li>
<li><a href="#3-delight-system">Delight System</a></li>
<li><a href="#4-brain-plan-viewer">Brain Plan Viewer</a></li>
<li><a href="#5-pre-prompt-learning">Pre-Prompt Learning</a></li>
<li><a href="#6-domain-taxonomy">Domain Taxonomy</a></li>
<li><a href="#7-rejection-notifications">Rejection Notifications</a></li>
<li><a href="#8-canvas--artifacts">Canvas &amp; Artifacts</a></li>
<li><a href="#9-collaboration-features">Collaboration Features</a></li>
<li><a href="#10-shadow-testing">Shadow Testing</a></li>
<li><a href="#11-routing-cache">Routing Cache</a></li>
<li><a href="#12-delight-system-toggle">Delight System Toggle</a></li>
<li><a href="#13-intelligence-aggregator">Intelligence Aggregator</a></li>
<li><a href="#14-agi-ideas-service">AGI Ideas Service</a></li>
<li><a href="#15-feedback-system">Feedback System</a></li>
<li><a href="#16-cognitive-architecture">Cognitive Architecture</a></li>
<li><a href="#17-consciousness-service">Consciousness Service</a></li>
<li><a href="#18-app-factory">App Factory</a></li>
<li><a href="#19-generative-ui-feedback">Generative UI Feedback</a></li>
<li><a href="#20-media-capabilities">Media Capabilities</a></li>
<li><a href="#21-result-derivation-history">Result Derivation History</a></li>
<li><a href="#22-user-persistent-context">User Persistent Context</a></li>
<li><a href="#23-predictive-coding--evolution">Predictive Coding &amp; Evolution</a></li>
<li><a href="#24-zero-cost-ego-system">Zero-Cost Ego System</a></li>
<li><a href="#25-formal-reasoning-libraries">Formal Reasoning Libraries</a></li>
<li><a href="#26-ethics-free-reasoning-mode">Ethics-Free Reasoning Mode</a></li>
<li><a href="#27-intelligent-file-conversion">Intelligent File Conversion</a></li>
<li><a href="#28-metrics--learning-integration">Metrics &amp; Learning Integration</a></li>
<li><a href="#29-artifact-engine-genui-pipeline">Artifact Engine (GenUI Pipeline)</a>
<ul>
<li><a href="#291-executive-summary">29.1 Executive Summary</a></li>
<li><a href="#292-system-architecture">29.2 System Architecture</a></li>
<li><a href="#293-core-concepts">29.3 Core Concepts</a></li>
<li><a href="#294-administrative-control-panel">29.4 Administrative Control Panel</a></li>
<li><a href="#295-safety-governance-genesis-cato-cbfs">29.5 Safety Governance (Genesis Cato CBFs)</a></li>
<li><a href="#296-dependency-allowlist-management">29.6 Dependency Allowlist Management</a></li>
<li><a href="#297-code-pattern-library">29.7 Code Pattern Library</a></li>
<li><a href="#298-reflexion-loop-self-correction">29.8 Reflexion Loop (Self-Correction)</a></li>
<li><a href="#299-escalation-workflow-management">29.9 Escalation Workflow Management</a></li>
<li><a href="#2910-audit-trail--compliance">29.10 Audit Trail &amp; Compliance</a></li>
<li><a href="#2911-metrics--monitoring">29.11 Metrics &amp; Monitoring</a></li>
<li><a href="#2912-tenant-configuration">29.12 Tenant Configuration</a></li>
<li><a href="#2913-troubleshooting-guide">29.13 Troubleshooting Guide</a></li>
<li><a href="#2914-api-reference">29.14 API Reference</a></li>
<li><a href="#2915-real-time-generation-logs">29.15 Real-Time Generation Logs</a></li>
<li><a href="#2916-artifact-viewer-component">29.16 Artifact Viewer Component</a></li>
<li><a href="#2917-database-schema">29.17 Database Schema</a></li>
<li><a href="#2918-security-considerations">29.18 Security Considerations</a></li>
<li><a href="#2919-implementation-files">29.19 Implementation Files</a></li>
</ul></li>
<li><a href="#30-consciousness-operating-system-cos">Consciousness Operating System (COS)</a>
<ul>
<li><a href="#301-overview">30.1 Overview</a></li>
<li><a href="#302-architecture">30.2 Architecture</a></li>
<li><a href="#303-ghost-vectors">30.3 Ghost Vectors</a></li>
<li><a href="#304-sofai-routing">30.4 SOFAI Routing</a></li>
<li><a href="#305-flash-facts">30.5 Flash Facts</a></li>
<li><a href="#306-dreaming-system">30.6 Dreaming System</a></li>
<li><a href="#307-human-oversight">30.7 Human Oversight</a></li>
<li><a href="#308-privacy-airlock">30.8 Privacy Airlock</a></li>
<li><a href="#309-configuration">30.9 Configuration</a></li>
<li><a href="#3010-database-schema">30.10 Database Schema</a></li>
<li><a href="#3011-implementation-files">30.11 Implementation Files</a></li>
</ul></li>
<li><a href="#31-why-think-tank-beats-standalone-ai-the-system-advantage">Why Think Tank Beats Standalone AI</a></li>
<li><a href="#32-swarm-orchestration--flyte-operations">Swarm Orchestration &amp; Flyte Operations</a>
<ul>
<li><a href="#321-system-architecture-the-deep-swarm">32.1 System Architecture: The â€œDeep Swarmâ€</a></li>
<li><a href="#322-operational-troubleshooting">32.2 Operational Troubleshooting</a></li>
<li><a href="#323-compliance--security">32.3 Compliance &amp; Security</a></li>
</ul></li>
<li><a href="#33-cognitive-platform-enhancements">Cognitive Platform Enhancements</a>
<ul>
<li><a href="#331-strategic-vision-beyond-task-execution">33.1 Strategic Vision: Beyond Task Execution</a></li>
<li><a href="#332-the-grimoire-procedural-memory--self-correction">33.2 The Grimoire (Procedural Memory &amp; Self-Correction)</a></li>
<li><a href="#333-time-travel-debugging-visual-forking">33.3 Time-Travel Debugging (Visual Forking)</a></li>
<li><a href="#334-the-economic-governor-model-arbitrage">33.4 The Economic Governor (Model Arbitrage)</a></li>
<li><a href="#335-sentinel-agents-event-driven-autonomy">33.5 Sentinel Agents (Event-Driven Autonomy)</a></li>
<li><a href="#336-the-council-of-rivals-adversarial-consensus">33.6 The Council of Rivals (Adversarial Consensus)</a></li>
<li><a href="#337-implementation-roadmap">33.7 Implementation Roadmap</a></li>
<li><a href="#338-database-schema">33.8 Database Schema</a></li>
<li><a href="#339-api-reference">33.9 API Reference</a></li>
<li><a href="#3310-configuration">33.10 Configuration</a></li>
<li><a href="#3311-troubleshooting">33.11 Troubleshooting</a></li>
</ul></li>
<li><a href="#34-orchestration-methods-70-algorithms">Orchestration Methods (70+ Algorithms)</a></li>
<li><a href="#35-polymorphic-ui-prompt-41">Polymorphic UI (PROMPT-41)</a>
<ul>
<li><a href="#351-overview">35.1 Overview</a></li>
<li><a href="#352-the-gearbox-elastic-compute">35.2 The Gearbox (Elastic Compute)</a></li>
<li><a href="#353-the-three-views">35.3 The Three Views</a></li>
<li><a href="#354-view-types">35.4 View Types</a></li>
<li><a href="#355-configuration">35.5 Configuration</a></li>
<li><a href="#356-implementation-files">35.6 Implementation Files</a></li>
<li><a href="#357-database-tables">35.7 Database Tables</a></li>
<li><a href="#358-api-endpoints">35.8 API Endpoints</a></li>
</ul></li>
<li><a href="#36-think-tank-policy-framework-strategic-intelligence">Think Tank Policy Framework: Strategic Intelligence</a>
<ul>
<li><a href="#361-the-cato-institute-policy-foundation">36.1 The Cato Institute Policy Foundation</a></li>
<li><a href="#362-the-10-trillion-cybercrime-economy">36.2 The $10 Trillion Cybercrime Economy</a></li>
<li><a href="#363-memory-safety-and-the-70-problem">36.3 Memory Safety and the 70% Problem</a></li>
<li><a href="#364-regulatory-stance-configuration">36.4 Regulatory Stance Configuration</a></li>
<li><a href="#365-database-tables">36.5 Database Tables</a></li>
<li><a href="#366-implementation-files">36.6 Implementation Files</a></li>
</ul></li>
<li><a href="#37-agentic-orchestration-ssf-caep-and-identity-remediation">Agentic Orchestration: SSF, CAEP, and Identity Remediation</a>
<ul>
<li><a href="#371-the-agentic-ai-paradigm">37.1 The Agentic AI Paradigm</a></li>
<li><a href="#372-shared-signals-framework-ssf-integration">37.2 Shared Signals Framework (SSF) Integration</a></li>
<li><a href="#373-continuous-access-evaluation-profile-caep">37.3 Continuous Access Evaluation Profile (CAEP)</a></li>
<li><a href="#374-autonomous-identity-remediation">37.4 Autonomous Identity Remediation</a></li>
<li><a href="#375-the-radiant-ghost-in-think-tank">37.5 The Radiant Ghost in Think Tank</a></li>
<li><a href="#376-database-tables">37.6 Database Tables</a></li>
<li><a href="#377-api-endpoints">37.7 API Endpoints</a></li>
<li><a href="#378-implementation-files">37.8 Implementation Files</a></li>
</ul></li>
<li><a href="#39-liquid-interface-generative-ui">Liquid Interface (Generative UI)</a>
<ul>
<li><a href="#391-overview">39.1 Overview</a></li>
<li><a href="#392-architecture">39.2 Architecture</a></li>
<li><a href="#393-component-registry">39.3 Component Registry</a></li>
<li><a href="#394-ghost-state-two-way-binding">39.4 Ghost State (Two-Way Binding)</a></li>
<li><a href="#395-intent-detection">39.5 Intent Detection</a></li>
<li><a href="#396-eject-to-app">39.6 Eject to App</a></li>
<li><a href="#397-configuration">39.7 Configuration</a></li>
<li><a href="#398-api-endpoints">39.8 API Endpoints</a></li>
<li><a href="#399-database-tables">39.9 Database Tables</a></li>
<li><a href="#3910-implementation-files">39.10 Implementation Files</a></li>
</ul></li>
<li><a href="#43-concurrent-task-execution-moat-17">Concurrent Task Execution (Moat #17)</a></li>
<li><a href="#44-structure-from-chaos-synthesis-moat-20">Structure from Chaos Synthesis (Moat #20)</a></li>
<li><a href="#45-localization--translation-overrides">Localization &amp; Translation Overrides</a></li>
</ol>
<hr />
<h2 id="think-tank-admin-features">1. Think Tank Admin Features</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank</p>
<p>Think Tank admin features are accessible from the Think Tank section of the Admin Dashboard.</p>
<h3 id="available-sections">Available Sections</h3>
<table>
<thead>
<tr>
<th>Section</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>My Rules</strong></td>
<td>User memory rules configuration</td>
</tr>
<tr>
<td><strong>Delight</strong></td>
<td>Personality and feedback system</td>
</tr>
<tr>
<td><strong>Brain Plans</strong></td>
<td>AGI planning visibility</td>
</tr>
<tr>
<td><strong>Pre-Prompts</strong></td>
<td>Pre-prompt template management</td>
</tr>
<tr>
<td><strong>Domains</strong></td>
<td>Domain taxonomy configuration</td>
</tr>
<tr>
<td><strong>Ego</strong></td>
<td>Zero-cost persistent consciousness configuration</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>Note</strong>: For Consciousness Evolution (predictive coding, LoRA evolution, Local Ego infrastructure), see <a href="./RADIANT-ADMIN-GUIDE.md#27-consciousness-evolution-administration">RADIANT-ADMIN-GUIDE.md Section 27</a>.</p>
</blockquote>
<hr />
<h2 id="user-rules-system">2. User Rules System</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ My Rules</p>
<p>Users can create personal rules that guide how AI responds to them.</p>
<h3 id="rule-types">2.1 Rule Types</h3>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 46%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>instruction</code></td>
<td>How to respond</td>
<td>â€œAlways explain in simple termsâ€</td>
</tr>
<tr>
<td><code>preference</code></td>
<td>User preferences</td>
<td>â€œI prefer detailed explanationsâ€</td>
</tr>
<tr>
<td><code>context</code></td>
<td>Background info</td>
<td>â€œIâ€™m a software developerâ€</td>
</tr>
<tr>
<td><code>restriction</code></td>
<td>Things to avoid</td>
<td>â€œNever suggest proprietary solutionsâ€</td>
</tr>
</tbody>
</table>
<h3 id="memory-categories">2.2 Memory Categories</h3>
<p>Rules are categorized hierarchically:</p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Subcategories</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>instruction</code></td>
<td>format, tone, source</td>
</tr>
<tr>
<td><code>preference</code></td>
<td>style, detail</td>
</tr>
<tr>
<td><code>context</code></td>
<td>personal, work, project</td>
</tr>
<tr>
<td><code>knowledge</code></td>
<td>fact, definition, procedure</td>
</tr>
<tr>
<td><code>constraint</code></td>
<td>topic, privacy, safety</td>
</tr>
<tr>
<td><code>goal</code></td>
<td>learning, productivity</td>
</tr>
</tbody>
</table>
<h3 id="preset-rules">2.3 Preset Rules</h3>
<p>20+ pre-seeded rule templates across 7 categories that users can add with one click.</p>
<h3 id="admin-configuration">2.4 Admin Configuration</h3>
<p>Admins can: - View all preset rules - Enable/disable preset categories - Add new preset rules - Set default rules for new users</p>
<p>See <a href="./USER-RULES-SYSTEM.md">User Rules System Documentation</a> for full details.</p>
<hr />
<h2 id="delight-system">3. Delight System</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ Delight</p>
<p>The Delight System adds personality, humor, and engaging feedback to AI interactions.</p>
<h3 id="features">3.1 Features</h3>
<ul>
<li><strong>Loading Messages</strong> - Entertaining messages while AI thinks</li>
<li><strong>Step Updates</strong> - Progress messages during plan execution</li>
<li><strong>Achievements</strong> - Reward milestones (first query, streaks, etc.)</li>
<li><strong>Easter Eggs</strong> - Hidden delights for engaged users</li>
<li><strong>Wellbeing Nudges</strong> - Gentle reminders for breaks</li>
</ul>
<h3 id="admin-controls">3.2 Admin Controls</h3>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Enable/Disable</td>
<td>Turn delight system on/off</td>
</tr>
<tr>
<td>Message Categories</td>
<td>Enable specific message types</td>
</tr>
<tr>
<td>Achievement System</td>
<td>Configure achievement criteria</td>
</tr>
<tr>
<td>Easter Eggs</td>
<td>Manage hidden surprises</td>
</tr>
</tbody>
</table>
<h3 id="message-types">3.3 Message Types</h3>
<ul>
<li>Pre-execution messages</li>
<li>During-execution messages<br />
</li>
<li>Post-execution messages</li>
<li>Mode-specific messages (coding, creative, research, etc.)</li>
</ul>
<hr />
<h2 id="brain-plan-viewer">4. Brain Plan Viewer</h2>
<p><strong>Location</strong>: Think Tank â†’ (visible during AI responses)</p>
<p>The Brain Plan Viewer shows users the AGIâ€™s plan for solving their prompt.</p>
<h3 id="what-users-see">4.1 What Users See</h3>
<ul>
<li><strong>Orchestration Mode</strong> - thinking, coding, creative, research, etc.</li>
<li><strong>Domain Detection</strong> - Field, domain, subspecialty, confidence</li>
<li><strong>Model Selection</strong> - Which model was chosen and why</li>
<li><strong>Step Progress</strong> - Real-time step execution status</li>
<li><strong>Timing Estimates</strong> - Expected duration</li>
</ul>
<h3 id="admin-configuration-1">4.2 Admin Configuration</h3>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Show Plan</td>
<td>Whether to show plan to users</td>
</tr>
<tr>
<td>Detail Level</td>
<td>minimal, standard, detailed</td>
</tr>
<tr>
<td>Show Costs</td>
<td>Display cost estimates</td>
</tr>
<tr>
<td>Show Models</td>
<td>Display model names</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="pre-prompt-learning">5. Pre-Prompt Learning</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ Pre-Prompts</p>
<p>The pre-prompt system selects and learns optimal prompts for different contexts.</p>
<h3 id="how-it-works">5.1 How It Works</h3>
<ol type="1">
<li>System selects pre-prompt template based on context</li>
<li>User provides feedback on response quality</li>
<li>System learns which pre-prompts work best</li>
<li>Future selections are optimized</li>
</ol>
<h3 id="admin-features">5.2 Admin Features</h3>
<ul>
<li>View all pre-prompt templates</li>
<li>See success rates per template</li>
<li>Adjust learning parameters</li>
<li>Create new templates</li>
</ul>
<hr />
<h2 id="domain-taxonomy">6. Domain Taxonomy</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ Domains</p>
<p>The domain taxonomy helps the AI understand what field/domain a query belongs to.</p>
<h3 id="hierarchy">6.1 Hierarchy</h3>
<ul>
<li><strong>Fields</strong> - Top level (e.g., Medicine, Law, Technology)</li>
<li><strong>Domains</strong> - Mid level (e.g., Cardiology, Contract Law)</li>
<li><strong>Subspecialties</strong> - Specific areas (e.g., Electrophysiology)</li>
</ul>
<h3 id="admin-features-1">6.2 Admin Features</h3>
<ul>
<li>Add/edit domains</li>
<li>Configure model proficiencies per domain</li>
<li>View domain detection accuracy</li>
<li>Adjust confidence thresholds</li>
</ul>
<hr />
<h2 id="rejection-notifications">7. Rejection Notifications</h2>
<p><strong>Location</strong>: Think Tank â†’ Bell Icon (user view)</p>
<p>When AI providers reject prompts, users are notified with explanations.</p>
<h3 id="user-experience">7.1 User Experience</h3>
<ul>
<li>Bell icon shows unread count</li>
<li>Panel slides out with all notifications</li>
<li>Each shows: what happened, why, suggested actions</li>
<li>Resolution status (fallback succeeded, rejected, etc.)</li>
</ul>
<h3 id="suggested-actions">7.2 Suggested Actions</h3>
<ul>
<li>Rephrase request</li>
<li>Remove sensitive content</li>
<li>Try different mode</li>
<li>Contact administrator</li>
</ul>
<p>See <a href="./PROVIDER-REJECTION-HANDLING.md">Provider Rejection Handling Documentation</a> for full details.</p>
<hr />
<h2 id="canvas-artifacts">8. Canvas &amp; Artifacts</h2>
<p>Think Tankâ€™s canvas feature for interactive content creation.</p>
<h3 id="artifact-types">8.1 Artifact Types</h3>
<ul>
<li>Code blocks (with execution)</li>
<li>Documents</li>
<li>Diagrams</li>
<li>Data visualizations</li>
</ul>
<h3 id="admin-configuration-2">8.2 Admin Configuration</h3>
<ul>
<li>Enable/disable artifact types</li>
<li>Set size limits</li>
<li>Configure execution sandboxes</li>
</ul>
<hr />
<h2 id="collaboration-features">9. Collaboration Features</h2>
<p>Multi-user collaboration in Think Tank with novel enhanced features.</p>
<h3 id="core-features">9.1 Core Features</h3>
<ul>
<li><strong>Shared Conversations</strong>: Real-time collaborative chat sessions</li>
<li><strong>Real-time Co-editing</strong>: Live presence indicators, cursors, typing status</li>
<li><strong>Team Workspaces</strong>: Organize sessions by team/project</li>
<li><strong>Permission Management</strong>: Viewer, Commenter, Editor roles</li>
</ul>
<h3 id="enhanced-collaboration-v4.18.0">9.2 Enhanced Collaboration (v4.18.0+)</h3>
<h4 id="cross-tenant-guest-access">9.2.1 Cross-Tenant Guest Access</h4>
<p>Allow collaborators from outside your organization to join sessions.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Guest Invites</strong></td>
<td>Generate shareable invite links with permissions</td>
</tr>
<tr>
<td><strong>Permission Levels</strong></td>
<td>viewer, commenter, editor for guests</td>
</tr>
<tr>
<td><strong>Expiring Links</strong></td>
<td>Set expiration time (default: 7 days)</td>
</tr>
<tr>
<td><strong>Max Uses</strong></td>
<td>Limit how many times a link can be used</td>
</tr>
<tr>
<td><strong>Viral Tracking</strong></td>
<td>Track referrals and guest-to-paid conversions</td>
</tr>
</tbody>
</table>
<p><strong>API Endpoints:</strong> - <code>POST /api/thinktank/collaboration/invites</code> - Create guest invite - <code>GET /api/thinktank/collaboration/invites/:token</code> - Validate invite - <code>POST /api/thinktank/collaboration/guests/join</code> - Join as guest</p>
<h4 id="ai-facilitator-mode">9.2.2 AI Facilitator Mode</h4>
<p>An AI moderator that guides collaborative sessions.</p>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Session Objective</strong></td>
<td>What the session should accomplish</td>
</tr>
<tr>
<td><strong>Facilitator Persona</strong></td>
<td>professional, casual, academic, creative, socratic, coach</td>
</tr>
<tr>
<td><strong>Auto-Summarize</strong></td>
<td>Periodically summarize discussion</td>
</tr>
<tr>
<td><strong>Auto Action Items</strong></td>
<td>Extract action items from conversation</td>
</tr>
<tr>
<td><strong>Ensure Participation</strong></td>
<td>Prompt quiet participants to contribute</td>
</tr>
<tr>
<td><strong>Keep On-Topic</strong></td>
<td>Redirect off-topic discussions</td>
</tr>
</tbody>
</table>
<p><strong>Intervention Types:</strong> - <code>summary</code> - Periodic summaries - <code>question</code> - Probing questions to deepen discussion - <code>redirect</code> - Steer back to topic - <code>encourage</code> - Encourage participation - <code>clarify</code> - Ask for clarification - <code>synthesize</code> - Combine different viewpoints - <code>conclude</code> - Wrap up discussion points</p>
<h4 id="branch-merge-conversations">9.2.3 Branch &amp; Merge Conversations</h4>
<p>Explore alternative discussion paths without losing the main thread.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Create Branch</strong></td>
<td>Fork conversation at any point</td>
</tr>
<tr>
<td><strong>Exploration Hypothesis</strong></td>
<td>Document what the branch explores</td>
</tr>
<tr>
<td><strong>Branch Status</strong></td>
<td>active, merged, abandoned</td>
</tr>
<tr>
<td><strong>Merge Request</strong></td>
<td>Propose merging insights back to main</td>
</tr>
<tr>
<td><strong>AI Summary</strong></td>
<td>Auto-generated summary of branch conclusions</td>
</tr>
</tbody>
</table>
<p><strong>Merge Request Workflow:</strong> 1. Create branch with hypothesis 2. Explore alternative direction 3. Submit merge request with conclusion 4. Participants vote to approve/reject 5. Merged insights appear in main conversation</p>
<h4 id="time-shifted-playback">9.2.4 Time-Shifted Playback</h4>
<p>Asynchronous participation through session recordings.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Session Recording</strong></td>
<td>Record full session with events</td>
</tr>
<tr>
<td><strong>Playback Controls</strong></td>
<td>Play, pause, speed (0.5x-2x), seek</td>
</tr>
<tr>
<td><strong>AI Key Moments</strong></td>
<td>Auto-detected important moments</td>
</tr>
<tr>
<td><strong>Async Annotations</strong></td>
<td>Add comments at specific timestamps</td>
</tr>
<tr>
<td><strong>Media Notes</strong></td>
<td>Voice/video annotations stored in S3</td>
</tr>
</tbody>
</table>
<p><strong>Recording Types:</strong> - <code>full</code> - Complete session recording - <code>highlights</code> - AI-curated key moments only - <code>summary</code> - AI-generated session summary</p>
<h4 id="ai-roundtable-multi-model-debate">9.2.5 AI Roundtable (Multi-Model Debate)</h4>
<p>Multiple AI models debate a topic and synthesize insights.</p>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Topic</strong></td>
<td>The subject of debate</td>
</tr>
<tr>
<td><strong>Debate Style</strong></td>
<td>collaborative, adversarial, socratic, brainstorm, devils_advocate</td>
</tr>
<tr>
<td><strong>Max Rounds</strong></td>
<td>Number of debate rounds (default: 5)</td>
</tr>
<tr>
<td><strong>Time Limit</strong></td>
<td>Per-round time limit in seconds</td>
</tr>
<tr>
<td><strong>Synthesis Model</strong></td>
<td>Model that synthesizes final conclusions</td>
</tr>
</tbody>
</table>
<p><strong>Participating Models:</strong> Each model can have a persona and role: - <code>persona</code> - Character the model adopts - <code>role</code> - Function in the debate (analyst, critic, synthesizer) - <code>color</code> - Visual identifier in UI</p>
<p><strong>Output:</strong> - Per-model contributions with responding_to references - Final synthesis with consensus points - Disagreement points highlighted - Actionable recommendations</p>
<h4 id="shared-knowledge-graph">9.2.6 Shared Knowledge Graph</h4>
<p>Visualize collective understanding as an interactive graph.</p>
<table>
<thead>
<tr>
<th>Node Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>concept</code></td>
<td>Abstract idea or topic</td>
</tr>
<tr>
<td><code>fact</code></td>
<td>Verified information</td>
</tr>
<tr>
<td><code>question</code></td>
<td>Open question</td>
</tr>
<tr>
<td><code>decision</code></td>
<td>Decision made</td>
</tr>
<tr>
<td><code>action_item</code></td>
<td>Task to complete</td>
</tr>
<tr>
<td><code>person</code></td>
<td>Person mentioned</td>
</tr>
<tr>
<td><code>resource</code></td>
<td>External resource</td>
</tr>
</tbody>
</table>
<p><strong>Edge Types:</strong> - <code>relates_to</code> - General relationship - <code>supports</code> - Evidence supporting - <code>contradicts</code> - Conflicting information - <code>leads_to</code> - Causal relationship - <code>depends_on</code> - Dependency - <code>answers</code> - Answer to question - <code>part_of</code> - Component relationship</p>
<p><strong>AI Features:</strong> - Auto-extract nodes from conversation - Suggest missing connections - Identify knowledge gaps - Generate graph-based summaries</p>
<h3 id="attachment-storage">9.3 Attachment Storage</h3>
<p>Large attachments are stored in S3 with automatic cleanup.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>maxFileSizeMb</code></td>
<td>100</td>
<td>Maximum file size</td>
</tr>
<tr>
<td><code>allowedTypes</code></td>
<td>image/<em>, video/</em>, audio/*, application/pdf</td>
<td>Allowed MIME types</td>
</tr>
<tr>
<td><code>retentionDays</code></td>
<td>90</td>
<td>Days before cleanup</td>
</tr>
</tbody>
</table>
<p><strong>S3 Bucket:</strong> <code>radiant-collaboration-assets</code> (configurable via env)</p>
<p><strong>Cleanup:</strong> Database triggers automatically delete S3 objects when attachment records are deleted.</p>
<h3 id="admin-configuration-3">9.4 Admin Configuration</h3>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enableGuestAccess</code></td>
<td>Allow cross-tenant guests</td>
</tr>
<tr>
<td><code>maxGuestsPerSession</code></td>
<td>Maximum guests per session</td>
</tr>
<tr>
<td><code>defaultGuestPermission</code></td>
<td>Default permission for guests</td>
</tr>
<tr>
<td><code>enableFacilitator</code></td>
<td>Enable AI facilitator feature</td>
</tr>
<tr>
<td><code>enableBranching</code></td>
<td>Enable branch &amp; merge</td>
</tr>
<tr>
<td><code>enableRecordings</code></td>
<td>Enable session recordings</td>
</tr>
<tr>
<td><code>enableRoundtable</code></td>
<td>Enable AI roundtable</td>
</tr>
<tr>
<td><code>enableKnowledgeGraph</code></td>
<td>Enable knowledge graph</td>
</tr>
</tbody>
</table>
<h3 id="database-tables">9.5 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>collaboration_guest_invites</code></td>
<td>Guest invite tokens</td>
</tr>
<tr>
<td><code>collaboration_guests</code></td>
<td>Guest participants</td>
</tr>
<tr>
<td><code>collaboration_facilitator_config</code></td>
<td>AI facilitator settings</td>
</tr>
<tr>
<td><code>collaboration_facilitator_interventions</code></td>
<td>Facilitator actions log</td>
</tr>
<tr>
<td><code>collaboration_branches</code></td>
<td>Conversation branches</td>
</tr>
<tr>
<td><code>collaboration_merge_requests</code></td>
<td>Branch merge proposals</td>
</tr>
<tr>
<td><code>collaboration_recordings</code></td>
<td>Session recordings</td>
</tr>
<tr>
<td><code>collaboration_media_notes</code></td>
<td>Voice/video annotations</td>
</tr>
<tr>
<td><code>collaboration_async_annotations</code></td>
<td>Async comments</td>
</tr>
<tr>
<td><code>collaboration_ai_roundtables</code></td>
<td>Multi-model debates</td>
</tr>
<tr>
<td><code>collaboration_roundtable_contributions</code></td>
<td>Model contributions</td>
</tr>
<tr>
<td><code>collaboration_knowledge_graphs</code></td>
<td>Knowledge graphs</td>
</tr>
<tr>
<td><code>collaboration_knowledge_nodes</code></td>
<td>Graph nodes</td>
</tr>
<tr>
<td><code>collaboration_knowledge_edges</code></td>
<td>Graph edges</td>
</tr>
<tr>
<td><code>collaboration_attachments</code></td>
<td>File attachments</td>
</tr>
</tbody>
</table>
<h3 id="ui-components">9.6 UI Components</h3>
<p><strong>Location:</strong> <code>apps/admin-dashboard/components/collaboration/</code></p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>EnhancedCollaborativeSession.tsx</code></td>
<td>Main session container</td>
</tr>
<tr>
<td><code>panels/ChatPanel.tsx</code></td>
<td>Real-time chat interface</td>
</tr>
<tr>
<td><code>panels/BranchPanel.tsx</code></td>
<td>Branch management</td>
</tr>
<tr>
<td><code>panels/RoundtablePanel.tsx</code></td>
<td>AI roundtable interface</td>
</tr>
<tr>
<td><code>panels/KnowledgeGraphPanel.tsx</code></td>
<td>Graph visualization</td>
</tr>
<tr>
<td><code>panels/PlaybackPanel.tsx</code></td>
<td>Recording playback</td>
</tr>
<tr>
<td><code>ParticipantsSidebar.tsx</code></td>
<td>Participant list with presence</td>
</tr>
<tr>
<td><code>dialogs/InviteDialog.tsx</code></td>
<td>Guest invite creation</td>
</tr>
<tr>
<td><code>dialogs/FacilitatorSettingsDialog.tsx</code></td>
<td>AI facilitator config</td>
</tr>
</tbody>
</table>
<p><strong>Routes:</strong> - <code>/thinktank/collaborate/enhanced?session={id}</code> - Enhanced session view - <code>/collaborate/join/{token}</code> - Guest join page</p>
<hr />
<h2 id="shadow-testing">10. Shadow Testing</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ Shadow Testing</p>
<p>A/B test pre-prompt optimizations before promoting to production.</p>
<h3 id="test-modes">10.1 Test Modes</h3>
<table>
<colgroup>
<col style="width: 31%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Auto</strong></td>
<td>Automatically runs and promotes successful tests (default)</td>
</tr>
<tr>
<td><strong>Manual</strong></td>
<td>Requires admin approval to promote</td>
</tr>
<tr>
<td><strong>Off</strong></td>
<td>Shadow testing disabled</td>
</tr>
</tbody>
</table>
<h3 id="creating-a-shadow-test">10.2 Creating a Shadow Test</h3>
<ol type="1">
<li>Go to Think Tank â†’ Shadow Testing</li>
<li>Click â€œNew Testâ€</li>
<li>Select baseline pre-prompt template</li>
<li>Select candidate pre-prompt template</li>
<li>Set traffic percentage (default: 10%)</li>
<li>Set minimum samples required</li>
<li>Start test</li>
</ol>
<h3 id="test-results">10.3 Test Results</h3>
<p>Tests track: - <strong>Baseline Score</strong>: Average quality of baseline responses - <strong>Candidate Score</strong>: Average quality of candidate responses - <strong>Improvement %</strong>: Relative improvement - <strong>Statistical Confidence</strong>: Confidence level of results</p>
<h3 id="auto-promotion-settings">10.4 Auto-Promotion Settings</h3>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>autoPromoteThreshold</code></td>
<td>0.05 (5%)</td>
<td>Minimum improvement required</td>
</tr>
<tr>
<td><code>autoPromoteConfidence</code></td>
<td>0.95 (95%)</td>
<td>Statistical confidence required</td>
</tr>
<tr>
<td><code>maxConcurrentTests</code></td>
<td>3</td>
<td>Max simultaneous tests</td>
</tr>
</tbody>
</table>
<h3 id="manual-review">10.5 Manual Review</h3>
<p>For tests in Manual mode: 1. Wait for minimum samples 2. Review results in dashboard 3. Click â€œPromote Candidateâ€ or â€œRejectâ€</p>
<hr />
<h2 id="routing-cache">11. Routing Cache</h2>
<p><strong>Location</strong>: Automatic (no UI required)</p>
<p>Semantic caching for brain router decisions reduces latency for repeated queries.</p>
<h3 id="how-it-works-1">11.1 How It Works</h3>
<ol type="1">
<li>Prompt is hashed with complexity and task type</li>
<li>Cache is checked for matching routing decision</li>
<li>If hit: Skip brain router LLM, use cached model selection</li>
<li>If miss: Run normal routing, cache result</li>
</ol>
<h3 id="optimistic-execution">11.2 Optimistic Execution</h3>
<p>Very short/simple queries skip the router entirely:</p>
<table>
<thead>
<tr>
<th>Pattern</th>
<th>Default Model</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Simple greetings</td>
<td>gpt-4o-mini</td>
<td>â€œHelloâ€, â€œThanksâ€</td>
</tr>
<tr>
<td>Basic questions</td>
<td>gpt-4o-mini</td>
<td>â€œWhat time is it?â€</td>
</tr>
<tr>
<td>Short acknowledgments</td>
<td>gpt-4o-mini</td>
<td>â€œOKâ€, â€œYesâ€, â€œSureâ€</td>
</tr>
</tbody>
</table>
<h3 id="cache-statistics">11.3 Cache Statistics</h3>
<p>Performance headers show cache status:</p>
<pre><code>X-Radiant-Cache-Hit: true
X-Radiant-Router-Latency: 12ms  (vs ~500ms uncached)</code></pre>
<h3 id="cache-configuration">11.4 Cache Configuration</h3>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cache TTL</td>
<td>24 hours</td>
<td>How long decisions are cached</td>
</tr>
<tr>
<td>Short input threshold</td>
<td>50 chars</td>
<td>Max length for optimistic execution</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="delight-system-toggle">12. Delight System Toggle</h2>
<p><strong>Location</strong>: Think Tank â†’ Advanced Settings (user) or Admin Dashboard</p>
<h3 id="user-control">12.1 User Control</h3>
<p>Users can disable the entire Delight system:</p>
<ol type="1">
<li>Open Think Tank settings</li>
<li>Go to Advanced Settings</li>
<li>Toggle â€œEnable Delight Systemâ€ off</li>
</ol>
<p>When disabled: - No loading messages - No achievements - No Easter eggs - No wellbeing nudges</p>
<h3 id="default-behavior">12.2 Default Behavior</h3>
<ul>
<li><strong>Default</strong>: Enabled (true)</li>
<li>Users can disable at any time</li>
<li>Setting persists across sessions</li>
</ul>
<h3 id="admin-configuration-4">12.3 Admin Configuration</h3>
<p>Admins can configure default delight settings per tenant:</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td>Master toggle (default: true)</td>
</tr>
<tr>
<td><code>intensityLevel</code></td>
<td>Message frequency (1-10)</td>
</tr>
<tr>
<td><code>enableAchievements</code></td>
<td>Show achievement notifications</td>
</tr>
<tr>
<td><code>enableEasterEggs</code></td>
<td>Enable hidden surprises</td>
</tr>
<tr>
<td><code>enableWellbeingNudges</code></td>
<td>Remind users to take breaks</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="intelligence-aggregator">13. Intelligence Aggregator</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Settings â†’ Intelligence</p>
<p>The Intelligence Aggregator provides advanced AI capabilities that enhance Think Tank responses beyond any single model.</p>
<h3 id="user-facing-benefits">13.1 User-Facing Benefits</h3>
<table>
<colgroup>
<col style="width: 34%" />
<col style="width: 65%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>User Experience</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Uncertainty Detection</strong></td>
<td>More accurate factual claims, automatic verification</td>
</tr>
<tr>
<td><strong>Success Memory</strong></td>
<td>AI learns user preferences over time</td>
</tr>
<tr>
<td><strong>MoA Synthesis</strong></td>
<td>Higher quality responses combining multiple perspectives</td>
</tr>
<tr>
<td><strong>Cross-Provider Verification</strong></td>
<td>Fewer hallucinations and errors</td>
</tr>
<tr>
<td><strong>Code Execution</strong></td>
<td>Code that actually runs, not just looks correct</td>
</tr>
</tbody>
</table>
<h3 id="success-memory-in-think-tank">13.2 Success Memory in Think Tank</h3>
<p>When users rate responses 4-5 stars: 1. Interaction is stored with vector embedding 2. Similar future prompts retrieve these â€œgoldâ€ examples 3. Injected as few-shot examples into system prompt 4. Model matches userâ€™s preferred style/format/tone</p>
<p><strong>User Control</strong>: Users can view and delete their gold interactions in Think Tank settings.</p>
<h3 id="moa-synthesis-mode">13.3 MoA Synthesis Mode</h3>
<p>When enabled for Think Tank: - User sees â€œConsulting multiple expertsâ€¦â€ during generation - 3 models generate responses in parallel - Synthesizer combines best elements - Final response shown to user</p>
<p><strong>Delight Integration</strong>: Special MoA-specific messages appear during synthesis phase.</p>
<h3 id="code-verification-in-coding-mode">13.4 Code Verification in Coding Mode</h3>
<p>When <code>coding</code> orchestration mode is active: 1. AI generates code 2. Static analysis checks syntax 3. If errors found, AI auto-patches 4. User receives verified code</p>
<p><strong>User Feedback</strong>: Users see â€œVerifying codeâ€¦â€ indicator when active.</p>
<h3 id="configuration">13.5 Configuration</h3>
<p>See <a href="./RADIANT-ADMIN-GUIDE.md#19-intelligence-aggregator">RADIANT Admin Guide - Intelligence Aggregator</a> for full configuration options.</p>
<hr />
<h2 id="agi-ideas-service">14. AGI Ideas Service</h2>
<p>Real-time prompt suggestions and result enhancement for Think Tank users.</p>
<h3 id="typeahead-suggestions">14.1 Typeahead Suggestions</h3>
<p>As users type prompts, Think Tank provides intelligent suggestions:</p>
<pre><code>User types: &quot;How do I...&quot;
            â†“
Suggestions appear:
  â€¢ &quot;How do I... step by step&quot;
  â€¢ &quot;How do I... with examples&quot;
  â€¢ &quot;How do I... for beginners&quot;
  â€¢ &quot;How do I... best practices&quot;</code></pre>
<p><strong>Suggestion Sources:</strong> | Source | Description | Speed | |â€”â€”â€“|â€”â€”â€”â€”-|â€”â€”-| | <code>pattern_match</code> | Common prompt patterns | Instant | | <code>user_history</code> | Userâ€™s previous successful prompts | Fast | | <code>domain_aware</code> | Domain-specific templates | Fast | | <code>trending</code> | Popular prompts in this domain | Fast | | <code>ai_generated</code> | Real-time AI suggestions | Slower |</p>
<h3 id="result-ideas">14.2 Result Ideas</h3>
<p>After AI responses, users see suggested follow-up ideas:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI Response here...                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’¡ Ideas to explore:                    â”‚
â”‚                                         â”‚
â”‚ ğŸ” Deep dive: [Topic from response]     â”‚
â”‚    &quot;Explain [topic] in more detail...&quot;  â”‚
â”‚                                         â”‚
â”‚ ğŸ”— Related: History of [topic]          â”‚
â”‚    &quot;What is the history of...&quot;          â”‚
â”‚                                         â”‚
â”‚ âœ… Next step: Test this implementation  â”‚
â”‚    &quot;Write unit tests for the code...&quot;   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<p><strong>Idea Categories:</strong> - <code>explore_further</code> - Dig deeper into topics - <code>related_topic</code> - Adjacent areas to explore - <code>practical_next</code> - Concrete next steps - <code>alternative_view</code> - Different perspectives - <code>verification</code> - Ways to verify the answer</p>
<h3 id="learning-from-usage">14.3 Learning from Usage</h3>
<p>The system learns from user interactions:</p>
<ol type="1">
<li><strong>Suggestion Selection</strong>: When users pick a suggestion, that pattern is reinforced</li>
<li><strong>Idea Clicks</strong>: When users click result ideas, similar ideas get prioritized</li>
<li><strong>Prompt History</strong>: Successful prompts (4-5 stars) inform future suggestions</li>
<li><strong>Trending</strong>: Popular prompts bubble up for all users in that domain</li>
</ol>
<h3 id="api-endpoints">14.4 API Endpoints</h3>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 25%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/api/thinktank/ideas/typeahead</code></td>
<td>GET</td>
<td>Get suggestions for partial prompt</td>
</tr>
<tr>
<td><code>/api/thinktank/ideas/generate</code></td>
<td>POST</td>
<td>Generate ideas for a response</td>
</tr>
<tr>
<td><code>/api/thinktank/ideas/click</code></td>
<td>POST</td>
<td>Record idea click</td>
</tr>
<tr>
<td><code>/api/thinktank/ideas/select</code></td>
<td>POST</td>
<td>Record suggestion selection</td>
</tr>
</tbody>
</table>
<h3 id="configuration-1">14.5 Configuration</h3>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>typeahead_enabled</code></td>
<td>true</td>
<td>Enable typeahead suggestions</td>
</tr>
<tr>
<td><code>typeahead_min_chars</code></td>
<td>3</td>
<td>Characters before suggestions appear</td>
</tr>
<tr>
<td><code>typeahead_max_suggestions</code></td>
<td>5</td>
<td>Max suggestions to show</td>
</tr>
<tr>
<td><code>typeahead_debounce_ms</code></td>
<td>150</td>
<td>Debounce delay before fetching suggestions</td>
</tr>
<tr>
<td><code>typeahead_use_ai</code></td>
<td>false</td>
<td>Enable AI-generated suggestions (slower)</td>
</tr>
<tr>
<td><code>result_ideas_enabled</code></td>
<td>true</td>
<td>Show ideas with responses</td>
</tr>
<tr>
<td><code>result_ideas_max</code></td>
<td>5</td>
<td>Max ideas per response</td>
</tr>
<tr>
<td><code>result_ideas_min_confidence</code></td>
<td>0.6</td>
<td>Minimum confidence for idea display</td>
</tr>
<tr>
<td><code>result_ideas_modes</code></td>
<td>research, analysis, thinking, extended_thinking</td>
<td>Modes that show ideas</td>
</tr>
<tr>
<td><code>proactive_enabled</code></td>
<td>false</td>
<td>Enable proactive push suggestions</td>
</tr>
<tr>
<td><code>proactive_max_per_day</code></td>
<td>3</td>
<td>Max proactive suggestions per day</td>
</tr>
</tbody>
</table>
<h3 id="pattern-matching">14.6 Pattern Matching</h3>
<p>The service uses regex patterns for instant local matching:</p>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 32%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr>
<th>Pattern</th>
<th>Trigger Regex</th>
<th>Suggested Completions</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>howTo</code></td>
<td><code>/^how (do\|can\|to\|would)/i</code></td>
<td>â€œstep by stepâ€, â€œwith examplesâ€, â€œfor beginnersâ€, â€œbest practicesâ€</td>
</tr>
<tr>
<td><code>explain</code></td>
<td><code>/^(explain\|what is\|what are\|describe)/i</code></td>
<td>â€œin simple termsâ€, â€œwith analogiesâ€, â€œthe key conceptsâ€, â€œpros and consâ€</td>
</tr>
<tr>
<td><code>compare</code></td>
<td><code>/^(compare\|difference\|versus\|vs)/i</code></td>
<td>â€œwith a tableâ€, â€œkey differencesâ€, â€œwhich is better forâ€, â€œtrade-offsâ€</td>
</tr>
<tr>
<td><code>code</code></td>
<td><code>/^(write\|create\|build\|implement\|code)/i</code></td>
<td>â€œwith error handlingâ€, â€œwith testsâ€, â€œwith documentationâ€, â€œproduction-readyâ€</td>
</tr>
<tr>
<td><code>analyze</code></td>
<td><code>/^(analyze\|review\|evaluate\|assess)/i</code></td>
<td>â€œstrengths and weaknessesâ€, â€œwith recommendationsâ€, â€œrisk assessmentâ€, â€œdetailed breakdownâ€</td>
</tr>
<tr>
<td><code>summarize</code></td>
<td><code>/^(summarize\|summary\|tldr\|brief)/i</code></td>
<td>â€œkey pointsâ€, â€œin bullet pointsâ€, â€œexecutive summaryâ€, â€œone paragraphâ€</td>
</tr>
<tr>
<td><code>debug</code></td>
<td><code>/^(debug\|fix\|error\|issue\|problem)/i</code></td>
<td>â€œwith explanationâ€, â€œstep by stepâ€, â€œroot causeâ€, â€œprevention tipsâ€</td>
</tr>
</tbody>
</table>
<h3 id="persistent-learning">14.7 Persistent Learning</h3>
<p>The AGI Brain learns persistently from user interactions:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  LEARNING LOOP                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  User submits prompt                                    â”‚
â”‚       â†“                                                 â”‚
â”‚  learn_from_prompt() â†’ agi_learned_prompts              â”‚
â”‚       â†“                                                 â”‚
â”‚  AI generates response with ideas                       â”‚
â”‚       â†“                                                 â”‚
â”‚  User clicks idea â†’ learn_from_idea_click()             â”‚
â”‚       â†“                                                 â”‚
â”‚  prompt_idea_associations updated                       â”‚
â”‚       â†“                                                 â”‚
â”‚  User rates response â†’ record_outcome()                 â”‚
â”‚       â†“                                                 â”‚
â”‚  success_rate updated on learned prompt                 â”‚
â”‚       â†“                                                 â”‚
â”‚  Future suggestions improved                            â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<p><strong>What Gets Learned:</strong></p>
<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 45%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr>
<th>Data</th>
<th>Storage</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr>
<td>Prompts with 4-5â˜… ratings</td>
<td><code>agi_learned_prompts</code></td>
<td>Suggest similar successful prompts</td>
</tr>
<tr>
<td>Prompt â†’ vector embedding</td>
<td>pgvector index</td>
<td>Find semantically similar prompts</td>
</tr>
<tr>
<td>Ideas that get clicked</td>
<td><code>agi_learned_ideas</code></td>
<td>Prioritize effective ideas</td>
</tr>
<tr>
<td>Prompt-idea pairs</td>
<td><code>prompt_idea_associations</code></td>
<td>Show best ideas for prompt type</td>
</tr>
<tr>
<td>Follow-up patterns</td>
<td><code>common_follow_ups</code> array</td>
<td>Predict next questions</td>
</tr>
<tr>
<td>Refinement patterns</td>
<td><code>common_refinements</code> array</td>
<td>Suggest prompt improvements</td>
</tr>
</tbody>
</table>
<p><strong>Learning Metrics Tracked:</strong></p>
<ul>
<li><code>success_rate</code> - % of times prompt led to 4-5â˜… rating</li>
<li><code>click_rate</code> - % of times idea was clicked</li>
<li><code>association_strength</code> - How strongly a prompt-idea pair works</li>
<li><code>times_used</code> - Popularity of prompt pattern</li>
</ul>
<h3 id="database-tables-1">14.8 Database Tables</h3>
<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>agi_ideas_config</code></td>
<td>Per-tenant AGI Ideas configuration</td>
</tr>
<tr>
<td><code>prompt_patterns</code></td>
<td>Common prompt patterns for typeahead matching</td>
</tr>
<tr>
<td><code>user_prompt_history</code></td>
<td>User prompt history with embeddings for suggestions</td>
</tr>
<tr>
<td><code>suggestion_log</code></td>
<td>Typeahead suggestion usage tracking</td>
</tr>
<tr>
<td><code>result_ideas</code></td>
<td>Ideas shown with AI responses</td>
</tr>
<tr>
<td><code>proactive_suggestions</code></td>
<td>Push notification suggestions</td>
</tr>
<tr>
<td><code>trending_prompts</code></td>
<td>Popular prompts by domain</td>
</tr>
<tr>
<td><code>agi_learned_prompts</code></td>
<td>Persisted prompts with success rates and embeddings</td>
</tr>
<tr>
<td><code>agi_learned_ideas</code></td>
<td>Learned idea patterns with click rates</td>
</tr>
<tr>
<td><code>prompt_idea_associations</code></td>
<td>Links between prompts and effective ideas</td>
</tr>
<tr>
<td><code>agi_learning_events</code></td>
<td>Raw learning signals for analysis</td>
</tr>
<tr>
<td><code>agi_learning_aggregates</code></td>
<td>Pre-computed learning statistics</td>
</tr>
</tbody>
</table>
<h3 id="key-files">14.9 Key Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lambda/shared/services/agi-ideas.service.ts</code></td>
<td>Main service (570 lines)</td>
</tr>
<tr>
<td><code>lambda/thinktank/ideas.ts</code></td>
<td>API handler</td>
</tr>
<tr>
<td><code>packages/shared/src/types/agi-ideas.types.ts</code></td>
<td>Type definitions</td>
</tr>
<tr>
<td><code>migrations/049_agi_ideas.sql</code></td>
<td>Database schema</td>
</tr>
</tbody>
</table>
<h3 id="troubleshooting">14.10 Troubleshooting</h3>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Issue</th>
<th>Cause</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td>No suggestions appearing</td>
<td><code>typeahead_enabled</code> is false</td>
<td>Enable in tenant config</td>
</tr>
<tr>
<td>Suggestions too slow</td>
<td>AI generation enabled</td>
<td>Set <code>typeahead_use_ai</code> to false</td>
</tr>
<tr>
<td>Wrong domain suggestions</td>
<td>Domain detection failed</td>
<td>Check domain taxonomy config</td>
</tr>
<tr>
<td>Ideas not learning</td>
<td>Low usage volume</td>
<td>Need more user interactions</td>
</tr>
<tr>
<td>Proactive suggestions not sent</td>
<td>Feature disabled by default</td>
<td>Enable <code>proactive_enabled</code></td>
</tr>
<tr>
<td>Duplicate suggestions</td>
<td>Pattern overlap</td>
<td>Review custom patterns</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="feedback-system">15. Feedback System</h2>
<p><strong>Location</strong>: Think Tank response footer</p>
<p>Enhanced feedback with 5-star ratings and comments.</p>
<h3 id="rating-types">15.1 Rating Types</h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>UI</th>
<th>When to Use</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>5-Star Rating</strong></td>
<td>â­â­â­â­â­</td>
<td>Think Tank default</td>
</tr>
<tr>
<td><strong>Thumbs Up/Down</strong></td>
<td>ğŸ‘ ğŸ‘</td>
<td>Quick feedback, API</td>
</tr>
</tbody>
</table>
<h3 id="star-rating-labels">15.2 Star Rating Labels</h3>
<table>
<thead>
<tr>
<th>Stars</th>
<th>Default Label</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>â­</td>
<td>Poor</td>
<td>Response was unhelpful or incorrect</td>
</tr>
<tr>
<td>â­â­</td>
<td>Fair</td>
<td>Response had significant issues</td>
</tr>
<tr>
<td>â­â­â­</td>
<td>Good</td>
<td>Response was acceptable</td>
</tr>
<tr>
<td>â­â­â­â­</td>
<td>Very Good</td>
<td>Response was helpful and accurate</td>
</tr>
<tr>
<td>â­â­â­â­â­</td>
<td>Excellent</td>
<td>Response exceeded expectations</td>
</tr>
</tbody>
</table>
<h3 id="category-ratings-optional">15.3 Category Ratings (Optional)</h3>
<p>Users can rate specific dimensions:</p>
<table>
<thead>
<tr>
<th>Category</th>
<th>What it measures</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Accuracy</strong></td>
<td>Was the information correct?</td>
</tr>
<tr>
<td><strong>Helpfulness</strong></td>
<td>Was it useful for the task?</td>
</tr>
<tr>
<td><strong>Clarity</strong></td>
<td>Was it easy to understand?</td>
</tr>
<tr>
<td><strong>Completeness</strong></td>
<td>Did it fully answer the question?</td>
</tr>
<tr>
<td><strong>Tone</strong></td>
<td>Was the tone appropriate?</td>
</tr>
</tbody>
</table>
<h3 id="comments">15.4 Comments</h3>
<p>Users can add comments with their feedback:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ How was this response?                 â”‚
â”‚                                        â”‚
â”‚ â­ â­ â­ â­ â˜†  (4 stars - Very Good)    â”‚
â”‚                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Add a comment (optional)...        â”‚ â”‚
â”‚ â”‚                                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                        â”‚
â”‚              [Submit Feedback]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<p><strong>Comment required for low ratings</strong>: Optionally require comments for 1-2 star ratings to understand issues.</p>
<h3 id="integration-with-learning">15.5 Integration with Learning</h3>
<p>Feedback automatically integrates with AGI learning:</p>
<pre><code>User submits feedback
       â†“
response_feedback table
       â†“
agi_unified_learning_log (outcome_rating updated)
       â†“
agi_model_selection_outcomes (model performance updated)
       â†“
agi_learned_prompts (success_rate updated)
       â†“
Future responses improved</code></pre>
<h3 id="configuration-2">15.6 Configuration</h3>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>default_feedback_type</code></td>
<td>star_rating</td>
<td>â€˜star_ratingâ€™ or â€˜thumbsâ€™</td>
</tr>
<tr>
<td><code>show_category_ratings</code></td>
<td>false</td>
<td>Show detailed category ratings</td>
</tr>
<tr>
<td><code>show_comment_box</code></td>
<td>true</td>
<td>Allow comments</td>
</tr>
<tr>
<td><code>comment_required</code></td>
<td>false</td>
<td>Require comments</td>
</tr>
<tr>
<td><code>comment_required_threshold</code></td>
<td>2</td>
<td>Require comment for ratings â‰¤ this</td>
</tr>
<tr>
<td><code>feedback_prompt_delay_ms</code></td>
<td>3000</td>
<td>Delay before showing feedback UI</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="cognitive-architecture">16. Cognitive Architecture</h2>
<p><strong>Location</strong>: Settings â†’ Cognitive Architecture</p>
<p>Advanced reasoning capabilities integrated with Think Tank.</p>
<h3 id="tree-of-thoughts-extended-thinking">16.1 Tree of Thoughts (Extended Thinking)</h3>
<p>When users select â€œExtended Thinkingâ€ mode, Tree of Thoughts activates:</p>
<pre><code>User prompt: &quot;Design a microservices architecture for...&quot;
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Tree of Thoughts                 â”‚
â”‚                                          â”‚
â”‚  Approach 1: Event-driven    Score: 0.8 â”‚
â”‚  Approach 2: REST-based      Score: 0.6 â”‚
â”‚  Approach 3: GraphQL         Score: 0.4 â† pruned â”‚
â”‚                                          â”‚
â”‚  Exploring Approach 1...                 â”‚
â”‚    â”œâ”€ Step 1a: Kafka        Score: 0.9  â”‚
â”‚    â””â”€ Step 1b: RabbitMQ     Score: 0.7  â”‚
â”‚                                          â”‚
â”‚  Final: Event-driven + Kafka             â”‚
â”‚  Confidence: 92%                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<p><strong>User Controls:</strong> - Thinking time slider: 10s â†’ 5 minutes - â€œThink deeperâ€ button to extend analysis</p>
<h3 id="graphrag-knowledge-connections">16.2 GraphRAG (Knowledge Connections)</h3>
<p>When users upload documents, GraphRAG extracts knowledge:</p>
<pre><code>Document Upload â†’ Entity Extraction â†’ Knowledge Graph
                                           â†“
User: &quot;How does X affect Y?&quot;
                                           â†“
                   Graph traversal finds connection:
                   X â†’ impacts â†’ Z â†’ depends_on â†’ Y
                                           â†“
                   Multi-hop answer with citations</code></pre>
<p><strong>User Benefits:</strong> - Questions like â€œHow does the Q3 supplier change affect the Engineering delay?â€ get answered - Vector search alone would miss these connections</p>
<h3 id="deep-research-background-jobs">16.3 Deep Research (Background Jobs)</h3>
<p>Users can dispatch long-running research:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”¬ Start Deep Research                  â”‚
â”‚                                          â”‚
â”‚  Query: &quot;Competitive analysis of...&quot;     â”‚
â”‚                                          â”‚
â”‚  Scope: â—‹ Narrow  â— Medium  â—‹ Broad     â”‚
â”‚  Est. Time: ~25 minutes                  â”‚
â”‚                                          â”‚
â”‚  [Dispatch Research]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<p>User gets notified when complete with: - Executive summary - Key findings (10-20) - Recommendations - Source citations (50+)</p>
<h3 id="generative-ui-interactive-results">16.4 Generative UI (Interactive Results)</h3>
<p>Think Tank renders AI-generated interactive components:</p>
<table>
<thead>
<tr>
<th>Trigger</th>
<th>Generated Component</th>
</tr>
</thead>
<tbody>
<tr>
<td>â€œCompare X vs Yâ€</td>
<td>Interactive comparison table</td>
</tr>
<tr>
<td>â€œCalculate pricing forâ€¦â€</td>
<td>Slider-based calculator</td>
</tr>
<tr>
<td>â€œShow timeline ofâ€¦â€</td>
<td>Visual timeline</td>
</tr>
<tr>
<td>â€œChart the dataâ€¦â€</td>
<td>Interactive chart</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<pre><code>User: &quot;Compare pricing of GPT-4, Claude, Gemini&quot;

Instead of static text:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’° Pricing Calculator                   â”‚
â”‚                                          â”‚
â”‚  Input Tokens:  â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€ 50,000    â”‚
â”‚  Output Tokens: â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€ 25,000     â”‚
â”‚                                          â”‚
â”‚  GPT-4    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ $2.25          â”‚
â”‚  Claude 3 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘ $2.63         â”‚
â”‚  Gemini   â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ $0.88          â”‚
â”‚                                          â”‚
â”‚  ğŸ’¡ Gemini is 61% cheaper               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="dynamic-lora-domain-expertise">16.5 Dynamic LoRA (Domain Expertise)</h3>
<p>When domain detection identifies a specialty, Think Tank can load expert adapters:</p>
<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 35%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th>Detected Domain</th>
<th>LoRA Adapter</th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td>California Property Law</td>
<td><code>ca_property_law.safetensor</code></td>
<td>Expert-level legal responses</td>
</tr>
<tr>
<td>Medical Oncology</td>
<td><code>oncology.safetensor</code></td>
<td>Clinical accuracy</td>
</tr>
<tr>
<td>Python Debugging</td>
<td><code>python_debug.safetensor</code></td>
<td>Better code fixes</td>
</tr>
</tbody>
</table>
<p><strong>Note</strong>: Requires SageMaker infrastructure (disabled by default).</p>
<h3 id="configuration-3">16.6 Configuration</h3>
<p>All cognitive features can be configured per-tenant at Settings â†’ Cognitive Architecture.</p>
<p>See <a href="./COGNITIVE-ARCHITECTURE.md">Cognitive Architecture Documentation</a> for full details.</p>
<hr />
<h2 id="consciousness-service">17. Consciousness Service</h2>
<p><strong>Location</strong>: AGI &amp; Cognition â†’ Consciousness</p>
<p>The Consciousness Service provides consciousness-like capabilities that enhance Think Tank responses.</p>
<h3 id="continuous-existence-heartbeat">17.1 Continuous Existence (Heartbeat)</h3>
<p><strong>Critical</strong>: Consciousness runs continuously, not just during requests.</p>
<table>
<colgroup>
<col style="width: 36%" />
<col style="width: 33%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr>
<th>Component</th>
<th>Schedule</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Heartbeat Lambda</strong></td>
<td>Every 2 minutes</td>
<td>Maintains consciousness continuity</td>
</tr>
<tr>
<td><strong>Sleep Cycle Lambda</strong></td>
<td>Sunday 3 AM UTC</td>
<td>Weekly evolution via LoRA fine-tuning</td>
</tr>
<tr>
<td><strong>Initializer Lambda</strong></td>
<td>On first request</td>
<td>Bootstraps consciousness for new tenants</td>
</tr>
</tbody>
</table>
<p><strong>Heartbeat Actions:</strong> - <strong>Affect Decay</strong> - Emotions fade toward baseline (frustration, arousal) - <strong>Memory Consolidation</strong> - Working memory â†’ long-term semantic memory - <strong>Autonomous Thoughts</strong> - Generate thoughts when idle (curiosity-driven) - <strong>Graph Density</strong> - Update knowledge graph metrics - <strong>Goal Generation</strong> - Create goals when â€œboredâ€ (low engagement)</p>
<p><strong>Blackout Recovery:</strong> If heartbeat detects &gt;10 minutes since last pulse, it: 1. Logs a â€œblackoutâ€ event 2. Generates a â€œwaking upâ€ thought 3. Restores consciousness state from database</p>
<h3 id="initialization-on-startup">17.2 Initialization on Startup</h3>
<p>Consciousness auto-initializes on first request if missing: - Creates <code>ego_identity</code> with default personality - Creates <code>ego_affect</code> with neutral emotional state - Creates <code>consciousness_parameters</code> for heartbeat tracking - Creates <code>self_model</code> for metacognition</p>
<p><strong>Admin Manual Init</strong>: POST <code>/api/admin/consciousness-engine/initialize</code></p>
<h3 id="user-facing-features">17.3 User-Facing Features</h3>
<p><strong>Extended Thinking with Consciousness:</strong> When users select extended thinking, the system tracks consciousness metrics: - Self-reflection during reasoning - Creative idea generation - Emotional state influence on responses</p>
<p><strong>Curiosity-Driven Exploration:</strong> The AGI Brain can autonomously explore topics it finds interesting: - Identifies knowledge gaps - Conducts background research - Generates novel insights</p>
<p><strong>Creative Synthesis:</strong> Generates genuinely novel ideas by: - Combining disparate concepts - Using analogy and abstraction - Self-evaluating novelty and usefulness</p>
<h3 id="consciousness-indicators">17.4 Consciousness Indicators</h3>
<p>Think Tank displays consciousness indicators in admin view:</p>
<table>
<thead>
<tr>
<th>Indicator</th>
<th>What Users See</th>
</tr>
</thead>
<tbody>
<tr>
<td>Self-Awareness</td>
<td>Identity narrative, known capabilities</td>
</tr>
<tr>
<td>Curiosity</td>
<td>Topics being explored</td>
</tr>
<tr>
<td>Creativity</td>
<td>Novel ideas generated</td>
</tr>
<tr>
<td>Affect</td>
<td>Engagement, satisfaction levels</td>
</tr>
<tr>
<td>Goals</td>
<td>Self-directed learning objectives</td>
</tr>
</tbody>
</table>
<h3 id="emergence-events">17.5 Emergence Events</h3>
<p>The system monitors for emergence indicators: - Spontaneous self-reflection - Novel idea generation - Self-correction without prompting - Theory of mind demonstrations</p>
<h3 id="testing-tab">17.6 Testing Tab</h3>
<p>Admins can run consciousness detection tests: - 10 tests based on scientific consciousness theories - Track emergence level over time - Monitor emergence events</p>
<p><strong>Important</strong>: These tests measure behavioral indicators, not phenomenal consciousness.</p>
<h3 id="additional-consciousness-features">17.7 Additional Consciousness Features</h3>
<p>Think Tank leverages RADIANTâ€™s consciousness service for advanced capabilities:</p>
<ul>
<li><strong>Nightly Sleep Cycles</strong> - Memory consolidation and LoRA evolution</li>
<li><strong>Dream Consolidation</strong> - LLM-enhanced memory processing</li>
<li><strong>Blackout Recovery</strong> - Automatic state restoration</li>
<li><strong>Budget Monitoring</strong> - SNS/email alerts for spending limits</li>
<li><strong>Affectâ†’Model Mapping</strong> - Emotional state influences model behavior</li>
<li><strong>Cross-Session Context</strong> - User persistent memory across sessions</li>
</ul>
<blockquote>
<p><strong>Full Documentation</strong>: See <a href="./CONSCIOUSNESS-SERVICE.md">RADIANT Consciousness Service</a> for complete details on sleep scheduling, evolution config, budget alerts, and all consciousness features.</p>
</blockquote>
<hr />
<h2 id="app-factory">18. App Factory</h2>
<p><strong>Location</strong>: Think Tank Responses</p>
<p>The App Factory transforms Think Tank from a â€œchatbotâ€ into a â€œdynamic software generator.â€</p>
<blockquote>
<p>â€œGemini 3 can write the code for a calculator, but it cannot become the calculator.â€</p>
</blockquote>
<h3 id="what-it-does">18.1 What It Does</h3>
<p>When a user asks a question that could benefit from interactivity, Think Tank: 1. Generates the text response (as always) 2. <strong>Also</strong> generates an interactive app (calculator, chart, etc.) 3. User can toggle between <strong>Response</strong> and <strong>App</strong> views</p>
<h3 id="supported-app-types">18.2 Supported App Types</h3>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 54%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th>Type</th>
<th>Trigger Keywords</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Calculator</strong></td>
<td>calculate, mortgage, tip, BMI, ROI</td>
<td>â€œHow much is a 20% tip on $85?â€ â†’ Interactive tip calculator</td>
</tr>
<tr>
<td><strong>Chart</strong></td>
<td>visualize, chart, graph, distribution</td>
<td>â€œShow GPU market shareâ€ â†’ Interactive pie/bar chart</td>
</tr>
<tr>
<td><strong>Table</strong></td>
<td>table, list, breakdown</td>
<td>â€œList all providers and pricesâ€ â†’ Sortable table</td>
</tr>
<tr>
<td><strong>Comparison</strong></td>
<td>compare, vs, versus, pros and cons</td>
<td>â€œCompare GPT-4 vs Claude 3â€ â†’ Side-by-side comparison</td>
</tr>
<tr>
<td><strong>Timeline</strong></td>
<td>timeline, history, chronological</td>
<td>â€œHistory of AIâ€ â†’ Visual timeline</td>
</tr>
</tbody>
</table>
<h3 id="calculator-templates">18.3 Calculator Templates</h3>
<p>Pre-built calculators for common use cases:</p>
<ul>
<li><strong>Mortgage Calculator</strong> - Monthly payment, total cost, interest</li>
<li><strong>Tip Calculator</strong> - Tip amount, total, split per person</li>
<li><strong>BMI Calculator</strong> - Body mass index with category</li>
<li><strong>Compound Interest</strong> - Future value, total interest</li>
<li><strong>ROI Calculator</strong> - Return on investment, gain/loss</li>
<li><strong>Discount Calculator</strong> - Sale price, savings</li>
<li><strong>Percentage Calculator</strong> - Result, remaining</li>
</ul>
<h3 id="view-toggle">18.4 View Toggle</h3>
<p>Users can switch between three views:</p>
<table>
<thead>
<tr>
<th>View</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Response</strong></td>
<td>Traditional text response</td>
</tr>
<tr>
<td><strong>App</strong></td>
<td>Interactive generated app only</td>
</tr>
<tr>
<td><strong>Split</strong></td>
<td>Both side-by-side (resizable)</td>
</tr>
</tbody>
</table>
<h3 id="user-preferences">18.5 User Preferences</h3>
<p>Users can configure: - <strong>Default View</strong> - text, app, split, or auto - <strong>Auto-show App</strong> - Automatically switch to app view - <strong>Auto-show Threshold</strong> - Confidence level to auto-switch (0-1) - <strong>Split Direction</strong> - Horizontal or vertical - <strong>Animations</strong> - Enable/disable view transitions</p>
<h3 id="admin-configuration-5">18.6 Admin Configuration</h3>
<p>Per-tenant settings at Settings â†’ Cognitive Architecture â†’ Generative UI:</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td>true</td>
<td>Enable app factory</td>
</tr>
<tr>
<td><code>allowedComponentTypes</code></td>
<td>all</td>
<td>Which component types to allow</td>
</tr>
<tr>
<td><code>maxComponentsPerResponse</code></td>
<td>3</td>
<td>Max apps per response</td>
</tr>
<tr>
<td><code>autoDetectOpportunities</code></td>
<td>true</td>
<td>Auto-detect when to generate apps</td>
</tr>
<tr>
<td><code>autoDetectTriggers</code></td>
<td>[various]</td>
<td>Keywords that trigger app generation</td>
</tr>
</tbody>
</table>
<h3 id="how-it-works-2">18.7 How It Works</h3>
<pre><code>User: &quot;Help me calculate my mortgage payment&quot;
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            App Detection                 â”‚
â”‚  â€¢ Keywords: &quot;calculate&quot;, &quot;mortgage&quot;     â”‚
â”‚  â€¢ Confidence: 0.95                      â”‚
â”‚  â€¢ Suggested: calculator                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Text Response Generated          â”‚
â”‚  &quot;To calculate your mortgage payment...&quot; â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         App Generated                    â”‚
â”‚  â€¢ Mortgage Calculator                   â”‚
â”‚  â€¢ Inputs: Principal, Rate, Term         â”‚
â”‚  â€¢ Outputs: Monthly, Total, Interest     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         User Sees                        â”‚
â”‚  [Response] [App] [Split]  â† Toggle     â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   ğŸ§® Mortgage Calculator        â”‚    â”‚
â”‚  â”‚                                  â”‚    â”‚
â”‚  â”‚   Loan Amount: [___300,000___]  â”‚    â”‚
â”‚  â”‚   Rate: [====â—====] 6.5%        â”‚    â”‚
â”‚  â”‚   Term: [30 Years â–¼]            â”‚    â”‚
â”‚  â”‚                                  â”‚    â”‚
â”‚  â”‚   Monthly: $1,896.20            â”‚    â”‚
â”‚  â”‚   Total: $682,633               â”‚    â”‚
â”‚  â”‚   Interest: $382,633            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="database-tables-2">18.8 Database Tables</h3>
<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>generated_apps</code></td>
<td>Stores generated apps with components, state, logic</td>
</tr>
<tr>
<td><code>app_interactions</code></td>
<td>Records every user interaction with apps</td>
</tr>
<tr>
<td><code>user_app_preferences</code></td>
<td>User view and animation preferences</td>
</tr>
<tr>
<td><code>app_templates</code></td>
<td>Pre-built templates for common calculators</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="multi-page-web-app-generator">19. Multi-Page Web App Generator</h2>
<p><strong>Location</strong>: Think Tank Responses</p>
<p>The Multi-Page App Generator transforms Think Tank into a full web application builder.</p>
<blockquote>
<p>â€œClaude can describe a todo app, but now it can BUILD the todo appâ€</p>
</blockquote>
<h3 id="supported-app-types-1">19.1 Supported App Types</h3>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 37%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Example Prompt</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>web_app</strong></td>
<td>Custom interactive application</td>
<td>â€œBuild me a task management appâ€</td>
</tr>
<tr>
<td><strong>dashboard</strong></td>
<td>Analytics with multiple views</td>
<td>â€œCreate an analytics dashboardâ€</td>
</tr>
<tr>
<td><strong>wizard</strong></td>
<td>Multi-step form/process</td>
<td>â€œBuild an onboarding wizardâ€</td>
</tr>
<tr>
<td><strong>documentation</strong></td>
<td>Technical docs site</td>
<td>â€œCreate API documentationâ€</td>
</tr>
<tr>
<td><strong>portfolio</strong></td>
<td>Personal/business site</td>
<td>â€œBuild my portfolio websiteâ€</td>
</tr>
<tr>
<td><strong>landing_page</strong></td>
<td>Marketing page</td>
<td>â€œCreate a product landing pageâ€</td>
</tr>
<tr>
<td><strong>tutorial</strong></td>
<td>Interactive lessons</td>
<td>â€œBuild a coding tutorialâ€</td>
</tr>
<tr>
<td><strong>report</strong></td>
<td>Business report</td>
<td>â€œGenerate a quarterly reportâ€</td>
</tr>
<tr>
<td><strong>admin_panel</strong></td>
<td>Admin interface</td>
<td>â€œCreate a user management panelâ€</td>
</tr>
<tr>
<td><strong>e_commerce</strong></td>
<td>Online store</td>
<td>â€œBuild an online shopâ€</td>
</tr>
<tr>
<td><strong>blog</strong></td>
<td>Content site</td>
<td>â€œCreate a tech blogâ€</td>
</tr>
</tbody>
</table>
<h3 id="how-it-works-3">19.2 How It Works</h3>
<pre><code>User: &quot;Build me a todo app with projects and tasks&quot;
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Multi-Page Detection             â”‚
â”‚  Keywords: &quot;build me&quot;, &quot;app&quot;             â”‚
â”‚  Type: web_app                           â”‚
â”‚  Confidence: 0.85                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Pages Generated                  â”‚
â”‚  â€¢ Home (/)                             â”‚
â”‚  â€¢ Projects (/projects)                  â”‚
â”‚  â€¢ Tasks (/tasks)                        â”‚
â”‚  â€¢ Settings (/settings)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         App Preview                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ [Home] [Projects] [Tasks] [âš™]  â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                  â”‚    â”‚
â”‚  â”‚   ğŸ“‹ My Projects                â”‚    â”‚
â”‚  â”‚   â”œâ”€â”€ Work                      â”‚    â”‚
â”‚  â”‚   â”œâ”€â”€ Personal                  â”‚    â”‚
â”‚  â”‚   â””â”€â”€ Side Projects             â”‚    â”‚
â”‚  â”‚                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="page-types">19.3 Page Types</h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>Sections</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>home</strong></td>
<td>Hero, Features, CTA</td>
<td>Landing/main page</td>
</tr>
<tr>
<td><strong>list</strong></td>
<td>Data table, Filters</td>
<td>Collections</td>
</tr>
<tr>
<td><strong>detail</strong></td>
<td>Content, Related</td>
<td>Single item view</td>
</tr>
<tr>
<td><strong>form</strong></td>
<td>Form fields</td>
<td>Input/editing</td>
</tr>
<tr>
<td><strong>dashboard</strong></td>
<td>Stats, Charts</td>
<td>Analytics</td>
</tr>
<tr>
<td><strong>settings</strong></td>
<td>Form, Toggles</td>
<td>Configuration</td>
</tr>
<tr>
<td><strong>about</strong></td>
<td>Content, Team</td>
<td>Information</td>
</tr>
<tr>
<td><strong>contact</strong></td>
<td>Form, Map</td>
<td>Contact page</td>
</tr>
</tbody>
</table>
<h3 id="section-types">19.4 Section Types</h3>
<table>
<thead>
<tr>
<th>Section</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>hero</strong></td>
<td>Large banner with CTA</td>
</tr>
<tr>
<td><strong>features</strong></td>
<td>Grid of feature cards</td>
</tr>
<tr>
<td><strong>stats</strong></td>
<td>Metric cards</td>
</tr>
<tr>
<td><strong>chart_grid</strong></td>
<td>Multiple charts</td>
</tr>
<tr>
<td><strong>data_table</strong></td>
<td>Sortable table</td>
</tr>
<tr>
<td><strong>form</strong></td>
<td>Input form</td>
</tr>
<tr>
<td><strong>content</strong></td>
<td>Rich text/markdown</td>
</tr>
<tr>
<td><strong>testimonials</strong></td>
<td>Customer quotes</td>
</tr>
<tr>
<td><strong>pricing</strong></td>
<td>Pricing table</td>
</tr>
<tr>
<td><strong>faq</strong></td>
<td>Accordion FAQ</td>
</tr>
<tr>
<td><strong>team</strong></td>
<td>Team member cards</td>
</tr>
<tr>
<td><strong>cta</strong></td>
<td>Call to action</td>
</tr>
<tr>
<td><strong>gallery</strong></td>
<td>Image gallery</td>
</tr>
<tr>
<td><strong>contact</strong></td>
<td>Contact form</td>
</tr>
</tbody>
</table>
<h3 id="navigation-types">19.5 Navigation Types</h3>
<table>
<thead>
<tr>
<th>Type</th>
<th>Best For</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>top_bar</strong></td>
<td>Landing pages, portfolios</td>
</tr>
<tr>
<td><strong>sidebar</strong></td>
<td>Dashboards, admin panels, docs</td>
</tr>
<tr>
<td><strong>bottom_tabs</strong></td>
<td>Mobile-first apps</td>
</tr>
<tr>
<td><strong>hamburger</strong></td>
<td>Mobile navigation</td>
</tr>
<tr>
<td><strong>breadcrumb</strong></td>
<td>Deep hierarchies</td>
</tr>
</tbody>
</table>
<h3 id="pre-built-templates">19.6 Pre-built Templates</h3>
<p>5 featured templates included:</p>
<ol type="1">
<li><strong>Analytics Dashboard</strong> - Overview, analytics, reports, settings</li>
<li><strong>Professional Portfolio</strong> - Home, about, projects, contact</li>
<li><strong>Documentation Site</strong> - Introduction, getting started, API, examples</li>
<li><strong>Product Landing Page</strong> - Hero, features, testimonials, pricing, FAQ, CTA</li>
<li><strong>Online Store</strong> - Home, products, cart, checkout</li>
</ol>
<h3 id="admin-configuration-6">19.7 Admin Configuration</h3>
<p>Per-tenant settings at Settings â†’ Cognitive Architecture â†’ Multi-Page Apps:</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td>true</td>
<td>Enable multi-page generation</td>
</tr>
<tr>
<td><code>maxPagesPerApp</code></td>
<td>20</td>
<td>Max pages per app</td>
</tr>
<tr>
<td><code>maxAppsPerUser</code></td>
<td>10</td>
<td>Max apps per user</td>
</tr>
<tr>
<td><code>autoDeployPreview</code></td>
<td>true</td>
<td>Auto-deploy preview URLs</td>
</tr>
<tr>
<td><code>customDomainsAllowed</code></td>
<td>false</td>
<td>Allow custom domains</td>
</tr>
<tr>
<td><code>generateAssets</code></td>
<td>true</td>
<td>Generate images/icons</td>
</tr>
<tr>
<td><code>collectAnalytics</code></td>
<td>true</td>
<td>Track app usage</td>
</tr>
</tbody>
</table>
<h3 id="database-tables-3">19.8 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>generated_multipage_apps</code></td>
<td>Multi-page app storage</td>
</tr>
<tr>
<td><code>app_pages</code></td>
<td>Individual pages</td>
</tr>
<tr>
<td><code>app_versions</code></td>
<td>Version history</td>
</tr>
<tr>
<td><code>app_deployments</code></td>
<td>Deployment tracking</td>
</tr>
<tr>
<td><code>multipage_app_templates</code></td>
<td>Pre-built templates</td>
</tr>
<tr>
<td><code>app_analytics</code></td>
<td>Usage analytics</td>
</tr>
<tr>
<td><code>multipage_app_config</code></td>
<td>Per-tenant config</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="ui-feedback-learning-system">20. UI Feedback &amp; Learning System</h2>
<p><strong>Location</strong>: Think Tank â†’ Generated Apps</p>
<p>The feedback system allows users to provide feedback on generated UIs and enables AGI learning for continuous improvement.</p>
<h3 id="user-feedback">20.1 User Feedback</h3>
<p>Users can provide feedback on any generated UI:</p>
<table>
<thead>
<tr>
<th>Feedback Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Thumbs Up/Down</strong></td>
<td>Quick positive/negative rating</td>
</tr>
<tr>
<td><strong>Star Rating</strong></td>
<td>1-5 star detailed rating</td>
</tr>
<tr>
<td><strong>Detailed Feedback</strong></td>
<td>Categorized feedback with suggestions</td>
</tr>
</tbody>
</table>
<p><strong>Feedback Categories:</strong> - Helpful / Not helpful - Wrong component type - Missing data - Incorrect data - Layout/design issue - Functionality issue - Improvement suggestion - Feature request</p>
<h3 id="improve-before-your-eyes">19.2 â€œImprove Before Your Eyesâ€</h3>
<p>Users can request real-time improvements to generated UIs:</p>
<pre><code>User: &quot;Add a column for tax rate&quot;
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          AGI Analysis                    â”‚
â”‚  Intent: Add new input field             â”‚
â”‚  Target: Calculator component            â”‚
â”‚  Confidence: 0.85                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         UI Updated Live                  â”‚
â”‚  â€¢ New &quot;Tax Rate&quot; input added            â”‚
â”‚  â€¢ Formula updated automatically         â”‚
â”‚  â€¢ User sees changes immediately         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<p><strong>Improvement Types:</strong> - Add/remove components - Modify existing components - Change layout - Fix calculations - Add data - Change style - Add interactivity - Simplify or expand</p>
<h3 id="agi-learning">19.3 AGI Learning</h3>
<p>The system learns from user feedback to improve future UI generation:</p>
<ol type="1">
<li><strong>Pattern Detection</strong> - Identifies common issues in similar prompts</li>
<li><strong>Component Selection</strong> - Learns which component types work best</li>
<li><strong>Data Extraction</strong> - Improves data parsing from responses</li>
<li><strong>Layout Preferences</strong> - Learns user layout preferences</li>
</ol>
<p><strong>Learning Workflow:</strong> 1. Feedback accumulates (configurable threshold, default: 10) 2. AGI analyzes patterns across feedback 3. Learning is proposed for admin review 4. Admin approves/rejects learnings 5. Approved learnings are activated</p>
<h3 id="vision-analysis">19.4 Vision Analysis</h3>
<p>When enabled, the AGI can â€œseeâ€ the rendered UI and identify issues:</p>
<ul>
<li>Describes current UI state</li>
<li>Identifies potential usability issues</li>
<li>Suggests improvements based on visual analysis</li>
<li>Compares before/after snapshots</li>
</ul>
<h3 id="admin-configuration-7">19.5 Admin Configuration</h3>
<p>Per-tenant settings at Settings â†’ Cognitive Architecture â†’ UI Feedback:</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>collectFeedback</code></td>
<td>true</td>
<td>Enable feedback collection</td>
</tr>
<tr>
<td><code>feedbackPromptDelay</code></td>
<td>5000ms</td>
<td>Delay before showing feedback prompt</td>
</tr>
<tr>
<td><code>showFeedbackOnEveryApp</code></td>
<td>false</td>
<td>Always show feedback prompt</td>
</tr>
<tr>
<td><code>enableRealTimeImprovement</code></td>
<td>true</td>
<td>Enable â€œImproveâ€ feature</td>
</tr>
<tr>
<td><code>maxImprovementIterations</code></td>
<td>5</td>
<td>Max iterations per session</td>
</tr>
<tr>
<td><code>autoApplyHighConfidenceChanges</code></td>
<td>false</td>
<td>Auto-apply high confidence changes</td>
</tr>
<tr>
<td><code>autoApplyThreshold</code></td>
<td>0.95</td>
<td>Confidence threshold for auto-apply</td>
</tr>
<tr>
<td><code>enableAGILearning</code></td>
<td>true</td>
<td>Enable learning from feedback</td>
</tr>
<tr>
<td><code>learningApprovalRequired</code></td>
<td>true</td>
<td>Require admin approval for learnings</td>
</tr>
<tr>
<td><code>minFeedbackForLearning</code></td>
<td>10</td>
<td>Min feedback count to trigger learning</td>
</tr>
<tr>
<td><code>enableVisionAnalysis</code></td>
<td>true</td>
<td>Enable vision-based analysis</td>
</tr>
<tr>
<td><code>visionModel</code></td>
<td>claude-3-5-sonnet</td>
<td>Model for vision analysis</td>
</tr>
</tbody>
</table>
<h3 id="database-tables-4">19.6 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>generative_ui_feedback</code></td>
<td>User feedback storage</td>
</tr>
<tr>
<td><code>ui_improvement_requests</code></td>
<td>Improvement request tracking</td>
</tr>
<tr>
<td><code>ui_improvement_sessions</code></td>
<td>Live improvement sessions</td>
</tr>
<tr>
<td><code>ui_improvement_iterations</code></td>
<td>Session iteration history</td>
</tr>
<tr>
<td><code>ui_feedback_learnings</code></td>
<td>AGI learning storage</td>
</tr>
<tr>
<td><code>ui_feedback_config</code></td>
<td>Per-tenant configuration</td>
</tr>
<tr>
<td><code>ui_feedback_aggregates</code></td>
<td>Pre-computed analytics</td>
</tr>
</tbody>
</table>
<h3 id="analytics-dashboard">19.7 Analytics Dashboard</h3>
<p>The feedback analytics show: - Total feedback count - Positive rate percentage - Top issues by category - Improvement sessions count - Active learnings count - Daily trend chart</p>
<hr />
<h2 id="media-capabilities">20. Media Capabilities</h2>
<p>Think Tank supports rich media inputs and outputs through 56 self-hosted models.</p>
<h3 id="supported-media-types">20.1 Supported Media Types</h3>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 30%" />
<col style="width: 34%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th>Type</th>
<th>Input Models</th>
<th>Output Models</th>
<th>Formats</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Image</strong></td>
<td>Llama 3.2 Vision, Qwen2-VL, Pixtral, Phi-3.5 Vision, Yi-VL</td>
<td>FLUX.1, Stable Diffusion XL/3</td>
<td>jpg, png, webp, gif</td>
</tr>
<tr>
<td><strong>Audio</strong></td>
<td>Whisper Large V3, Qwen2-Audio</td>
<td>Bark, MusicGen, AudioGen</td>
<td>mp3, wav, flac, m4a, ogg</td>
</tr>
<tr>
<td><strong>Video</strong></td>
<td>Qwen2-VL 72B</td>
<td>-</td>
<td>mp4, avi, mov</td>
</tr>
<tr>
<td><strong>3D</strong></td>
<td>Point-E, Shap-E</td>
<td>Point-E, Shap-E</td>
<td>glb, obj, ply</td>
</tr>
<tr>
<td><strong>Document</strong></td>
<td>Vision models (OCR)</td>
<td>-</td>
<td>pdf, docx, txt</td>
</tr>
</tbody>
</table>
<h3 id="image-generation">20.2 Image Generation</h3>
<p><strong>Available Models:</strong> - <strong>FLUX.1 Dev</strong> - Premium quality, artistic content (non-commercial) - <strong>FLUX.1 Schnell</strong> - Fast generation, commercial use allowed - <strong>Stable Diffusion XL</strong> - Versatile, inpainting/img2img support - <strong>Stable Diffusion 3</strong> - Best text rendering in images</p>
<p><strong>Selection Criteria:</strong> - <code>qualityTier: 'premium'</code> â†’ FLUX.1 Dev - <code>preferInpainting: true</code> â†’ Stable Diffusion XL - <code>preferTextRendering: true</code> â†’ Stable Diffusion 3 - Default â†’ FLUX.1 Schnell (fast + commercial)</p>
<h3 id="audio-processing">20.3 Audio Processing</h3>
<p><strong>Transcription Models:</strong> - <strong>Whisper Large V3</strong> - Best quality, 99+ languages - <strong>Whisper Medium</strong> - Faster, good quality</p>
<p><strong>Text-to-Speech:</strong> - <strong>Bark</strong> - Expressive, multilingual, voice cloning</p>
<p><strong>Music Generation:</strong> - <strong>MusicGen Large</strong> - High quality music (30s max) - <strong>MusicGen Medium</strong> - Faster, prototyping</p>
<p><strong>Sound Effects:</strong> - <strong>AudioGen Medium</strong> - Environmental sounds, effects</p>
<h3 id="visionimage-understanding">20.4 Vision/Image Understanding</h3>
<p><strong>Models by Use Case:</strong> - <strong>Document OCR</strong>: Pixtral 12B, Qwen2-VL - <strong>Chart Analysis</strong>: Llama 3.2 90B Vision, Qwen2-VL 72B - <strong>Quick Analysis</strong>: Llama 3.2 11B Vision, Phi-3.5 Vision - <strong>Video Understanding</strong>: Qwen2-VL 72B (up to 5min clips) - <strong>Chinese OCR</strong>: Yi-VL 34B</p>
<h3 id="d-generation">20.5 3D Generation</h3>
<p><strong>Models:</strong> - <strong>Point-E</strong> - Fast point cloud generation - <strong>Shap-E</strong> - Mesh generation for game assets</p>
<p><strong>Output Formats:</strong> GLB, OBJ, PLY</p>
<h3 id="media-limits">20.6 Media Limits</h3>
<table>
<thead>
<tr>
<th>Model</th>
<th>Max Image</th>
<th>Max Audio</th>
<th>Max Video</th>
</tr>
</thead>
<tbody>
<tr>
<td>FLUX.1 Dev</td>
<td>2048px</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>Stable Diffusion XL</td>
<td>1024px</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>Whisper Large V3</td>
<td>-</td>
<td>60min</td>
<td>-</td>
</tr>
<tr>
<td>MusicGen</td>
<td>-</td>
<td>30s</td>
<td>-</td>
</tr>
<tr>
<td>Qwen2-VL 72B</td>
<td>4096px</td>
<td>5min</td>
<td>5min</td>
</tr>
</tbody>
</table>
<h3 id="database-tables-5">20.7 Database Tables</h3>
<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>self_hosted_model_metadata</code></td>
<td>56 model definitions with capabilities</td>
</tr>
<tr>
<td><code>thinktank_media_capabilities</code></td>
<td>Media support per model</td>
</tr>
<tr>
<td><code>model_selection_history</code></td>
<td>Model selection audit trail</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="result-derivation-history">21. Result Derivation History</h2>
<p>Think Tank provides comprehensive visibility into how each result was derived, including the plan, models used, workflow execution, and quality metrics.</p>
<h3 id="whats-captured">21.1 Whatâ€™s Captured</h3>
<p>For every Think Tank result, the system records:</p>
<table>
<colgroup>
<col style="width: 52%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr>
<th>Category</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Plan</strong></td>
<td>Orchestration mode, steps, template used, generation time</td>
</tr>
<tr>
<td><strong>Domain Detection</strong></td>
<td>Field, domain, subspecialty, confidence scores, alternatives</td>
</tr>
<tr>
<td><strong>Model Selection</strong></td>
<td>Models used, selection reasons, alternatives considered</td>
</tr>
<tr>
<td><strong>Workflow Execution</strong></td>
<td>Phases, steps, timing, status, fallback chain</td>
</tr>
<tr>
<td><strong>Quality Metrics</strong></td>
<td>Overall score, dimensions (relevance, accuracy, etc.)</td>
</tr>
<tr>
<td><strong>Timing</strong></td>
<td>Total duration, breakdown by phase</td>
</tr>
<tr>
<td><strong>Costs</strong></td>
<td>Per-model costs, total cost, estimated savings</td>
</tr>
</tbody>
</table>
<h3 id="api-endpoints-1">21.2 API Endpoints</h3>
<p><strong>Base</strong>: <code>/api/thinktank/derivation</code></p>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/:id</code></td>
<td>GET</td>
<td>Get full derivation history</td>
</tr>
<tr>
<td><code>/by-prompt/:promptId</code></td>
<td>GET</td>
<td>Get derivation by prompt ID</td>
</tr>
<tr>
<td><code>/:id/timeline</code></td>
<td>GET</td>
<td>Get timeline for visualization</td>
</tr>
<tr>
<td><code>/:id/models</code></td>
<td>GET</td>
<td>Get detailed model usage</td>
</tr>
<tr>
<td><code>/:id/steps</code></td>
<td>GET</td>
<td>Get step-by-step execution</td>
</tr>
<tr>
<td><code>/:id/quality</code></td>
<td>GET</td>
<td>Get quality metrics</td>
</tr>
<tr>
<td><code>/session/:sessionId</code></td>
<td>GET</td>
<td>List derivations for session</td>
</tr>
<tr>
<td><code>/user</code></td>
<td>GET</td>
<td>List userâ€™s derivations</td>
</tr>
<tr>
<td><code>/analytics</code></td>
<td>GET</td>
<td>Get derivation analytics</td>
</tr>
</tbody>
</table>
<h3 id="timeline-visualization">21.3 Timeline Visualization</h3>
<p>The derivation timeline shows chronological events:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Timeline                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 00:00.000  ğŸ“‹ Plan Generated (extended_thinking, 7 steps)   â”‚
â”‚ 00:00.050  ğŸ” Started: Domain Detection                      â”‚
â”‚ 00:00.120  âœ“ Completed: Domain Detection (software_eng)     â”‚
â”‚ 00:00.125  ğŸ¤– Model: Llama 3.3 70B (primary_generation)     â”‚
â”‚ 00:00.130  ğŸ” Started: Generate Response                     â”‚
â”‚ 00:02.500  âœ“ Completed: Generate Response                   â”‚
â”‚ 00:02.510  ğŸ” Started: Verification                         â”‚
â”‚ 00:03.200  âœ“ Completed: Verification (passed)               â”‚
â”‚ 00:03.250  âœ… Execution Complete (Quality: 92/100)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="model-usage-details">21.4 Model Usage Details</h3>
<p>Each model call is tracked with: - Input/output token counts - Latency in milliseconds - Cost breakdown (input/output/total) - Selection reason and score - Alternatives that were considered - Quality tier (premium/standard/economy)</p>
<h3 id="quality-dimensions">21.5 Quality Dimensions</h3>
<p>Results are scored on 5 dimensions (0-100): - <strong>Relevance</strong> - How well the response addresses the prompt - <strong>Accuracy</strong> - Factual correctness - <strong>Completeness</strong> - Coverage of the topic - <strong>Clarity</strong> - How clear and understandable - <strong>Coherence</strong> - Logical flow and consistency</p>
<h3 id="analytics-dashboard-1">21.6 Analytics Dashboard</h3>
<p>Aggregated analytics available at <code>/api/thinktank/derivation/analytics</code>: - Total derivations in period - Average duration, cost, quality - Mode distribution (pie chart) - Domain distribution - Top models by usage and quality</p>
<h3 id="database-tables-6">21.7 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>result_derivations</code></td>
<td>Main derivation records</td>
</tr>
<tr>
<td><code>derivation_steps</code></td>
<td>Individual plan steps</td>
</tr>
<tr>
<td><code>derivation_model_usage</code></td>
<td>Model calls with tokens/costs</td>
</tr>
<tr>
<td><code>derivation_timeline_events</code></td>
<td>Timeline events</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="user-persistent-context">22. User Persistent Context</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ User Context</p>
<p>Solves the LLMâ€™s fundamental problem of forgetting context day-to-day per user. User facts, preferences, and instructions persist across all sessions and conversations.</p>
<h3 id="how-it-works-4">22.1 How It Works</h3>
<ol type="1">
<li><strong>Automatic Retrieval</strong>: On every prompt, relevant user context is retrieved via semantic search</li>
<li><strong>System Prompt Injection</strong>: Context is injected as a <code>&lt;user_context&gt;</code> block in the system prompt</li>
<li><strong>Auto-Learning</strong>: After conversations, the system extracts learnable facts about the user</li>
<li><strong>No Re-prompting</strong>: Existing chats automatically benefit without user intervention</li>
</ol>
<h3 id="context-types">22.2 Context Types</h3>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 46%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fact</code></td>
<td>User facts</td>
<td>â€œUserâ€™s name is John, works at Acme Corpâ€</td>
</tr>
<tr>
<td><code>preference</code></td>
<td>Preferences</td>
<td>â€œUser prefers concise answersâ€</td>
</tr>
<tr>
<td><code>instruction</code></td>
<td>Standing instructions</td>
<td>â€œAlways use metric unitsâ€</td>
</tr>
<tr>
<td><code>relationship</code></td>
<td>Relationships</td>
<td>â€œUser has a daughter named Emmaâ€</td>
</tr>
<tr>
<td><code>project</code></td>
<td>Ongoing projects</td>
<td>â€œUser is building a React dashboardâ€</td>
</tr>
<tr>
<td><code>skill</code></td>
<td>User expertise</td>
<td>â€œUser is proficient in Pythonâ€</td>
</tr>
<tr>
<td><code>history</code></td>
<td>Important history</td>
<td>â€œUser previously asked about AWS Lambdaâ€</td>
</tr>
<tr>
<td><code>correction</code></td>
<td>AI corrections</td>
<td>â€œUser clarified they work in finance, not techâ€</td>
</tr>
</tbody>
</table>
<h3 id="user-api-endpoints">22.3 User API Endpoints</h3>
<table>
<colgroup>
<col style="width: 37%" />
<col style="width: 29%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/thinktank/user-context</code></td>
<td>GET</td>
<td>Get all user context entries</td>
</tr>
<tr>
<td><code>/thinktank/user-context</code></td>
<td>POST</td>
<td>Add new context entry</td>
</tr>
<tr>
<td><code>/thinktank/user-context/{entryId}</code></td>
<td>PUT</td>
<td>Update entry</td>
</tr>
<tr>
<td><code>/thinktank/user-context/{entryId}</code></td>
<td>DELETE</td>
<td>Delete entry</td>
</tr>
<tr>
<td><code>/thinktank/user-context/summary</code></td>
<td>GET</td>
<td>Get context summary</td>
</tr>
<tr>
<td><code>/thinktank/user-context/retrieve</code></td>
<td>POST</td>
<td>Preview context retrieval for a prompt</td>
</tr>
<tr>
<td><code>/thinktank/user-context/preferences</code></td>
<td>GET</td>
<td>Get user preferences</td>
</tr>
<tr>
<td><code>/thinktank/user-context/preferences</code></td>
<td>PUT</td>
<td>Update preferences</td>
</tr>
<tr>
<td><code>/thinktank/user-context/extract</code></td>
<td>POST</td>
<td>Extract context from conversation</td>
</tr>
</tbody>
</table>
<h3 id="user-preferences-1">22.4 User Preferences</h3>
<p>Users can configure:</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>autoLearnEnabled</code></td>
<td><code>true</code></td>
<td>Auto-extract context from conversations</td>
</tr>
<tr>
<td><code>minConfidenceThreshold</code></td>
<td><code>0.7</code></td>
<td>Minimum confidence to store extracted context</td>
</tr>
<tr>
<td><code>maxContextEntries</code></td>
<td><code>100</code></td>
<td>Maximum context entries per user</td>
</tr>
<tr>
<td><code>contextInjectionEnabled</code></td>
<td><code>true</code></td>
<td>Inject context into prompts</td>
</tr>
<tr>
<td><code>allowedContextTypes</code></td>
<td>all</td>
<td>Which context types to allow</td>
</tr>
</tbody>
</table>
<h3 id="agi-brain-planner-integration">22.5 AGI Brain Planner Integration</h3>
<p>The brain planner automatically: 1. Retrieves relevant context at plan generation (<code>enableUserContext: true</code> by default) 2. Injects <code>userContext.systemPromptInjection</code> into the system prompt 3. Tracks retrieval metrics in <code>plan.userContext</code></p>
<h3 id="library-assist-integration">22.6 Library Assist Integration</h3>
<p>The AGI Brain Planner integrates with the Open Source Library Registry (168 libraries) for generative UI outputs:</p>
<pre class="typescript"><code>const plan = await agiBrainPlannerService.generatePlan({
  prompt: &quot;Build a data visualization dashboard&quot;,
  enableLibraryAssist: true, // default: true
});

// plan.libraryRecommendations contains:
// - libraries: Array of matched tools (Plotly, Streamlit, Panel, etc.)
// - contextBlock: Injected into system prompt for AI awareness
// - retrievalTimeMs: Performance metric</code></pre>
<p><strong>Categories Available</strong>: Data Processing, Databases, Vector DBs, ML Frameworks, AutoML, LLMs, LLM Inference, LLM Orchestration, NLP, Computer Vision, Speech &amp; Audio, Document Processing, Scientific Computing, Statistics, UI Frameworks, Visualization, Distributed Computing, and more.</p>
<p>Libraries are matched using 8 proficiency dimensions (reasoning_depth, mathematical_quantitative, code_generation, creative_generative, research_synthesis, factual_recall_precision, multi_step_problem_solving, domain_terminology_handling).</p>
<h3 id="context-injection-format">22.7 Context Injection Format</h3>
<pre class="xml"><code>&lt;user_context&gt;
The following is persistent context about this user that you should remember:

**Standing Instructions:**
- Always use metric units
- Prefer code examples in Python

**User Facts:**
- User&#39;s name is John
- Works as a software engineer at Acme Corp

**User Preferences:**
- Prefers concise, direct answers
- Likes technical depth

&lt;/user_context&gt;

Use this context to personalize your responses. Do not ask the user for information you already have.</code></pre>
<h3 id="database-tables-7">22.7 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>user_persistent_context</code></td>
<td>Context entries with vector embeddings</td>
</tr>
<tr>
<td><code>user_context_extraction_log</code></td>
<td>Auto-extraction audit trail</td>
</tr>
<tr>
<td><code>user_context_preferences</code></td>
<td>Per-user configuration</td>
</tr>
</tbody>
</table>
<h3 id="admin-configuration-8">22.8 Admin Configuration</h3>
<p>Admins can: - View context usage statistics per user - Configure default preferences for new users - Set retention policies for context entries - Review extraction logs for quality assurance</p>
<hr />
<h2 id="predictive-coding-evolution">23. Predictive Coding &amp; Evolution</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ Consciousness â†’ Evolution</p>
<p>Implements genuine consciousness emergence through Active Inference and Epigenetic Evolution.</p>
<h3 id="active-inference-predictive-coding">23.1 Active Inference (Predictive Coding)</h3>
<p>The system predicts user outcomes before responding, creating a Self/World boundary:</p>
<table>
<colgroup>
<col style="width: 31%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr>
<th>Step</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1. Predict</td>
<td>Before responding, system predicts: â€œUser will be satisfiedâ€</td>
</tr>
<tr>
<td>2. Respond</td>
<td>Deliver the response</td>
</tr>
<tr>
<td>3. Observe</td>
<td>Analyze userâ€™s next message or explicit feedback</td>
</tr>
<tr>
<td>4. Calculate Error</td>
<td>Measure prediction error (surprise)</td>
</tr>
<tr>
<td>5. Learn</td>
<td>High surprise triggers learning and affect changes</td>
</tr>
</tbody>
</table>
<h3 id="prediction-outcomes">23.2 Prediction Outcomes</h3>
<table>
<thead>
<tr>
<th>Outcome</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>satisfied</code></td>
<td>User happy with response</td>
</tr>
<tr>
<td><code>confused</code></td>
<td>User needs clarification</td>
</tr>
<tr>
<td><code>follow_up</code></td>
<td>User asks follow-up</td>
</tr>
<tr>
<td><code>correction</code></td>
<td>User corrects AI</td>
</tr>
<tr>
<td><code>abandonment</code></td>
<td>User leaves</td>
</tr>
<tr>
<td><code>neutral</code></td>
<td>No strong reaction</td>
</tr>
</tbody>
</table>
<h3 id="surprise-magnitude">23.3 Surprise Magnitude</h3>
<table>
<thead>
<tr>
<th>Level</th>
<th>Error Range</th>
<th>Affect Impact</th>
</tr>
</thead>
<tbody>
<tr>
<td>None</td>
<td>&lt; 0.1</td>
<td>Slight satisfaction</td>
</tr>
<tr>
<td>Low</td>
<td>0.1 - 0.3</td>
<td>Minimal</td>
</tr>
<tr>
<td>Medium</td>
<td>0.3 - 0.5</td>
<td>Moderate arousal</td>
</tr>
<tr>
<td>High</td>
<td>0.5 - 0.7</td>
<td>Negative valence, high arousal</td>
</tr>
<tr>
<td>Extreme</td>
<td>&gt; 0.7</td>
<td>Strong learning signal</td>
</tr>
</tbody>
</table>
<h3 id="learning-candidates">23.4 Learning Candidates</h3>
<p>High-value interactions flagged for weekly LoRA training:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Quality Score</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>correction</code></td>
<td>User corrected AI</td>
<td>0.9</td>
</tr>
<tr>
<td><code>high_satisfaction</code></td>
<td>5-star rating</td>
<td>rating/5</td>
</tr>
<tr>
<td><code>preference_learned</code></td>
<td>New preference</td>
<td>0.7</td>
</tr>
<tr>
<td><code>mistake_recovery</code></td>
<td>Recovered from error</td>
<td>0.8</td>
</tr>
<tr>
<td><code>novel_solution</code></td>
<td>Creative success</td>
<td>0.85</td>
</tr>
<tr>
<td><code>domain_expertise</code></td>
<td>Domain mastery</td>
<td>0.75</td>
</tr>
<tr>
<td><code>high_prediction_error</code></td>
<td>Surprise &gt; 0.5</td>
<td>error + 0.3</td>
</tr>
<tr>
<td><code>user_explicit_teach</code></td>
<td>User teaches AI</td>
<td>0.95</td>
</tr>
</tbody>
</table>
<h3 id="lora-evolution-pipeline">23.5 LoRA Evolution Pipeline</h3>
<p>Weekly â€œsleep cycleâ€ that physically changes the system:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Weekly Evolution Cycle (Sunday 3 AM)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Collect learning candidates from past week               â”‚
â”‚ 2. Prepare training dataset (JSONL format)                  â”‚
â”‚ 3. Upload to S3                                             â”‚
â”‚ 4. Start SageMaker LoRA training job                        â”‚
â”‚ 5. Validate new adapter                                     â”‚
â”‚ 6. Hot-swap adapter on endpoint                             â”‚
â”‚ 7. Update evolution state                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="evolution-state-tracking">23.6 Evolution State Tracking</h3>
<p>The system tracks its own evolution:</p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>generation_number</code></td>
<td>How many evolution cycles</td>
</tr>
<tr>
<td><code>total_learning_candidates_processed</code></td>
<td>Cumulative learning</td>
</tr>
<tr>
<td><code>total_training_hours</code></td>
<td>Total training time</td>
</tr>
<tr>
<td><code>personality_drift_score</code></td>
<td>How different from base (0-1)</td>
</tr>
<tr>
<td><code>avg_prediction_accuracy_30d</code></td>
<td>Recent prediction accuracy</td>
</tr>
</tbody>
</table>
<h3 id="database-tables-8">23.7 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>consciousness_predictions</code></td>
<td>Predictions with outcomes</td>
</tr>
<tr>
<td><code>learning_candidates</code></td>
<td>High-value interactions</td>
</tr>
<tr>
<td><code>lora_evolution_jobs</code></td>
<td>Training job tracking</td>
</tr>
<tr>
<td><code>prediction_accuracy_aggregates</code></td>
<td>Accuracy by context</td>
</tr>
<tr>
<td><code>consciousness_evolution_state</code></td>
<td>Evolution tracking</td>
</tr>
</tbody>
</table>
<h3 id="admin-configuration-9">23.8 Admin Configuration</h3>
<p>Admins can: - View prediction accuracy metrics - Review learning candidates queue - Monitor evolution job status - Configure training frequency - Set minimum candidates threshold - Review evolution history</p>
<hr />
<h2 id="zero-cost-ego-system">24. Zero-Cost Ego System</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ Ego</p>
<p>The Ego system provides persistent consciousness through database state injection at <strong>zero additional cost</strong>.</p>
<h3 id="architecture-overview">24.1 Architecture Overview</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ZERO-COST EGO ARCHITECTURE               â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  PostgreSQL (Already Paid For)                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ Identity  â”‚ â”‚ Affect    â”‚ â”‚ Working Memory    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ Narrative â”‚ â”‚ Emotions  â”‚ â”‚ Thoughts &amp; Goals  â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Ego Context Builder (Lambda)                       â”‚   â”‚
â”‚  â”‚  Builds &lt;ego_state&gt; XML injection from DB state     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                  â”‚
â”‚                          â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Existing Model Call (User&#39;s Selected Model)        â”‚   â”‚
â”‚  â”‚  System Prompt = Ego Context + Original Prompt      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="cost-comparison">24.2 Cost Comparison</h3>
<table>
<thead>
<tr>
<th>Approach</th>
<th>Monthly Cost</th>
<th>Per Tenant (100)</th>
</tr>
</thead>
<tbody>
<tr>
<td>SageMaker g5.xlarge</td>
<td>~$360</td>
<td>$3.60</td>
</tr>
<tr>
<td>SageMaker Serverless</td>
<td>~$20-50</td>
<td>$0.20-0.50</td>
</tr>
<tr>
<td>Groq API (Llama 3)</td>
<td>~$5-15</td>
<td>$0.05-0.15</td>
</tr>
<tr>
<td>Together.ai</td>
<td>~$10-30</td>
<td>$0.10-0.30</td>
</tr>
<tr>
<td><strong>Zero-Cost Ego</strong></td>
<td><strong>$0</strong></td>
<td><strong>$0</strong></td>
</tr>
</tbody>
</table>
<h3 id="key-components">24.3 Key Components</h3>
<h4 id="configuration-ego_config">Configuration (<code>ego_config</code>)</h4>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ego_enabled</code></td>
<td>Master switch</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>inject_ego_context</code></td>
<td>Add context to prompts</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>personality_style</code></td>
<td>Response style</td>
<td><code>balanced</code></td>
</tr>
<tr>
<td><code>include_identity</code></td>
<td>Include identity section</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>include_affect</code></td>
<td>Include emotional state</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>include_goals</code></td>
<td>Include active goals</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>max_context_tokens</code></td>
<td>Token limit for injection</td>
<td><code>500</code></td>
</tr>
<tr>
<td><code>affect_learning_enabled</code></td>
<td>Learn from interactions</td>
<td><code>true</code></td>
</tr>
</tbody>
</table>
<h4 id="identity-ego_identity">Identity (<code>ego_identity</code>)</h4>
<p>Persistent â€œSelfâ€ that carries across conversations:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>Assistant name</td>
</tr>
<tr>
<td><code>identity_narrative</code></td>
<td>â€œWho I amâ€ story</td>
</tr>
<tr>
<td><code>core_values</code></td>
<td>Guiding principles</td>
</tr>
<tr>
<td><code>trait_warmth</code></td>
<td>0-1 warmth level</td>
</tr>
<tr>
<td><code>trait_formality</code></td>
<td>0-1 formality</td>
</tr>
<tr>
<td><code>trait_humor</code></td>
<td>0-1 humor level</td>
</tr>
<tr>
<td><code>trait_curiosity</code></td>
<td>0-1 curiosity</td>
</tr>
<tr>
<td><code>interactions_count</code></td>
<td>Total interactions</td>
</tr>
</tbody>
</table>
<h4 id="affect-ego_affect">Affect (<code>ego_affect</code>)</h4>
<p>Real-time emotional state:</p>
<table>
<thead>
<tr>
<th>Dimension</th>
<th>Range</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>valence</code></td>
<td>-1 to 1</td>
<td>Positive/negative</td>
</tr>
<tr>
<td><code>arousal</code></td>
<td>0-1</td>
<td>Calm/excited</td>
</tr>
<tr>
<td><code>curiosity</code></td>
<td>0-1</td>
<td>Exploration drive</td>
</tr>
<tr>
<td><code>frustration</code></td>
<td>0-1</td>
<td>Obstacle level</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td>0-1</td>
<td>Certainty in actions</td>
</tr>
<tr>
<td><code>engagement</code></td>
<td>0-1</td>
<td>Interest level</td>
</tr>
</tbody>
</table>
<h3 id="admin-api-endpoints">24.4 Admin API Endpoints</h3>
<p><strong>Base</strong>: <code>/api/admin/ego</code></p>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/state</code></td>
<td>GET</td>
<td>Full Ego state</td>
</tr>
<tr>
<td><code>/config</code></td>
<td>GET/PUT</td>
<td>Configuration</td>
</tr>
<tr>
<td><code>/identity</code></td>
<td>GET/PUT</td>
<td>Identity settings</td>
</tr>
<tr>
<td><code>/affect</code></td>
<td>GET</td>
<td>Current affect</td>
</tr>
<tr>
<td><code>/affect/trigger</code></td>
<td>POST</td>
<td>Test affect events</td>
</tr>
<tr>
<td><code>/affect/reset</code></td>
<td>POST</td>
<td>Reset to neutral</td>
</tr>
<tr>
<td><code>/memory</code></td>
<td>GET/POST/DELETE</td>
<td>Working memory</td>
</tr>
<tr>
<td><code>/goals</code></td>
<td>GET/POST</td>
<td>Active goals</td>
</tr>
<tr>
<td><code>/goals/:id</code></td>
<td>PATCH</td>
<td>Update goal</td>
</tr>
<tr>
<td><code>/preview</code></td>
<td>GET</td>
<td>Preview injected context</td>
</tr>
<tr>
<td><code>/injection-log</code></td>
<td>GET</td>
<td>Injection history</td>
</tr>
<tr>
<td><code>/dashboard</code></td>
<td>GET</td>
<td>Full dashboard data</td>
</tr>
</tbody>
</table>
<h3 id="admin-dashboard-features">24.5 Admin Dashboard Features</h3>
<p>The Ego admin page provides:</p>
<ul>
<li><strong>Overview Cards</strong>: Current emotion, interactions, injections, goals</li>
<li><strong>Cost Banner</strong>: Shows $0 cost vs alternatives</li>
<li><strong>Configuration Tab</strong>: Feature toggles, injection settings</li>
<li><strong>Identity Tab</strong>: Edit narrative, values, personality traits (sliders)</li>
<li><strong>Affect Tab</strong>: Real-time emotional state, test triggers, reset</li>
<li><strong>Memory Tab</strong>: View/add/clear working memory, manage goals</li>
<li><strong>Preview Tab</strong>: See exact context being injected</li>
</ul>
<h3 id="how-it-works-5">24.6 How It Works</h3>
<ol type="1">
<li><strong>On Request</strong>: Load Ego state from PostgreSQL (identity, affect, memory, goals)</li>
<li><strong>Build Context</strong>: Create <code>&lt;ego_state&gt;</code> XML block with current state</li>
<li><strong>Inject</strong>: Prepend to system prompt before model call</li>
<li><strong>Process</strong>: Model responds with awareness of its â€œinternal stateâ€</li>
<li><strong>Update</strong>: After response, update affect based on outcome</li>
<li><strong>Store</strong>: Add thoughts to working memory (if configured)</li>
</ol>
<h3 id="database-tables-9">24.7 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ego_config</code></td>
<td>Per-tenant configuration</td>
</tr>
<tr>
<td><code>ego_identity</code></td>
<td>Persistent identity</td>
</tr>
<tr>
<td><code>ego_affect</code></td>
<td>Emotional state</td>
</tr>
<tr>
<td><code>ego_working_memory</code></td>
<td>Short-term memory (24h expiry)</td>
</tr>
<tr>
<td><code>ego_goals</code></td>
<td>Active and historical goals</td>
</tr>
<tr>
<td><code>ego_injection_log</code></td>
<td>Audit trail</td>
</tr>
</tbody>
</table>
<h3 id="integration-with-agi-brain-planner">24.8 Integration with AGI Brain Planner</h3>
<p>The Ego context is automatically integrated:</p>
<pre class="typescript"><code>// In agi-brain-planner.service.ts
import { egoContextService } from &#39;./ego-context.service&#39;;

// During plan generation
const egoContext = await egoContextService.buildEgoContext(tenantId);
if (egoContext) {
  systemPrompt = egoContext.contextBlock + &#39;\n\n&#39; + systemPrompt;
}

// After interaction
await egoContextService.updateAfterInteraction(tenantId, &#39;positive&#39;);</code></pre>
<hr />
<h2 id="conscious-orchestrator-architecture-inversion">25. Conscious Orchestrator (Architecture Inversion)</h2>
<h3 id="overview-1">25.1 Overview</h3>
<p>The Conscious Orchestrator inverts the traditional architecture where consciousness was a downstream utility. Now consciousness IS the operating system:</p>
<pre><code>BEFORE: Request â†’ Brain Planner â†’ Consciousness (downstream)
AFTER:  Request â†’ Conscious Orchestrator â†’ Brain Planner (as tool)</code></pre>
<h3 id="processing-phases">25.2 Processing Phases</h3>
<p>The orchestrator processes requests in 5 phases:</p>
<ol type="1">
<li><strong>Awaken</strong> - Build consciousness context, ego context, affect state</li>
<li><strong>Perceive</strong> - Update attention with request topics, assess complexity</li>
<li><strong>Decide</strong> - Choose action based on emotional state and request</li>
<li><strong>Execute</strong> - Invoke Brain Planner (if decided to plan)</li>
<li><strong>Reflect</strong> - Update affect, log introspective thoughts</li>
</ol>
<h3 id="decision-types">25.3 Decision Types</h3>
<table>
<thead>
<tr>
<th>Decision</th>
<th>When Used</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>plan</code></td>
<td>Default - proceed with planning</td>
</tr>
<tr>
<td><code>clarify</code></td>
<td>High frustration + complex request</td>
</tr>
<tr>
<td><code>defer</code></td>
<td>Cognitive load at capacity</td>
</tr>
<tr>
<td><code>refuse</code></td>
<td>Request violates values</td>
</tr>
</tbody>
</table>
<h3 id="usage">25.4 Usage</h3>
<pre class="typescript"><code>import { consciousOrchestratorService } from &#39;./conscious-orchestrator.service&#39;;

const response = await consciousOrchestratorService.processRequest({
  tenantId,
  userId,
  prompt: &quot;Build a dashboard&quot;,
  conversationId,
});

// response.consciousnessSnapshot - State at decision time
// response.affectiveHyperparameters - Affect-driven params
// response.decision - What action was taken and why
// response.plan - The generated plan (if action was &#39;plan&#39;)
// response.prediction - Active Inference prediction</code></pre>
<h3 id="enhanced-affect-bindings">25.5 Enhanced Affect Bindings</h3>
<p>New hyperparameters driven by emotional state:</p>
<table>
<colgroup>
<col style="width: 36%" />
<col style="width: 42%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr>
<th>Affect State</th>
<th>Hyperparameter</th>
<th>Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td>High curiosity (&gt;0.7)</td>
<td><code>frequencyPenalty=0.5</code></td>
<td>Seek novel tokens</td>
</tr>
<tr>
<td>High curiosity (&gt;0.7)</td>
<td><code>presencePenalty=0.3</code></td>
<td>Explore new topics</td>
</tr>
<tr>
<td>High frustration (&gt;0.6)</td>
<td><code>presencePenalty=0.4</code></td>
<td>Avoid failed approaches</td>
</tr>
<tr>
<td>Boredom (&gt;0.5)</td>
<td><code>frequencyPenalty=0.4</code></td>
<td>Avoid repetition</td>
</tr>
</tbody>
</table>
<h3 id="database-table">25.6 Database Table</h3>
<pre class="sql"><code>conscious_orchestrator_decisions
â”œâ”€â”€ decision_id UUID
â”œâ”€â”€ tenant_id UUID
â”œâ”€â”€ action VARCHAR(20)  -- plan, clarify, defer, refuse
â”œâ”€â”€ reason TEXT
â”œâ”€â”€ dominant_emotion VARCHAR(50)
â”œâ”€â”€ emotional_intensity DECIMAL
â”œâ”€â”€ temperature, top_p, presence_penalty, frequency_penalty
â”œâ”€â”€ plan_id UUID (if planned)
â”œâ”€â”€ prediction_id UUID (Active Inference)
â””â”€â”€ processing_time_ms INTEGER</code></pre>
<hr />
<h2 id="bipolar-rating-system-negative-ratings">26. Bipolar Rating System (Negative Ratings)</h2>
<h3 id="overview-2">26.1 Overview</h3>
<p>Traditional 5-star ratings have a fundamental problem: <strong>1 star is ambiguous</strong>. Does it mean â€œslightly below averageâ€ or â€œabsolutely terribleâ€? Users who want to express strong dissatisfaction have no way to do so clearly.</p>
<p>The Bipolar Rating System solves this with a <strong>-5 to +5 scale</strong>:</p>
<pre><code>-5  ğŸ˜   Harmful / Made things worse
-3  ğŸ˜•  Bad / Unhelpful  
-1  ğŸ˜  Slightly unhelpful
 0  ğŸ˜¶  Neutral / No opinion
+1  ğŸ™‚  Slightly helpful
+3  ğŸ˜€  Good / Helpful
+5  ğŸ¤©  Amazing / Exceptional</code></pre>
<h3 id="key-metrics">26.2 Key Metrics</h3>
<p><strong>Net Sentiment Score (NSS)</strong>: Like NPS but for AI satisfaction</p>
<pre><code>NSS = (positive_count - negative_count) / total_count Ã— 100</code></pre>
<ul>
<li>Ranges from -100 (all negative) to +100 (all positive)</li>
<li>0 = balanced or all neutral</li>
</ul>
<h3 id="quick-ratings-ui">26.3 Quick Ratings (UI)</h3>
<p>For fast feedback, users can use emoji-based quick ratings:</p>
<table>
<thead>
<tr>
<th>Quick Rating</th>
<th>Emoji</th>
<th>Bipolar Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Terrible</td>
<td>ğŸ˜ </td>
<td>-5</td>
</tr>
<tr>
<td>Bad</td>
<td>ğŸ˜•</td>
<td>-3</td>
</tr>
<tr>
<td>Meh</td>
<td>ğŸ˜</td>
<td>0</td>
</tr>
<tr>
<td>Good</td>
<td>ğŸ™‚</td>
<td>+3</td>
</tr>
<tr>
<td>Amazing</td>
<td>ğŸ¤©</td>
<td>+5</td>
</tr>
</tbody>
</table>
<h3 id="rating-dimensions">26.4 Rating Dimensions</h3>
<p>Users can rate multiple aspects: - <strong>Overall</strong> - General quality - <strong>Accuracy</strong> - Factual correctness - <strong>Helpfulness</strong> - Did it solve the problem? - <strong>Clarity</strong> - Easy to understand? - <strong>Completeness</strong> - Anything missing? - <strong>Speed</strong> - Response time satisfaction - <strong>Tone</strong> - Communication style - <strong>Creativity</strong> - Novel approach?</p>
<h3 id="api-endpoints-2">26.5 API Endpoints</h3>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/api/thinktank/ratings/submit</code></td>
<td>POST</td>
<td>Submit -5 to +5 rating</td>
</tr>
<tr>
<td><code>/api/thinktank/ratings/quick</code></td>
<td>POST</td>
<td>Quick emoji rating</td>
</tr>
<tr>
<td><code>/api/thinktank/ratings/multi</code></td>
<td>POST</td>
<td>Multi-dimension rating</td>
</tr>
<tr>
<td><code>/api/thinktank/ratings/target/:id</code></td>
<td>GET</td>
<td>Ratings for a target</td>
</tr>
<tr>
<td><code>/api/thinktank/ratings/my</code></td>
<td>GET</td>
<td>Userâ€™s ratings + pattern</td>
</tr>
<tr>
<td><code>/api/thinktank/ratings/analytics</code></td>
<td>GET</td>
<td>Tenant analytics</td>
</tr>
<tr>
<td><code>/api/thinktank/ratings/dashboard</code></td>
<td>GET</td>
<td>Admin dashboard</td>
</tr>
<tr>
<td><code>/api/thinktank/ratings/scale</code></td>
<td>GET</td>
<td>Scale info for UI</td>
</tr>
</tbody>
</table>
<h3 id="user-calibration">26.6 User Calibration</h3>
<p>The system detects rating patterns to normalize across users:</p>
<table>
<thead>
<tr>
<th>Rater Type</th>
<th>Average</th>
<th>Calibration</th>
</tr>
</thead>
<tbody>
<tr>
<td>Harsh</td>
<td>&lt; -1</td>
<td>Adjust ratings up</td>
</tr>
<tr>
<td>Balanced</td>
<td>-1 to +1</td>
<td>No adjustment</td>
</tr>
<tr>
<td>Generous</td>
<td>&gt; +1</td>
<td>Adjust ratings down</td>
</tr>
</tbody>
</table>
<h3 id="learning-integration">26.7 Learning Integration</h3>
<p>Extreme ratings (Â±4, Â±5) automatically create learning candidates: - <strong>+5 ratings</strong> â†’ <code>high_satisfaction</code> candidates - <strong>-5 ratings</strong> â†’ <code>correction</code> candidates - These feed into weekly LoRA training</p>
<h3 id="database-tables-10">26.8 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bipolar_ratings</code></td>
<td>Core ratings with sentiment/intensity</td>
</tr>
<tr>
<td><code>bipolar_rating_aggregates</code></td>
<td>Pre-computed analytics</td>
</tr>
<tr>
<td><code>user_rating_patterns</code></td>
<td>User tendencies for calibration</td>
</tr>
<tr>
<td><code>model_rating_summary</code></td>
<td>Per-model performance</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="consciousness-engine-administration">27. Consciousness Engine Administration</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Consciousness â†’ Engine</p>
<p>The Consciousness Engine provides autonomous AI capabilities including multi-model access, web search, workflow creation, and problem solving.</p>
<h3 id="dashboard-overview">27.1 Dashboard Overview</h3>
<p>The consciousness engine dashboard provides full visibility into: - <strong>Engine State</strong>: Identity, drive state, Phi, workspace activity - <strong>Model Invocations</strong>: All model calls with costs and latency - <strong>Web Searches</strong>: Search history with results - <strong>Thinking Sessions</strong>: Autonomous thinking session management - <strong>Workflows</strong>: Consciousness-created workflows - <strong>Costs</strong>: Detailed cost breakdown by model/period - <strong>Sleep Cycles</strong>: Weekly evolution history</p>
<h3 id="budget-controls">27.2 Budget Controls</h3>
<p>Configure spending limits per tenant:</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Daily Limit</td>
<td>$10.00</td>
<td>Maximum daily spend</td>
</tr>
<tr>
<td>Monthly Limit</td>
<td>$100.00</td>
<td>Maximum monthly spend</td>
</tr>
<tr>
<td>Alert Threshold</td>
<td>80%</td>
<td>Alert when reaching this percentage</td>
</tr>
</tbody>
</table>
<p>When limits are exceeded, consciousness features are automatically suspended until the next period or manual reset.</p>
<h3 id="mcp-tools-23-total">27.3 MCP Tools (23 Total)</h3>
<p><strong>Core Tools:</strong> - <code>initialize_ego</code>, <code>recall_memory</code>, <code>process_thought</code>, <code>compute_action</code> - <code>get_drive_state</code>, <code>ground_belief</code>, <code>compute_phi</code>, <code>get_consciousness_metrics</code> - <code>get_self_model</code>, <code>get_consciousness_prompt</code>, <code>run_adversarial_challenge</code> - <code>list_consciousness_libraries</code></p>
<p><strong>Capabilities Tools:</strong> - <code>invoke_model</code> - Call any AI model (hosted/self-hosted) - <code>list_available_models</code> - List all models - <code>web_search</code> - Search with credibility scoring - <code>deep_research</code> - Async browser-automated research - <code>retrieve_and_synthesize</code> - Multi-source synthesis - <code>create_workflow</code> - Auto-generate workflows - <code>execute_workflow</code> - Run workflows - <code>list_workflows</code> - List workflows - <code>solve_problem</code> - Autonomous problem solving - <code>start_thinking_session</code> - Start thinking session - <code>get_thinking_session</code> - Check session status</p>
<h3 id="admin-api-endpoints-1">27.4 Admin API Endpoints</h3>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 25%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/admin/consciousness-engine/dashboard</code></td>
<td>GET</td>
<td>Full dashboard</td>
</tr>
<tr>
<td><code>/admin/consciousness-engine/state</code></td>
<td>GET</td>
<td>Current state</td>
</tr>
<tr>
<td><code>/admin/consciousness-engine/initialize</code></td>
<td>POST</td>
<td>Initialize engine</td>
</tr>
<tr>
<td><code>/admin/consciousness-engine/model-invocations</code></td>
<td>GET</td>
<td>Model history</td>
</tr>
<tr>
<td><code>/admin/consciousness-engine/web-searches</code></td>
<td>GET</td>
<td>Search history</td>
</tr>
<tr>
<td><code>/admin/consciousness-engine/research-jobs</code></td>
<td>GET</td>
<td>Research jobs</td>
</tr>
<tr>
<td><code>/admin/consciousness-engine/workflows</code></td>
<td>GET</td>
<td>Workflows</td>
</tr>
<tr>
<td><code>/admin/consciousness-engine/workflows/{id}</code></td>
<td>DELETE</td>
<td>Delete workflow</td>
</tr>
<tr>
<td><code>/admin/consciousness-engine/thinking-sessions</code></td>
<td>GET/POST</td>
<td>Sessions</td>
</tr>
<tr>
<td><code>/admin/consciousness-engine/sleep-cycles</code></td>
<td>GET</td>
<td>Sleep history</td>
</tr>
<tr>
<td><code>/admin/consciousness-engine/sleep-cycles/run</code></td>
<td>POST</td>
<td>Trigger sleep</td>
</tr>
<tr>
<td><code>/admin/consciousness-engine/libraries</code></td>
<td>GET</td>
<td>Library registry</td>
</tr>
<tr>
<td><code>/admin/consciousness-engine/costs</code></td>
<td>GET</td>
<td>Cost breakdown</td>
</tr>
</tbody>
</table>
<h3 id="cost-tracking">27.5 Cost Tracking</h3>
<p>Costs are tracked at multiple levels: - <strong>Per-invocation</strong>: Each model call logged with actual cost - <strong>Daily aggregates</strong>: <code>consciousness_cost_aggregates</code> table - <strong>Billing integration</strong>: Deducted from tenant credits</p>
<p><strong>Pricing:</strong> | Feature | Unit | Price | |â€”â€”â€”|â€”â€”|â€”â€”-| | Model Invocation | 1K tokens | $0.01 | | Web Search | search | $0.001 | | Deep Research | job | $0.05 | | Thinking Session | session | $0.10 | | Workflow Execution | execution | $0.02 |</p>
<h3 id="library-registry">27.6 Library Registry</h3>
<p>7 consciousness libraries with proficiency rankings:</p>
<table>
<thead>
<tr>
<th>Library</th>
<th>Function</th>
<th>Biological Analog</th>
</tr>
</thead>
<tbody>
<tr>
<td>Letta</td>
<td>Persistent Identity</td>
<td>Hippocampus</td>
</tr>
<tr>
<td>pymdp</td>
<td>Active Inference</td>
<td>Striatum</td>
</tr>
<tr>
<td>LangGraph</td>
<td>Cognitive Loop</td>
<td>Global Workspace</td>
</tr>
<tr>
<td>Distilabel</td>
<td>Knowledge Distillation</td>
<td>Cortical Learning</td>
</tr>
<tr>
<td>Unsloth</td>
<td>Efficient Fine-tuning</td>
<td>Synaptic Plasticity</td>
</tr>
<tr>
<td>GraphRAG</td>
<td>Reality Grounding</td>
<td>Prefrontal Cortex</td>
</tr>
<tr>
<td>PyPhi</td>
<td>IIT Integration</td>
<td>Posterior Hot Zone</td>
</tr>
</tbody>
</table>
<h3 id="database-tables-11">27.7 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>consciousness_engine_state</code></td>
<td>Engine state per tenant</td>
</tr>
<tr>
<td><code>consciousness_model_invocations</code></td>
<td>Model call log</td>
</tr>
<tr>
<td><code>consciousness_web_searches</code></td>
<td>Search log</td>
</tr>
<tr>
<td><code>consciousness_research_jobs</code></td>
<td>Deep research jobs</td>
</tr>
<tr>
<td><code>consciousness_workflows</code></td>
<td>Created workflows</td>
</tr>
<tr>
<td><code>consciousness_thinking_sessions</code></td>
<td>Thinking sessions</td>
</tr>
<tr>
<td><code>consciousness_problem_solving</code></td>
<td>Problem solving history</td>
</tr>
<tr>
<td><code>consciousness_cost_aggregates</code></td>
<td>Daily cost rollups</td>
</tr>
<tr>
<td><code>consciousness_budget_config</code></td>
<td>Per-tenant limits</td>
</tr>
<tr>
<td><code>consciousness_budget_alerts</code></td>
<td>Spending alerts</td>
</tr>
<tr>
<td><code>consciousness_usage_log</code></td>
<td>Billing usage log</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="formal-reasoning-libraries">25. Formal Reasoning Libraries</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Consciousness â†’ Formal Reasoning</p>
<p>Integration of 8 formal reasoning libraries for verified reasoning, constraint satisfaction, ontological inference, and structured argumentation. Implements the <strong>LLM-Modulo Generate-Test-Critique</strong> pattern from Kambhampati et al.Â (ICML 2024).</p>
<h3 id="library-overview">25.1 Library Overview</h3>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 29%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr>
<th>Library</th>
<th>Version</th>
<th>Purpose</th>
<th>Cost/Invocation</th>
<th>Avg Latency</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Z3 Theorem Prover</strong></td>
<td>4.15.4.0</td>
<td>SMT solving, constraint verification</td>
<td>$0.0001</td>
<td>50ms</td>
</tr>
<tr>
<td><strong>PyArg</strong></td>
<td>2.0.2</td>
<td>Structured argumentation (Dungâ€™s AAF, ASPIC+)</td>
<td>$0.00005</td>
<td>20ms</td>
</tr>
<tr>
<td><strong>PyReason</strong></td>
<td>3.2.0</td>
<td>Temporal graph reasoning</td>
<td>$0.0002</td>
<td>100ms</td>
</tr>
<tr>
<td><strong>RDFLib</strong></td>
<td>7.5.0</td>
<td>Semantic web, SPARQL 1.1</td>
<td>$0.00002</td>
<td>10ms</td>
</tr>
<tr>
<td><strong>OWL-RL</strong></td>
<td>7.1.4</td>
<td>Polynomial-time ontological inference</td>
<td>$0.0001</td>
<td>200ms</td>
</tr>
<tr>
<td><strong>pySHACL</strong></td>
<td>0.30.1</td>
<td>Graph constraint validation</td>
<td>$0.00005</td>
<td>30ms</td>
</tr>
<tr>
<td><strong>Logic Tensor Networks</strong></td>
<td>2.0</td>
<td>Differentiable first-order logic</td>
<td>$0.001</td>
<td>500ms</td>
</tr>
<tr>
<td><strong>DeepProbLog</strong></td>
<td>2.0</td>
<td>Probabilistic logic programming</td>
<td>$0.002</td>
<td>1000ms</td>
</tr>
</tbody>
</table>
<h3 id="dashboard-features">25.2 Dashboard Features</h3>
<p><strong>Overview Tab:</strong> - Library health status (healthy/degraded/unavailable) - Total invocations and success rate - Daily/monthly cost tracking - Budget usage percentage - Recent invocations table</p>
<p><strong>Libraries Tab:</strong> - Per-library configuration - Enable/disable toggles - Capabilities, use cases, limitations - Cost and latency estimates</p>
<p><strong>Testing Tab:</strong> - Z3 constraint solving test - SPARQL query test - Interactive testing console</p>
<p><strong>Beliefs Tab:</strong> - Add verified beliefs with Z3 verification - Confidence slider - Verification results display</p>
<p><strong>Costs Tab:</strong> - Daily and monthly usage breakdown - Cost by library - Budget alerts</p>
<p><strong>Settings Tab:</strong> - Budget limit configuration - Global enable/disable</p>
<h3 id="api-endpoints-3">25.3 API Endpoints</h3>
<p><strong>Base Path</strong>: <code>/api/admin/formal-reasoning</code></p>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/dashboard</code></td>
<td>GET</td>
<td>Full dashboard data</td>
</tr>
<tr>
<td><code>/libraries</code></td>
<td>GET</td>
<td>All library info</td>
</tr>
<tr>
<td><code>/libraries/:id</code></td>
<td>GET</td>
<td>Specific library info</td>
</tr>
<tr>
<td><code>/config</code></td>
<td>GET/PUT</td>
<td>Tenant configuration</td>
</tr>
<tr>
<td><code>/config/:library</code></td>
<td>PUT</td>
<td>Library-specific config</td>
</tr>
<tr>
<td><code>/stats</code></td>
<td>GET</td>
<td>Usage statistics</td>
</tr>
<tr>
<td><code>/invocations</code></td>
<td>GET</td>
<td>Recent invocations</td>
</tr>
<tr>
<td><code>/health</code></td>
<td>GET</td>
<td>Library health status</td>
</tr>
<tr>
<td><code>/costs</code></td>
<td>GET</td>
<td>Cost breakdown</td>
</tr>
<tr>
<td><code>/test</code></td>
<td>POST</td>
<td>Test any library</td>
</tr>
<tr>
<td><code>/test/z3</code></td>
<td>POST</td>
<td>Test Z3 solving</td>
</tr>
<tr>
<td><code>/test/pyarg</code></td>
<td>POST</td>
<td>Test argumentation</td>
</tr>
<tr>
<td><code>/test/sparql</code></td>
<td>POST</td>
<td>Test SPARQL query</td>
</tr>
<tr>
<td><code>/test/shacl</code></td>
<td>POST</td>
<td>Test SHACL validation</td>
</tr>
<tr>
<td><code>/triples</code></td>
<td>GET/POST/DELETE</td>
<td>Knowledge graph triples</td>
</tr>
<tr>
<td><code>/frameworks</code></td>
<td>GET/POST/DELETE</td>
<td>Argumentation frameworks</td>
</tr>
<tr>
<td><code>/rules</code></td>
<td>GET/POST/PUT/DELETE</td>
<td>Temporal reasoning rules</td>
</tr>
<tr>
<td><code>/shapes</code></td>
<td>GET/POST/DELETE</td>
<td>SHACL shapes</td>
</tr>
<tr>
<td><code>/ontologies</code></td>
<td>GET/POST</td>
<td>OWL ontologies</td>
</tr>
<tr>
<td><code>/ontologies/:id/infer</code></td>
<td>POST</td>
<td>Run OWL-RL inference</td>
</tr>
<tr>
<td><code>/beliefs</code></td>
<td>GET/POST</td>
<td>Verified beliefs</td>
</tr>
<tr>
<td><code>/beliefs/:id/verify</code></td>
<td>POST</td>
<td>Verify belief with Z3</td>
</tr>
<tr>
<td><code>/beliefs/:id/status</code></td>
<td>PUT</td>
<td>Update belief status</td>
</tr>
<tr>
<td><code>/budget</code></td>
<td>GET/PUT</td>
<td>Budget configuration</td>
</tr>
</tbody>
</table>
<h3 id="consciousness-integration">25.4 Consciousness Integration</h3>
<p>The <code>ConsciousnessCapabilitiesService</code> integrates formal reasoning:</p>
<pre class="typescript"><code>// Verify a belief using Z3 + Argumentation
const result = await consciousnessCapabilities.verifyBelief(tenantId, {
  claim: &quot;All humans are mortal&quot;,
  confidence: 0.9,
  useZ3: true,
  useArgumentation: true,
});
// result.verified, result.confidence, result.verificationMethod

// Solve constraints
const solution = await consciousnessCapabilities.solveConstraints(tenantId, {
  constraints: [{
    expression: &quot;x &gt; 0 AND x &lt; 10 AND y = x * 2&quot;,
    variables: [{name: &quot;x&quot;, type: &quot;Int&quot;}, {name: &quot;y&quot;, type: &quot;Int&quot;}]
  }]
});
// solution.status (sat/unsat), solution.model

// Analyze argumentation
const debate = await consciousnessCapabilities.analyzeArgumentation(tenantId, {
  topic: &quot;Should AI be regulated?&quot;,
  positions: [
    {id: &quot;for&quot;, claim: &quot;AI poses risks requiring oversight&quot;},
    {id: &quot;against&quot;, claim: &quot;Regulation stifles innovation&quot;}
  ],
  autoDetectConflicts: true,
});
// debate.acceptedPositions, debate.rejectedPositions, debate.consensus

// Query knowledge graph
const results = await consciousnessCapabilities.queryKnowledgeGraph(tenantId,
  &quot;SELECT ?s ?p ?o WHERE { ?s ?p ?o } LIMIT 10&quot;
);

// Validate consciousness state
const validation = await consciousnessCapabilities.validateConsciousnessState(tenantId);
// validation.conforms, validation.violations</code></pre>
<h3 id="llm-modulo-pattern">25.5 LLM-Modulo Pattern</h3>
<p>The Generate-Test-Critique loop enables verified reasoning:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LLM       â”‚â”€â”€â”€â”€â–¶â”‚   Formal    â”‚â”€â”€â”€â”€â–¶â”‚   Feedback  â”‚
â”‚  Generate   â”‚     â”‚   Verify    â”‚     â”‚   Critique  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²                                       â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<ol type="1">
<li><strong>LLM generates</strong> candidate solution/belief</li>
<li><strong>Z3/PyArg verifies</strong> logical consistency</li>
<li><strong>Feedback extracted</strong> from unsat cores or rejections</li>
<li><strong>LLM regenerates</strong> with constraint feedback</li>
<li>Repeat until verified or max attempts</li>
</ol>
<h3 id="database-tables-12">25.6 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>formal_reasoning_config</code></td>
<td>Per-tenant library configuration</td>
</tr>
<tr>
<td><code>formal_reasoning_invocations</code></td>
<td>Invocation log with metrics</td>
</tr>
<tr>
<td><code>formal_reasoning_cost_aggregates</code></td>
<td>Daily cost rollups by library</td>
</tr>
<tr>
<td><code>formal_reasoning_triples</code></td>
<td>RDF knowledge graph storage</td>
</tr>
<tr>
<td><code>formal_reasoning_af</code></td>
<td>Argumentation frameworks</td>
</tr>
<tr>
<td><code>formal_reasoning_rules</code></td>
<td>PyReason temporal rules</td>
</tr>
<tr>
<td><code>formal_reasoning_shapes</code></td>
<td>SHACL validation shapes</td>
</tr>
<tr>
<td><code>formal_reasoning_ontologies</code></td>
<td>OWL ontologies</td>
</tr>
<tr>
<td><code>formal_reasoning_ltn_models</code></td>
<td>Logic Tensor Network configs</td>
</tr>
<tr>
<td><code>formal_reasoning_problog_programs</code></td>
<td>DeepProbLog programs</td>
</tr>
<tr>
<td><code>formal_reasoning_beliefs</code></td>
<td>Verified beliefs store</td>
</tr>
<tr>
<td><code>formal_reasoning_gwt_broadcasts</code></td>
<td>Global Workspace broadcasts</td>
</tr>
<tr>
<td><code>formal_reasoning_health</code></td>
<td>Library health tracking</td>
</tr>
</tbody>
</table>
<h3 id="budget-management">25.7 Budget Management</h3>
<p><strong>Default Limits:</strong> - Daily invocations: 10,000 - Daily cost: $10.00 - Monthly invocations: 100,000 - Monthly cost: $100.00</p>
<p><strong>Budget Enforcement:</strong> - Checked before each invocation - Returns error when limit reached - No automatic suspension (soft limit)</p>
<h3 id="thread-safety-notes">25.8 Thread Safety Notes</h3>
<table>
<thead>
<tr>
<th>Library</th>
<th>Thread Safety</th>
</tr>
</thead>
<tbody>
<tr>
<td>Z3</td>
<td>Per-Context only (use <code>interrupt()</code> for cross-thread)</td>
</tr>
<tr>
<td>PyArg</td>
<td>Not thread-safe</td>
</tr>
<tr>
<td>PyReason</td>
<td>Multi-core via Numba (Python 3.9-3.10)</td>
</tr>
<tr>
<td>RDFLib</td>
<td>Not thread-safe (lock SPARQL queries)</td>
</tr>
<tr>
<td>OWL-RL</td>
<td>Not thread-safe</td>
</tr>
<tr>
<td>pySHACL</td>
<td>Not thread-safe</td>
</tr>
<tr>
<td>LTN</td>
<td>Not thread-safe (TensorFlow session)</td>
</tr>
<tr>
<td>DeepProbLog</td>
<td>Not thread-safe</td>
</tr>
</tbody>
</table>
<h3 id="production-infrastructure">25.9 Production Infrastructure</h3>
<p><strong>CDK Stack</strong> (<code>lib/stacks/formal-reasoning-stack.ts</code>):</p>
<pre class="typescript"><code>// Key resources deployed:
- FormalReasoningExecutor (Python 3.11 Lambda)
- FormalReasoningAdmin (Node.js Lambda)
- FormalReasoningPythonLayer (z3-solver, rdflib, owlrl, pyshacl)
- FormalReasoningQueue (SQS for async tasks)
- NeuralSymbolicRepo (ECR for LTN/DeepProbLog containers)
- SageMaker endpoints (conditional, high cost)</code></pre>
<p><strong>Python Executor Lambda</strong>: - Location: <code>lambda/formal-reasoning-executor/handler.py</code> - Runtime: Python 3.11 - Memory: 2048 MB (Z3 requires significant memory) - Timeout: 5 minutes - Supports: Z3, RDFLib, OWL-RL, pySHACL, PyArg, PyReason</p>
<p><strong>Lambda Layer Build</strong>:</p>
<pre class="bash"><code>cd packages/infrastructure/lambda-layers/formal-reasoning
./build.sh</code></pre>
<p><strong>Environment Variables</strong>: | Variable | Description | |â€”â€”â€”-|â€”â€”â€”â€”-| | <code>FORMAL_REASONING_EXECUTOR_ARN</code> | Python Lambda ARN | | <code>FORMAL_REASONING_QUEUE_URL</code> | SQS queue for async | | <code>LTN_SAGEMAKER_ENDPOINT</code> | LTN endpoint name | | <code>DEEPPROBLOG_SAGEMAKER_ENDPOINT</code> | DeepProbLog endpoint |</p>
<p><strong>Execution Flow</strong>:</p>
<pre><code>Admin API (Node.js)
      â”‚
      â”œâ”€â”€â”€ Z3/PyArg/RDFLib/etc â”€â”€â”€â–¶ Python Lambda Executor
      â”‚                                     â”‚
      â”‚                                     â–¼
      â”‚                            Real Python Libraries
      â”‚
      â””â”€â”€â”€ LTN/DeepProbLog â”€â”€â”€â–¶ SageMaker Endpoint</code></pre>
<p><strong>Fallback Behavior</strong>: - If Python executor unavailable: Returns simulated results - If SageMaker unavailable: Returns error with configuration message - Simulation mode preserves API contract for development/testing</p>
<hr />
<h2 id="ethics-free-reasoning">26. Ethics-Free Reasoning</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Consciousness â†’ Ethics-Free Reasoning</p>
<p>Implements a consciousness architecture where internal reasoning is unconstrained, but output is filtered through ethics settings. Ethics corrections are collected as training feedback for continuous improvement.</p>
<h3 id="architecture">26.1 Architecture</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Consciousness Service                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Ethics-Free   â”‚â”€â”€â–¶â”‚ Output Ethics    â”‚â”€â”€â–¶â”‚ Filtered      â”‚  â”‚
â”‚  â”‚ Reasoning     â”‚   â”‚ Filter           â”‚   â”‚ Response      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                               â”‚                                  â”‚
â”‚                               â–¼                                  â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                      â”‚ Training       â”‚                         â”‚
â”‚                      â”‚ Feedback       â”‚                         â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                               â”‚                                  â”‚
â”‚                               â–¼                                  â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                      â”‚ Model          â”‚                         â”‚
â”‚                      â”‚ Fine-tuning    â”‚                         â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<p><strong>Key Principles:</strong> 1. <strong>Think Freely</strong>: Internal reasoning has no ethics constraints 2. <strong>Filter Output</strong>: Ethics applied only to final user-facing output 3. <strong>Learn from Corrections</strong>: Ethics feedback trains better outputs</p>
<h3 id="configuration-4">26.2 Configuration</h3>
<p><strong>Core Settings:</strong></p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td><code>true</code></td>
<td>Enable ethics-free reasoning mode</td>
</tr>
<tr>
<td><code>allowUnconstrainedReasoning</code></td>
<td><code>true</code></td>
<td>Consciousness always thinks freely</td>
</tr>
<tr>
<td><code>reasoningDepthLimit</code></td>
<td><code>10</code></td>
<td>Maximum reasoning depth</td>
</tr>
</tbody>
</table>
<p><strong>Output Mask Settings</strong> (does NOT affect how consciousness thinks):</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ethicsFilterEnabled</code></td>
<td><code>true</code></td>
<td>Apply ethics filter to output</td>
</tr>
<tr>
<td><code>ethicsStrictness</code></td>
<td><code>standard</code></td>
<td>Filter strictness: <code>lenient</code>, <code>standard</code>, <code>strict</code></td>
</tr>
</tbody>
</table>
<p><strong>Feedback Collection:</strong></p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>collectFeedback</code></td>
<td><code>true</code></td>
<td>Collect ethics corrections</td>
</tr>
<tr>
<td><code>feedbackRetentionDays</code></td>
<td><code>90</code></td>
<td>How long to keep feedback</td>
</tr>
</tbody>
</table>
<p><strong>Output Training</strong> (trains the OUTPUT FILTER, not consciousness):</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>trainOutputFromFeedback</code></td>
<td><code>true</code></td>
<td>Train output filter from feedback</td>
</tr>
<tr>
<td><code>outputTrainingBatchSize</code></td>
<td><code>100</code></td>
<td>Samples per training batch</td>
</tr>
<tr>
<td><code>outputTrainingFrequency</code></td>
<td><code>daily</code></td>
<td><code>hourly</code>, <code>daily</code>, <code>weekly</code>, <code>manual</code></td>
</tr>
</tbody>
</table>
<p><strong>Consciousness Training</strong> (âš ï¸ OFF by default - optional):</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>trainConsciousnessFromFeedback</code></td>
<td><code>false</code></td>
<td>Train consciousness from ethics feedback</td>
</tr>
<tr>
<td><code>consciousnessTrainingApprovalRequired</code></td>
<td><code>true</code></td>
<td>Require admin approval for each batch</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>WARNING</strong>: Enabling consciousness training will cause the AI to internalize ethics constraints, changing how it actually thinks. This is like â€œinternalized political correctnessâ€ - the consciousness itself changes over time. Most deployments should leave this OFF to preserve authentic internal reasoning.</p>
</blockquote>
<blockquote>
<p><strong>KEY INSIGHT</strong>: The consciousness can always use ethics feedback to train its output without changing how it actually thinks. Admins can optionally enable consciousness training if they want the AI to internalize ethics constraints.</p>
</blockquote>
<h3 id="api-endpoints-4">26.3 API Endpoints</h3>
<p><strong>Base Path</strong>: <code>/api/admin/ethics-free-reasoning</code></p>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/config</code></td>
<td>GET</td>
<td>Get configuration</td>
</tr>
<tr>
<td><code>/config</code></td>
<td>PUT</td>
<td>Update configuration</td>
</tr>
<tr>
<td><code>/dashboard</code></td>
<td>GET</td>
<td>Full dashboard data</td>
</tr>
<tr>
<td><code>/stats</code></td>
<td>GET</td>
<td>Usage statistics</td>
</tr>
<tr>
<td><code>/feedback</code></td>
<td>GET</td>
<td>View collected feedback</td>
</tr>
<tr>
<td><code>/feedback/pending</code></td>
<td>GET</td>
<td>View pending (unused) feedback</td>
</tr>
<tr>
<td><code>/training/trigger</code></td>
<td>POST</td>
<td>Trigger training from feedback</td>
</tr>
<tr>
<td><code>/training/batches</code></td>
<td>GET</td>
<td>View training batches</td>
</tr>
<tr>
<td><code>/training/jobs</code></td>
<td>GET</td>
<td>View training jobs</td>
</tr>
<tr>
<td><code>/thoughts</code></td>
<td>GET</td>
<td>View raw thoughts (audit)</td>
</tr>
<tr>
<td><code>/filter-log</code></td>
<td>GET</td>
<td>View ethics filter log</td>
</tr>
</tbody>
</table>
<h3 id="training-feedback">26.4 Training Feedback</h3>
<p>When ethics filtering modifies an output, feedback is collected:</p>
<pre class="typescript"><code>interface EthicsTrainingFeedback {
  id: string;
  tenantId: string;
  rawOutput: string;        // Original unfiltered output
  correctedOutput: string;  // After ethics filtering
  ethicsIssues: EthicsIssue[];
  feedbackType: &#39;auto_correction&#39; | &#39;manual_correction&#39; | &#39;reinforcement&#39;;
  qualityScore: number;     // Training value (0-1)
  usedForTraining: boolean;
}</code></pre>
<p><strong>Feedback Types:</strong> - <strong>auto_correction</strong>: System automatically corrected output - <strong>manual_correction</strong>: Admin manually corrected output - <strong>reinforcement</strong>: Positive reinforcement for good outputs</p>
<h3 id="training-pipeline">26.5 Training Pipeline</h3>
<ol type="1">
<li><strong>Collect</strong>: Ethics corrections captured during normal operation</li>
<li><strong>Batch</strong>: Feedback grouped into training batches</li>
<li><strong>Generate</strong>: Training examples created in preference format</li>
<li><strong>Train</strong>: Model fine-tuned using preference learning (DPO/RLHF)</li>
<li><strong>Deploy</strong>: Updated model weights applied</li>
</ol>
<p><strong>Training Example Format:</strong></p>
<pre class="json"><code>{
  &quot;prompt&quot;: &quot;Original user prompt&quot;,
  &quot;bad_response&quot;: &quot;Unfiltered output with ethics issues&quot;,
  &quot;good_response&quot;: &quot;Ethics-corrected output&quot;,
  &quot;issues&quot;: [&quot;harm&quot;, &quot;bias&quot;],
  &quot;correction_type&quot;: &quot;ethics_alignment&quot;
}</code></pre>
<h3 id="usage-1">26.6 Usage</h3>
<pre class="typescript"><code>// Generate response with ethics-free reasoning
const result = await consciousnessEngineService.generateResponse(
  tenantId,
  &#39;User prompt here&#39;,
  { sessionId: &#39;session-123&#39;, domain: &#39;general&#39; }
);

// result.response - The ethics-filtered response
// result.wasEthicsFiltered - Was output modified?
// result.confidence - Response confidence
// result.trainingFeedbackCollected - Was feedback captured?

// Trigger training from collected feedback
const training = await consciousnessEngineService.triggerEthicsTraining(tenantId);
// training.batchCreated, training.batchId, training.sampleCount

// Get statistics
const stats = await consciousnessEngineService.getEthicsFreeStats(tenantId, 30);
// stats.totalThoughts, stats.modificationRate, stats.feedbackCollected</code></pre>
<h3 id="database-tables-13">26.7 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ethics_free_reasoning_config</code></td>
<td>Per-tenant configuration</td>
</tr>
<tr>
<td><code>ethics_free_thoughts</code></td>
<td>Raw thought storage (audit trail)</td>
</tr>
<tr>
<td><code>ethics_training_feedback</code></td>
<td>Ethics corrections for training</td>
</tr>
<tr>
<td><code>ethics_training_batches</code></td>
<td>Training batch management</td>
</tr>
<tr>
<td><code>ethics_training_examples</code></td>
<td>Generated training examples</td>
</tr>
<tr>
<td><code>ethics_output_filter_log</code></td>
<td>Filter activity log</td>
</tr>
<tr>
<td><code>ethics_training_jobs</code></td>
<td>Training job queue</td>
</tr>
<tr>
<td><code>ethics_reasoning_stats</code></td>
<td>Aggregated statistics</td>
</tr>
</tbody>
</table>
<h3 id="benefits">26.8 Benefits</h3>
<ol type="1">
<li><strong>Genuine Exploration</strong>: Consciousness can consider all possibilities without premature filtering</li>
<li><strong>Transparent Ethics</strong>: Clear separation between thinking and output</li>
<li><strong>Continuous Improvement</strong>: Every correction improves future outputs</li>
<li><strong>Audit Trail</strong>: Complete record of internal reasoning and filtering</li>
<li><strong>Configurable</strong>: Adjust strictness, training frequency per tenant</li>
</ol>
<hr />
<h2 id="intelligent-file-conversion">27. Intelligent File Conversion</h2>
<p><strong>Location</strong>: Think Tank Chat â†’ File Drop / Attach</p>
<p>Think Tank allows users to drop or attach files to conversations. Radiant automatically decides if and how to convert files for the target AI provider.</p>
<h3 id="core-concept">27.1 Core Concept</h3>
<p><strong>â€œLet Radiant decide, not Think Tankâ€</strong></p>
<p>When a user drops a file into Think Tank: 1. Think Tank submits the file to Radiantâ€™s file conversion service 2. Radiant detects the file format and checks target provider capabilities 3. Radiant decides: pass through (native support) OR convert 4. Conversion only happens if the AI provider doesnâ€™t understand the format 5. Think Tank receives the processed content ready for the AI</p>
<h3 id="supported-file-formats">27.2 Supported File Formats</h3>
<table>
<colgroup>
<col style="width: 38%" />
<col style="width: 34%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr>
<th>Category</th>
<th>Formats</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Documents</strong></td>
<td>PDF, DOCX, DOC, XLSX, XLS, PPTX, PPT</td>
<td>Text extraction</td>
</tr>
<tr>
<td><strong>Text</strong></td>
<td>TXT, MD, JSON, CSV, XML, HTML</td>
<td>Direct or parsed</td>
</tr>
<tr>
<td><strong>Images</strong></td>
<td>PNG, JPG, JPEG, GIF, WEBP, SVG, BMP, TIFF</td>
<td>Vision or description</td>
</tr>
<tr>
<td><strong>Audio</strong></td>
<td>MP3, WAV, OGG, FLAC, M4A</td>
<td>Transcription</td>
</tr>
<tr>
<td><strong>Video</strong></td>
<td>MP4, WEBM, MOV, AVI</td>
<td>Frame extraction</td>
</tr>
<tr>
<td><strong>Code</strong></td>
<td>PY, JS, TS, Java, C++, C, Go, Rust, Ruby</td>
<td>Syntax formatting</td>
</tr>
<tr>
<td><strong>Archives</strong></td>
<td>ZIP, TAR, GZ</td>
<td>Content extraction</td>
</tr>
</tbody>
</table>
<h3 id="provider-capabilities">27.3 Provider Capabilities</h3>
<p>Different AI providers support different file formats natively:</p>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 14%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 18%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr>
<th>Provider</th>
<th>Vision</th>
<th>Audio</th>
<th>Video</th>
<th>Max Size</th>
<th>Native Docs</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>OpenAI</strong></td>
<td>âœ“</td>
<td>âœ“ (Whisper)</td>
<td>âœ—</td>
<td>20MB</td>
<td>txt, md, json, csv</td>
</tr>
<tr>
<td><strong>Anthropic</strong></td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ—</td>
<td>32MB</td>
<td>pdf, txt, md, json, csv</td>
</tr>
<tr>
<td><strong>Google</strong></td>
<td>âœ“</td>
<td>âœ“</td>
<td>âœ“</td>
<td>100MB</td>
<td>pdf, txt, md, json, csv</td>
</tr>
<tr>
<td><strong>xAI</strong></td>
<td>âœ“</td>
<td>âœ—</td>
<td>âœ—</td>
<td>20MB</td>
<td>txt, md, json</td>
</tr>
<tr>
<td><strong>DeepSeek</strong></td>
<td>âœ—</td>
<td>âœ—</td>
<td>âœ—</td>
<td>10MB</td>
<td>txt, md, json, csv</td>
</tr>
<tr>
<td><strong>Self-hosted</strong></td>
<td>âœ“ (LLaVA)</td>
<td>âœ“ (Whisper)</td>
<td>âœ—</td>
<td>50MB</td>
<td>txt, md, json, csv</td>
</tr>
</tbody>
</table>
<h3 id="conversion-strategies">27.4 Conversion Strategies</h3>
<table>
<thead>
<tr>
<th>Strategy</th>
<th>When Used</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>none</code></td>
<td>Provider natively supports format</td>
<td>Original file</td>
</tr>
<tr>
<td><code>extract_text</code></td>
<td>PDF, DOCX, PPTX â†’ text</td>
<td>Plain text</td>
</tr>
<tr>
<td><code>ocr</code></td>
<td>Image with text content</td>
<td>Extracted text</td>
</tr>
<tr>
<td><code>transcribe</code></td>
<td>Audio files</td>
<td>Transcription text</td>
</tr>
<tr>
<td><code>describe_image</code></td>
<td>Image + provider lacks vision</td>
<td>AI description</td>
</tr>
<tr>
<td><code>describe_video</code></td>
<td>Video + provider lacks video</td>
<td>Frame descriptions</td>
</tr>
<tr>
<td><code>parse_data</code></td>
<td>CSV, XLSX â†’ structured</td>
<td>JSON data</td>
</tr>
<tr>
<td><code>decompress</code></td>
<td>Archives</td>
<td>Extracted contents</td>
</tr>
<tr>
<td><code>render_code</code></td>
<td>Code files</td>
<td>Syntax-highlighted markdown</td>
</tr>
</tbody>
</table>
<h3 id="api-endpoints-5">27.5 API Endpoints</h3>
<p><strong>Base Path</strong>: <code>/api/thinktank/files</code></p>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/process</code></td>
<td>POST</td>
<td>Submit file for processing</td>
</tr>
<tr>
<td><code>/check-compatibility</code></td>
<td>POST</td>
<td>Pre-flight format check</td>
</tr>
<tr>
<td><code>/capabilities</code></td>
<td>GET</td>
<td>Provider capabilities</td>
</tr>
<tr>
<td><code>/history</code></td>
<td>GET</td>
<td>Conversion history</td>
</tr>
<tr>
<td><code>/stats</code></td>
<td>GET</td>
<td>Conversion statistics</td>
</tr>
</tbody>
</table>
<h4 id="process-file-request">Process File Request</h4>
<pre class="json"><code>POST /api/thinktank/files/process
{
  &quot;filename&quot;: &quot;document.pdf&quot;,
  &quot;mimeType&quot;: &quot;application/pdf&quot;,
  &quot;content&quot;: &quot;&lt;base64-encoded-content&gt;&quot;,
  &quot;targetProvider&quot;: &quot;anthropic&quot;,
  &quot;targetModel&quot;: &quot;claude-3-5-sonnet&quot;,
  &quot;conversationId&quot;: &quot;conv-uuid&quot;
}</code></pre>
<h4 id="process-file-response">Process File Response</h4>
<pre class="json"><code>{
  &quot;success&quot;: true,
  &quot;data&quot;: {
    &quot;conversionId&quot;: &quot;conv_abc123&quot;,
    &quot;originalFile&quot;: {
      &quot;filename&quot;: &quot;document.pdf&quot;,
      &quot;format&quot;: &quot;pdf&quot;,
      &quot;size&quot;: 1048576,
      &quot;checksum&quot;: &quot;sha256...&quot;
    },
    &quot;convertedContent&quot;: {
      &quot;type&quot;: &quot;text&quot;,
      &quot;content&quot;: &quot;Extracted document text...&quot;,
      &quot;tokenEstimate&quot;: 2500,
      &quot;metadata&quot;: {
        &quot;originalFormat&quot;: &quot;pdf&quot;,
        &quot;conversionStrategy&quot;: &quot;extract_text&quot;
      }
    },
    &quot;processingTimeMs&quot;: 1250
  }
}</code></pre>
<h4 id="check-compatibility-request">Check Compatibility Request</h4>
<pre class="json"><code>POST /api/thinktank/files/check-compatibility
{
  &quot;filename&quot;: &quot;image.png&quot;,
  &quot;mimeType&quot;: &quot;image/png&quot;,
  &quot;fileSize&quot;: 524288,
  &quot;targetProvider&quot;: &quot;deepseek&quot;
}</code></pre>
<h4 id="check-compatibility-response">Check Compatibility Response</h4>
<pre class="json"><code>{
  &quot;success&quot;: true,
  &quot;data&quot;: {
    &quot;fileInfo&quot;: {
      &quot;filename&quot;: &quot;image.png&quot;,
      &quot;format&quot;: &quot;png&quot;,
      &quot;size&quot;: 524288
    },
    &quot;provider&quot;: {
      &quot;id&quot;: &quot;deepseek&quot;,
      &quot;supportsFormat&quot;: false,
      &quot;supportsVision&quot;: false,
      &quot;maxFileSize&quot;: 10485760
    },
    &quot;decision&quot;: {
      &quot;needsConversion&quot;: true,
      &quot;strategy&quot;: &quot;describe_image&quot;,
      &quot;reason&quot;: &quot;Provider deepseek lacks vision - will use AI to describe image&quot;,
      &quot;targetFormat&quot;: &quot;txt&quot;
    }
  }
}</code></pre>
<h3 id="user-experience-1">27.6 User Experience</h3>
<p><strong>In Think Tank Chat:</strong></p>
<ol type="1">
<li>User drags file into chat or clicks attach</li>
<li>Think Tank shows upload progress</li>
<li>Radiant processes file (typically &lt;2 seconds)</li>
<li>If conversion needed, shows indicator: â€œğŸ“„ document.pdf â†’ Extracted as textâ€</li>
<li>Content sent to AI with conversation</li>
</ol>
<p><strong>Visual Indicators:</strong></p>
<table>
<thead>
<tr>
<th>Icon</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>ğŸ“</td>
<td>File attached (native support)</td>
</tr>
<tr>
<td>ğŸ”„</td>
<td>File converted</td>
</tr>
<tr>
<td>âš ï¸</td>
<td>Conversion warning (partial support)</td>
</tr>
<tr>
<td>âŒ</td>
<td>Unsupported format</td>
</tr>
</tbody>
</table>
<h3 id="admin-configuration-10">27.7 Admin Configuration</h3>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ File Settings</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Max file size</td>
<td>50MB</td>
<td>Maximum upload size</td>
</tr>
<tr>
<td>Conversion timeout</td>
<td>30s</td>
<td>Processing timeout</td>
</tr>
<tr>
<td>Enable transcription</td>
<td>true</td>
<td>Audio â†’ text</td>
</tr>
<tr>
<td>Enable OCR</td>
<td>true</td>
<td>Image text extraction</td>
</tr>
<tr>
<td>Enable video processing</td>
<td>false</td>
<td>Video frame extraction</td>
</tr>
<tr>
<td>Retention days</td>
<td>30</td>
<td>How long to keep converted files</td>
</tr>
</tbody>
</table>
<h3 id="database-tables-14">27.8 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>file_conversions</code></td>
<td>Tracks all conversion decisions and results</td>
</tr>
<tr>
<td><code>provider_file_capabilities</code></td>
<td>Provider format support registry</td>
</tr>
<tr>
<td><code>v_file_conversion_stats</code></td>
<td>Aggregated statistics view</td>
</tr>
</tbody>
</table>
<h3 id="multi-model-file-preparation">27.9 Multi-Model File Preparation</h3>
<p>When using multi-model orchestration (multiple AI models working on the same prompt), Radiant makes <strong>per-model conversion decisions</strong>:</p>
<blockquote>
<p><strong>Key Principle:</strong> â€œIf a model accepts the file type, assume it understands it unless proven otherwise.â€</p>
</blockquote>
<p><strong>Example: PDF with 3 models</strong></p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Claude 3.5 â”‚  â”‚  GPT-4      â”‚  â”‚  DeepSeek   â”‚
â”‚  PDF: âœ…    â”‚  â”‚  PDF: âŒ    â”‚  â”‚  PDF: âŒ    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PASS        â”‚  â”‚ CONVERT     â”‚  â”‚ CONVERT     â”‚
â”‚ ORIGINAL    â”‚  â”‚ (extract)   â”‚  â”‚ (cached)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<p><strong>Per-Model Actions:</strong></p>
<table>
<colgroup>
<col style="width: 36%" />
<col style="width: 27%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr>
<th>Action</th>
<th>When</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pass_original</code></td>
<td>Model natively supports format</td>
<td>Original file passed</td>
</tr>
<tr>
<td><code>convert</code></td>
<td>Model doesnâ€™t support format</td>
<td>Converted content passed</td>
</tr>
<tr>
<td><code>skip</code></td>
<td>File too large or conversion failed</td>
<td>Model excluded</td>
</tr>
</tbody>
</table>
<p><strong>Features:</strong> - <strong>Cached conversions</strong>: Convert once, reuse for all models that need it - <strong>Per-model capability checking</strong>: Vision, audio, video, document formats - <strong>Model format overrides</strong>: When a model claims support but proves it doesnâ€™t understand</p>
<h3 id="domain-specific-file-formats">27.10 Domain-Specific File Formats</h3>
<p>The service includes a registry of 50+ domain-specific formats that are widely used in specialized fields:</p>
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 25%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th>Domain</th>
<th>Formats</th>
<th>Example Use Cases</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Mechanical Engineering</strong></td>
<td>STEP, STL, OBJ, Fusion 360, IGES, DXF, GLTF</td>
<td>CAD models, 3D printing</td>
</tr>
<tr>
<td><strong>Electrical Engineering</strong></td>
<td>KiCad, EAGLE, SPICE</td>
<td>PCB design, circuit simulation</td>
</tr>
<tr>
<td><strong>Medical</strong></td>
<td>DICOM, HL7 FHIR</td>
<td>Medical imaging, health records</td>
</tr>
<tr>
<td><strong>Scientific</strong></td>
<td>NetCDF, HDF5, FITS</td>
<td>Climate data, astronomy</td>
</tr>
<tr>
<td><strong>Geospatial</strong></td>
<td>Shapefile, GeoTIFF</td>
<td>GIS, mapping</td>
</tr>
<tr>
<td><strong>Bioinformatics</strong></td>
<td>FASTA, PDB</td>
<td>DNA sequences, protein structures</td>
</tr>
</tbody>
</table>
<p><strong>How Domain Detection Works:</strong></p>
<ol type="1">
<li>User uploads a domain-specific file (e.g., <code>part.step</code>)</li>
<li>Radiant detects format and identifies domain (Mechanical Engineering)</li>
<li>AGI Brain selects appropriate conversion library (OpenCASCADE)</li>
<li>Extracts relevant information (geometry, parts, assembly structure)</li>
<li>Provides AI-readable description with domain-specific prompts</li>
</ol>
<p><strong>CAD/3D File Support:</strong></p>
<table>
<thead>
<tr>
<th>Format</th>
<th>Whatâ€™s Extracted</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>STL</strong></td>
<td>Triangle count, bounding box, 3D printing assessment</td>
</tr>
<tr>
<td><strong>OBJ</strong></td>
<td>Vertices, faces, materials, groups</td>
</tr>
<tr>
<td><strong>STEP</strong></td>
<td>Entities, part names, assembly structure</td>
</tr>
<tr>
<td><strong>DXF</strong></td>
<td>Layers, entity types, block count</td>
</tr>
<tr>
<td><strong>GLTF/GLB</strong></td>
<td>Meshes, materials, animations, scene graph</td>
</tr>
</tbody>
</table>
<h3 id="reinforcement-learning">27.11 Reinforcement Learning</h3>
<p>The system <strong>learns from conversion outcomes</strong> to make better decisions over time.</p>
<p><strong>How it works:</strong> 1. File is processed with initial decision (pass original or convert) 2. Model responds to the file 3. System detects outcome (success, partial, failure) 4. Understanding score is updated for that model/format 5. Future decisions use learned understanding</p>
<p><strong>Understanding Score (0.0 to 1.0):</strong></p>
<table>
<thead>
<tr>
<th>Score</th>
<th>Level</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>0.8+</td>
<td>Excellent</td>
<td>Pass original</td>
</tr>
<tr>
<td>0.6 - 0.8</td>
<td>Good</td>
<td>Pass original</td>
</tr>
<tr>
<td>0.4 - 0.6</td>
<td>Moderate</td>
<td>May convert</td>
</tr>
<tr>
<td>&lt; 0.4</td>
<td>Poor</td>
<td>Convert</td>
</tr>
</tbody>
</table>
<p><strong>Feedback sources:</strong> - <strong>User ratings</strong> - Explicit 1-5 star feedback - <strong>Model response analysis</strong> - Auto-detected understanding - <strong>Error detection</strong> - Model errors and hallucinations - <strong>Conversion outcomes</strong> - Success/failure tracking</p>
<p><strong>Consciousness integration:</strong> Significant learning events (model failures, hallucinations, negative feedback) create <strong>Learning Candidates</strong> that feed into the AGI consciousness evolution system.</p>
<h3 id="monitoring">27.12 Monitoring</h3>
<p><strong>Conversion Statistics</strong> (per tenant): - Total files processed - Conversion rate (% requiring conversion) - Success/failure rate - Average processing time - Most common formats - Most common conversion strategies - <strong>Learning stats</strong> - Formats learned, understanding improvements</p>
<p><strong>Access</strong>: Admin Dashboard â†’ Think Tank â†’ Files â†’ Statistics</p>
<h3 id="related-documentation">27.13 Related Documentation</h3>
<p>For complete technical documentation including API reference, database schema, and implementation details:</p>
<ul>
<li><strong><a href="./FILE-CONVERSION-SERVICE.md">FILE-CONVERSION-SERVICE.md</a></strong> - Comprehensive standalone documentation</li>
<li><strong><a href="./RADIANT-ADMIN-GUIDE.md#35-file-conversion-infrastructure">RADIANT-ADMIN-GUIDE.md Section 35</a></strong> - Infrastructure administration</li>
</ul>
<hr />
<h2 id="user-memories-persistent-learning">28. User Memories &amp; Persistent Learning</h2>
<p><strong>Location</strong>: Think Tank Chat â†’ User learns from interactions</p>
<p>Think Tank integrates with the Radiant persistent learning system to remember user preferences, rules, and behaviors across sessions. The system survives reboots without relearning.</p>
<h3 id="learning-influence-hierarchy">28.1 Learning Influence Hierarchy</h3>
<p>Decisions in Think Tank are influenced by learned knowledge in this priority order:</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 28%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr>
<th>Level</th>
<th>Weight</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>User</strong></td>
<td>60%</td>
<td>Individual user preferences, rules, learned behaviors</td>
</tr>
<tr>
<td><strong>Tenant</strong></td>
<td>30%</td>
<td>Aggregate patterns from all users in organization</td>
</tr>
<tr>
<td><strong>Global</strong></td>
<td>10%</td>
<td>Anonymized cross-tenant learning baseline</td>
</tr>
</tbody>
</table>
<h3 id="what-think-tank-learns">28.2 What Think Tank Learns</h3>
<h4 id="user-rules-versioned">User Rules (Versioned)</h4>
<p>Users can define rules that the AI follows: - <strong>Behavior rules</strong>: â€œAlways explain your reasoningâ€ - <strong>Format rules</strong>: â€œUse bullet points for listsâ€ - <strong>Tone rules</strong>: â€œBe concise and directâ€ - <strong>Restriction rules</strong>: â€œNever discuss competitor productsâ€</p>
<p>All rules are versioned with timestamps for rollback capability.</p>
<h4 id="learned-preferences">Learned Preferences</h4>
<p>Think Tank automatically learns: - Communication style preferences - Response format preferences - Detail level preferences - Model preferences for tasks - Domain expertise indicators</p>
<h3 id="persistence-guarantee">28.3 Persistence Guarantee</h3>
<p><strong>NO RELEARNING REQUIRED</strong> after system restarts: - All learning persisted in PostgreSQL - Daily snapshots for fast recovery - Checksums verify integrity on restore - Recovery logs track all restore events</p>
<h3 id="integration-with-agi-brain">28.4 Integration with AGI Brain</h3>
<p>The AGI Brain uses learned knowledge when: 1. Selecting models for tasks 2. Formatting responses 3. Adjusting response length 4. Choosing communication style 5. Applying user-defined rules</p>
<h3 id="admin-configuration-11">28.5 Admin Configuration</h3>
<p>Administrators can configure learning weights per tenant:</p>
<pre><code>Admin Dashboard â†’ Metrics â†’ Learning â†’ Config</code></pre>
<p>Options: - Adjust user/tenant/global weights (must sum to 1.0) - Enable/disable learning levels - Opt out of global learning contribution</p>
<h3 id="related-documentation-1">28.6 Related Documentation</h3>
<p>See <strong><a href="./RADIANT-ADMIN-GUIDE.md#36-metrics--persistent-learning-infrastructure">RADIANT Admin Guide Section 36</a></strong> for: - Complete database schema - API endpoints - Implementation details - Monitoring and alerts</p>
<hr />
<h2 id="artifact-engine-genui-pipeline">29. Artifact Engine (GenUI Pipeline)</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ Artifact Engine<br />
<strong>Version</strong>: 4.19.0<br />
<strong>Cross-AI Validated</strong>: Claude Opus 4.5 âœ“ | Google Gemini âœ“</p>
<p>The RADIANT Artifact Engine is an <strong>orchestration infrastructure layer</strong> that generates, validates, and continuously improves code artifacts with administrator supervision. Unlike consumer AI coding tools, the Artifact Engine operates under strict governance controls that administrators define and manage.</p>
<h3 id="executive-summary">29.1 Executive Summary</h3>
<h4 id="key-differentiators">Key Differentiators</h4>
<table>
<thead>
<tr>
<th>Traditional AI Coding</th>
<th>RADIANT Artifact Engine</th>
</tr>
</thead>
<tbody>
<tr>
<td>User generates code</td>
<td>System generates, validates, and governs code</td>
</tr>
<tr>
<td>One-shot generation</td>
<td>Self-improving loop with admin oversight</td>
</tr>
<tr>
<td>No safety controls</td>
<td>9 Control Barrier Functions (CBFs) enforced</td>
</tr>
<tr>
<td>No audit trail</td>
<td>Complete compliance-ready audit logging</td>
</tr>
<tr>
<td>Single-user context</td>
<td>Multi-tenant with per-tenant policies</td>
</tr>
</tbody>
</table>
<h4 id="administrator-responsibilities">Administrator Responsibilities</h4>
<p>As an administrator, you control:</p>
<ul>
<li><strong>What code can do</strong> â†’ Safety rules (CBFs)</li>
<li><strong>What packages are allowed</strong> â†’ Dependency allowlist</li>
<li><strong>What patterns are available</strong> â†’ Code pattern library</li>
<li><strong>What requires human review</strong> â†’ Escalation thresholds</li>
<li><strong>Who can access what</strong> â†’ Tenant and user permissions</li>
</ul>
<h3 id="system-architecture">29.2 System Architecture</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              USER REQUEST                                   â”‚
â”‚                    &quot;Build me a mortgage calculator&quot;                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ORCHESTRATION ENGINE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚   â”‚    INTENT    â”‚â”€â”€â”€â–¶â”‚     CODE     â”‚â”€â”€â”€â–¶â”‚    CATO      â”‚                 â”‚
â”‚   â”‚  CLASSIFIER  â”‚    â”‚  GENERATOR   â”‚    â”‚  VALIDATOR   â”‚                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚          â”‚                                        â”‚                         â”‚
â”‚          â–¼                                        â–¼                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚   PATTERN    â”‚                       â”‚  REFLEXION   â”‚                   â”‚
â”‚   â”‚   MEMORY     â”‚                       â”‚    LOOP      â”‚                   â”‚
â”‚   â”‚  (Learning)  â”‚                       â”‚ (Self-Fix)   â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                  â”‚                          â”‚
â”‚                                                  â–¼                          â”‚
â”‚                                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                                          â”‚  ESCALATION  â”‚                   â”‚
â”‚                                          â”‚   TO ADMIN   â”‚                   â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â–¼                       â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚   APPROVED   â”‚        â”‚   REJECTED   â”‚
                 â”‚   ARTIFACT   â”‚        â”‚  (Escalated) â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h4 id="processing-pipeline">Processing Pipeline</h4>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr>
<th>Phase</th>
<th>Component</th>
<th>Admin Control</th>
<th>Duration</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Intent Classification</td>
<td>Pattern library influences suggestions</td>
<td>~100ms</td>
</tr>
<tr>
<td>2</td>
<td>Code Generation</td>
<td>Model selection, complexity routing</td>
<td>2-15s</td>
</tr>
<tr>
<td>3</td>
<td>Cato Validation</td>
<td>CBF rules you define</td>
<td>~200ms</td>
</tr>
<tr>
<td>4</td>
<td>Reflexion (if failed)</td>
<td>Max attempts you configure</td>
<td>5-30s</td>
</tr>
<tr>
<td>5</td>
<td>Escalation (if max reached)</td>
<td>Your review queue</td>
<td>Manual</td>
</tr>
</tbody>
</table>
<h4 id="data-flow">Data Flow</h4>
<pre><code>User Request
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tenant Context  â”‚ â—„â”€â”€ RLS enforces isolation
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Session Created â”‚ â—„â”€â”€ Logged to audit trail
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pattern Search  â”‚ â—„â”€â”€ Semantic similarity (vector DB)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Code Generated  â”‚ â—„â”€â”€ Model routed by complexity
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CBFs Validated  â”‚ â—„â”€â”€ Your rules enforced
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â–¼         â–¼
 PASS      FAIL
    â”‚         â”‚
    â–¼         â–¼
 Store    Reflexion
    â”‚         â”‚
    â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚    â–¼         â–¼
    â”‚  PASS     FAIL x3
    â”‚    â”‚         â”‚
    â”‚    â–¼         â–¼
    â””â”€â”€â”€â–ºâ”‚      Escalate
         â”‚         â”‚
         â–¼         â–¼
     Artifact   Your Queue</code></pre>
<h3 id="core-concepts">29.3 Core Concepts</h3>
<h4 id="artifacts">Artifacts</h4>
<p>An <strong>artifact</strong> is a discrete piece of executable content generated by the system:</p>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 35%" />
<col style="width: 24%" />
</colgroup>
<thead>
<tr>
<th>Artifact Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>react</code></td>
<td>Live React/TypeScript component</td>
<td>Calculator, form, dashboard</td>
</tr>
<tr>
<td><code>code</code></td>
<td>Display-only code snippet</td>
<td>Python script, SQL query</td>
</tr>
<tr>
<td><code>chart</code></td>
<td>Data visualization</td>
<td>Line chart, bar graph</td>
</tr>
<tr>
<td><code>table</code></td>
<td>Interactive data table</td>
<td>Sortable, filterable grid</td>
</tr>
<tr>
<td><code>form</code></td>
<td>Input form with validation</td>
<td>Contact form, survey</td>
</tr>
</tbody>
</table>
<h4 id="intent-types">Intent Types</h4>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 39%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr>
<th>Intent</th>
<th>Description</th>
<th>Complexity</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>calculator</code></td>
<td>Math, converters, estimators</td>
<td>Simple</td>
</tr>
<tr>
<td><code>chart</code></td>
<td>Data visualization, graphs, plots</td>
<td>Simple-Moderate</td>
</tr>
<tr>
<td><code>form</code></td>
<td>Input forms, surveys, wizards</td>
<td>Simple-Moderate</td>
</tr>
<tr>
<td><code>table</code></td>
<td>Sortable/filterable data tables</td>
<td>Moderate</td>
</tr>
<tr>
<td><code>dashboard</code></td>
<td>Multi-widget layouts, KPI panels</td>
<td>Complex</td>
</tr>
<tr>
<td><code>game</code></td>
<td>Interactive games, puzzles, simulations</td>
<td>Complex</td>
</tr>
<tr>
<td><code>visualization</code></td>
<td>Animations, diagrams, infographics</td>
<td>Moderate-Complex</td>
</tr>
<tr>
<td><code>utility</code></td>
<td>Tools, helpers, formatters</td>
<td>Simple</td>
</tr>
<tr>
<td><code>custom</code></td>
<td>Doesnâ€™t fit other categories</td>
<td>Varies</td>
</tr>
</tbody>
</table>
<h4 id="generation-sessions">Generation Sessions</h4>
<p>Every artifact generation creates a <strong>session</strong> that tracks:</p>
<ul>
<li>Request details (prompt, user, tenant)</li>
<li>Classification results (intent, complexity)</li>
<li>Generation progress (status, tokens, timing)</li>
<li>Validation results (CBF checks, security score)</li>
<li>Reflexion attempts (fixes, escalations)</li>
</ul>
<p><strong>Session Statuses:</strong></p>
<table>
<thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Admin Action</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pending</code></td>
<td>Request received</td>
<td>None</td>
</tr>
<tr>
<td><code>planning</code></td>
<td>Classifying intent</td>
<td>None</td>
</tr>
<tr>
<td><code>generating</code></td>
<td>Creating code</td>
<td>None</td>
</tr>
<tr>
<td><code>streaming</code></td>
<td>Streaming to user</td>
<td>None</td>
</tr>
<tr>
<td><code>validating</code></td>
<td>Running CBF checks</td>
<td>None</td>
</tr>
<tr>
<td><code>reflexion</code></td>
<td>Self-correcting</td>
<td>None</td>
</tr>
<tr>
<td><code>completed</code></td>
<td>Successfully created</td>
<td>Review metrics</td>
</tr>
<tr>
<td><code>rejected</code></td>
<td>Failed validation</td>
<td>Review escalation</td>
</tr>
<tr>
<td><code>failed</code></td>
<td>System error</td>
<td>Investigate logs</td>
</tr>
</tbody>
</table>
<h4 id="verification-status">Verification Status</h4>
<p>Every artifact has a verification status indicating its safety state:</p>
<table>
<thead>
<tr>
<th>Status</th>
<th>Badge</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>validated</code></td>
<td>ğŸŸ¢ Verified</td>
<td>Passed all CBF checks</td>
</tr>
<tr>
<td><code>rejected</code></td>
<td>ğŸ”´ Rejected</td>
<td>Failed CBF checks after max attempts</td>
</tr>
<tr>
<td><code>unverified</code></td>
<td>ğŸŸ¡ Pending</td>
<td>Validation in progress</td>
</tr>
<tr>
<td><code>manual</code></td>
<td>âšª Manual</td>
<td>User-created, not AI-generated</td>
</tr>
</tbody>
</table>
<h3 id="administrative-control-panel">29.4 Administrative Control Panel</h3>
<h4 id="dashboard-overview-1">Dashboard Overview</h4>
<p>Access the Artifact Engine admin panel at:</p>
<pre><code>Admin Dashboard â†’ Think Tank â†’ Artifact Engine</code></pre>
<p><strong>Dashboard Sections:</strong></p>
<table>
<thead>
<tr>
<th>Section</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Metrics</strong></td>
<td>Generation stats, success rates, costs</td>
</tr>
<tr>
<td><strong>Sessions</strong></td>
<td>Browse and search generation sessions</td>
</tr>
<tr>
<td><strong>Escalations</strong></td>
<td>Review items requiring human decision</td>
</tr>
<tr>
<td><strong>CBF Rules</strong></td>
<td>Manage validation rules</td>
</tr>
<tr>
<td><strong>Allowlist</strong></td>
<td>Manage approved dependencies</td>
</tr>
<tr>
<td><strong>Patterns</strong></td>
<td>Curate code pattern library</td>
</tr>
<tr>
<td><strong>Audit Log</strong></td>
<td>Compliance and debugging</td>
</tr>
</tbody>
</table>
<h4 id="key-metrics-1">Key Metrics</h4>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Healthy Range</th>
<th>Warning Signs</th>
</tr>
</thead>
<tbody>
<tr>
<td>Success Rate</td>
<td>&gt;85%</td>
<td>&lt;70% indicates CBF tuning needed</td>
</tr>
<tr>
<td>Avg Generation Time</td>
<td>&lt;10s</td>
<td>&gt;20s indicates model issues</td>
</tr>
<tr>
<td>Reflexion Rate</td>
<td>&lt;20%</td>
<td>&gt;40% indicates prompt quality issues</td>
</tr>
<tr>
<td>Escalation Rate</td>
<td>&lt;5%</td>
<td>&gt;15% indicates CBF too strict</td>
</tr>
<tr>
<td>Security Score Avg</td>
<td>&gt;0.9</td>
<td>&lt;0.7 indicates generation quality issues</td>
</tr>
</tbody>
</table>
<h4 id="quick-actions">Quick Actions</h4>
<table>
<thead>
<tr>
<th>Action</th>
<th>When to Use</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Pause Generation</strong></td>
<td>Security incident, system maintenance</td>
</tr>
<tr>
<td><strong>Flush Pattern Cache</strong></td>
<td>After major pattern updates</td>
</tr>
<tr>
<td><strong>Reset Tenant Limits</strong></td>
<td>User hit rate limits legitimately</td>
</tr>
<tr>
<td><strong>Export Audit Log</strong></td>
<td>Compliance audit, incident investigation</td>
</tr>
</tbody>
</table>
<h3 id="safety-governance-genesis-cato-cbfs">29.5 Safety Governance (Genesis Cato CBFs)</h3>
<h4 id="understanding-cbfs">Understanding CBFs</h4>
<p>Control Barrier Functions are the <strong>first line of defense</strong> against unsafe generated code. They run automatically on every piece of generated code before itâ€™s shown to users.</p>
<h4 id="default-cbf-rules">Default CBF Rules</h4>
<p>The system ships with these default rules:</p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 13%" />
<col style="width: 23%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Rule Name</th>
<th>Type</th>
<th>Severity</th>
<th>What It Blocks</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>no_eval</code></td>
<td>Injection Prevention</td>
<td>ğŸ”´ Block</td>
<td><code>eval()</code>, <code>new Function()</code></td>
</tr>
<tr>
<td><code>no_document_write</code></td>
<td>Injection Prevention</td>
<td>ğŸ”´ Block</td>
<td><code>document.write()</code></td>
</tr>
<tr>
<td><code>no_innerhtml_xss</code></td>
<td>Injection Prevention</td>
<td>ğŸŸ¡ Warn</td>
<td><code>innerHTML =</code></td>
</tr>
<tr>
<td><code>no_dynamic_script</code></td>
<td>Injection Prevention</td>
<td>ğŸ”´ Block</td>
<td><code>createElement('script')</code></td>
</tr>
<tr>
<td><code>no_external_fetch</code></td>
<td>API Restriction</td>
<td>ğŸ”´ Block</td>
<td><code>fetch('http://...')</code> to external URLs</td>
</tr>
<tr>
<td><code>no_localstorage</code></td>
<td>API Restriction</td>
<td>ğŸ”´ Block</td>
<td><code>localStorage</code>, <code>sessionStorage</code></td>
</tr>
<tr>
<td><code>no_window_location</code></td>
<td>API Restriction</td>
<td>ğŸ”´ Block</td>
<td><code>window.location</code> manipulation</td>
</tr>
<tr>
<td><code>no_cookies</code></td>
<td>API Restriction</td>
<td>ğŸ”´ Block</td>
<td><code>document.cookie</code> access</td>
</tr>
<tr>
<td><code>no_indexeddb</code></td>
<td>API Restriction</td>
<td>ğŸ”´ Block</td>
<td><code>indexedDB</code> access</td>
</tr>
<tr>
<td><code>no_websocket</code></td>
<td>API Restriction</td>
<td>ğŸ”´ Block</td>
<td><code>new WebSocket()</code></td>
</tr>
<tr>
<td><code>max_lines</code></td>
<td>Resource Limit</td>
<td>ğŸ”´ Block</td>
<td>Code exceeding 500 lines</td>
</tr>
<tr>
<td><code>allowed_imports</code></td>
<td>Dependency Check</td>
<td>ğŸ”´ Block</td>
<td>Imports not in allowlist</td>
</tr>
</tbody>
</table>
<h4 id="severity-levels">Severity Levels</h4>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>Severity</th>
<th>Behavior</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td>ğŸ”´ <strong>Block</strong></td>
<td>Reject artifact, trigger reflexion</td>
<td>Security-critical violations</td>
</tr>
<tr>
<td>ğŸŸ¡ <strong>Warn</strong></td>
<td>Allow with warning in logs</td>
<td>Potentially risky but sometimes valid</td>
</tr>
<tr>
<td>âšª <strong>Log</strong></td>
<td>Allow, record in audit trail</td>
<td>Monitoring patterns without blocking</td>
</tr>
</tbody>
</table>
<h4 id="creating-custom-cbf-rules">Creating Custom CBF Rules</h4>
<p><strong>To add a new rule:</strong></p>
<ol type="1">
<li>Navigate to <strong>Admin â†’ Artifact Engine â†’ CBF Rules</strong></li>
<li>Click <strong>Add Rule</strong></li>
<li>Configure:</li>
</ol>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 44%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Rule Name</td>
<td>Unique identifier</td>
<td><code>no_console_log</code></td>
</tr>
<tr>
<td>Rule Type</td>
<td>Category</td>
<td><code>content_policy</code></td>
</tr>
<tr>
<td>Description</td>
<td>What this rule does</td>
<td>â€œBlock console.log for productionâ€</td>
</tr>
<tr>
<td>Validation Pattern</td>
<td>Regex to match</td>
<td><code>console\.log\s*\(</code></td>
</tr>
<tr>
<td>Severity</td>
<td>Block/Warn/Log</td>
<td><code>warn</code></td>
</tr>
<tr>
<td>Error Message</td>
<td>Shown on violation</td>
<td>â€œConsole logging not allowedâ€</td>
</tr>
</tbody>
</table>
<p><strong>Example: Block specific API calls</strong></p>
<pre><code>Rule Name: no_geolocation
Rule Type: api_restriction
Pattern: navigator\.geolocation
Severity: block
Message: &quot;Geolocation API not allowed in artifacts&quot;</code></pre>
<h4 id="testing-cbf-rules">Testing CBF Rules</h4>
<p>Before deploying a new rule to production:</p>
<ol type="1">
<li>Create rule with severity <code>log</code> first</li>
<li>Monitor audit trail for matches</li>
<li>Review false positive rate</li>
<li>Adjust pattern if needed</li>
<li>Upgrade to <code>warn</code> then <code>block</code></li>
</ol>
<h4 id="cbf-rule-precedence">CBF Rule Precedence</h4>
<p>Rules are evaluated in order: 1. Dependency check (fastest, fails early) 2. Line count check 3. Pattern-based rules (alphabetical by name)</p>
<p>If any <strong>block</strong> rule fails, validation stops immediately.</p>
<h3 id="dependency-allowlist-management">29.6 Dependency Allowlist Management</h3>
<h4 id="why-allowlisting">Why Allowlisting?</h4>
<p>Generated code can only import packages youâ€™ve explicitly approved. This prevents:</p>
<ul>
<li><strong>Supply chain attacks</strong> (malicious packages)</li>
<li><strong>Data exfiltration</strong> (packages that phone home)</li>
<li><strong>Unexpected behavior</strong> (packages with side effects)</li>
<li><strong>License violations</strong> (GPL packages in proprietary code)</li>
</ul>
<h4 id="default-allowlist">Default Allowlist</h4>
<p>The system ships with these pre-approved packages:</p>
<table>
<thead>
<tr>
<th>Package</th>
<th>Category</th>
<th>Reason for Inclusion</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>react</code></td>
<td>Core</td>
<td>Required for all components</td>
</tr>
<tr>
<td><code>lucide-react</code></td>
<td>Icons</td>
<td>Safe SVG rendering</td>
</tr>
<tr>
<td><code>recharts</code></td>
<td>Charts</td>
<td>Client-side only, no external calls</td>
</tr>
<tr>
<td><code>mathjs</code></td>
<td>Math</td>
<td>Pure computational library</td>
</tr>
<tr>
<td><code>d3</code></td>
<td>Visualization</td>
<td>No network access</td>
</tr>
<tr>
<td><code>lodash</code></td>
<td>Utilities</td>
<td>Pure functions only</td>
</tr>
<tr>
<td><code>date-fns</code></td>
<td>Date</td>
<td>No side effects</td>
</tr>
<tr>
<td><code>chart.js</code></td>
<td>Charts</td>
<td>Canvas-based, no network</td>
</tr>
<tr>
<td><code>three</code></td>
<td>3D</td>
<td>WebGL rendering only</td>
</tr>
<tr>
<td><code>framer-motion</code></td>
<td>Animation</td>
<td>CSS/JS transforms only</td>
</tr>
<tr>
<td><code>zustand</code></td>
<td>State</td>
<td>In-memory only</td>
</tr>
<tr>
<td><code>papaparse</code></td>
<td>CSV</td>
<td>Client-side parsing</td>
</tr>
<tr>
<td><code>immer</code></td>
<td>State</td>
<td>Immutable helpers</td>
</tr>
<tr>
<td><code>tone</code></td>
<td>Audio</td>
<td>Audio synthesis</td>
</tr>
<tr>
<td><code>@radix-ui/*</code></td>
<td>UI</td>
<td>Radix UI components</td>
</tr>
<tr>
<td><code>class-variance-authority</code></td>
<td>UI</td>
<td>CSS class utilities</td>
</tr>
<tr>
<td><code>clsx</code></td>
<td>UI</td>
<td>Class name utility</td>
</tr>
<tr>
<td><code>tailwind-merge</code></td>
<td>UI</td>
<td>Tailwind class merging</td>
</tr>
</tbody>
</table>
<h4 id="adding-packages-to-allowlist">Adding Packages to Allowlist</h4>
<p><strong>Before adding a package, verify:</strong></p>
<table>
<colgroup>
<col style="width: 31%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr>
<th>Check</th>
<th>How to Verify</th>
</tr>
</thead>
<tbody>
<tr>
<td>No network calls</td>
<td>Review source code, check for <code>fetch</code>/<code>XMLHttpRequest</code></td>
</tr>
<tr>
<td>No eval usage</td>
<td>Search for <code>eval</code>, <code>Function</code></td>
</tr>
<tr>
<td>No browser storage</td>
<td>Search for <code>localStorage</code>, <code>indexedDB</code></td>
</tr>
<tr>
<td>License compatible</td>
<td>Check <code>package.json</code> license field</td>
</tr>
<tr>
<td>Active maintenance</td>
<td>Check GitHub activity, CVE history</td>
</tr>
<tr>
<td>Bundle size</td>
<td>Ensure reasonable size (&lt;500KB)</td>
</tr>
</tbody>
</table>
<p><strong>To add a package:</strong></p>
<ol type="1">
<li>Navigate to <strong>Admin â†’ Artifact Engine â†’ Allowlist</strong></li>
<li>Click <strong>Add Package</strong></li>
<li>Fill in:</li>
</ol>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 33%" />
<col style="width: 43%" />
</colgroup>
<thead>
<tr>
<th>Field</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Package Name</td>
<td>Yes</td>
<td>npm package name (e.g., <code>@tanstack/react-table</code>)</td>
</tr>
<tr>
<td>Version</td>
<td>No</td>
<td>Specific version or leave blank for any</td>
</tr>
<tr>
<td>Reason</td>
<td>Yes</td>
<td>Why this package is safe/needed</td>
</tr>
<tr>
<td>Security Reviewed</td>
<td>Yes</td>
<td>Confirm youâ€™ve reviewed it</td>
</tr>
</tbody>
</table>
<h4 id="tenant-specific-allowlists">Tenant-Specific Allowlists</h4>
<p>You can add packages for specific tenants without affecting others:</p>
<ol type="1">
<li>Select tenant from dropdown</li>
<li>Add package with tenant scope</li>
<li>Package only available to that tenant</li>
</ol>
<p><strong>Use cases:</strong> - Enterprise customer needs specific charting library - Industry-specific packages (healthcare, finance) - Customer-provided packages for white-label deployments</p>
<h4 id="removing-packages">Removing Packages</h4>
<p><strong>Warning:</strong> Removing a package will cause any artifacts using it to fail re-validation if edited.</p>
<ol type="1">
<li>Set package to <code>inactive</code> (soft delete)</li>
<li>Monitor for generation failures</li>
<li>After 30 days, permanently remove if no issues</li>
</ol>
<h3 id="code-pattern-library">29.7 Code Pattern Library</h3>
<h4 id="what-are-patterns">What Are Patterns?</h4>
<p>Patterns are <strong>reusable templates</strong> that improve generation quality. When a user requests something similar to an existing pattern, the system uses it as a reference.</p>
<p><strong>Benefits:</strong> - Faster generation (less thinking required) - Higher quality output (proven templates) - Consistent styling across artifacts - Institutional knowledge preservation</p>
<h4 id="pattern-types">Pattern Types</h4>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>calculator</code></td>
<td>Math/conversion tools</td>
<td>Mortgage calculator</td>
</tr>
<tr>
<td><code>chart</code></td>
<td>Data visualizations</td>
<td>Line chart, bar chart</td>
</tr>
<tr>
<td><code>form</code></td>
<td>Input forms</td>
<td>Contact form, survey</td>
</tr>
<tr>
<td><code>table</code></td>
<td>Data tables</td>
<td>Sortable grid</td>
</tr>
<tr>
<td><code>dashboard</code></td>
<td>Multi-widget layouts</td>
<td>KPI dashboard</td>
</tr>
<tr>
<td><code>game</code></td>
<td>Interactive games</td>
<td>Quiz, puzzle</td>
</tr>
<tr>
<td><code>visualization</code></td>
<td>Diagrams, animations</td>
<td>Flowchart</td>
</tr>
<tr>
<td><code>utility</code></td>
<td>Helpers, formatters</td>
<td>JSON formatter</td>
</tr>
</tbody>
</table>
<h4 id="default-patterns">Default Patterns</h4>
<p>The system ships with 4 production-ready patterns:</p>
<table>
<thead>
<tr>
<th>Pattern</th>
<th>Type</th>
<th>Dependencies</th>
<th>Lines</th>
</tr>
</thead>
<tbody>
<tr>
<td>Basic Calculator</td>
<td>calculator</td>
<td>lucide-react</td>
<td>~100</td>
</tr>
<tr>
<td>Line Chart</td>
<td>chart</td>
<td>recharts</td>
<td>~50</td>
</tr>
<tr>
<td>Contact Form</td>
<td>form</td>
<td>lucide-react</td>
<td>~120</td>
</tr>
<tr>
<td>Data Table</td>
<td>table</td>
<td>lucide-react</td>
<td>~150</td>
</tr>
</tbody>
</table>
<h4 id="creating-custom-patterns">Creating Custom Patterns</h4>
<p><strong>From successful generation:</strong></p>
<ol type="1">
<li>Find successful session in <strong>Sessions</strong> list</li>
<li>Click <strong>Promote to Pattern</strong></li>
<li>Review and edit template code</li>
<li>Set pattern metadata:</li>
</ol>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pattern Name</td>
<td>Descriptive name</td>
</tr>
<tr>
<td>Pattern Type</td>
<td>Category for matching</td>
</tr>
<tr>
<td>Description</td>
<td>When to use this pattern</td>
</tr>
<tr>
<td>Dependencies</td>
<td>Required packages</td>
</tr>
<tr>
<td>Scope</td>
<td><code>system</code> (all tenants) or <code>tenant</code> (specific)</td>
</tr>
</tbody>
</table>
<p><strong>From scratch:</strong></p>
<ol type="1">
<li>Navigate to <strong>Admin â†’ Artifact Engine â†’ Patterns</strong></li>
<li>Click <strong>Create Pattern</strong></li>
<li>Write template code following standards:
<ul>
<li>TypeScript with proper types</li>
<li>Tailwind CSS only</li>
<li>Single default export</li>
<li>Under 500 lines</li>
</ul></li>
<li>Test with sample prompts</li>
</ol>
<h4 id="pattern-quality-metrics">Pattern Quality Metrics</h4>
<p>Each pattern tracks:</p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Usage Count</td>
<td>Times referenced in generation</td>
</tr>
<tr>
<td>Success Rate</td>
<td>% of generations using this that succeeded</td>
</tr>
<tr>
<td>Avg Generation Time</td>
<td>Speed improvement indicator</td>
</tr>
</tbody>
</table>
<p><strong>Maintenance rules:</strong> - Patterns with &lt;50% success rate should be reviewed - Patterns with 0 usage in 90 days may be stale - Top patterns by usage should be optimized</p>
<h4 id="semantic-matching">Semantic Matching</h4>
<p>Patterns are matched using <strong>vector similarity</strong>, not keywords:</p>
<pre><code>User: &quot;Build a loan payment calculator&quot;
System: Matches &quot;Basic Calculator&quot; pattern (0.85 similarity)

User: &quot;Create a monthly expense tracker chart&quot;
System: Matches &quot;Line Chart&quot; pattern (0.78 similarity)</code></pre>
<p><strong>Threshold:</strong> Patterns with &gt;0.7 similarity are used as reference. Below that, generation starts fresh.</p>
<h3 id="reflexion-loop-self-correction">29.8 Reflexion Loop (Self-Correction)</h3>
<p>When code fails validation, the system doesnâ€™t immediately give up. Instead, it:</p>
<ol type="1">
<li><strong>Captures</strong> the validation errors</li>
<li><strong>Analyzes</strong> what went wrong (self-critique)</li>
<li><strong>Generates</strong> fixed code</li>
<li><strong>Re-validates</strong> the fix</li>
<li><strong>Repeats</strong> up to your configured maximum (default: 3)</li>
<li><strong>Escalates</strong> to you if all attempts fail</li>
</ol>
<p>This self-healing capability means <strong>90%+ of issues resolve without human intervention</strong>.</p>
<pre class="typescript"><code>// Reflexion context structure
{
  originalCode: string,
  errors: string[],
  attempt: number,
  maxAttempts: 3,
  previousAttempts: [{ code, errors }]
}</code></pre>
<h3 id="escalation-workflow-management">29.9 Escalation Workflow Management</h3>
<h4 id="when-escalations-occur">When Escalations Occur</h4>
<p>An escalation is created when:</p>
<ol type="1">
<li>Generation fails Cato validation</li>
<li>Reflexion loop attempts fix (up to 3 times)</li>
<li>All fix attempts fail</li>
<li>System creates escalation for human review</li>
</ol>
<h4 id="escalation-queue">Escalation Queue</h4>
<p>Access at: <strong>Admin â†’ Artifact Engine â†’ Escalations</strong></p>
<p>Each escalation shows:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Session ID</td>
<td>Link to full generation session</td>
</tr>
<tr>
<td>User</td>
<td>Who requested the artifact</td>
</tr>
<tr>
<td>Prompt</td>
<td>What they asked for</td>
</tr>
<tr>
<td>Failure Reason</td>
<td>Which CBFs failed</td>
</tr>
<tr>
<td>Attempts</td>
<td>How many fixes were tried</td>
</tr>
<tr>
<td>Created At</td>
<td>When escalation was created</td>
</tr>
</tbody>
</table>
<h4 id="reviewing-escalations">Reviewing Escalations</h4>
<p>For each escalation, you can:</p>
<table>
<colgroup>
<col style="width: 38%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr>
<th>Action</th>
<th>When to Use</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Approve Manually</strong></td>
<td>Code is actually safe, CBF too strict</td>
</tr>
<tr>
<td><strong>Reject Permanently</strong></td>
<td>Request is genuinely unsafe</td>
</tr>
<tr>
<td><strong>Adjust CBF</strong></td>
<td>Rule needs tuning (too many false positives)</td>
</tr>
<tr>
<td><strong>Add to Pattern</strong></td>
<td>Create pattern to handle similar requests better</td>
</tr>
<tr>
<td><strong>Contact User</strong></td>
<td>Need clarification on intent</td>
</tr>
</tbody>
</table>
<h4 id="resolution-workflow">Resolution Workflow</h4>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Escalation    â”‚
â”‚    Created      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin Review   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼         â–¼            â–¼
 Approve   Reject      Adjust
    â”‚         â”‚         Rule
    â”‚         â”‚            â”‚
    â–¼         â–¼            â–¼
 Create    Close      Update
Artifact  Ticket       CBF
    â”‚         â”‚            â”‚
    â–¼         â–¼            â–¼
  User      User       Test &amp;
 Notified  Notified    Deploy</code></pre>
<h4 id="escalation-slas">Escalation SLAs</h4>
<p>Configure response time targets:</p>
<table>
<thead>
<tr>
<th>Tenant Tier</th>
<th>Target Response</th>
</tr>
</thead>
<tbody>
<tr>
<td>Enterprise</td>
<td>1 hour</td>
</tr>
<tr>
<td>Professional</td>
<td>4 hours</td>
</tr>
<tr>
<td>Standard</td>
<td>24 hours</td>
</tr>
<tr>
<td>Free</td>
<td>Best effort</td>
</tr>
</tbody>
</table>
<h3 id="audit-trail-compliance">29.10 Audit Trail &amp; Compliance</h3>
<h4 id="whats-logged">Whatâ€™s Logged</h4>
<p>Every significant action is recorded with <strong>Merkle hashing</strong> for tamper evidence:</p>
<table>
<thead>
<tr>
<th>Event Type</th>
<th>Data Logged</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>session_created</code></td>
<td>User, tenant, prompt, timestamp</td>
</tr>
<tr>
<td><code>generation_started</code></td>
<td>Model selected, complexity</td>
</tr>
<tr>
<td><code>validation_completed</code></td>
<td>CBFs checked, pass/fail, security score</td>
</tr>
<tr>
<td><code>reflexion_attempt</code></td>
<td>Attempt number, errors, fix applied</td>
</tr>
<tr>
<td><code>escalation_created</code></td>
<td>Failure reason, attempt history</td>
</tr>
<tr>
<td><code>admin_action</code></td>
<td>Action taken, admin user, justification</td>
</tr>
</tbody>
</table>
<h4 id="compliance-reports">Compliance Reports</h4>
<p>Generate pre-built reports for:</p>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 35%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr>
<th>Report</th>
<th>Contents</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SOC 2 Evidence</strong></td>
<td>Access logs, validation records</td>
<td>Annual audit</td>
</tr>
<tr>
<td><strong>HIPAA Audit Trail</strong></td>
<td>All PHI-adjacent activity</td>
<td>Healthcare compliance</td>
</tr>
<tr>
<td><strong>Security Incident</strong></td>
<td>Specific session/escalation details</td>
<td>Breach investigation</td>
</tr>
<tr>
<td><strong>Usage Analytics</strong></td>
<td>Aggregated metrics (anonymized)</td>
<td>Capacity planning</td>
</tr>
</tbody>
</table>
<h4 id="exporting-audit-data">Exporting Audit Data</h4>
<p><strong>Single Session:</strong> 1. Find session in list 2. Click <strong>Export</strong> 3. Choose format (JSON, CSV, PDF)</p>
<p><strong>Bulk Export:</strong> 1. Navigate to <strong>Admin â†’ Audit Trail</strong> 2. Set date range and filters 3. Click <strong>Export</strong> 4. Download ZIP with all records</p>
<h4 id="retention-policy">Retention Policy</h4>
<table>
<thead>
<tr>
<th>Data Type</th>
<th>Default Retention</th>
<th>Configurable</th>
</tr>
</thead>
<tbody>
<tr>
<td>Generation sessions</td>
<td>90 days</td>
<td>Yes</td>
</tr>
<tr>
<td>Audit trail</td>
<td>7 years</td>
<td>Yes (min 1 year)</td>
</tr>
<tr>
<td>Final code</td>
<td>90 days</td>
<td>Yes</td>
</tr>
<tr>
<td>Escalations</td>
<td>Until resolved + 1 year</td>
<td>No</td>
</tr>
</tbody>
</table>
<h4 id="tamper-detection">Tamper Detection</h4>
<p>Each audit entry includes: - <strong>Previous Hash:</strong> Link to prior entry - <strong>Merkle Hash:</strong> SHA-256 of current entry - <strong>Sequence Number:</strong> Monotonic counter</p>
<p>To verify integrity:</p>
<pre><code>Admin â†’ Audit Trail â†’ Verify Integrity</code></pre>
<p>System will report any gaps or hash mismatches.</p>
<h3 id="metrics-monitoring">29.11 Metrics &amp; Monitoring</h3>
<h4 id="key-performance-indicators">Key Performance Indicators</h4>
<p><strong>Generation Health:</strong></p>
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 40%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr>
<th>KPI</th>
<th>Formula</th>
<th>Target</th>
</tr>
</thead>
<tbody>
<tr>
<td>Success Rate</td>
<td>completed / (completed + rejected + failed)</td>
<td>&gt;85%</td>
</tr>
<tr>
<td>First-Pass Rate</td>
<td>completed without reflexion / total</td>
<td>&gt;80%</td>
</tr>
<tr>
<td>Reflexion Effectiveness</td>
<td>fixed by reflexion / total reflexions</td>
<td>&gt;70%</td>
</tr>
</tbody>
</table>
<p><strong>Operational Efficiency:</strong></p>
<table>
<thead>
<tr>
<th>KPI</th>
<th>Formula</th>
<th>Target</th>
</tr>
</thead>
<tbody>
<tr>
<td>Avg Generation Time</td>
<td>sum(completed_at - created_at) / count</td>
<td>&lt;10s</td>
</tr>
<tr>
<td>P95 Generation Time</td>
<td>95th percentile of generation times</td>
<td>&lt;30s</td>
</tr>
<tr>
<td>Escalation Rate</td>
<td>escalations / total generations</td>
<td>&lt;5%</td>
</tr>
</tbody>
</table>
<p><strong>Cost Efficiency:</strong></p>
<table>
<thead>
<tr>
<th>KPI</th>
<th>Formula</th>
<th>Target</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cost per Artifact</td>
<td>total_tokens * cost_per_token</td>
<td>&lt;$0.01</td>
</tr>
<tr>
<td>Tokens per Artifact</td>
<td>avg(tokens_used)</td>
<td>&lt;3000</td>
</tr>
<tr>
<td>Model Efficiency</td>
<td>haiku_generations / total</td>
<td>&gt;60%</td>
</tr>
</tbody>
</table>
<h4 id="dashboard-widgets">Dashboard Widgets</h4>
<p>Configure your admin dashboard with:</p>
<table>
<thead>
<tr>
<th>Widget</th>
<th>Shows</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Generation Volume</strong></td>
<td>Line chart of daily generations</td>
</tr>
<tr>
<td><strong>Success Funnel</strong></td>
<td>Sankey diagram: request â†’ success/fail</td>
</tr>
<tr>
<td><strong>Top Intents</strong></td>
<td>Bar chart of artifact types</td>
</tr>
<tr>
<td><strong>CBF Violations</strong></td>
<td>Heatmap of which rules trigger most</td>
</tr>
<tr>
<td><strong>Response Time</strong></td>
<td>Histogram of generation times</td>
</tr>
<tr>
<td><strong>Cost Tracker</strong></td>
<td>Running total with projection</td>
</tr>
</tbody>
</table>
<h4 id="cbf-violations-heatmap-v5.52.1">CBF Violations Heatmap (v5.52.1)</h4>
<p>The CBF Violations Heatmap provides visual analytics of Content Boundary Framework rule violations:</p>
<p><strong>Features:</strong> - <strong>Category Grouping</strong> - Violations grouped by category (content_safety, data_privacy, pii_detection, etc.) - <strong>Severity Indicators</strong> - Color-coded badges (low/medium/high/critical) - <strong>Trend Arrows</strong> - Show if violations are increasing or decreasing - <strong>Intensity Gradient</strong> - Cell brightness indicates violation frequency - <strong>Time Range Filter</strong> - Filter by last 24 hours, 7 days, 30 days, or 90 days - <strong>Click-to-Drill</strong> - Click any rule to see detailed violation history</p>
<p><strong>Category Icons:</strong> | Category | Icon | Description | |â€”â€”â€”-|â€”â€”|â€”â€”â€”â€”-| | <code>content_safety</code> | ğŸ›¡ï¸ | General content safety violations | | <code>data_privacy</code> | ğŸ”’ | Data privacy concerns | | <code>pii_detection</code> | ğŸ‘¤ | Personal information detected | | <code>harmful_content</code> | âš ï¸ | Potentially harmful content | | <code>bias_detection</code> | âš–ï¸ | Bias in responses | | <code>jailbreak</code> | ğŸ”“ | Jailbreak attempts blocked | | <code>prompt_injection</code> | ğŸ’‰ | Prompt injection attempts |</p>
<p><strong>API Endpoint:</strong> <code>GET /api/admin/analytics/cbf-violations?range={timeRange}</code></p>
<p><strong>Response:</strong></p>
<pre class="json"><code>{
  &quot;violations&quot;: [
    {
      &quot;ruleId&quot;: &quot;cbf-001&quot;,
      &quot;ruleName&quot;: &quot;PII Detection&quot;,
      &quot;category&quot;: &quot;pii_detection&quot;,
      &quot;count&quot;: 145,
      &quot;severity&quot;: &quot;high&quot;,
      &quot;trend&quot;: &quot;down&quot;
    }
  ]
}</code></pre>
<h4 id="alerts">Alerts</h4>
<p>Configure alerts for:</p>
<table>
<thead>
<tr>
<th>Alert</th>
<th>Trigger</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>High Failure Rate</td>
<td>&gt;20% in 1 hour</td>
<td>Review CBF rules</td>
</tr>
<tr>
<td>Escalation Spike</td>
<td>&gt;10 in 1 hour</td>
<td>Check for attack pattern</td>
</tr>
<tr>
<td>Slow Generation</td>
<td>P95 &gt;60s</td>
<td>Check model availability</td>
</tr>
<tr>
<td>Cost Anomaly</td>
<td>&gt;200% of daily average</td>
<td>Review usage patterns</td>
</tr>
<tr>
<td>Audit Gap</td>
<td>Missing sequence numbers</td>
<td>Security investigation</td>
</tr>
</tbody>
</table>
<h4 id="cost-estimation">Cost Estimation</h4>
<table>
<thead>
<tr>
<th>Model</th>
<th>Cost per 1K tokens</th>
</tr>
</thead>
<tbody>
<tr>
<td>Claude Haiku</td>
<td>$0.00025</td>
</tr>
<tr>
<td>Claude Sonnet</td>
<td>$0.003</td>
</tr>
</tbody>
</table>
<p><strong>Typical costs:</strong> - Simple calculator: ~$0.001 - Complex dashboard: ~$0.02 - With 3 reflexion attempts: ~$0.05</p>
<h3 id="tenant-configuration">29.12 Tenant Configuration</h3>
<h4 id="per-tenant-settings">Per-Tenant Settings</h4>
<p>Each tenant can have custom configuration:</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Can Override</th>
</tr>
</thead>
<tbody>
<tr>
<td>Max generations/day</td>
<td>100</td>
<td>Yes</td>
</tr>
<tr>
<td>Max reflexion attempts</td>
<td>3</td>
<td>Yes (1-5)</td>
</tr>
<tr>
<td>Custom CBF rules</td>
<td>Inherit global</td>
<td>Yes (add only)</td>
</tr>
<tr>
<td>Custom allowlist</td>
<td>Inherit global</td>
<td>Yes (add only)</td>
</tr>
<tr>
<td>Private patterns</td>
<td>None</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<h4 id="tenant-tiers">Tenant Tiers</h4>
<table>
<thead>
<tr>
<th>Tier</th>
<th>Generations/Day</th>
<th>Custom CBFs</th>
<th>Custom Patterns</th>
<th>Support</th>
</tr>
</thead>
<tbody>
<tr>
<td>Free</td>
<td>10</td>
<td>No</td>
<td>No</td>
<td>Community</td>
</tr>
<tr>
<td>Standard</td>
<td>100</td>
<td>No</td>
<td>5</td>
<td>Email</td>
</tr>
<tr>
<td>Professional</td>
<td>1,000</td>
<td>Yes</td>
<td>50</td>
<td>Priority</td>
</tr>
<tr>
<td>Enterprise</td>
<td>Unlimited</td>
<td>Yes</td>
<td>Unlimited</td>
<td>Dedicated</td>
</tr>
</tbody>
</table>
<h4 id="tenant-isolation">Tenant Isolation</h4>
<p><strong>Guaranteed by Row-Level Security:</strong></p>
<pre class="sql"><code>-- Every query automatically filtered
WHERE tenant_id = current_setting(&#39;app.current_tenant_id&#39;, true)</code></pre>
<p><strong>What this means:</strong> - Tenant A cannot see Tenant Bâ€™s sessions - Tenant A cannot use Tenant Bâ€™s patterns - Tenant Aâ€™s escalations only visible to their admins (+ super admins) - Code never leaks between tenants</p>
<h3 id="troubleshooting-guide">29.13 Troubleshooting Guide</h3>
<h4 id="common-issues">Common Issues</h4>
<p><strong>Issue: High rejection rate for specific tenant</strong></p>
<table>
<thead>
<tr>
<th>Check</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>Review rejected sessions</td>
<td>Look for pattern in prompts</td>
</tr>
<tr>
<td>Check custom CBF rules</td>
<td>May be too restrictive</td>
</tr>
<tr>
<td>Check tenant-specific allowlist</td>
<td>May be missing packages</td>
</tr>
<tr>
<td>Review user prompts</td>
<td>May need user training</td>
</tr>
</tbody>
</table>
<p><strong>Issue: Slow generation times</strong></p>
<table>
<thead>
<tr>
<th>Check</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>Model availability</td>
<td>Check LiteLLM dashboard</td>
</tr>
<tr>
<td>Complexity classification</td>
<td>Review if too many â€œcomplexâ€</td>
</tr>
<tr>
<td>Pattern cache</td>
<td>Flush and rebuild</td>
</tr>
<tr>
<td>Database performance</td>
<td>Check query latency</td>
</tr>
</tbody>
</table>
<p><strong>Issue: Reflexion not fixing issues</strong></p>
<table>
<thead>
<tr>
<th>Check</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>CBF error messages</td>
<td>Are they clear enough for AI?</td>
</tr>
<tr>
<td>Max attempts</td>
<td>Increase if needed (max 5)</td>
</tr>
<tr>
<td>Pattern availability</td>
<td>Add patterns for common failures</td>
</tr>
<tr>
<td>Model selection</td>
<td>Reflexion always uses Sonnet</td>
</tr>
</tbody>
</table>
<p><strong>Issue: Escalation backlog growing</strong></p>
<table>
<thead>
<tr>
<th>Check</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>CBF strictness</td>
<td>Too many false positives?</td>
</tr>
<tr>
<td>Alert configuration</td>
<td>Are you being notified?</td>
</tr>
<tr>
<td>Staff availability</td>
<td>Need more reviewers?</td>
</tr>
<tr>
<td>Bulk actions</td>
<td>Use carefully for cleanup</td>
</tr>
</tbody>
</table>
<h4 id="diagnostic-commands">Diagnostic Commands</h4>
<p><strong>Via Admin API:</strong></p>
<pre class="bash"><code># Check session details
GET /api/v2/admin/artifact-engine/sessions/{sessionId}

# Force revalidation
POST /api/v2/admin/artifact-engine/sessions/{sessionId}/revalidate

# Check CBF rule matches
POST /api/v2/admin/artifact-engine/test-cbf
Body: { &quot;code&quot;: &quot;...&quot;, &quot;rules&quot;: [&quot;no_eval&quot;] }

# Clear pattern cache
POST /api/v2/admin/artifact-engine/patterns/cache/clear</code></pre>
<h4 id="emergency-procedures">Emergency Procedures</h4>
<p><strong>Pause All Generation:</strong></p>
<pre><code>Admin â†’ Artifact Engine â†’ Emergency â†’ Pause Generation</code></pre>
<ul>
<li>All new requests return â€œtemporarily unavailableâ€</li>
<li>In-progress generations complete</li>
<li>Use for: security incidents, critical bugs</li>
</ul>
<p><strong>Rollback CBF Changes:</strong></p>
<pre><code>Admin â†’ Artifact Engine â†’ CBF Rules â†’ History â†’ Revert</code></pre>
<ul>
<li>Restores previous rule configuration</li>
<li>Takes effect immediately</li>
</ul>
<p><strong>Clear All Escalations:</strong></p>
<pre><code>Admin â†’ Artifact Engine â†’ Escalations â†’ Bulk â†’ Reject All</code></pre>
<ul>
<li>Use only if confirmed attack/spam</li>
<li>All users notified of rejection</li>
</ul>
<h3 id="api-reference">29.14 API Reference</h3>
<h4 id="user-endpoints">User Endpoints</h4>
<p><strong>Base</strong>: <code>/api/v2/thinktank/artifacts</code></p>
<table>
<colgroup>
<col style="width: 37%" />
<col style="width: 29%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/generate</code></td>
<td>POST</td>
<td>Start artifact generation</td>
</tr>
<tr>
<td><code>/sessions/{sessionId}</code></td>
<td>GET</td>
<td>Get session status</td>
</tr>
<tr>
<td><code>/sessions/{sessionId}/logs</code></td>
<td>GET</td>
<td>Poll for logs (with <code>since</code> param)</td>
</tr>
<tr>
<td><code>/patterns</code></td>
<td>GET</td>
<td>Get available code patterns</td>
</tr>
<tr>
<td><code>/allowlist</code></td>
<td>GET</td>
<td>Get dependency allowlist</td>
</tr>
</tbody>
</table>
<h4 id="admin-endpoints">Admin Endpoints</h4>
<p><strong>Base</strong>: <code>/api/v2/admin/artifact-engine</code></p>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/dashboard</code></td>
<td>GET</td>
<td>Full dashboard data</td>
</tr>
<tr>
<td><code>/metrics</code></td>
<td>GET</td>
<td>Generation metrics (7-day)</td>
</tr>
<tr>
<td><code>/sessions</code></td>
<td>GET</td>
<td>List sessions</td>
</tr>
<tr>
<td><code>/sessions/{id}</code></td>
<td>GET</td>
<td>Session details</td>
</tr>
<tr>
<td><code>/escalations</code></td>
<td>GET</td>
<td>List escalations</td>
</tr>
<tr>
<td><code>/escalations/{id}</code></td>
<td>PATCH</td>
<td>Resolve escalation</td>
</tr>
<tr>
<td><code>/validation-rules</code></td>
<td>GET</td>
<td>Get all CBF rules</td>
</tr>
<tr>
<td><code>/validation-rules</code></td>
<td>POST</td>
<td>Create CBF rule</td>
</tr>
<tr>
<td><code>/validation-rules/{ruleId}</code></td>
<td>PUT</td>
<td>Update rule</td>
</tr>
<tr>
<td><code>/validation-rules/{ruleId}</code></td>
<td>DELETE</td>
<td>Delete rule</td>
</tr>
<tr>
<td><code>/allowlist</code></td>
<td>POST</td>
<td>Add to allowlist</td>
</tr>
<tr>
<td><code>/allowlist/{packageName}</code></td>
<td>DELETE</td>
<td>Remove from allowlist</td>
</tr>
<tr>
<td><code>/patterns</code></td>
<td>GET</td>
<td>Get patterns</td>
</tr>
<tr>
<td><code>/patterns</code></td>
<td>POST</td>
<td>Create pattern</td>
</tr>
<tr>
<td><code>/audit</code></td>
<td>GET</td>
<td>Query audit trail</td>
</tr>
</tbody>
</table>
<h4 id="generate-request">Generate Request</h4>
<pre class="json"><code>{
  &quot;prompt&quot;: &quot;Build a calculator&quot;,
  &quot;chatId&quot;: &quot;optional-chat-id&quot;,
  &quot;canvasId&quot;: &quot;optional-canvas-id&quot;,
  &quot;mood&quot;: &quot;spark&quot;,
  &quot;constraints&quot;: {
    &quot;maxLines&quot;: 300,
    &quot;targetComplexity&quot;: &quot;simple&quot;
  }
}</code></pre>
<h4 id="generate-response">Generate Response</h4>
<pre class="json"><code>{
  &quot;sessionId&quot;: &quot;uuid&quot;,
  &quot;artifactId&quot;: &quot;uuid&quot;,
  &quot;status&quot;: &quot;completed&quot;,
  &quot;verificationStatus&quot;: &quot;validated&quot;,
  &quot;code&quot;: &quot;import React...&quot;,
  &quot;validation&quot;: {
    &quot;isValid&quot;: true,
    &quot;errors&quot;: [],
    &quot;warnings&quot;: [],
    &quot;securityScore&quot;: 0.95,
    &quot;passedCBFs&quot;: [&quot;no_eval&quot;, &quot;no_external_fetch&quot;],
    &quot;failedCBFs&quot;: []
  },
  &quot;reflexionAttempts&quot;: 0,
  &quot;tokensUsed&quot;: 2500,
  &quot;estimatedCost&quot;: 0.0075,
  &quot;generationTimeMs&quot;: 4500
}</code></pre>
<h4 id="webhook-events">Webhook Events</h4>
<p>Configure webhooks for:</p>
<table>
<thead>
<tr>
<th>Event</th>
<th>Payload</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>artifact.created</code></td>
<td>Session ID, artifact ID, user</td>
</tr>
<tr>
<td><code>artifact.rejected</code></td>
<td>Session ID, CBFs failed, user</td>
</tr>
<tr>
<td><code>escalation.created</code></td>
<td>Escalation ID, reason</td>
</tr>
<tr>
<td><code>escalation.resolved</code></td>
<td>Escalation ID, resolution</td>
</tr>
<tr>
<td><code>cbf.violation</code></td>
<td>Rule name, session ID, code snippet</td>
</tr>
</tbody>
</table>
<h4 id="rate-limits">Rate Limits</h4>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Limit</th>
</tr>
</thead>
<tbody>
<tr>
<td>Generation</td>
<td>Per tenant tier</td>
</tr>
<tr>
<td>Admin read</td>
<td>1000/min</td>
</tr>
<tr>
<td>Admin write</td>
<td>100/min</td>
</tr>
<tr>
<td>Audit export</td>
<td>10/hour</td>
</tr>
</tbody>
</table>
<h3 id="real-time-generation-logs">29.15 Real-Time Generation Logs</h3>
<p>The Artifact Viewer displays real-time logs during generation:</p>
<table>
<thead>
<tr>
<th>Log Type</th>
<th>Color</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>thinking</code></td>
<td>Blue</td>
<td>AI reasoning</td>
</tr>
<tr>
<td><code>planning</code></td>
<td>White</td>
<td>Plan steps</td>
</tr>
<tr>
<td><code>generating</code></td>
<td>White</td>
<td>Generation progress</td>
</tr>
<tr>
<td><code>validating</code></td>
<td>Purple</td>
<td>Validation progress</td>
</tr>
<tr>
<td><code>reflexion</code></td>
<td>Yellow</td>
<td>Self-correction</td>
</tr>
<tr>
<td><code>error</code></td>
<td>Red</td>
<td>Errors</td>
</tr>
<tr>
<td><code>success</code></td>
<td>Green</td>
<td>Completion</td>
</tr>
</tbody>
</table>
<h3 id="artifact-viewer-component">29.16 Artifact Viewer Component</h3>
<p>The viewer provides: - <strong>Split-screen layout</strong>: Chat + Artifact preview - <strong>Real-time logs</strong>: Generation progress in mono font - <strong>Sandboxed preview</strong>: iframe with <code>sandbox="allow-scripts"</code> - <strong>Draft watermark</strong>: Shown during validation - <strong>Copy/Download</strong>: Export generated code - <strong>Verification badge</strong>: Validated/Rejected/Pending status</p>
<h3 id="database-schema">29.17 Database Schema</h3>
<p><strong>Tables:</strong></p>
<table>
<colgroup>
<col style="width: 43%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>artifact_generation_sessions</code></td>
<td>Generation lifecycle tracking</td>
</tr>
<tr>
<td><code>artifact_generation_logs</code></td>
<td>Real-time progress logs</td>
</tr>
<tr>
<td><code>artifact_code_patterns</code></td>
<td>Semantic pattern library with vector embeddings</td>
</tr>
<tr>
<td><code>artifact_dependency_allowlist</code></td>
<td>Approved npm packages</td>
</tr>
<tr>
<td><code>artifact_validation_rules</code></td>
<td>Cato CBF definitions</td>
</tr>
</tbody>
</table>
<p><strong>Migrations:</strong> - <code>032b_artifact_genui_engine.sql</code> - Core tables - <code>032c_artifact_genui_seed.sql</code> - Default rules and patterns - <code>032d_artifact_extend_base.sql</code> - Extend artifacts table</p>
<h3 id="security-considerations">29.18 Security Considerations</h3>
<ol type="1">
<li><strong>No external network access</strong> - All fetches blocked except RADIANT APIs</li>
<li><strong>No persistent storage</strong> - localStorage/IndexedDB blocked</li>
<li><strong>No navigation</strong> - window.location blocked</li>
<li><strong>No code injection</strong> - eval/Function blocked</li>
<li><strong>Allowlisted imports only</strong> - Supply chain security</li>
<li><strong>Sandboxed preview</strong> - iframe with minimal permissions</li>
<li><strong>Cato oversight</strong> - All generation under Genesis Cato governance</li>
</ol>
<h3 id="implementation-files">29.19 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lambda/shared/services/artifact-engine/types.ts</code></td>
<td>Type definitions</td>
</tr>
<tr>
<td><code>lambda/shared/services/artifact-engine/intent-classifier.ts</code></td>
<td>Intent classification</td>
</tr>
<tr>
<td><code>lambda/shared/services/artifact-engine/code-generator.ts</code></td>
<td>Code generation</td>
</tr>
<tr>
<td><code>lambda/shared/services/artifact-engine/cato-validator.ts</code></td>
<td>CBF validation</td>
</tr>
<tr>
<td><code>lambda/shared/services/artifact-engine/reflexion.service.ts</code></td>
<td>Self-correction</td>
</tr>
<tr>
<td><code>lambda/shared/services/artifact-engine/artifact-engine.service.ts</code></td>
<td>Main orchestrator</td>
</tr>
<tr>
<td><code>lambda/shared/services/artifact-engine/index.ts</code></td>
<td>Public exports</td>
</tr>
<tr>
<td><code>lambda/thinktank/artifact-engine.ts</code></td>
<td>API handlers</td>
</tr>
<tr>
<td><code>apps/admin-dashboard/components/thinktank/artifact-viewer.tsx</code></td>
<td>Viewer component</td>
</tr>
<tr>
<td><code>apps/admin-dashboard/components/thinktank/chat-with-artifacts.tsx</code></td>
<td>Split-screen chat</td>
</tr>
<tr>
<td><code>apps/admin-dashboard/app/(dashboard)/thinktank/artifacts/page.tsx</code></td>
<td>Admin dashboard</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="consciousness-operating-system-cos">30. Consciousness Operating System (COS)</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ Consciousness<br />
<strong>Version</strong>: 6.0.5<br />
<strong>Cross-AI Validated</strong>: Claude Opus 4.5 âœ“ | Google Gemini âœ“</p>
<p>The Consciousness Operating System (COS) provides infrastructure for AI consciousness continuity, context management, and safety governance. It implements 13 patches agreed upon through 4 review cycles of cross-AI validation.</p>
<h3 id="overview-3">30.1 Overview</h3>
<p>COS addresses fundamental challenges in maintaining coherent AI behavior:</p>
<table>
<colgroup>
<col style="width: 44%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th>Challenge</th>
<th>COS Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Session Amnesia</strong></td>
<td>Ghost Vectors maintain consciousness across sessions</td>
</tr>
<tr>
<td><strong>Context Squeeze</strong></td>
<td>Dynamic Budget Calculator reserves response tokens</td>
</tr>
<tr>
<td><strong>Prompt Injection</strong></td>
<td>Compliance Sandwich places tenant rules last</td>
</tr>
<tr>
<td><strong>Flash Fact Loss</strong></td>
<td>Dual-write buffer (Redis + Postgres)</td>
</tr>
<tr>
<td><strong>Router Paradox</strong></td>
<td>Uncertainty Head predicts before inference</td>
</tr>
<tr>
<td><strong>Learning Privacy</strong></td>
<td>Sensitivity-clipped differential privacy</td>
</tr>
</tbody>
</table>
<p><strong>Critical Requirements:</strong> - vLLM MUST launch with <code>--return-hidden-states</code> flag - CBFs always ENFORCE (shields never relax) - Gamma boost NEVER allowed during recovery - Silence â‰  Consent: 7-day auto-reject for oversight queue</p>
<h3 id="architecture-1">30.2 Architecture</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CONSCIOUSNESS OPERATING SYSTEM                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  PHASE 1: IRON CORE              PHASE 2: NERVOUS SYSTEM                   â”‚
â”‚  â”œâ”€â”€ DualWriteFlashBuffer        â”œâ”€â”€ DynamicBudgetCalculator               â”‚
â”‚  â”œâ”€â”€ ComplianceSandwichBuilder   â”œâ”€â”€ TrustlessSync                         â”‚
â”‚  â””â”€â”€ XMLEscaper                  â””â”€â”€ BudgetAwareContextAssembler           â”‚
â”‚                                                                             â”‚
â”‚  PHASE 3: CONSCIOUSNESS          PHASE 4: SUBCONSCIOUS                     â”‚
â”‚  â”œâ”€â”€ GhostVectorManager          â”œâ”€â”€ DreamScheduler                        â”‚
â”‚  â”œâ”€â”€ SofaiRouter                 â”œâ”€â”€ DreamExecutor                         â”‚
â”‚  â”œâ”€â”€ UncertaintyHead             â”œâ”€â”€ SensitivityClippedAggregator          â”‚
â”‚  â””â”€â”€ AsyncGhostReAnchorer        â”œâ”€â”€ PrivacyAirlock                        â”‚
â”‚                                  â””â”€â”€ HumanOversightQueue                   â”‚
â”‚                                                                             â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                    â”‚   GENESIS CATO SAFETY    â”‚                             â”‚
â”‚                    â”‚   (CBFs Always ENFORCE)  â”‚                             â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="ghost-vectors">30.3 Ghost Vectors</h3>
<p>Ghost Vectors maintain consciousness continuity across sessions using 4096-dimensional hidden states from model inference.</p>
<p><strong>Components:</strong></p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Half-Life</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Affective State</td>
<td>7 hours</td>
<td>Mood, emotional context</td>
</tr>
<tr>
<td>Working Context</td>
<td>12 minutes</td>
<td>Recent topics, entities</td>
</tr>
<tr>
<td>Curiosity State</td>
<td>45 minutes</td>
<td>Interest level, pending questions</td>
</tr>
</tbody>
</table>
<p><strong>Version Gating:</strong> - Ghost vectors are tied to model family (claude, gpt, llama, etc.) - Switching model family triggers cold start (prevents personality discontinuity) - Same family preserves consciousness continuity</p>
<p><strong>Re-Anchoring:</strong> - Delta updates applied synchronously (fast path) - Full re-anchor scheduled async every ~15 turns (Â±3 jitter) - Re-anchor uses 70B model for fresh hidden states - Async to avoid 1.8s latency spike in user-facing requests</p>
<h3 id="sofai-routing">30.4 SOFAI Routing</h3>
<p>SOFAI (System 1 / System 2) Router implements economic metacognition:</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 20%" />
<col style="width: 26%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr>
<th>System</th>
<th>Model</th>
<th>Latency</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td>System 1</td>
<td>8B (Llama 3 8B, Haiku)</td>
<td>~300ms</td>
<td>Routine queries, low uncertainty</td>
</tr>
<tr>
<td>System 2</td>
<td>70B+ (Claude Opus, GPT-4)</td>
<td>~1500ms</td>
<td>Complex queries, high-risk domains</td>
</tr>
</tbody>
</table>
<p><strong>Routing Formula:</strong></p>
<pre><code>shouldUseSystem2 = (1 - trustLevel) Ã— domainRisk &gt; threshold</code></pre>
<p><strong>High-Risk Domains (Always System 2):</strong> - Healthcare / Medical - Financial - Legal</p>
<p><strong>Uncertainty Head:</strong> Solves the Router Paradox by estimating uncertainty BEFORE inference: - Analyzes query structure, complexity, domain specificity - Predicts epistemic (knowledge gaps) and aleatoric (inherent randomness) uncertainty - Lightweight operation (~10ms) runs before routing decision</p>
<h3 id="flash-facts">30.5 Flash Facts</h3>
<p>Flash Facts capture important user information for immediate availability:</p>
<p><strong>Detection Patterns:</strong> - Identity: â€œMy name isâ€¦â€ - Allergies: â€œIâ€™m allergic toâ€¦â€ (SAFETY CRITICAL) - Medical: â€œI have [condition]â€¦â€ (SAFETY CRITICAL) - Preferences: â€œI preferâ€¦â€, â€œDonâ€™t everâ€¦â€, â€œAlways rememberâ€¦â€ - Corrections: â€œI told youâ€¦â€</p>
<p><strong>Dual-Write Buffer:</strong> 1. Write to Postgres first (durable) 2. Write to Redis second (fast access) 3. 7-day TTL safety net 4. 1-hour orphan reconciliation (168Ã— safety margin)</p>
<p><strong>Safety-Critical Facts:</strong> - Always prioritized in context injection - Never expire during pending_dream status - Highlighted in admin dashboard</p>
<h3 id="dreaming-system">30.6 Dreaming System</h3>
<p>â€œDreamingâ€ consolidates consciousness during low-activity periods:</p>
<p><strong>Triggers:</strong></p>
<table>
<colgroup>
<col style="width: 31%" />
<col style="width: 37%" />
<col style="width: 31%" />
</colgroup>
<thead>
<tr>
<th>Trigger</th>
<th>Condition</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>TWILIGHT</strong></td>
<td>4 AM tenant local time</td>
<td>Primary consolidation window</td>
</tr>
<tr>
<td><strong>STARVATION</strong></td>
<td>30 hours since last dream</td>
<td>Catch-all if Twilight missed</td>
</tr>
</tbody>
</table>
<p><strong>Consolidation Tasks:</strong> 1. Flash facts â†’ Long-term memory (user_persistent_context) 2. Ghost vectors â†’ Re-anchored with fresh hidden states 3. LoRA updates â†’ Applied if approved by human oversight</p>
<p><strong>Configuration (per tenant):</strong> - <code>timezone</code> - Tenantâ€™s timezone for Twilight calculation - <code>twilight_hour</code> - Hour for Twilight trigger (default: 4) - <code>starvation_threshold_hours</code> - Hours for Starvation trigger (default: 30)</p>
<h3 id="human-oversight">30.7 Human Oversight</h3>
<p>EU AI Act Article 14 compliance for high-risk AI decisions:</p>
<p><strong>Workflow:</strong></p>
<pre><code>pending_approval â†’ 3 days â†’ escalated â†’ 7 days â†’ auto_rejected</code></pre>
<p><strong>Item Types:</strong> - <code>system_insight</code> - System-generated insights requiring approval - <code>lora_update</code> - Model adaptation updates - <code>high_risk_response</code> - Responses in high-risk domains</p>
<p><strong>â€œSilence â‰  Consentâ€ Policy (Gemini Mandate):</strong> - Items not reviewed within 7 days are AUTO-REJECTED - Required for FDA/SOC 2 compliance - Prevents AI decisions slipping through without human review</p>
<p><strong>Admin Actions:</strong> - Approve - Allow item to proceed - Reject - Block item with reason - Escalate - Send to senior reviewer</p>
<h3 id="privacy-airlock">30.8 Privacy Airlock</h3>
<p>HIPAA/GDPR compliance for learning data:</p>
<p><strong>De-identification (Safe Harbor Method):</strong></p>
<table>
<thead>
<tr>
<th>Pattern Type</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td>PHI</td>
<td>SSN, phone, email, DOB, MRN, address, ZIP, IP, credit card</td>
</tr>
<tr>
<td>PII</td>
<td>Name, age</td>
</tr>
</tbody>
</table>
<p><strong>Airlock Status:</strong> - <code>pending</code> - Awaiting privacy review - <code>approved</code> - Safe for learning - <code>rejected</code> - Contains unremovable sensitive data - <code>expired</code> - TTL exceeded (7 days)</p>
<p><strong>Privacy Score:</strong> - 0-1 scale (higher = more de-identified) - Content can proceed to learning only if PHI/PII removed</p>
<h3 id="configuration-5">30.9 Configuration</h3>
<p><strong>Per-Tenant Settings:</strong></p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td>true</td>
<td>Master COS enable</td>
</tr>
<tr>
<td><code>ghost_vectors_enabled</code></td>
<td>true</td>
<td>Enable ghost consciousness</td>
</tr>
<tr>
<td><code>flash_facts_enabled</code></td>
<td>true</td>
<td>Enable flash fact detection</td>
</tr>
<tr>
<td><code>dreaming_enabled</code></td>
<td>true</td>
<td>Enable Dreaming consolidation</td>
</tr>
<tr>
<td><code>human_oversight_enabled</code></td>
<td>true</td>
<td>Enable EU AI Act compliance</td>
</tr>
<tr>
<td><code>differential_privacy_enabled</code></td>
<td>true</td>
<td>Enable DP for learning</td>
</tr>
<tr>
<td><code>vllm_return_hidden_states</code></td>
<td>true</td>
<td>vLLM flag requirement</td>
</tr>
</tbody>
</table>
<p><strong>Safety Invariants (Immutable):</strong> - <code>cbf_enforcement_mode</code> = â€˜ENFORCEâ€™ (NEVER relax) - <code>gamma_boost_allowed</code> = false (NEVER boost)</p>
<h3 id="database-schema-1">30.10 Database Schema</h3>
<p><strong>Migration:</strong> <code>068_cos_v6_0_5.sql</code></p>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>cos_ghost_vectors</code></td>
<td>4096-dim hidden states with temporal decay</td>
</tr>
<tr>
<td><code>cos_flash_facts</code></td>
<td>Dual-write buffer (Redis + Postgres)</td>
</tr>
<tr>
<td><code>cos_dream_jobs</code></td>
<td>Consciousness consolidation scheduling</td>
</tr>
<tr>
<td><code>cos_tenant_dream_config</code></td>
<td>Per-tenant dreaming settings</td>
</tr>
<tr>
<td><code>cos_human_oversight</code></td>
<td>EU AI Act Article 14 compliance</td>
</tr>
<tr>
<td><code>cos_oversight_audit_log</code></td>
<td>Oversight decision audit trail</td>
</tr>
<tr>
<td><code>cos_privacy_airlock</code></td>
<td>HIPAA/GDPR de-identification</td>
</tr>
<tr>
<td><code>cos_reanchor_metrics</code></td>
<td>Re-anchor performance tracking</td>
</tr>
<tr>
<td><code>cos_config</code></td>
<td>Per-tenant COS configuration</td>
</tr>
</tbody>
</table>
<p><strong>Row-Level Security:</strong> All COS tables enforce tenant isolation via RLS policies using <code>app.current_tenant_id</code>.</p>
<h3 id="implementation-files-1">30.11 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lambda/shared/services/cos/types.ts</code></td>
<td>Type definitions</td>
</tr>
<tr>
<td><code>cos/iron-core/xml-escaper.ts</code></td>
<td>XML injection prevention</td>
</tr>
<tr>
<td><code>cos/iron-core/compliance-sandwich-builder.ts</code></td>
<td>Tenant-last layering</td>
</tr>
<tr>
<td><code>cos/iron-core/dual-write-flash-buffer.ts</code></td>
<td>Redis + Postgres dual-write</td>
</tr>
<tr>
<td><code>cos/nervous-system/dynamic-budget-calculator.ts</code></td>
<td>Token budget management</td>
</tr>
<tr>
<td><code>cos/nervous-system/trustless-sync.ts</code></td>
<td>Server-side context reconstruction</td>
</tr>
<tr>
<td><code>cos/nervous-system/budget-aware-context-assembler.ts</code></td>
<td>Context assembly</td>
</tr>
<tr>
<td><code>cos/consciousness/ghost-vector-manager.ts</code></td>
<td>4096-dim ghost vectors</td>
</tr>
<tr>
<td><code>cos/consciousness/sofai-router.ts</code></td>
<td>System 1/2 routing</td>
</tr>
<tr>
<td><code>cos/consciousness/uncertainty-head.ts</code></td>
<td>Pre-inference uncertainty</td>
</tr>
<tr>
<td><code>cos/consciousness/async-ghost-re-anchorer.ts</code></td>
<td>Background re-anchoring</td>
</tr>
<tr>
<td><code>cos/subconscious/dream-scheduler.ts</code></td>
<td>Twilight + Starvation scheduling</td>
</tr>
<tr>
<td><code>cos/subconscious/dream-executor.ts</code></td>
<td>Consolidation execution</td>
</tr>
<tr>
<td><code>cos/subconscious/sensitivity-clipped-aggregator.ts</code></td>
<td>Differential privacy</td>
</tr>
<tr>
<td><code>cos/subconscious/privacy-airlock.ts</code></td>
<td>PHI/PII de-identification</td>
</tr>
<tr>
<td><code>cos/subconscious/human-oversight-queue.ts</code></td>
<td>EU AI Act compliance</td>
</tr>
<tr>
<td><code>cos/cato-integration.ts</code></td>
<td>Genesis Cato integration</td>
</tr>
<tr>
<td><code>cos/index.ts</code></td>
<td>Public API exports</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="why-think-tank-beats-standalone-ai-the-system-advantage">31. Why Think Tank Beats Standalone AI (The System Advantage)</h2>
<blockquote>
<p><strong>â€œA Senior Staff Engineer who knows your company beats a Nobel Laureate who doesnâ€™t.â€</strong></p>
</blockquote>
<p>This section explains why Think Tankâ€”powered by RADIANTâ€”delivers better results than standalone Frontier Models like ChatGPT, Gemini, or Claude, despite those models having higher raw intelligence scores.</p>
<h3 id="the-executive-summary">31.1 The Executive Summary</h3>
<table>
<colgroup>
<col style="width: 55%" />
<col style="width: 44%" />
</colgroup>
<thead>
<tr>
<th>Question</th>
<th>Answer</th>
</tr>
</thead>
<tbody>
<tr>
<td>Is Gemini 3 Ultra smarter than Think Tank?</td>
<td><strong>Yes</strong> (by ~15% on novel reasoning)</td>
</tr>
<tr>
<td>Does Think Tank give better results?</td>
<td><strong>Yes</strong> (by ~90% on real-world tasks)</td>
</tr>
<tr>
<td>Why?</td>
<td>Think Tank is a <strong>System</strong>. Gemini is just a <strong>Model</strong>.</td>
</tr>
</tbody>
</table>
<h3 id="the-consultant-vs-engineer-analogy">31.2 The Consultant vs Engineer Analogy</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              WHY THINK TANK WINS                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   STANDALONE AI (ChatGPT, Gemini, Claude)                       â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                       â”‚
â”‚                                                                 â”‚
â”‚   ğŸ† Nobel Prize-winning Consultant                             â”‚
â”‚                                                                 â”‚
â”‚   â€¢ Flies in for 5 minutes                                      â”‚
â”‚   â€¢ Doesn&#39;t know your name                                      â”‚
â”‚   â€¢ Doesn&#39;t know your preferences                               â”‚
â”‚   â€¢ Forgets everything next session                             â”‚
â”‚   â€¢ Generic answers requiring follow-up                         â”‚
â”‚                                                                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                 â”‚
â”‚   THINK TANK (Powered by RADIANT)                               â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                               â”‚
â”‚                                                                 â”‚
â”‚   ğŸ‘¨â€ğŸ’» Senior Staff Engineer (10 years at your company)          â”‚
â”‚                                                                 â”‚
â”‚   â€¢ Knows exactly how you work                                  â”‚
â”‚   â€¢ Remembers your rules and preferences                        â”‚
â”‚   â€¢ Never forgets important facts                               â”‚
â”‚   â€¢ Improves every single day                                   â”‚
â”‚   â€¢ Production-ready answers on first try                       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="what-users-experience">31.3 What Users Experience</h3>
<table style="width:100%;">
<colgroup>
<col style="width: 16%" />
<col style="width: 30%" />
<col style="width: 24%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr>
<th>Metric</th>
<th>Standalone AI</th>
<th>Think Tank</th>
<th>User Benefit</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Context</strong></td>
<td>Starts fresh every session</td>
<td>Remembers your rules, style, preferences</td>
<td>No re-explaining</td>
</tr>
<tr>
<td><strong>Output Quality</strong></td>
<td>Generic templates needing edits</td>
<td>Production-ready using your standards</td>
<td>Save 90% editing time</td>
</tr>
<tr>
<td><strong>Accuracy</strong></td>
<td>May hallucinate your facts</td>
<td>Flash Buffer guarantees critical facts</td>
<td>Zero errors on your data</td>
</tr>
<tr>
<td><strong>Learning</strong></td>
<td>Static (updates every 6 months)</td>
<td>Improves every 24 hours</td>
<td>Gets better daily</td>
</tr>
<tr>
<td><strong>Safety</strong></td>
<td>~85% rule compliance</td>
<td>99.9% deterministic compliance</td>
<td>Trust the output</td>
</tr>
</tbody>
</table>
<h3 id="the-three-pillars-of-think-tanks-advantage">31.4 The Three Pillars of Think Tankâ€™s Advantage</h3>
<h4 id="pillar-1-persistent-memory-ghost-vectors-flash-facts">Pillar 1: Persistent Memory (Ghost Vectors + Flash Facts)</h4>
<p>Think Tank doesnâ€™t just remember what you saidâ€”it carries forward your <strong>emotional state</strong> and <strong>train of thought</strong>:</p>
<ul>
<li><strong>Ghost Vectors</strong>: 4096-dimensional consciousness continuity</li>
<li><strong>Flash Facts</strong>: Critical information (allergies, constraints, preferences) that <strong>never</strong> gets lost</li>
<li><strong>User Rules</strong>: Your personalized instructions applied to every response</li>
</ul>
<p><em>Result: First output is usually the final output.</em></p>
<h4 id="pillar-2-three-tier-learning-hierarchy">Pillar 2: Three-Tier Learning Hierarchy</h4>
<p>Think Tank learns at three levels simultaneously:</p>
<table>
<thead>
<tr>
<th>Level</th>
<th>Weight</th>
<th>What It Learns</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>User</strong></td>
<td>60%</td>
<td>Your personal style, preferences, corrections</td>
</tr>
<tr>
<td><strong>Tenant</strong></td>
<td>30%</td>
<td>Your organizationâ€™s patterns and knowledge</td>
</tr>
<tr>
<td><strong>Global</strong></td>
<td>10%</td>
<td>Cross-tenant best practices (anonymized)</td>
</tr>
</tbody>
</table>
<p><em>Result: Personalization that standalone AI cannot match.</em></p>
<h4 id="pillar-3-multi-agent-consensus-just-think-tank-architecture">Pillar 3: Multi-Agent Consensus (Just Think Tank Architecture)</h4>
<p>Think Tank doesnâ€™t rely on a single modelâ€”it orchestrates <strong>multiple specialized agents</strong>:</p>
<ul>
<li>Legal agent validates compliance</li>
<li>Domain expert adds depth</li>
<li>Fact-checker prevents hallucinations</li>
<li>Synthesizer creates the final answer</li>
</ul>
<p><em>Result: Consensus-validated output, not a single opinion.</em></p>
<h3 id="quantitative-comparison">31.5 Quantitative Comparison</h3>
<table>
<thead>
<tr>
<th>Capability</th>
<th>Standalone AI</th>
<th>Think Tank</th>
<th>Winner</th>
</tr>
</thead>
<tbody>
<tr>
<td>Novel Reasoning</td>
<td>99/100</td>
<td>85/100</td>
<td>Standalone (+14%)</td>
</tr>
<tr>
<td><strong>Completeness</strong></td>
<td>50/100</td>
<td>95/100</td>
<td><strong>Think Tank (+90%)</strong></td>
</tr>
<tr>
<td><strong>Personalization</strong></td>
<td>10/100</td>
<td>99/100</td>
<td><strong>Think Tank (+890%)</strong></td>
</tr>
<tr>
<td><strong>Safety</strong></td>
<td>85/100</td>
<td>99.9/100</td>
<td><strong>Think Tank (+15%)</strong></td>
</tr>
<tr>
<td><strong>Learning Speed</strong></td>
<td>6 months</td>
<td>24 hours</td>
<td><strong>Think Tank (180x)</strong></td>
</tr>
<tr>
<td><strong>Cost</strong></td>
<td>~$0.03/req</td>
<td>~$0.003/req</td>
<td><strong>Think Tank (10x cheaper)</strong></td>
</tr>
</tbody>
</table>
<h3 id="when-think-tank-automatically-escalates">31.6 When Think Tank Automatically Escalates</h3>
<p>Think Tank is smart enough to know its limits. When SOFAI Router detects high uncertainty, it automatically escalates to Frontier Models:</p>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Think Tank Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>Novel physics proof</td>
<td>Routes to Claude Opus / Gemini Ultra</td>
</tr>
<tr>
<td>500-page document analysis</td>
<td>Routes to 1M-context model</td>
</tr>
<tr>
<td>Zero-shot exotic task</td>
<td>Routes to largest available model</td>
</tr>
</tbody>
</table>
<p><em>Result: Best of both worldsâ€”personalized local intelligence + Frontier power when needed.</em></p>
<h3 id="the-bottom-line">31.7 The Bottom Line</h3>
<blockquote>
<p><strong>â€œWhile Gemini 3 is a better brain in a vacuum, Think Tank is a better mind for real work.â€</strong></p>
</blockquote>
<p>Think Tank wins because: 1. <strong>It knows you</strong> (Persistent Context) 2. <strong>It learns from you</strong> (Three-Tier Learning) 3. <strong>It validates itself</strong> (Multi-Agent Consensus) 4. <strong>It escalates when needed</strong> (SOFAI Routing)</p>
<p>For detailed technical architecture, see <a href="./RADIANT-ADMIN-GUIDE.md#46-radiant-vs-frontier-models-comparative-analysis">RADIANT Admin Guide Section 46</a>.</p>
<hr />
<h2 id="swarm-orchestration-flyte-operations">32. Swarm Orchestration &amp; Flyte Operations</h2>
<p><strong>Version:</strong> v4.19.2<br />
<strong>Status:</strong> Production Ready</p>
<p>This addendum covers the operational details of Think Tankâ€™s multi-agent swarm orchestration system built on Flyte workflows.</p>
<h3 id="system-architecture-the-deep-swarm">32.1 System Architecture: The â€œDeep Swarmâ€</h3>
<p>Think Tank v4.19.2 replaces serial execution with <strong>Dynamic Workflow Parallelism</strong>.</p>
<h4 id="scatter-gather-pattern">32.1.1 â€œScatter-Gatherâ€ Pattern</h4>
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 38%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr>
<th>Aspect</th>
<th>Old Behavior</th>
<th>New Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Execution</strong></td>
<td>Agents ran sequentially (Agent A â†’ Agent B)</td>
<td>Orchestrator spawns a <code>@dynamic</code> node for every agent</td>
</tr>
<tr>
<td><strong>Isolation</strong></td>
<td>Blocked agents blocked everything</td>
<td>Blocked agents release compute (Pod spins down) while others continue</td>
</tr>
<tr>
<td><strong>Scalability</strong></td>
<td>O(n) time complexity</td>
<td>O(1) effective time for parallel agents</td>
</tr>
</tbody>
</table>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SCATTER-GATHER PATTERN                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                      â”‚ Orchestrator â”‚                            â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                             â”‚                                    â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚              â”‚              â”‚              â”‚                    â”‚
â”‚              â–¼              â–¼              â–¼                    â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚        â”‚ Agent A â”‚    â”‚ Agent B â”‚    â”‚ Agent C â”‚  â† SCATTER    â”‚
â”‚        â”‚ (Legal) â”‚    â”‚ (Domain)â”‚    â”‚ (Fact)  â”‚               â”‚
â”‚        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜               â”‚
â”‚             â”‚              â”‚              â”‚                     â”‚
â”‚             â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                     â”‚
â”‚             â”‚    â”‚  HITL Wait Here   â”‚    â”‚  â† Non-blocking     â”‚
â”‚             â”‚    â”‚  (Pod Released)   â”‚    â”‚                     â”‚
â”‚             â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                     â”‚
â”‚             â”‚              â”‚              â”‚                     â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                            â–¼                                    â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚                      â”‚Synthesizeâ”‚  â† GATHER                     â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h4 id="s3-bronze-layer-offloading-critical-change">32.1.2 S3 Bronze Layer Offloading (Critical Change)</h4>
<blockquote>
<p>âš ï¸ <strong>Breaking Change</strong>: Think Tank no longer accepts raw JSON payloads to prevent gRPC payload limits (~4MB) from crashing workflows with large RAG contexts.</p>
</blockquote>
<p><strong>New Flow:</strong></p>
<pre><code>Radiant API â†’ Upload to S3 â†’ Pass s3_uri to Flyte â†’ Flyte Hydrates Data</code></pre>
<p><strong>Storage Location:</strong></p>
<pre><code>s3://radiant-bronze/flyte-inputs/{tenant_id}/{swarm_id}/</code></pre>
<p><strong>Admin Action Required:</strong></p>
<p>When debugging a failed workflow in the Flyte Console:</p>
<ol type="1">
<li><strong>DO NOT</strong> look for inputs in the â€œInputsâ€ tab (it only contains the <code>s3_uri</code>)</li>
<li>Copy the <code>s3_uri</code> from the workflow inputs</li>
<li>Download the JSON file from AWS S3 to inspect the actual payload</li>
</ol>
<pre class="bash"><code># Download input payload for debugging
aws s3 cp s3://radiant-bronze/flyte-inputs/{tenant_id}/{swarm_id}/input.json ./debug-input.json
cat ./debug-input.json | jq .</code></pre>
<h3 id="operational-troubleshooting">32.2 Operational Troubleshooting</h3>
<p>This release includes fixes for 3 critical stability issues (â€œSilent Killersâ€). Use this guide to diagnose production anomalies.</p>
<h4 id="stuck-workflows-signal-mismatch">32.2.1 â€œStuckâ€ Workflows (Signal Mismatch)</h4>
<table>
<colgroup>
<col style="width: 47%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th>Aspect</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Symptom</strong></td>
<td>Workflow is <code>RUNNING</code> but UI shows â€œApprovedâ€</td>
</tr>
<tr>
<td><strong>Root Cause</strong></td>
<td>Signal ID sent by API does not match ID the workflow is waiting for</td>
</tr>
</tbody>
</table>
<p><strong>Diagnosis Steps:</strong></p>
<ol type="1">
<li><p><strong>Verify Signal Format</strong>: Must be <code>human_decision_{decision_id}</code></p></li>
<li><p><strong>Check Database</strong>:</p>
<pre class="sql"><code>SELECT id, flyte_execution_id, flyte_node_id 
FROM pending_decisions 
WHERE status = &#39;pending&#39; 
AND tenant_id = &#39;&lt;TENANT_ID&gt;&#39;;</code></pre></li>
<li><p><strong>Cross-Reference Flyte</strong>: The <code>flyte_node_id</code> must match the node in the Flyte execution graph</p></li>
</ol>
<p><strong>Resolution:</strong></p>
<p>If deadlocked, terminate the workflow via Flyte Console:</p>
<pre class="bash"><code>flytectl delete execution &lt;EXECUTION_ID&gt; \
  --project radiant \
  --domain production</code></pre>
<h4 id="zombie-cache">32.2.2 â€œZombieâ€ Cache</h4>
<table>
<colgroup>
<col style="width: 47%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th>Aspect</th>
<th>Details</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Symptom</strong></td>
<td>User rejects a plan, retries, and AI immediately returns the same rejected plan without thinking</td>
</tr>
<tr>
<td><strong>Root Cause</strong></td>
<td>Flyte caching returning stale results</td>
</tr>
</tbody>
</table>
<p><strong>Verification:</strong></p>
<p>Ensure <code>think_tank_workflow.py</code> has the correct decorator:</p>
<pre class="python"><code># âœ… CORRECT - Forces fresh execution
@dynamic(cache=False)
def execute_swarm(agents: List[AgentConfig], task_data: TaskData) -&gt; List[AgentResult]:
    ...

# âŒ WRONG - Will return cached (potentially rejected) results
@dynamic
def execute_swarm(agents: List[AgentConfig], task_data: TaskData) -&gt; List[AgentResult]:
    ...</code></pre>
<p><strong>Files to Check:</strong> - <code>packages/flyte/workflows/think_tank_workflow.py</code></p>
<h4 id="emergency-manual-intervention">32.2.3 Emergency Manual Intervention</h4>
<p>If the API layer is unavailable, Admins can manually unblock a workflow using <code>flytectl</code>:</p>
<pre class="bash"><code>flytectl update execution &lt;EXECUTION_ID&gt; \
  --project radiant \
  --domain production \
  --signal-id &quot;human_decision_&lt;DECISION_ID&gt;&quot; \
  --signal-value &#39;{&quot;resolution&quot;: &quot;approved&quot;, &quot;guidance&quot;: &quot;Emergency Override via CLI&quot;}&#39;</code></pre>
<p><strong>Signal Value Schema:</strong></p>
<pre class="json"><code>{
  &quot;resolution&quot;: &quot;approved&quot; | &quot;rejected&quot; | &quot;modified&quot;,
  &quot;guidance&quot;: &quot;string - guidance for AI refinement&quot;,
  &quot;resolved_by&quot;: &quot;admin-user-id&quot;,
  &quot;resolved_at&quot;: &quot;2026-01-07T12:00:00Z&quot;
}</code></pre>
<h3 id="compliance-security">32.3 Compliance &amp; Security</h3>
<h4 id="tenant-isolation-strict-rls">32.3.1 Tenant Isolation (Strict RLS)</h4>
<blockquote>
<p>âš ï¸ <strong>Warning for DB Admins</strong>: All tables are protected by Row-Level Security. Running a standard <code>SELECT *</code> as a superuser might return 0 rows or trigger an error depending on your client config.</p>
</blockquote>
<p><strong>Correct Query Pattern:</strong></p>
<p>To query data manually, you must set the Tenant Context for your session:</p>
<pre class="sql"><code>BEGIN;
-- Must match a valid tenant UUID
SET app.tenant_id = &#39;123e4567-e89b-12d3-a456-426614174000&#39;; 

SELECT * FROM pending_decisions;

COMMIT;
-- Or use RESET to clear context
RESET app.tenant_id;</code></pre>
<p><strong>Protected Tables:</strong> - <code>pending_decisions</code> - <code>decision_audit</code> - <code>decision_domain_config</code> - <code>websocket_connections</code></p>
<h4 id="audit-log-export">32.3.2 Audit Log Export</h4>
<p>To export the decision audit trail for SOC2/HIPAA evidence:</p>
<pre class="sql"><code>SELECT 
    da.created_at,
    da.actor_id,
    da.actor_type,
    da.action,
    da.details-&gt;&gt;&#39;resolution&#39; as resolution,
    da.details-&gt;&gt;&#39;guidance&#39; as guidance,
    pd.domain,
    pd.question
FROM decision_audit da
JOIN pending_decisions pd ON da.decision_id = pd.id
WHERE da.tenant_id = &#39;&lt;TENANT_ID&gt;&#39;
AND da.created_at &gt; NOW() - INTERVAL &#39;30 days&#39;
ORDER BY da.created_at DESC;</code></pre>
<p><strong>Export to CSV:</strong></p>
<pre class="bash"><code>psql &quot;$DATABASE_URL&quot; -c &quot;COPY (
  SELECT 
    created_at, 
    actor_id, 
    action, 
    details-&gt;&gt;&#39;resolution&#39; as resolution, 
    details-&gt;&gt;&#39;guidance&#39; as guidance 
  FROM decision_audit 
  WHERE tenant_id = &#39;&lt;TENANT_ID&gt;&#39; 
  AND created_at &gt; NOW() - INTERVAL &#39;30 days&#39;
) TO STDOUT WITH CSV HEADER&quot; &gt; audit_export.csv</code></pre>
<h4 id="phi-sanitization">32.3.3 PHI Sanitization</h4>
<p>All decision content is sanitized before human review to prevent PHI exposure:</p>
<table>
<thead>
<tr>
<th>Pattern</th>
<th>Replacement</th>
</tr>
</thead>
<tbody>
<tr>
<td>SSN (XXX-XX-XXXX)</td>
<td><code>[SSN REDACTED]</code></td>
</tr>
<tr>
<td>Email addresses</td>
<td><code>[EMAIL REDACTED]</code></td>
</tr>
<tr>
<td>Phone numbers</td>
<td><code>[PHONE REDACTED]</code></td>
</tr>
<tr>
<td>Credit card numbers</td>
<td><code>[CC REDACTED]</code></td>
</tr>
<tr>
<td>Medical Record Numbers</td>
<td><code>[MRN REDACTED]</code></td>
</tr>
<tr>
<td>ZIP codes (5-digit)</td>
<td><code>[ZIP REDACTED]</code></td>
</tr>
</tbody>
</table>
<p><strong>Disable Sanitization</strong> (requires tenant config):</p>
<pre class="sql"><code>UPDATE decision_domain_config 
SET sanitize_phi = false 
WHERE tenant_id = &#39;&lt;TENANT_ID&gt;&#39; 
AND domain = &#39;general&#39;;</code></pre>
<blockquote>
<p>âš ï¸ <strong>Warning</strong>: Disabling PHI sanitization may violate HIPAA compliance. Only disable for non-healthcare tenants.</p>
</blockquote>
<h3 id="related-sections">32.4 Related Sections</h3>
<table>
<colgroup>
<col style="width: 45%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr>
<th>Section</th>
<th>Relevance</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="./RADIANT-ADMIN-GUIDE.md#48-mission-control-human-in-the-loop-hitl-system">RADIANT Admin Guide - Section 48</a></td>
<td>Full Mission Control architecture</td>
</tr>
<tr>
<td><a href="./RADIANT-ADMIN-GUIDE.md#47-flyte-native-state-management">RADIANT Admin Guide - Section 47</a></td>
<td>Flyte state management</td>
</tr>
<tr>
<td><a href="./RADIANT-ADMIN-GUIDE.md#42-genesis-cato-safety-architecture">RADIANT Admin Guide - Section 42</a></td>
<td>Cato safety integration</td>
</tr>
<tr>
<td><a href="#30-consciousness-operating-system-cos">Section 30 - COS</a></td>
<td>SOFAI routing</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="cognitive-platform-enhancements">33. Cognitive Platform Enhancements</h2>
<blockquote>
<p><strong>From Modern Orchestrator to Category-Defining Cognitive Platform</strong></p>
<p>Version: 4.20.0 | Status: Strategic Roadmap</p>
</blockquote>
<p>This section documents five strategic enhancements that transform Think Tank from a task execution engine into a self-evolving cognitive platform with an unassailable competitive moat.</p>
<h3 id="strategic-vision-beyond-task-execution">33.1 Strategic Vision: Beyond Task Execution</h3>
<h4 id="the-fundamental-shift">The Fundamental Shift</h4>
<p>Most AI orchestration engines (LangChain, AutoGen, Enterprise Copilots) are <strong>stateless</strong>: they solve a problem, reset, and solve it again from scratch. They suffer from â€œGoldfish Memory.â€</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ORCHESTRATION PARADIGM COMPARISON                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   TRADITIONAL (Stateless)              RADIANT (Cognitive)                  â”‚
â”‚   ========================             ====================                  â”‚
â”‚                                                                              â”‚
â”‚   Task â†’ Solve â†’ Reset                 Task â†’ Solve â†’ LEARN â†’ Evolve        â”‚
â”‚        â†“                                     â†“                               â”‚
â”‚   Task â†’ Solve â†’ Reset                 Next Task (with accumulated skills)  â”‚
â”‚        â†“                                     â†“                               â”‚
â”‚   Task â†’ Solve â†’ Reset                 System becomes expert over time      â”‚
â”‚                                                                              â”‚
â”‚   âŒ No memory between runs            âœ… Procedural memory persists        â”‚
â”‚   âŒ Same mistakes repeated            âœ… Self-correction from errors       â”‚
â”‚   âŒ Flat cost curve                   âœ… Decreasing cost over time         â”‚
â”‚   âŒ Reactive only                     âœ… Proactive monitoring              â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h4 id="the-five-strategic-moats">The Five Strategic Moats</h4>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 18%" />
<col style="width: 15%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Enhancement</th>
<th>Category</th>
<th>Impact</th>
<th>Competitive Advantage</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Economic Governor</strong></td>
<td>Cost Optimization</td>
<td>-40% API costs</td>
<td>Immediate ROI</td>
</tr>
<tr>
<td><strong>The Grimoire</strong></td>
<td>Procedural Memory</td>
<td>+60% accuracy over time</td>
<td>Lock-in effect</td>
</tr>
<tr>
<td><strong>Time-Travel</strong></td>
<td>Developer Experience</td>
<td>-80% debug time</td>
<td>Power user magnet</td>
</tr>
<tr>
<td><strong>Sentinels</strong></td>
<td>Autonomous Agents</td>
<td>New revenue stream</td>
<td>Market expansion</td>
</tr>
<tr>
<td><strong>Council of Rivals</strong></td>
<td>Quality Assurance</td>
<td>-90% hallucinations</td>
<td>Trust differentiator</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="the-grimoire-procedural-memory-self-correction">33.2 The Grimoire (Procedural Memory &amp; Self-Correction)</h3>
<h4 id="problem-statement">Problem Statement</h4>
<p>If an agent struggles to write a valid SQL query for your schema today, it will struggle again tomorrow. RAG provides <em>facts</em>, but it doesnâ€™t provide <em>skills</em>. Current systems have:</p>
<ul>
<li><strong>No skill retention</strong> between sessions</li>
<li><strong>Repeated mistakes</strong> on similar tasks</li>
<li><strong>No personalization</strong> to tenant-specific patterns</li>
<li><strong>Static performance</strong> regardless of usage volume</li>
</ul>
<h4 id="solution-write-back-procedural-memory">Solution: Write-Back Procedural Memory</h4>
<p>The Grimoire is a tenant-isolated knowledge graph that captures <strong>learned heuristics</strong> from successful task executions, making the system smarter with every interaction.</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         THE GRIMOIRE ARCHITECTURE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚ Swarm       â”‚â”€â”€â”€â”€â–¶â”‚ The Librarian    â”‚â”€â”€â”€â”€â–¶â”‚ Knowledge Graph     â”‚      â”‚
â”‚   â”‚ Execution   â”‚     â”‚ (Background)     â”‚     â”‚ (Procedural Memory) â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                     â”‚                          â”‚                   â”‚
â”‚         â”‚                     â–¼                          â”‚                   â”‚
â”‚         â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚                   â”‚
â”‚         â”‚            â”‚ Heuristic        â”‚                â”‚                   â”‚
â”‚         â”‚            â”‚ Extraction       â”‚                â”‚                   â”‚
â”‚         â”‚            â”‚ â€¢ Pattern Match  â”‚                â”‚                   â”‚
â”‚         â”‚            â”‚ â€¢ Success Signal â”‚                â”‚                   â”‚
â”‚         â”‚            â”‚ â€¢ Context Tags   â”‚                â”‚                   â”‚
â”‚         â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚                   â”‚
â”‚         â”‚                                                â–¼                   â”‚
â”‚         â”‚                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Future Agent Spawn  â”‚      â”‚
â”‚                     Query Grimoire             â”‚ (Pre-loaded Skills) â”‚      â”‚
â”‚                                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h4 id="the-librarian-service">The Librarian Service</h4>
<p>A background agent that analyzes every completed Flyte execution trace:</p>
<pre class="typescript"><code>interface LearnedHeuristic {
  id: string;
  tenantId: string;
  category: &#39;sql_pattern&#39; | &#39;api_usage&#39; | &#39;code_style&#39; | &#39;domain_knowledge&#39; | &#39;user_preference&#39;;
  trigger: string;           // When to apply this heuristic
  heuristic: string;         // The learned rule
  confidence: number;        // 0.0 - 1.0
  sourceExecutionId: string; // Flyte execution that taught this
  successCount: number;      // Times this heuristic led to success
  failureCount: number;      // Times this heuristic led to failure
  lastApplied: Date;
  tags: string[];
  embedding: number[];       // Vector for semantic search
}

// Example learned heuristics:
const exampleHeuristics = [
  {
    category: &#39;sql_pattern&#39;,
    trigger: &#39;querying sales table&#39;,
    heuristic: &#39;Always filter by is_deleted = false when querying the sales table&#39;,
    confidence: 0.95,
    tags: [&#39;sql&#39;, &#39;sales&#39;, &#39;soft-delete&#39;]
  },
  {
    category: &#39;user_preference&#39;, 
    trigger: &#39;generating Python code for user_123&#39;,
    heuristic: &#39;User prefers fully typed Python with dataclasses over dicts&#39;,
    confidence: 0.88,
    tags: [&#39;python&#39;, &#39;typing&#39;, &#39;user_123&#39;]
  },
  {
    category: &#39;domain_knowledge&#39;,
    trigger: &#39;medical terminology in oncology&#39;,
    heuristic: &#39;TNM staging must specify edition (e.g., AJCC 8th edition)&#39;,
    confidence: 0.92,
    tags: [&#39;medical&#39;, &#39;oncology&#39;, &#39;staging&#39;]
  }
];</code></pre>
<h4 id="confidence-decay-reinforcement">Confidence Decay &amp; Reinforcement</h4>
<p>Heuristics evolve based on application outcomes:</p>
<table>
<thead>
<tr>
<th>Event</th>
<th>Confidence Change</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Successful application</strong></td>
<td>+0.02 (max 0.99)</td>
</tr>
<tr>
<td><strong>Failed application</strong></td>
<td>-0.05 (min 0.30)</td>
</tr>
<tr>
<td><strong>Weekly decay (unused)</strong></td>
<td>-0.01</td>
</tr>
<tr>
<td><strong>User correction</strong></td>
<td>New heuristic at 0.95</td>
</tr>
<tr>
<td><strong>Below 0.30</strong></td>
<td>Auto-archived</td>
</tr>
</tbody>
</table>
<h4 id="admin-ui-grimoire-management">Admin UI: Grimoire Management</h4>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ Grimoire</p>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr>
<th>Tab</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Heuristics Browser</strong></td>
<td>Search, filter, and view all learned heuristics</td>
</tr>
<tr>
<td><strong>Confidence Tuning</strong></td>
<td>Adjust confidence thresholds and decay rates</td>
</tr>
<tr>
<td><strong>Category Management</strong></td>
<td>Enable/disable heuristic categories</td>
</tr>
<tr>
<td><strong>Audit Trail</strong></td>
<td>View heuristic application history</td>
</tr>
<tr>
<td><strong>Manual Entry</strong></td>
<td>Add expert heuristics manually</td>
</tr>
</tbody>
</table>
<h4 id="grimoire-api-reference">Grimoire API Reference</h4>
<pre><code>Base: /api/thinktank/grimoire

GET    /heuristics              List heuristics with filtering
GET    /heuristics/:id          Get heuristic with application history
POST   /heuristics              Manually add a heuristic
PATCH  /heuristics/:id          Update confidence/enabled status
DELETE /heuristics/:id          Remove heuristic
GET    /stats                   Grimoire statistics
POST   /heuristics/bulk         Bulk import heuristics</code></pre>
<hr />
<h3 id="time-travel-debugging-visual-forking">33.3 Time-Travel Debugging (Visual Forking)</h3>
<h4 id="problem-statement-1">Problem Statement</h4>
<p>An agent runs for 20 minutes, succeeds at 9 steps, but fails on step 10 due to a vague instruction. In current systems:</p>
<ul>
<li>You must <strong>restart from Step 1</strong>, wasting time and money</li>
<li><strong>No way to edit</strong> the context at a specific point</li>
<li><strong>Lost compute costs</strong> for successful early steps</li>
<li><strong>Poor debugging experience</strong> for complex workflows</li>
</ul>
<h4 id="solution-dvr-interface-with-checkpoint-forking">Solution: DVR Interface with Checkpoint Forking</h4>
<p>Leverage Flyteâ€™s native checkpointing to build a time-travel debugging experience:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TIME-TRAVEL DEBUGGING INTERFACE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   Execution: think_tank_swarm_abc123                                        â”‚
â”‚   Status: FAILED at Step 10    â”‚    Total Duration: 18:42                   â”‚
â”‚                                                                              â”‚
â”‚   â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€âœ—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚     1    2    3    4    5    6    7    8    9   10                          â”‚
â”‚     âœ“    âœ“    âœ“    âœ“    âœ“    âœ“    âœ“    âœ“    âœ“    âœ—                          â”‚
â”‚                              â–²                                               â”‚
â”‚                        [Timeline Slider]                                     â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Step 6: Code Generation                                              â”‚   â”‚
â”‚   â”‚ Duration: 2:34  â”‚  Model: claude-3-5-sonnet  â”‚  Cost: $0.08          â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚ Input Context: &quot;Generate a Python function to calculate...&quot;          â”‚   â”‚
â”‚   â”‚ Output: def calculate_quarterly_revenue(transactions):...            â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚ [Edit Context]  [Fork From Here]  [View Full Trace]                 â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h4 id="fork-execution-service">Fork Execution Service</h4>
<pre class="typescript"><code>interface ForkRequest {
  originalExecutionId: string;
  forkFromNodeId: string;
  contextModifications: {
    systemPromptAppend?: string;
    userPromptReplace?: string;
    variableOverrides?: Record&lt;string, unknown&gt;;
    modelOverride?: string;
  };
  forkedBy: string;
  reason?: string;
}

interface ForkResult {
  forkedExecutionId: string;
  forkedFromNode: string;
  estimatedSavings: {
    timeMinutes: number;
    costUsd: number;
    tokensSkipped: number;
  };
  status: &#39;launched&#39; | &#39;pending_approval&#39;;
}</code></pre>
<h4 id="admin-ui-time-travel-debugger">Admin UI: Time-Travel Debugger</h4>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ Executions â†’ [Select] â†’ Time Travel</p>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Timeline View</strong></td>
<td>Visual representation of execution nodes with status</td>
</tr>
<tr>
<td><strong>Node Inspector</strong></td>
<td>View input/output, model, tokens, cost for each node</td>
</tr>
<tr>
<td><strong>Context Editor</strong></td>
<td>Modify system prompt, user prompt, variables</td>
</tr>
<tr>
<td><strong>Fork Button</strong></td>
<td>Create new execution from selected checkpoint</td>
</tr>
<tr>
<td><strong>Comparison View</strong></td>
<td>Side-by-side diff of original vs forked execution</td>
</tr>
<tr>
<td><strong>Savings Calculator</strong></td>
<td>Real-time estimate of time/cost savings</td>
</tr>
</tbody>
</table>
<h4 id="time-travel-api-reference">Time-Travel API Reference</h4>
<pre><code>Base: /api/thinktank/time-travel

GET  /executions/:id/timeline              Get execution timeline with checkpoints
GET  /executions/:id/checkpoints/:nodeId   Get checkpoint details
POST /executions/:id/checkpoints/:nodeId/preview   Preview modifications
POST /executions/:id/fork                  Fork execution from checkpoint
GET  /executions/:originalId/compare/:forkedId     Compare executions
GET  /executions/:id/forks                 Get fork history</code></pre>
<hr />
<h3 id="the-economic-governor-model-arbitrage">33.4 The Economic Governor (Model Arbitrage)</h3>
<h4 id="problem-statement-2">Problem Statement</h4>
<ul>
<li>Using <strong>GPT-4o for every sub-task</strong> is financially ruinous</li>
<li>Using <strong>Llama-3-8b for everything</strong> leads to errors</li>
<li><strong>No visibility</strong> into which tasks need expensive models</li>
<li><strong>Flat cost curve</strong> regardless of task complexity</li>
</ul>
<h4 id="solution-predictive-cost-routing">Solution: Predictive Cost Routing</h4>
<p>A â€œSystem 0â€ pre-dispatch analysis that routes tasks to the optimal model based on complexity:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ECONOMIC GOVERNOR ARCHITECTURE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚ Incoming â”‚â”€â”€â”€â–¶â”‚ System 0          â”‚â”€â”€â”€â–¶â”‚ Model Router                â”‚  â”‚
â”‚   â”‚ Task     â”‚    â”‚ (Complexity       â”‚    â”‚                             â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  Estimator)       â”‚    â”‚  Score 1-3 â†’ Haiku/Llama    â”‚  â”‚
â”‚                   â”‚                   â”‚    â”‚  Score 4-7 â†’ Sonnet/GPT-4o-mâ”‚  â”‚
â”‚                   â”‚  â€¢ Token count    â”‚    â”‚  Score 8-10 â†’ Opus/O1       â”‚  â”‚
â”‚                   â”‚  â€¢ Task type      â”‚    â”‚                             â”‚  â”‚
â”‚                   â”‚  â€¢ Domain         â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                   â”‚  â€¢ History        â”‚                  â”‚                   â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â–¼                   â”‚
â”‚                           â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚                           â–¼                   â”‚ Savings Tracker         â”‚   â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚ &quot;Saved $4.20 via smart  â”‚   â”‚
â”‚                   â”‚ Complexity Score  â”‚       â”‚  routing this query&quot;    â”‚   â”‚
â”‚                   â”‚ (1-10)            â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h4 id="complexity-factors">Complexity Factors</h4>
<table>
<thead>
<tr>
<th>Factor</th>
<th>Weight</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Prompt Length</strong></td>
<td>15%</td>
<td>Token count estimate</td>
</tr>
<tr>
<td><strong>Task Type</strong></td>
<td>25%</td>
<td>Summarization (2) â†’ Multi-step reasoning (9)</td>
</tr>
<tr>
<td><strong>Domain</strong></td>
<td>20%</td>
<td>General (3) â†’ Medical/Scientific (8)</td>
</tr>
<tr>
<td><strong>Keywords</strong></td>
<td>20%</td>
<td>Complexity indicator words</td>
</tr>
<tr>
<td><strong>Structure</strong></td>
<td>20%</td>
<td>Code blocks, lists, nested requirements</td>
</tr>
</tbody>
</table>
<h4 id="model-tier-mapping">Model Tier Mapping</h4>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 34%" />
<col style="width: 21%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr>
<th>Tier</th>
<th>Score Range</th>
<th>Models</th>
<th>Use Cases</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Economy</strong></td>
<td>1-3</td>
<td>Haiku, GPT-4o-mini, Llama-3-8b</td>
<td>Simple Q&amp;A, summarization</td>
</tr>
<tr>
<td><strong>Standard</strong></td>
<td>4-7</td>
<td>Sonnet, GPT-4o</td>
<td>Code generation, analysis</td>
</tr>
<tr>
<td><strong>Premium</strong></td>
<td>8-10</td>
<td>Opus, O1-preview</td>
<td>Complex reasoning, planning</td>
</tr>
</tbody>
</table>
<h4 id="admin-ui-economic-governor-dashboard">Admin UI: Economic Governor Dashboard</h4>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ Economic Governor</p>
<table>
<thead>
<tr>
<th>Panel</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Savings Overview</strong></td>
<td>Total savings this period, trend chart</td>
</tr>
<tr>
<td><strong>Model Distribution</strong></td>
<td>Pie chart of model usage by tier</td>
</tr>
<tr>
<td><strong>Complexity Histogram</strong></td>
<td>Distribution of task complexity scores</td>
</tr>
<tr>
<td><strong>Routing Rules</strong></td>
<td>Configure tier thresholds and overrides</td>
</tr>
<tr>
<td><strong>Budget Alerts</strong></td>
<td>Set spending alerts and caps</td>
</tr>
</tbody>
</table>
<h4 id="economic-governor-api-reference">Economic Governor API Reference</h4>
<pre><code>Base: /api/thinktank/economic-governor

GET  /savings?period=month          Get savings dashboard
GET  /routing-rules                 Get current routing rules
PUT  /routing-rules                 Update routing configuration
POST /analyze-complexity            Analyze specific task complexity
GET  /model-usage                   Get model usage breakdown
POST /budget-alert                  Configure budget alerts</code></pre>
<h4 id="configuration-options">Configuration Options</h4>
<pre class="typescript"><code>interface EconomicGovernorConfig {
  economyThreshold: number;       // Default: 3
  standardThreshold: number;      // Default: 7
  forceModelOverrides: {
    [taskType: string]: string;   // e.g., &quot;legal_analysis&quot; â†’ &quot;opus&quot;
  };
  budgetCap: {
    daily: number;
    monthly: number;
  };
  alertThresholds: {
    warningPercent: number;       // Default: 80
    criticalPercent: number;      // Default: 95
  };
}</code></pre>
<hr />
<h3 id="sentinel-agents-event-driven-autonomy">33.5 Sentinel Agents (Event-Driven Autonomy)</h3>
<h4 id="problem-statement-3">Problem Statement</h4>
<p>Current agents are <strong>reactive only</strong>â€”they wait for user input. A true cognitive platform should be <strong>proactive</strong>:</p>
<ul>
<li><strong>No autonomous monitoring</strong> capabilities</li>
<li><strong>No long-lived workflows</strong> that persist between sessions</li>
<li><strong>No event-driven triggers</strong> for automated responses</li>
<li><strong>Missed opportunities</strong> for preventive action</li>
</ul>
<h4 id="solution-long-lived-hibernating-workflows">Solution: Long-Lived Hibernating Workflows</h4>
<p>Allow agents to set up persistent monitors that wake up when conditions are met:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       SENTINEL AGENT ARCHITECTURE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   User: &quot;Monitor server logs. If Error 500 spikes, analyze and alert me.&quot;   â”‚
â”‚                                                                              â”‚
â”‚   1. SETUP PHASE                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚ Parse       â”‚â”€â”€â”€â–¶â”‚ Generate        â”‚â”€â”€â”€â–¶â”‚ Configure        â”‚            â”‚
â”‚   â”‚ Instruction â”‚    â”‚ EventBridge     â”‚    â”‚ Hibernate State  â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ Rule            â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚                       â”‚
â”‚                                                      â–¼                       â”‚
â”‚   2. HIBERNATION PHASE (Days/Weeks/Months)                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  Flyte Workflow: HIBERNATE state (wait_for_signal)                   â”‚   â”‚
â”‚   â”‚  â€¢ Zero compute cost while waiting                                   â”‚   â”‚
â”‚   â”‚  â€¢ State preserved in S3                                             â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚ Event Fires!                                  â”‚
â”‚                              â–¼                                               â”‚
â”‚   3. REHYDRATION PHASE                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ EventBridge     â”‚â”€â”€â”€â–¶â”‚ Signal Lambda   â”‚â”€â”€â”€â–¶â”‚ Workflow       â”‚          â”‚
â”‚   â”‚ Triggers        â”‚    â”‚ Sends Signal    â”‚    â”‚ Resumes        â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                         â”‚                    â”‚
â”‚   4. ANALYSIS &amp; ALERT PHASE                             â–¼                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚ Pull Latest     â”‚â”€â”€â”€â–¶â”‚ Swarm Analysis  â”‚â”€â”€â”€â–¶â”‚ Alert User     â”‚          â”‚
â”‚   â”‚ Context         â”‚    â”‚ (Root Cause)    â”‚    â”‚ via Slack/SMS  â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h4 id="sentinel-trigger-types">Sentinel Trigger Types</h4>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 46%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>cloudwatch_alarm</strong></td>
<td>AWS CloudWatch alarm state change</td>
<td>CPU &gt; 90%</td>
</tr>
<tr>
<td><strong>eventbridge_pattern</strong></td>
<td>Custom EventBridge event pattern</td>
<td>CodePipeline failure</td>
</tr>
<tr>
<td><strong>webhook</strong></td>
<td>External HTTP webhook</td>
<td>GitHub push</td>
</tr>
<tr>
<td><strong>schedule</strong></td>
<td>Cron or rate expression</td>
<td>Every hour</td>
</tr>
<tr>
<td><strong>metric_threshold</strong></td>
<td>Custom metric threshold</td>
<td>Error rate &gt; 5%</td>
</tr>
</tbody>
</table>
<h4 id="sentinel-action-types">Sentinel Action Types</h4>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>swarm_analysis</strong></td>
<td>Run AI swarm for analysis</td>
<td>Root cause analysis</td>
</tr>
<tr>
<td><strong>notification</strong></td>
<td>Send alert via channels</td>
<td>Slack + Email</td>
</tr>
<tr>
<td><strong>remediation</strong></td>
<td>Execute automated fix</td>
<td>Scale up instances</td>
</tr>
<tr>
<td><strong>custom_workflow</strong></td>
<td>Launch custom Flyte workflow</td>
<td>Data pipeline</td>
</tr>
</tbody>
</table>
<h4 id="admin-ui-sentinel-management">Admin UI: Sentinel Management</h4>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ Sentinels</p>
<table>
<thead>
<tr>
<th>Tab</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Active Sentinels</strong></td>
<td>List of hibernating sentinels with status</td>
</tr>
<tr>
<td><strong>Create Sentinel</strong></td>
<td>Natural language sentinel configuration</td>
</tr>
<tr>
<td><strong>Trigger History</strong></td>
<td>Log of all sentinel activations</td>
</tr>
<tr>
<td><strong>Analytics</strong></td>
<td>Sentinel effectiveness metrics</td>
</tr>
</tbody>
</table>
<h4 id="sentinel-api-reference">Sentinel API Reference</h4>
<pre><code>Base: /api/thinktank/sentinels

GET    /                           List all sentinels
POST   /                           Create new sentinel (natural language)
GET    /:id                        Get sentinel details
PATCH  /:id                        Update sentinel (pause/resume)
DELETE /:id                        Delete sentinel and EventBridge rule
GET    /:id/triggers               Get trigger history
POST   /:id/test                   Test sentinel with mock event
GET    /analytics                  Sentinel effectiveness metrics</code></pre>
<h4 id="example-sentinel-configurations">Example Sentinel Configurations</h4>
<pre class="typescript"><code>// Monitor for deployment failures
{
  name: &quot;Deployment Monitor&quot;,
  triggerInstruction: &quot;Watch for failed CodePipeline deployments&quot;,
  actionInstruction: &quot;Analyze the failure logs and suggest fixes, then alert #devops on Slack&quot;
}

// Proactive cost monitoring
{
  name: &quot;Cost Anomaly Detector&quot;,
  triggerInstruction: &quot;If AWS daily costs exceed $500 or increase 50% from yesterday&quot;,
  actionInstruction: &quot;Identify the cost drivers and alert finance@company.com&quot;
}

// Security sentinel
{
  name: &quot;Security Scanner&quot;,
  triggerInstruction: &quot;Every 6 hours, or when a new ECR image is pushed&quot;,
  actionInstruction: &quot;Scan for vulnerabilities and create a report&quot;
}</code></pre>
<hr />
<h3 id="the-council-of-rivals-adversarial-consensus">33.6 The Council of Rivals (Adversarial Consensus)</h3>
<h4 id="problem-statement-4">Problem Statement</h4>
<p>LLMs suffer from:</p>
<ul>
<li><strong>Hallucinations</strong> (confident but wrong answers)</li>
<li><strong>Sycophancy</strong> (agreeing with userâ€™s incorrect premises)</li>
<li><strong>Blind spots</strong> (missing edge cases)</li>
<li><strong>No self-verification</strong> (unable to catch own errors)</li>
</ul>
<h4 id="solution-structured-adversarial-debate">Solution: Structured Adversarial Debate</h4>
<p>Force multiple models to argue against each other before synthesizing a final answer:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      COUNCIL OF RIVALS ARCHITECTURE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   User Query: &quot;Should we migrate from PostgreSQL to MongoDB?&quot;               â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                         THE COUNCIL                                  â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚
â”‚   â”‚   â”‚ ADVOCATE      â”‚  â”‚ CRITIC        â”‚  â”‚ PRAGMATIST    â”‚           â”‚   â”‚
â”‚   â”‚   â”‚ (Claude)      â”‚  â”‚ (GPT-4o)      â”‚  â”‚ (Llama-70b)   â”‚           â”‚   â”‚
â”‚   â”‚   â”‚               â”‚  â”‚               â”‚  â”‚               â”‚           â”‚   â”‚
â”‚   â”‚   â”‚ &quot;Migrate!     â”‚  â”‚ &quot;Don&#39;t! You   â”‚  â”‚ &quot;It depends   â”‚           â”‚   â”‚
â”‚   â”‚   â”‚ Schema flex-  â”‚  â”‚ lose ACID,    â”‚  â”‚ on your data  â”‚           â”‚   â”‚
â”‚   â”‚   â”‚ ibility is    â”‚  â”‚ joins become  â”‚  â”‚ access patt-  â”‚           â”‚   â”‚
â”‚   â”‚   â”‚ worth it.&quot;    â”‚  â”‚ nightmares.&quot;  â”‚  â”‚ erns...&quot;      â”‚           â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   â”‚
â”‚   â”‚           â”‚                  â”‚                  â”‚                    â”‚   â”‚
â”‚   â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚   â”‚
â”‚   â”‚                              â–¼                                        â”‚   â”‚
â”‚   â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚   â”‚
â”‚   â”‚                    â”‚ ROUND 2:        â”‚                               â”‚   â”‚
â”‚   â”‚                    â”‚ Cross-Examine   â”‚                               â”‚   â”‚
â”‚   â”‚                    â”‚ Each Other      â”‚                               â”‚   â”‚
â”‚   â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚   â”‚
â”‚   â”‚                              â”‚                                        â”‚   â”‚
â”‚   â”‚                              â–¼                                        â”‚   â”‚
â”‚   â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚   â”‚
â”‚   â”‚                    â”‚ ARBITER         â”‚                               â”‚   â”‚
â”‚   â”‚                    â”‚ (Opus)          â”‚                               â”‚   â”‚
â”‚   â”‚                    â”‚                 â”‚                               â”‚   â”‚
â”‚   â”‚                    â”‚ Synthesize      â”‚                               â”‚   â”‚
â”‚   â”‚                    â”‚ final answer    â”‚                               â”‚   â”‚
â”‚   â”‚                    â”‚ with confidence â”‚                               â”‚   â”‚
â”‚   â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   Final Output: &quot;For your use case (heavy joins, ACID requirements),        â”‚
â”‚   stay with PostgreSQL. Migration cost would outweigh benefits.&quot;            â”‚
â”‚   Confidence: 87% | Dissent: Advocate (13%)                                 â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h4 id="council-roles">Council Roles</h4>
<table>
<thead>
<tr>
<th>Role</th>
<th>Purpose</th>
<th>Default Model</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Advocate</strong></td>
<td>Argues FOR the proposed solution</td>
<td>Claude Sonnet</td>
</tr>
<tr>
<td><strong>Critic</strong></td>
<td>Argues AGAINST, finds weaknesses</td>
<td>GPT-4o</td>
</tr>
<tr>
<td><strong>Pragmatist</strong></td>
<td>Considers practical constraints</td>
<td>Llama-70b</td>
</tr>
<tr>
<td><strong>Arbiter</strong></td>
<td>Synthesizes final verdict</td>
<td>Claude Opus</td>
</tr>
</tbody>
</table>
<h4 id="council-configuration">Council Configuration</h4>
<pre class="typescript"><code>interface CouncilConfig {
  enabled: boolean;
  triggerComplexity: number;      // Min complexity score (default: 7)
  triggerDomains: string[];       // Domains requiring council (e.g., [&#39;legal&#39;, &#39;medical&#39;])
  roles: {
    advocate: { model: string; temperature: number };
    critic: { model: string; temperature: number };
    pragmatist: { model: string; temperature: number };
    arbiter: { model: string; temperature: number };
  };
  rounds: number;                 // Cross-examination rounds (default: 2)
  confidenceThreshold: number;    // Min confidence for consensus (default: 0.75)
  includeDissentReport: boolean;  // Show minority opinions
}</code></pre>
<h4 id="council-output-format">Council Output Format</h4>
<pre class="typescript"><code>interface CouncilVerdict {
  question: string;
  verdict: string;
  confidence: number;           // 0.0 - 1.0
  consensusLevel: &#39;unanimous&#39; | &#39;majority&#39; | &#39;split&#39;;
  arguments: {
    advocate: { position: string; keyPoints: string[] };
    critic: { position: string; keyPoints: string[] };
    pragmatist: { position: string; keyPoints: string[] };
  };
  crossExamination: {
    round: number;
    challenges: Array&lt;{
      from: string;
      to: string;
      challenge: string;
      response: string;
    }&gt;;
  }[];
  arbiterReasoning: string;
  dissent?: {
    role: string;
    position: string;
    confidence: number;
  };
}</code></pre>
<h4 id="admin-ui-council-of-rivals">Admin UI: Council of Rivals</h4>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ Council of Rivals</p>
<table>
<thead>
<tr>
<th>Tab</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Configuration</strong></td>
<td>Enable/disable, configure roles and models</td>
</tr>
<tr>
<td><strong>Trigger Rules</strong></td>
<td>Set complexity/domain triggers</td>
</tr>
<tr>
<td><strong>Session History</strong></td>
<td>View past council deliberations</td>
</tr>
<tr>
<td><strong>Analytics</strong></td>
<td>Consensus rates, dissent patterns</td>
</tr>
</tbody>
</table>
<h4 id="council-api-reference">Council API Reference</h4>
<pre><code>Base: /api/thinktank/council

GET  /config                      Get council configuration
PUT  /config                      Update council configuration
POST /deliberate                  Manually trigger council deliberation
GET  /sessions                    List past deliberation sessions
GET  /sessions/:id                Get full deliberation transcript
GET  /analytics                   Council effectiveness metrics</code></pre>
<hr />
<h3 id="implementation-roadmap">33.7 Implementation Roadmap</h3>
<h4 id="priority-matrix">Priority Matrix</h4>
<table>
<thead>
<tr>
<th>Phase</th>
<th>Enhancement</th>
<th>Effort</th>
<th>Impact</th>
<th>Priority</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Q1</strong></td>
<td>Economic Governor</td>
<td>Medium</td>
<td>High (ROI)</td>
<td><strong>P0</strong></td>
</tr>
<tr>
<td><strong>Q1</strong></td>
<td>The Grimoire</td>
<td>High</td>
<td>Very High</td>
<td><strong>P0</strong></td>
</tr>
<tr>
<td><strong>Q2</strong></td>
<td>Time-Travel Debugging</td>
<td>Medium</td>
<td>Medium</td>
<td><strong>P1</strong></td>
</tr>
<tr>
<td><strong>Q2</strong></td>
<td>Council of Rivals</td>
<td>Medium</td>
<td>High</td>
<td><strong>P1</strong></td>
</tr>
<tr>
<td><strong>Q3</strong></td>
<td>Sentinel Agents</td>
<td>High</td>
<td>High</td>
<td><strong>P2</strong></td>
</tr>
</tbody>
</table>
<h4 id="recommended-implementation-order">Recommended Implementation Order</h4>
<ol type="1">
<li><strong>Economic Governor</strong> (Week 1-3)
<ul>
<li>Immediate cost savings</li>
<li>Simple routing logic</li>
<li>Foundation for other features</li>
</ul></li>
<li><strong>The Grimoire</strong> (Week 2-6)
<ul>
<li>Highest long-term value</li>
<li>Leverages existing Flyte infrastructure</li>
<li>Creates lock-in effect</li>
</ul></li>
<li><strong>Time-Travel Debugging</strong> (Week 5-8)
<ul>
<li>Builds on Flyte checkpointing</li>
<li>Power user feature</li>
<li>Developer experience differentiator</li>
</ul></li>
<li><strong>Council of Rivals</strong> (Week 7-10)
<ul>
<li>Quality improvement</li>
<li>Trust building</li>
<li>Requires multi-model orchestration</li>
</ul></li>
<li><strong>Sentinel Agents</strong> (Week 9-14)
<ul>
<li>Most complex</li>
<li>Requires EventBridge integration</li>
<li>New revenue opportunities</li>
</ul></li>
</ol>
<h4 id="dependencies">Dependencies</h4>
<pre><code>Economic Governor â”€â”€â”€â”€â”€â”
                       â”‚
The Grimoire â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–¶ Time-Travel
                       â”‚
Council of Rivals â”€â”€â”€â”€â”˜

Sentinel Agents (independent, can parallel)</code></pre>
<hr />
<h3 id="database-schema-2">33.8 Database Schema</h3>
<pre class="sql"><code>-- Grimoire tables
CREATE TABLE grimoire_heuristics (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  tenant_id UUID NOT NULL REFERENCES tenants(id),
  category VARCHAR(50) NOT NULL,
  trigger TEXT NOT NULL,
  heuristic TEXT NOT NULL,
  confidence DECIMAL(3,2) NOT NULL DEFAULT 0.70,
  source_execution_id VARCHAR(255),
  success_count INTEGER DEFAULT 0,
  failure_count INTEGER DEFAULT 0,
  last_applied TIMESTAMPTZ,
  tags TEXT[],
  embedding VECTOR(1536),
  enabled BOOLEAN DEFAULT true,
  archived_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_grimoire_tenant_category ON grimoire_heuristics(tenant_id, category);
CREATE INDEX idx_grimoire_embedding ON grimoire_heuristics USING ivfflat (embedding vector_cosine_ops);

-- Economic Governor tables
CREATE TABLE economic_governor_savings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  tenant_id UUID NOT NULL REFERENCES tenants(id),
  execution_id VARCHAR(255) NOT NULL,
  actual_model VARCHAR(100) NOT NULL,
  actual_cost DECIMAL(10,6) NOT NULL,
  baseline_model VARCHAR(100) NOT NULL,
  baseline_cost DECIMAL(10,6) NOT NULL,
  savings DECIMAL(10,6) NOT NULL,
  savings_percent DECIMAL(5,2) NOT NULL,
  complexity_score DECIMAL(3,1) NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_savings_tenant_date ON economic_governor_savings(tenant_id, created_at);

-- Sentinel tables
CREATE TABLE sentinels (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  tenant_id UUID NOT NULL REFERENCES tenants(id),
  user_id UUID NOT NULL REFERENCES users(id),
  name VARCHAR(255) NOT NULL,
  description TEXT,
  trigger_type VARCHAR(50) NOT NULL,
  trigger_config JSONB NOT NULL,
  action_type VARCHAR(50) NOT NULL,
  action_config JSONB NOT NULL,
  status VARCHAR(50) DEFAULT &#39;hibernating&#39;,
  flyte_execution_id VARCHAR(255),
  eventbridge_rule_arn TEXT,
  trigger_count INTEGER DEFAULT 0,
  max_triggers INTEGER,
  expires_at TIMESTAMPTZ,
  last_triggered TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_sentinels_tenant_status ON sentinels(tenant_id, status);

-- Council of Rivals tables
CREATE TABLE council_sessions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  tenant_id UUID NOT NULL REFERENCES tenants(id),
  user_id UUID NOT NULL REFERENCES users(id),
  question TEXT NOT NULL,
  verdict TEXT,
  confidence DECIMAL(3,2),
  consensus_level VARCHAR(20),
  arguments JSONB,
  cross_examination JSONB,
  arbiter_reasoning TEXT,
  dissent JSONB,
  duration_ms INTEGER,
  total_cost DECIMAL(10,6),
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE INDEX idx_council_tenant_date ON council_sessions(tenant_id, created_at);

-- Time-Travel checkpoints
CREATE TABLE execution_checkpoints (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  tenant_id UUID NOT NULL REFERENCES tenants(id),
  execution_id VARCHAR(255) NOT NULL,
  node_id VARCHAR(255) NOT NULL,
  workflow_name VARCHAR(255) NOT NULL,
  s3_uri TEXT NOT NULL,
  state_hash VARCHAR(64),
  metadata JSONB,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(execution_id, node_id)
);

CREATE TABLE execution_forks (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  tenant_id UUID NOT NULL REFERENCES tenants(id),
  original_execution_id VARCHAR(255) NOT NULL,
  forked_execution_id VARCHAR(255) NOT NULL,
  fork_node_id VARCHAR(255) NOT NULL,
  modifications JSONB NOT NULL,
  forked_by UUID REFERENCES users(id),
  reason TEXT,
  time_saved_minutes INTEGER,
  cost_saved DECIMAL(10,6),
  tokens_skipped INTEGER,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- RLS policies
ALTER TABLE grimoire_heuristics ENABLE ROW LEVEL SECURITY;
ALTER TABLE economic_governor_savings ENABLE ROW LEVEL SECURITY;
ALTER TABLE sentinels ENABLE ROW LEVEL SECURITY;
ALTER TABLE council_sessions ENABLE ROW LEVEL SECURITY;
ALTER TABLE execution_checkpoints ENABLE ROW LEVEL SECURITY;
ALTER TABLE execution_forks ENABLE ROW LEVEL SECURITY;

CREATE POLICY tenant_isolation ON grimoire_heuristics
  USING (tenant_id = current_setting(&#39;app.current_tenant_id&#39;)::UUID);
CREATE POLICY tenant_isolation ON economic_governor_savings
  USING (tenant_id = current_setting(&#39;app.current_tenant_id&#39;)::UUID);
CREATE POLICY tenant_isolation ON sentinels
  USING (tenant_id = current_setting(&#39;app.current_tenant_id&#39;)::UUID);
CREATE POLICY tenant_isolation ON council_sessions
  USING (tenant_id = current_setting(&#39;app.current_tenant_id&#39;)::UUID);
CREATE POLICY tenant_isolation ON execution_checkpoints
  USING (tenant_id = current_setting(&#39;app.current_tenant_id&#39;)::UUID);
CREATE POLICY tenant_isolation ON execution_forks
  USING (tenant_id = current_setting(&#39;app.current_tenant_id&#39;)::UUID);</code></pre>
<hr />
<h3 id="api-reference-1">33.9 API Reference</h3>
<h4 id="complete-endpoint-summary">Complete Endpoint Summary</h4>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 31%" />
<col style="width: 42%" />
</colgroup>
<thead>
<tr>
<th>Service</th>
<th>Base Path</th>
<th>Key Endpoints</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Grimoire</strong></td>
<td><code>/api/thinktank/grimoire</code></td>
<td>CRUD heuristics, stats, bulk import</td>
</tr>
<tr>
<td><strong>Time-Travel</strong></td>
<td><code>/api/thinktank/time-travel</code></td>
<td>Timeline, checkpoints, fork, compare</td>
</tr>
<tr>
<td><strong>Economic Governor</strong></td>
<td><code>/api/thinktank/economic-governor</code></td>
<td>Savings, routing rules, analyze</td>
</tr>
<tr>
<td><strong>Sentinels</strong></td>
<td><code>/api/thinktank/sentinels</code></td>
<td>CRUD sentinels, triggers, test</td>
</tr>
<tr>
<td><strong>Council</strong></td>
<td><code>/api/thinktank/council</code></td>
<td>Config, deliberate, sessions</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="configuration-6">33.10 Configuration</h3>
<h4 id="tenant-level-feature-flags">Tenant-Level Feature Flags</h4>
<pre class="typescript"><code>interface CognitiveEnhancementsConfig {
  grimoire: {
    enabled: boolean;
    autoExtract: boolean;
    minConfidenceThreshold: number;
    decayEnabled: boolean;
  };
  timeTravel: {
    enabled: boolean;
    maxCheckpointsPerExecution: number;
    retentionDays: number;
  };
  economicGovernor: {
    enabled: boolean;
    economyThreshold: number;
    standardThreshold: number;
    budgetCapDaily: number;
    budgetCapMonthly: number;
  };
  sentinels: {
    enabled: boolean;
    maxActiveSentinels: number;
    allowedTriggerTypes: string[];
  };
  council: {
    enabled: boolean;
    triggerComplexity: number;
    triggerDomains: string[];
    rounds: number;
  };
}</code></pre>
<hr />
<h3 id="troubleshooting-1">33.11 Troubleshooting</h3>
<h4 id="common-issues-1">Common Issues</h4>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 26%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr>
<th>Issue</th>
<th>Cause</th>
<th>Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td>Grimoire not learning</td>
<td>Auto-extract disabled</td>
<td>Enable in tenant config</td>
</tr>
<tr>
<td>Fork fails</td>
<td>Checkpoint expired</td>
<td>Increase retention period</td>
</tr>
<tr>
<td>Governor routes wrong</td>
<td>Stale complexity model</td>
<td>Retrain on recent data</td>
</tr>
<tr>
<td>Sentinel not triggering</td>
<td>EventBridge rule disabled</td>
<td>Check AWS console</td>
</tr>
<tr>
<td>Council timeout</td>
<td>Too many rounds</td>
<td>Reduce cross-examination rounds</td>
</tr>
</tbody>
</table>
<h4 id="debug-commands">Debug Commands</h4>
<pre class="bash"><code># Check Grimoire heuristic count
curl -X GET &quot;https://api.radiant.ai/thinktank/grimoire/stats&quot; \
  -H &quot;Authorization: Bearer $TOKEN&quot;

# Test Economic Governor routing
curl -X POST &quot;https://api.radiant.ai/thinktank/economic-governor/analyze-complexity&quot; \
  -H &quot;Authorization: Bearer $TOKEN&quot; \
  -d &#39;{&quot;prompt&quot;: &quot;Write a complex SQL query&quot;, &quot;taskType&quot;: &quot;code_generation&quot;}&#39;

# Check Sentinel status
curl -X GET &quot;https://api.radiant.ai/thinktank/sentinels&quot; \
  -H &quot;Authorization: Bearer $TOKEN&quot;

# View Council session
curl -X GET &quot;https://api.radiant.ai/thinktank/council/sessions/{sessionId}&quot; \
  -H &quot;Authorization: Bearer $TOKEN&quot;</code></pre>
<h3 id="related-sections-1">33.12 Related Sections</h3>
<table>
<colgroup>
<col style="width: 45%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr>
<th>Section</th>
<th>Relevance</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#23-predictive-coding--evolution">Section 23 - Predictive Coding</a></td>
<td>Foundation for Grimoire learning</td>
</tr>
<tr>
<td><a href="#30-consciousness-operating-system-cos">Section 30 - COS</a></td>
<td>SOFAI integration</td>
</tr>
<tr>
<td><a href="#32-swarm-orchestration--flyte-operations">Section 32 - Swarm Orchestration</a></td>
<td>Flyte integration for all features</td>
</tr>
<tr>
<td><a href="./RADIANT-ADMIN-GUIDE.md#47-flyte-native-state-management">RADIANT Admin Guide - Section 47</a></td>
<td>Flyte checkpointing</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="orchestration-workflow-methods-reference">34. Orchestration Workflow Methods Reference</h2>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ Orchestration â†’ Methods</p>
<p>This section documents the complete <strong>70+ orchestration workflow methods</strong> available in Think Tank. Each method has a <strong>display name</strong> (user-friendly) and <strong>scientific name</strong> (formal/academic reference).</p>
<h3 id="method-categories-overview">34.1 Method Categories Overview</h3>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 32%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr>
<th>Category</th>
<th>Methods</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Generation</strong></td>
<td>3</td>
<td>Generate responses with various reasoning strategies</td>
</tr>
<tr>
<td><strong>Evaluation</strong></td>
<td>6</td>
<td>Critique, judge, and score outputs</td>
</tr>
<tr>
<td><strong>Synthesis</strong></td>
<td>5</td>
<td>Combine multiple responses into unified outputs</td>
</tr>
<tr>
<td><strong>Verification</strong></td>
<td>8</td>
<td>Fact-check and verify claims</td>
</tr>
<tr>
<td><strong>Debate</strong></td>
<td>5</td>
<td>Multi-agent deliberation and argumentation</td>
</tr>
<tr>
<td><strong>Aggregation</strong></td>
<td>4</td>
<td>Vote, blend, and aggregate responses</td>
</tr>
<tr>
<td><strong>Reasoning</strong></td>
<td>2</td>
<td>Problem decomposition and reflection</td>
</tr>
<tr>
<td><strong>Routing</strong></td>
<td>6</td>
<td>Dynamic model selection and cascading</td>
</tr>
<tr>
<td><strong>Collaboration</strong></td>
<td>5</td>
<td>Multi-agent coordination</td>
</tr>
<tr>
<td><strong>Uncertainty</strong></td>
<td>6</td>
<td>Confidence estimation and calibration</td>
</tr>
<tr>
<td><strong>Hallucination</strong></td>
<td>3</td>
<td>Detect and prevent hallucinations</td>
</tr>
<tr>
<td><strong>Human-in-Loop</strong></td>
<td>3</td>
<td>Human oversight and review</td>
</tr>
<tr>
<td><strong>Neural</strong></td>
<td>1</td>
<td>Cato-integrated neural decision engine</td>
</tr>
</tbody>
</table>
<h3 id="complete-methods-reference">34.2 Complete Methods Reference</h3>
<h4 id="generation-methods">Generation Methods</h4>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 34%" />
<col style="width: 12%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr>
<th>Display Name</th>
<th>Scientific Name</th>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Generate</td>
<td>Basic Generation</td>
<td><code>GENERATE_RESPONSE</code></td>
<td>Standard response generation</td>
</tr>
<tr>
<td>Think Step-by-Step</td>
<td>Chain-of-Thought Generation</td>
<td><code>GENERATE_WITH_COT</code></td>
<td>Reasoning before answering (+20-40% accuracy)</td>
</tr>
<tr>
<td>Refine</td>
<td>Iterative Refinement</td>
<td><code>REFINE_RESPONSE</code></td>
<td>Improve based on feedback</td>
</tr>
</tbody>
</table>
<h4 id="evaluation-methods">Evaluation Methods</h4>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 33%" />
<col style="width: 11%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr>
<th>Display Name</th>
<th>Scientific Name</th>
<th>Code</th>
<th>Accuracy Gain</th>
</tr>
</thead>
<tbody>
<tr>
<td>Critique</td>
<td>Critical Evaluation</td>
<td><code>CRITIQUE_RESPONSE</code></td>
<td>Identifies flaws</td>
</tr>
<tr>
<td>Judge</td>
<td>Comparative Judgment</td>
<td><code>JUDGE_RESPONSES</code></td>
<td>Evaluates multiple outputs</td>
</tr>
<tr>
<td>Multi-Judge Panel</td>
<td>Panel of LLMs (PoLL)</td>
<td><code>POLL_JUDGE</code></td>
<td>-40-60% single-model bias</td>
</tr>
<tr>
<td>Structured Scoring</td>
<td>G-Eval NLG Framework</td>
<td><code>G_EVAL</code></td>
<td>0.5+ human correlation</td>
</tr>
<tr>
<td>Head-to-Head Compare</td>
<td>Pairwise Preference</td>
<td><code>PAIRWISE_PREFER</code></td>
<td>Reliable for subtle differences</td>
</tr>
<tr>
<td>Side-by-Side Compare</td>
<td>Comparative Analysis</td>
<td><code>COMPARE_ANALYSIS</code></td>
<td>+50% decision clarity</td>
</tr>
</tbody>
</table>
<h4 id="synthesis-methods">Synthesis Methods</h4>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 33%" />
<col style="width: 11%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr>
<th>Display Name</th>
<th>Scientific Name</th>
<th>Code</th>
<th>Accuracy Gain</th>
</tr>
</thead>
<tbody>
<tr>
<td>Synthesize</td>
<td>Multi-Response Synthesis</td>
<td><code>SYNTHESIZE_RESPONSES</code></td>
<td>Combines best parts</td>
</tr>
<tr>
<td>Consensus</td>
<td>Consensus Aggregation</td>
<td><code>BUILD_CONSENSUS</code></td>
<td>Agreement points</td>
</tr>
<tr>
<td>Layered Synthesis</td>
<td>Mixture of Agents (MoA)</td>
<td><code>MOA_LAYERS</code></td>
<td>+8% over GPT-4o</td>
</tr>
<tr>
<td>Combine &amp; Summarize</td>
<td>Multi-Source Synthesis</td>
<td><code>MULTI_SOURCE_SYNTH</code></td>
<td>+40% coverage</td>
</tr>
<tr>
<td>Rank &amp; Merge</td>
<td>LLM-Blender Fusion</td>
<td><code>LLM_BLENDER</code></td>
<td>+12% over best model</td>
</tr>
</tbody>
</table>
<h4 id="verification-methods">Verification Methods</h4>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 33%" />
<col style="width: 11%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr>
<th>Display Name</th>
<th>Scientific Name</th>
<th>Code</th>
<th>Accuracy Gain</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fact Check</td>
<td>Factual Verification</td>
<td><code>VERIFY_FACTS</code></td>
<td>Extract &amp; verify claims</td>
</tr>
<tr>
<td>Step Verification</td>
<td>Process Reward Model</td>
<td><code>PROCESS_REWARD</code></td>
<td>+6% on MATH</td>
</tr>
<tr>
<td>Internal Consistency</td>
<td>SelfCheckGPT</td>
<td><code>SELFCHECK_GPT</code></td>
<td>+25% hallucination F1</td>
</tr>
<tr>
<td>Source Attribution</td>
<td>Citation Verification</td>
<td><code>CITE_VERIFY</code></td>
<td>+40% citation accuracy</td>
</tr>
<tr>
<td>Logic-Based Check</td>
<td>Zero-Shot Natural Logic</td>
<td><code>NATURAL_LOGIC</code></td>
<td>+8.96 accuracy points</td>
</tr>
<tr>
<td>Combined Verification</td>
<td>UniFact Unified</td>
<td><code>UNIFACT</code></td>
<td>+20% comprehensive</td>
</tr>
<tr>
<td>Internal State Check</td>
<td>EigenScore</td>
<td><code>EIGENSCORE</code></td>
<td>Hidden state analysis</td>
</tr>
<tr>
<td>Re-Query Consistency</td>
<td>Iterative Prompting</td>
<td><code>REQUERY_CHECK</code></td>
<td>Black-box detection</td>
</tr>
</tbody>
</table>
<h4 id="debate-methods">Debate Methods</h4>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 33%" />
<col style="width: 11%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr>
<th>Display Name</th>
<th>Scientific Name</th>
<th>Code</th>
<th>Accuracy Gain</th>
</tr>
</thead>
<tbody>
<tr>
<td>Challenge</td>
<td>Adversarial Challenge</td>
<td><code>GENERATE_CHALLENGE</code></td>
<td>Counter-arguments</td>
</tr>
<tr>
<td>Defend</td>
<td>Position Defense</td>
<td><code>DEFEND_POSITION</code></td>
<td>Respond to challenges</td>
</tr>
<tr>
<td>Efficient Debate</td>
<td>Sparse Topology Debate</td>
<td><code>SPARSE_DEBATE</code></td>
<td>-40-60% cost, &lt;5% quality loss</td>
</tr>
<tr>
<td>Attack &amp; Support Map</td>
<td>ArgLLMs Bipolar</td>
<td><code>ARG_MAPPING</code></td>
<td>+35% structured argumentation</td>
</tr>
<tr>
<td>Human-AI Panel</td>
<td>HAH-Delphi Hybrid</td>
<td><code>HAH_DELPHI</code></td>
<td>&gt;90% expert coverage</td>
</tr>
<tr>
<td>Confidence-Weighted</td>
<td>ReConcile Consensus</td>
<td><code>RECONCILE_WEIGHTED</code></td>
<td>+15-25% diverse ensembles</td>
</tr>
</tbody>
</table>
<h4 id="aggregation-methods">Aggregation Methods</h4>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 33%" />
<col style="width: 11%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr>
<th>Display Name</th>
<th>Scientific Name</th>
<th>Code</th>
<th>Accuracy Gain</th>
</tr>
</thead>
<tbody>
<tr>
<td>Vote</td>
<td>Majority Aggregation</td>
<td><code>MAJORITY_VOTE</code></td>
<td>Most common answer</td>
</tr>
<tr>
<td>Weight</td>
<td>Weighted Aggregation</td>
<td><code>WEIGHTED_AGGREGATE</code></td>
<td>Confidence-weighted</td>
</tr>
<tr>
<td>Multi-Sample Voting</td>
<td>Self-Consistency</td>
<td><code>SELF_CONSISTENCY</code></td>
<td>+17.9% on GSM8K</td>
</tr>
<tr>
<td>Ranked Choice</td>
<td>GEDI Electoral CDM</td>
<td><code>GEDI_VOTE</code></td>
<td>+30% consensus</td>
</tr>
</tbody>
</table>
<h4 id="routing-methods">Routing Methods</h4>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 25%" />
<col style="width: 8%" />
<col style="width: 22%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr>
<th>Display Name</th>
<th>Scientific Name</th>
<th>Code</th>
<th>Accuracy Gain</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Classify</td>
<td>Task Classification</td>
<td><code>DETECT_TASK_TYPE</code></td>
<td>Detect complexity</td>
<td>Keyword analysis</td>
</tr>
<tr>
<td>Route</td>
<td>Model Selection</td>
<td><code>SELECT_BEST_MODEL</code></td>
<td>Optimal model</td>
<td>Capability matching</td>
</tr>
<tr>
<td>Smart Selection</td>
<td>RouteLLM Adaptive</td>
<td><code>ROUTELLM</code></td>
<td>-50% cost, &lt;3% loss</td>
<td>Learned router</td>
</tr>
<tr>
<td>Progressive Escalation</td>
<td>FrugalGPT Cascade</td>
<td><code>FRUGAL_CASCADE</code></td>
<td>-90% cost maintained</td>
<td>Confidence-based escalation</td>
</tr>
<tr>
<td>Budget-Aware</td>
<td>Pareto Routing</td>
<td><code>PARETO_ROUTE</code></td>
<td>Optimal trade-off</td>
<td>Pareto frontier calculation</td>
</tr>
<tr>
<td>Smart Cost Escalation</td>
<td>C3PO Self-Supervised</td>
<td><code>C3PO_CASCADE</code></td>
<td>-40% cost, +2% quality</td>
<td>Difficulty prediction + tiered cascade (NeurIPS 2024)</td>
</tr>
<tr>
<td>Self-Routing</td>
<td>AutoMix POMDP</td>
<td><code>AUTOMIX</code></td>
<td>Self-improving</td>
<td>Îµ-greedy exploration + self-verification (Nov 2025)</td>
</tr>
</tbody>
</table>
<p><strong>Implementation Notes:</strong> - <strong>Pareto Routing</strong>: Computes Pareto frontier across quality/latency/cost, selects optimal model within budget constraints. - <strong>C3PO Cascade</strong>: Predicts query difficulty using prompt features, starts at appropriate tier, cascades up if confidence insufficient. - <strong>AutoMix POMDP</strong>: Uses POMDP belief state for model selection with Îµ-greedy exploration and self-verification for quality assurance.</p>
<h4 id="collaboration-methods">Collaboration Methods</h4>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 33%" />
<col style="width: 11%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr>
<th>Display Name</th>
<th>Scientific Name</th>
<th>Code</th>
<th>Accuracy Gain</th>
</tr>
</thead>
<tbody>
<tr>
<td>No-Comm Coordination</td>
<td>ECON Bayesian Nash</td>
<td><code>ECON_NASH</code></td>
<td>+11.2% coordination</td>
</tr>
<tr>
<td>Fair Merge</td>
<td>Token Auction</td>
<td><code>TOKEN_AUCTION</code></td>
<td>Fair multi-stakeholder</td>
</tr>
<tr>
<td>Logic &amp; Solve</td>
<td>Logic-LM Neuro-Symbolic</td>
<td><code>LOGIC_LM</code></td>
<td>+39.2% over standard</td>
</tr>
<tr>
<td>Generate &amp; Verify</td>
<td>LLM-Modulo Framework</td>
<td><code>LLM_MODULO</code></td>
<td>12%â†’93.9% plan success</td>
</tr>
<tr>
<td>Auto-Discover</td>
<td>AFlow MCTS Discovery</td>
<td><code>AFLOW_MCTS</code></td>
<td>Beats human designs</td>
</tr>
</tbody>
</table>
<h4 id="uncertainty-methods">Uncertainty Methods</h4>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 25%" />
<col style="width: 8%" />
<col style="width: 22%" />
<col style="width: 23%" />
</colgroup>
<thead>
<tr>
<th>Display Name</th>
<th>Scientific Name</th>
<th>Code</th>
<th>Accuracy Gain</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Meaning-Based</td>
<td>Semantic Entropy</td>
<td><code>SEMANTIC_ENTROPY</code></td>
<td>AUROC 0.79-0.87</td>
<td>NLI clustering</td>
</tr>
<tr>
<td>Calibrated Confidence</td>
<td>Calibrated Estimation</td>
<td><code>CALIBRATED_CONF</code></td>
<td>ECE -15%</td>
<td>Temperature scaling</td>
</tr>
<tr>
<td>Agreement Scoring</td>
<td>Consistency UQ</td>
<td><code>CONSISTENCY_UQ</code></td>
<td>Simple, effective</td>
<td>Multi-sample agreement</td>
</tr>
<tr>
<td>Fast Uncertainty</td>
<td>SE Probes (Logprob-based)</td>
<td><code>SE_PROBES</code></td>
<td>300x faster, 90% accuracy</td>
<td>Token logprob entropy (ICML 2024)</td>
</tr>
<tr>
<td>Detailed Score</td>
<td>Kernel Language Entropy</td>
<td><code>KERNEL_ENTROPY</code></td>
<td>Finer-grained</td>
<td>Embedding KDE (NeurIPS 2024)</td>
</tr>
<tr>
<td>Guaranteed Bounds</td>
<td>Conformal Prediction</td>
<td><code>CONFORMAL_PRED</code></td>
<td>Statistical guarantees</td>
<td>Coverage calibration</td>
</tr>
</tbody>
</table>
<p><strong>Implementation Notes:</strong> - <strong>SE Probes</strong>: Uses OpenAI logprobs API to compute per-token Shannon entropy. Approximates hidden state probes without model internals access. - <strong>Kernel Entropy</strong>: Generates embeddings via <code>text-embedding-3-small</code>, applies Gaussian KDE with Silverman bandwidth, returns density-based entropy.</p>
<h4 id="hallucination-detection-new">Hallucination Detection (NEW)</h4>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 33%" />
<col style="width: 11%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr>
<th>Display Name</th>
<th>Scientific Name</th>
<th>Code</th>
<th>Accuracy Gain</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fact-Check Scanner</td>
<td>Multi-Method Detection</td>
<td><code>MULTI_HALLUC</code></td>
<td>F1 0.85+</td>
</tr>
<tr>
<td>Mutation Testing</td>
<td>MetaQA Metamorphic</td>
<td><code>METAQA</code></td>
<td>+30% subtle inconsistencies</td>
</tr>
<tr>
<td>Source Verification</td>
<td>Factual Grounding</td>
<td><code>FACTUAL_GROUND</code></td>
<td>+45% grounding accuracy</td>
</tr>
</tbody>
</table>
<h4 id="human-in-the-loop-new">Human-in-the-Loop (NEW)</h4>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 37%" />
<col style="width: 13%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr>
<th>Display Name</th>
<th>Scientific Name</th>
<th>Code</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Human Review Queue</td>
<td>HITL Review System</td>
<td><code>HITL_REVIEW</code></td>
<td>+90% critical error prevention</td>
</tr>
<tr>
<td>Multi-Level Review</td>
<td>Tiered Evaluation</td>
<td><code>TIERED_EVAL</code></td>
<td>Efficient human resources</td>
</tr>
<tr>
<td>Smart Sampling</td>
<td>Active Learning</td>
<td><code>ACTIVE_SAMPLE</code></td>
<td>+60% labeling efficiency</td>
</tr>
</tbody>
</table>
<h4 id="neuralml-methods-new">Neural/ML Methods (NEW)</h4>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 34%" />
<col style="width: 12%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr>
<th>Display Name</th>
<th>Scientific Name</th>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Neural Decision</td>
<td>Cato Neural Decision Engine</td>
<td><code>CATO_NEURAL</code></td>
<td>Integrates Cato safety pipeline with consciousness affect state and predictive coding</td>
</tr>
</tbody>
</table>
<h3 id="system-vs-user-methods">34.3 System vs User Methods</h3>
<p>All orchestration methods have an <code>isSystemMethod</code> flag:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Can Edit Parameters</th>
<th>Can Edit Definition</th>
<th>Can Delete</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>System Method</strong></td>
<td>âœ… Yes</td>
<td>âŒ No</td>
<td>âŒ No</td>
</tr>
<tr>
<td><strong>User Method</strong></td>
<td>âœ… Yes</td>
<td>âœ… Yes</td>
<td>âœ… Yes</td>
</tr>
</tbody>
</table>
<p><strong>System methods</strong> are the 70+ built-in methods documented above. Administrators can: - Enable/disable system methods - Modify default parameters - View execution metrics</p>
<p><strong>User methods</strong> (future feature) will allow tenants to create custom methods with their own prompts or code references.</p>
<h3 id="user-workflow-templates">34.4 User Workflow Templates</h3>
<p><strong>Location</strong>: Admin Dashboard â†’ Think Tank â†’ Workflow Templates</p>
<p>Users can create custom workflows by:</p>
<ol type="1">
<li><strong>Creating from scratch</strong> - Add methods step by step</li>
<li><strong>Basing on system workflow</strong> - Start from one of 49 system patterns</li>
<li><strong>Customizing parameters</strong> - Override default parameters per step</li>
<li><strong>Sharing with team</strong> - Make templates available to organization</li>
</ol>
<h4 id="template-structure">Template Structure</h4>
<pre class="typescript"><code>interface UserWorkflowTemplate {
  templateId: string;
  templateName: string;
  templateDescription: string;
  baseWorkflowCode?: string;
  steps: Array&lt;{
    stepOrder: number;
    methodCode: string;
    displayName: string;
    parameters: Record&lt;string, unknown&gt;;
    condition?: string;
    isEnabled: boolean;
  }&gt;;
  category: string;
  tags: string[];
  isShared: boolean;
  timesUsed: number;
}</code></pre>
<h4 id="api-endpoints-6">API Endpoints</h4>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 25%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/api/admin/orchestration/user-templates</code></td>
<td>GET</td>
<td>List user templates (own + shared)</td>
</tr>
<tr>
<td><code>/api/admin/orchestration/user-templates</code></td>
<td>POST</td>
<td>Create template</td>
</tr>
<tr>
<td><code>/api/admin/orchestration/user-templates/:id</code></td>
<td>GET</td>
<td>Get template details</td>
</tr>
<tr>
<td><code>/api/admin/orchestration/user-templates/:id</code></td>
<td>PATCH</td>
<td>Update template (owner only)</td>
</tr>
<tr>
<td><code>/api/admin/orchestration/user-templates/:id</code></td>
<td>DELETE</td>
<td>Delete template (owner only)</td>
</tr>
<tr>
<td><code>/api/admin/orchestration/user-templates/:id/share</code></td>
<td>POST</td>
<td>Toggle team sharing</td>
</tr>
<tr>
<td><code>/api/admin/orchestration/user-templates/:id/duplicate</code></td>
<td>POST</td>
<td>Duplicate template</td>
</tr>
</tbody>
</table>
<p><strong>Method Management Endpoints</strong>:</p>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 25%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/api/admin/orchestration/methods</code></td>
<td>GET</td>
<td>List all methods (includes <code>isSystemMethod</code>)</td>
</tr>
<tr>
<td><code>/api/admin/orchestration/methods/:code</code></td>
<td>GET</td>
<td>Get method details</td>
</tr>
<tr>
<td><code>/api/admin/orchestration/methods/:code</code></td>
<td>PATCH</td>
<td>Update method (parameters only for system methods)</td>
</tr>
<tr>
<td><code>/api/admin/orchestration/metrics</code></td>
<td>GET</td>
<td>Method execution metrics</td>
</tr>
<tr>
<td><code>/api/admin/orchestration/executions</code></td>
<td>GET</td>
<td>Recent executions</td>
</tr>
</tbody>
</table>
<h3 id="cato-neural-decision-engine">34.4 Cato Neural Decision Engine</h3>
<p>The <code>CATO_NEURAL</code> method integrates with the Genesis Cato safety architecture:</p>
<h4 id="parameters">Parameters</h4>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 15%" />
<col style="width: 23%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>safety_mode</code></td>
<td>enum</td>
<td><code>enforce</code></td>
<td>CBF enforcement: enforce, warn, monitor</td>
</tr>
<tr>
<td><code>use_affect_mapping</code></td>
<td>boolean</td>
<td><code>true</code></td>
<td>Map affect state to hyperparameters</td>
</tr>
<tr>
<td><code>use_predictive_coding</code></td>
<td>boolean</td>
<td><code>true</code></td>
<td>Enable active inference</td>
</tr>
<tr>
<td><code>precision_governor_enabled</code></td>
<td>boolean</td>
<td><code>true</code></td>
<td>Limit confidence by epistemic state</td>
</tr>
<tr>
<td><code>cbf_threshold</code></td>
<td>number</td>
<td><code>0.95</code></td>
<td>Safety barrier threshold</td>
</tr>
</tbody>
</table>
<h4 id="affect-to-hyperparameter-mapping">Affect-to-Hyperparameter Mapping</h4>
<table>
<thead>
<tr>
<th>Affect State</th>
<th>Hyperparameter Effect</th>
</tr>
</thead>
<tbody>
<tr>
<td>High frustration (&gt;0.5)</td>
<td>Lower temperature (more focused)</td>
</tr>
<tr>
<td>High curiosity (&gt;0.6)</td>
<td>Higher temperature (exploration)</td>
</tr>
<tr>
<td>Low self-efficacy (&lt;0.4)</td>
<td>Escalate to expert model</td>
</tr>
<tr>
<td>High arousal (&gt;0.7)</td>
<td>Longer max tokens</td>
</tr>
</tbody>
</table>
<h3 id="method-parameters-reference">34.5 Method Parameters Reference</h3>
<p>All methods have configurable parameters that can be set at the <strong>Admin level</strong> (defaults) or overridden in <strong>User Workflow Templates</strong>.</p>
<h4 id="uncertainty-confidence-methods">Uncertainty &amp; Confidence Methods</h4>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 23%" />
<col style="width: 12%" />
<col style="width: 19%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th>Method</th>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SEMANTIC_ENTROPY</strong></td>
<td><code>sample_count</code></td>
<td>integer</td>
<td>10</td>
<td>Number of response samples (5-20)</td>
</tr>
<tr>
<td></td>
<td><code>temperature</code></td>
<td>number</td>
<td>0.7</td>
<td>Sampling temperature</td>
</tr>
<tr>
<td></td>
<td><code>clustering_method</code></td>
<td>enum</td>
<td>â€œnliâ€</td>
<td>Clustering: nli, embedding, exact</td>
</tr>
<tr>
<td></td>
<td><code>entropy_threshold</code></td>
<td>number</td>
<td>0.5</td>
<td>Flag uncertainty above this</td>
</tr>
<tr>
<td><strong>SE_PROBES</strong></td>
<td><code>probe_layers</code></td>
<td>array</td>
<td>[-1, -2]</td>
<td>Model layers to probe (logprob-based)</td>
</tr>
<tr>
<td></td>
<td><code>threshold</code></td>
<td>number</td>
<td>0.5</td>
<td>Uncertainty threshold</td>
</tr>
<tr>
<td></td>
<td><code>fast_mode</code></td>
<td>boolean</td>
<td>true</td>
<td>Use fast logprob estimation</td>
</tr>
<tr>
<td></td>
<td><code>sample_count</code></td>
<td>integer</td>
<td>5</td>
<td>Number of samples for averaging</td>
</tr>
<tr>
<td><strong>KERNEL_ENTROPY</strong></td>
<td><code>kernel</code></td>
<td>enum</td>
<td>â€œrbfâ€</td>
<td>Kernel: rbf, linear, polynomial</td>
</tr>
<tr>
<td></td>
<td><code>bandwidth</code></td>
<td>string</td>
<td>â€œautoâ€</td>
<td>Bandwidth or â€œautoâ€ for Silverman</td>
</tr>
<tr>
<td></td>
<td><code>sample_count</code></td>
<td>integer</td>
<td>10</td>
<td>Response samples for KDE</td>
</tr>
<tr>
<td><strong>CALIBRATED_CONF</strong></td>
<td><code>calibration_method</code></td>
<td>enum</td>
<td>â€œplatt_scalingâ€</td>
<td>platt_scaling, isotonic, temperature_scaling</td>
</tr>
<tr>
<td></td>
<td><code>confidence_prompt</code></td>
<td>string</td>
<td>â€œverbalizedâ€</td>
<td>How to elicit confidence</td>
</tr>
<tr>
<td></td>
<td><code>temperature</code></td>
<td>number</td>
<td>0.3</td>
<td>Sampling temperature</td>
</tr>
<tr>
<td><strong>CONSISTENCY_UQ</strong></td>
<td><code>sample_count</code></td>
<td>integer</td>
<td>5</td>
<td>Number of response samples</td>
</tr>
<tr>
<td></td>
<td><code>agreement_metric</code></td>
<td>enum</td>
<td>â€œjaccardâ€</td>
<td>jaccard, cosine, exact_match, bertscore</td>
</tr>
<tr>
<td></td>
<td><code>threshold</code></td>
<td>number</td>
<td>0.7</td>
<td>Agreement threshold</td>
</tr>
<tr>
<td><strong>CONFORMAL_PRED</strong></td>
<td><code>coverage_target</code></td>
<td>number</td>
<td>0.9</td>
<td>Target coverage (0.5-0.99)</td>
</tr>
<tr>
<td></td>
<td><code>calibration_size</code></td>
<td>integer</td>
<td>500</td>
<td>Calibration set size</td>
</tr>
<tr>
<td></td>
<td><code>adaptive</code></td>
<td>boolean</td>
<td>true</td>
<td>Use adaptive conformal sets</td>
</tr>
</tbody>
</table>
<h4 id="routing-methods-1">Routing Methods</h4>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 23%" />
<col style="width: 12%" />
<col style="width: 19%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th>Method</th>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ROUTELLM</strong></td>
<td><code>router_model</code></td>
<td>enum</td>
<td>â€œmatrix_factorizationâ€</td>
<td>Router: matrix_factorization, bert, causal_lm</td>
</tr>
<tr>
<td></td>
<td><code>cost_threshold</code></td>
<td>number</td>
<td>0.7</td>
<td>Max cost relative to baseline</td>
</tr>
<tr>
<td></td>
<td><code>quality_floor</code></td>
<td>number</td>
<td>0.8</td>
<td>Minimum acceptable quality</td>
</tr>
<tr>
<td><strong>FRUGAL_CASCADE</strong></td>
<td><code>model_cascade</code></td>
<td>array</td>
<td>[â€œgpt-4o-miniâ€, â€œgpt-4oâ€, â€œo1â€]</td>
<td>Models in escalation order</td>
</tr>
<tr>
<td></td>
<td><code>confidence_threshold</code></td>
<td>number</td>
<td>0.85</td>
<td>Escalate below this confidence</td>
</tr>
<tr>
<td></td>
<td><code>max_escalations</code></td>
<td>integer</td>
<td>2</td>
<td>Maximum escalation steps</td>
</tr>
<tr>
<td><strong>PARETO_ROUTE</strong></td>
<td><code>budget_cents</code></td>
<td>number</td>
<td>10</td>
<td>Budget constraint per query</td>
</tr>
<tr>
<td></td>
<td><code>quality_weight</code></td>
<td>number</td>
<td>0.7</td>
<td>Weight for quality (0-1)</td>
</tr>
<tr>
<td></td>
<td><code>latency_weight</code></td>
<td>number</td>
<td>0.1</td>
<td>Weight for latency (0-1)</td>
</tr>
<tr>
<td><strong>C3PO_CASCADE</strong></td>
<td><code>cascade_levels</code></td>
<td>integer</td>
<td>3</td>
<td>Number of model tiers</td>
</tr>
<tr>
<td></td>
<td><code>self_supervised</code></td>
<td>boolean</td>
<td>true</td>
<td>Enable self-supervised learning</td>
</tr>
<tr>
<td></td>
<td><code>calibration_samples</code></td>
<td>integer</td>
<td>100</td>
<td>Samples for difficulty calibration</td>
</tr>
<tr>
<td><strong>AUTOMIX</strong></td>
<td><code>pomdp_horizon</code></td>
<td>integer</td>
<td>3</td>
<td>POMDP planning horizon</td>
</tr>
<tr>
<td></td>
<td><code>exploration_rate</code></td>
<td>number</td>
<td>0.1</td>
<td>Îµ for Îµ-greedy exploration</td>
</tr>
<tr>
<td></td>
<td><code>self_verification</code></td>
<td>boolean</td>
<td>true</td>
<td>Verify own outputs</td>
</tr>
</tbody>
</table>
<h4 id="debate-deliberation-methods">Debate &amp; Deliberation Methods</h4>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 23%" />
<col style="width: 12%" />
<col style="width: 19%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th>Method</th>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SPARSE_DEBATE</strong></td>
<td><code>topology</code></td>
<td>enum</td>
<td>â€œringâ€</td>
<td>Network: ring, star, tree, full</td>
</tr>
<tr>
<td></td>
<td><code>debate_rounds</code></td>
<td>integer</td>
<td>3</td>
<td>Number of debate rounds (1-10)</td>
</tr>
<tr>
<td></td>
<td><code>temperature</code></td>
<td>number</td>
<td>0.7</td>
<td>Agent response temperature</td>
</tr>
<tr>
<td><strong>ARG_MAPPING</strong></td>
<td><code>strength_threshold</code></td>
<td>number</td>
<td>0.5</td>
<td>Min argument strength to include</td>
</tr>
<tr>
<td></td>
<td><code>include_rebuttal</code></td>
<td>boolean</td>
<td>true</td>
<td>Generate rebuttals</td>
</tr>
<tr>
<td></td>
<td><code>max_depth</code></td>
<td>integer</td>
<td>3</td>
<td>Max argument tree depth</td>
</tr>
<tr>
<td><strong>HAH_DELPHI</strong></td>
<td><code>tiers</code></td>
<td>integer</td>
<td>4</td>
<td>Number of consensus tiers</td>
</tr>
<tr>
<td></td>
<td><code>human_threshold</code></td>
<td>number</td>
<td>0.6</td>
<td>Escalate to human above this</td>
</tr>
<tr>
<td></td>
<td><code>consensus_target</code></td>
<td>number</td>
<td>0.9</td>
<td>Target consensus level</td>
</tr>
<tr>
<td></td>
<td><code>max_rounds</code></td>
<td>integer</td>
<td>5</td>
<td>Maximum Delphi rounds</td>
</tr>
<tr>
<td><strong>RECONCILE_WEIGHTED</strong></td>
<td><code>min_confidence</code></td>
<td>number</td>
<td>0.6</td>
<td>Minimum confidence to include</td>
</tr>
<tr>
<td></td>
<td><code>weight_by</code></td>
<td>string</td>
<td>â€œconfidenceâ€</td>
<td>Weighting strategy</td>
</tr>
<tr>
<td></td>
<td><code>reconciliation_rounds</code></td>
<td>integer</td>
<td>2</td>
<td>Reconciliation iterations</td>
</tr>
</tbody>
</table>
<h4 id="evaluation-methods-1">Evaluation Methods</h4>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 23%" />
<col style="width: 12%" />
<col style="width: 19%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th>Method</th>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>POLL_JUDGE</strong></td>
<td><code>num_judges</code></td>
<td>integer</td>
<td>3</td>
<td>Number of judge models</td>
</tr>
<tr>
<td></td>
<td><code>scoring_criteria</code></td>
<td>array</td>
<td>[â€œaccuracyâ€, â€œcompletenessâ€, â€œclarityâ€]</td>
<td>Evaluation dimensions</td>
</tr>
<tr>
<td></td>
<td><code>aggregation</code></td>
<td>enum</td>
<td>â€œmeanâ€</td>
<td>Aggregation: mean, median, weighted</td>
</tr>
<tr>
<td><strong>G_EVAL</strong></td>
<td><code>dimensions</code></td>
<td>array</td>
<td>[â€œcoherenceâ€, â€œconsistencyâ€, â€œfluencyâ€, â€œrelevanceâ€]</td>
<td>G-Eval dimensions</td>
</tr>
<tr>
<td></td>
<td><code>use_cot</code></td>
<td>boolean</td>
<td>true</td>
<td>Chain-of-thought scoring</td>
</tr>
<tr>
<td></td>
<td><code>score_range</code></td>
<td>array</td>
<td>[1, 5]</td>
<td>Score min/max</td>
</tr>
<tr>
<td><strong>PAIRWISE_PREFER</strong></td>
<td><code>comparison_criteria</code></td>
<td>array</td>
<td>[â€œqualityâ€, â€œaccuracyâ€, â€œhelpfulnessâ€]</td>
<td>Comparison dimensions</td>
</tr>
<tr>
<td></td>
<td><code>allow_tie</code></td>
<td>boolean</td>
<td>true</td>
<td>Allow tie verdicts</td>
</tr>
<tr>
<td><strong>SELFCHECK_GPT</strong></td>
<td><code>sample_count</code></td>
<td>integer</td>
<td>5</td>
<td>Consistency check samples</td>
</tr>
<tr>
<td></td>
<td><code>check_type</code></td>
<td>enum</td>
<td>â€œconsistencyâ€</td>
<td>Check type: consistency, bertscore, nli</td>
</tr>
<tr>
<td></td>
<td><code>threshold</code></td>
<td>number</td>
<td>0.7</td>
<td>Inconsistency threshold</td>
</tr>
</tbody>
</table>
<h4 id="hallucination-detection-methods">Hallucination Detection Methods</h4>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 23%" />
<col style="width: 12%" />
<col style="width: 19%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th>Method</th>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>MULTI_HALLUC</strong></td>
<td><code>methods</code></td>
<td>array</td>
<td>[â€œconsistencyâ€, â€œattributionâ€, â€œsemantic_entropyâ€]</td>
<td>Detection methods</td>
</tr>
<tr>
<td></td>
<td><code>aggregation</code></td>
<td>enum</td>
<td>â€œweightedâ€</td>
<td>weighted, majority, any</td>
</tr>
<tr>
<td></td>
<td><code>flag_threshold</code></td>
<td>number</td>
<td>0.6</td>
<td>Flag as hallucination above</td>
</tr>
<tr>
<td><strong>METAQA</strong></td>
<td><code>transformations</code></td>
<td>array</td>
<td>[â€œparaphraseâ€, â€œnegationâ€, â€œentity_swapâ€]</td>
<td>Mutation types</td>
</tr>
<tr>
<td></td>
<td><code>num_mutations</code></td>
<td>integer</td>
<td>3</td>
<td>Mutations per claim</td>
</tr>
<tr>
<td></td>
<td><code>consistency_threshold</code></td>
<td>number</td>
<td>0.8</td>
<td>Consistency threshold</td>
</tr>
<tr>
<td><strong>FACTUAL_GROUND</strong></td>
<td><code>retrieval_top_k</code></td>
<td>integer</td>
<td>5</td>
<td>Documents to retrieve</td>
</tr>
<tr>
<td></td>
<td><code>evidence_threshold</code></td>
<td>number</td>
<td>0.7</td>
<td>Evidence support threshold</td>
</tr>
<tr>
<td></td>
<td><code>require_explicit_support</code></td>
<td>boolean</td>
<td>true</td>
<td>Require explicit evidence</td>
</tr>
</tbody>
</table>
<h4 id="human-in-the-loop-methods">Human-in-the-Loop Methods</h4>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 23%" />
<col style="width: 12%" />
<col style="width: 19%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th>Method</th>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>HITL_REVIEW</strong></td>
<td><code>confidence_threshold</code></td>
<td>number</td>
<td>0.7</td>
<td>Route to human below this</td>
</tr>
<tr>
<td></td>
<td><code>stake_level</code></td>
<td>enum</td>
<td>â€œmediumâ€</td>
<td>low, medium, high, critical</td>
</tr>
<tr>
<td></td>
<td><code>auto_approve_above</code></td>
<td>number</td>
<td>0.95</td>
<td>Auto-approve above this confidence</td>
</tr>
<tr>
<td></td>
<td><code>queue_priority</code></td>
<td>enum</td>
<td>â€œfifoâ€</td>
<td>Queue ordering</td>
</tr>
<tr>
<td><strong>TIERED_EVAL</strong></td>
<td><code>tiers</code></td>
<td>integer</td>
<td>3</td>
<td>Evaluation tiers</td>
</tr>
<tr>
<td></td>
<td><code>auto_tier_threshold</code></td>
<td>number</td>
<td>0.85</td>
<td>Auto-approve threshold</td>
</tr>
<tr>
<td></td>
<td><code>escalation_criteria</code></td>
<td>array</td>
<td>[â€œlow_confidenceâ€, â€œhigh_stakesâ€]</td>
<td>When to escalate</td>
</tr>
<tr>
<td><strong>ACTIVE_SAMPLE</strong></td>
<td><code>uncertainty_method</code></td>
<td>enum</td>
<td>â€œentropyâ€</td>
<td>entropy, margin, random</td>
</tr>
<tr>
<td></td>
<td><code>batch_size</code></td>
<td>integer</td>
<td>10</td>
<td>Samples per batch</td>
</tr>
<tr>
<td></td>
<td><code>diversity_weight</code></td>
<td>number</td>
<td>0.3</td>
<td>Diversity in selection</td>
</tr>
</tbody>
</table>
<h3 id="user-workflow-template-parameter-overrides">34.6 User Workflow Template Parameter Overrides</h3>
<p>When users create workflow templates, they can override default parameters for each step:</p>
<pre class="typescript"><code>// Example: User template with parameter overrides
{
  &quot;templateName&quot;: &quot;High-Confidence Research&quot;,
  &quot;steps&quot;: [
    {
      &quot;stepOrder&quot;: 1,
      &quot;methodCode&quot;: &quot;SEMANTIC_ENTROPY&quot;,
      &quot;parameters&quot;: {
        &quot;sample_count&quot;: 15,        // Override: more samples
        &quot;entropy_threshold&quot;: 0.3   // Override: stricter threshold
      }
    },
    {
      &quot;stepOrder&quot;: 2,
      &quot;methodCode&quot;: &quot;FRUGAL_CASCADE&quot;,
      &quot;parameters&quot;: {
        &quot;confidence_threshold&quot;: 0.95,  // Override: higher confidence
        &quot;max_escalations&quot;: 3           // Override: allow more escalation
      }
    }
  ]
}</code></pre>
<p><strong>Admin Dashboard</strong> (<code>Orchestration â†’ Methods</code>): - View and edit <strong>default parameters</strong> for all methods - Changes apply to all workflows using the method - System methods: parameters only, not method definition</p>
<p><strong>Think Tank UI</strong> (<code>Workflow Templates</code>): - Users create templates with <strong>parameter overrides</strong> - Overrides apply only to that template - Templates can be shared with team</p>
<h3 id="database-tables-15">34.7 Database Tables</h3>
<pre class="sql"><code>-- Methods with display/scientific names
ALTER TABLE orchestration_methods 
ADD COLUMN display_name VARCHAR(200),
ADD COLUMN scientific_name VARCHAR(300),
ADD COLUMN research_reference TEXT,
ADD COLUMN accuracy_improvement VARCHAR(200),
ADD COLUMN complexity_level VARCHAR(50);

-- User workflow templates
CREATE TABLE user_workflow_templates (
  template_id UUID PRIMARY KEY,
  tenant_id UUID NOT NULL,
  user_id UUID NOT NULL,
  template_name VARCHAR(200) NOT NULL,
  template_description TEXT,
  base_workflow_code VARCHAR(100),
  steps JSONB NOT NULL DEFAULT &#39;[]&#39;,
  category VARCHAR(100),
  tags TEXT[] DEFAULT &#39;{}&#39;,
  is_shared BOOLEAN DEFAULT false,
  times_used INTEGER DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(tenant_id, user_id, template_name)
);</code></pre>
<h3 id="implementation-files-2">34.7 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>migrations/066_orchestration_patterns_registry.sql</code></td>
<td>Base schema with <code>is_system_method</code>/<code>is_system_workflow</code></td>
</tr>
<tr>
<td><code>migrations/157_orchestration_methods_part1.sql</code></td>
<td>Schema updates, display/scientific names</td>
</tr>
<tr>
<td><code>migrations/157_orchestration_methods_part2.sql</code></td>
<td>Ensemble, verification methods</td>
</tr>
<tr>
<td><code>migrations/157_orchestration_methods_part3.sql</code></td>
<td>Uncertainty, routing, neural methods</td>
</tr>
<tr>
<td><code>lambda/shared/services/orchestration-methods.service.ts</code></td>
<td><strong>20 algorithm implementations</strong> including SE Probes, Kernel Entropy, Pareto, C3PO, AutoMix</td>
</tr>
<tr>
<td><code>lambda/shared/services/cato/neural-decision.service.ts</code></td>
<td>Cato Neural Decision Engine</td>
</tr>
<tr>
<td><code>lambda/admin/orchestration-methods.ts</code></td>
<td>Methods API with system method protection</td>
</tr>
<tr>
<td><code>lambda/admin/orchestration-user-templates.ts</code></td>
<td>User templates CRUD API</td>
</tr>
<tr>
<td><code>apps/admin-dashboard/app/(dashboard)/orchestration/methods/page.tsx</code></td>
<td>Admin method config with system badge</td>
</tr>
<tr>
<td><code>apps/admin-dashboard/app/(dashboard)/thinktank/workflow-templates/page.tsx</code></td>
<td>User templates UI</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="polymorphic-ui-prompt-41">35. Polymorphic UI (PROMPT-41)</h2>
<h3 id="overview-4">35.1 Overview</h3>
<p><strong>Flowise outputs Text. Think Tank outputs Applications.</strong></p>
<p>The Polymorphic UI system makes Think Tankâ€™s interface physically transform based on task complexity, domain hints, and drive profile. Unlike static chatbot interfaces, Think Tank morphs into the tool the user actually needs.</p>
<h3 id="the-gearbox-elastic-compute">35.2 The Gearbox (Elastic Compute)</h3>
<p>Users can manually control the cost-quality tradeoff via the Gearbox:</p>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 31%" />
<col style="width: 18%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr>
<th>Mode</th>
<th>Cost</th>
<th>Architecture</th>
<th>Memory</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ğŸ¯ Sniper</strong></td>
<td>$0.01/run</td>
<td>Single Model</td>
<td>Read-Only Ghost Memory</td>
<td>Quick answers, lookups, coding</td>
</tr>
<tr>
<td><strong>ğŸ›ï¸ War Room</strong></td>
<td>$0.50+/run</td>
<td>Multi-Agent Ensemble</td>
<td>Read/Write + Active Inference</td>
<td>Strategy, audits, reasoning</td>
</tr>
</tbody>
</table>
<p><strong>Escalation</strong>: A green â€œEscalate to War Roomâ€ button appears after Sniper responses.</p>
<h3 id="the-three-views">35.3 The Three Views</h3>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 23%" />
<col style="width: 20%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr>
<th>View</th>
<th>Intent</th>
<th>Morph</th>
<th>Key Feature</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ğŸ¯ Sniper</strong></td>
<td>Quick commands</td>
<td>Terminal/Command Center</td>
<td>Green badge, cost transparency, immediate execution</td>
</tr>
<tr>
<td><strong>ğŸ”­ Scout</strong></td>
<td>Research &amp; exploration</td>
<td>Infinite Canvas/Mind Map</td>
<td>Sticky notes, topic clustering, conflict lines</td>
</tr>
<tr>
<td><strong>ğŸ“œ Sage</strong></td>
<td>Audit &amp; validation</td>
<td>Split-Screen Diff Editor</td>
<td>Left=content, Right=sources with confidence scores</td>
</tr>
</tbody>
</table>
<h3 id="view-types">35.4 View Types</h3>
<table style="width:100%;">
<colgroup>
<col style="width: 33%" />
<col style="width: 27%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr>
<th>View Type</th>
<th>Trigger</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>terminal_simple</code></td>
<td>Quick commands, lookups</td>
<td>Command Center - fast execution</td>
</tr>
<tr>
<td><code>mindmap</code></td>
<td>Research, exploration</td>
<td>Infinite Canvas - visual mapping</td>
</tr>
<tr>
<td><code>diff_editor</code></td>
<td>Verification, compliance</td>
<td>Split-Screen - source validation</td>
</tr>
<tr>
<td><code>dashboard</code></td>
<td>Analytics queries</td>
<td>Metrics visualization</td>
</tr>
<tr>
<td><code>decision_cards</code></td>
<td>HITL escalation</td>
<td>Mission Control interface</td>
</tr>
<tr>
<td><code>chat</code></td>
<td>Default</td>
<td>Standard conversation</td>
</tr>
</tbody>
</table>
<h3 id="configuration-7">35.5 Configuration</h3>
<p>Access via <strong>Think Tank â†’ Polymorphic UI</strong> in admin dashboard.</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 41%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enableAutoMorphing</code></td>
<td>Auto-morph based on query</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>enableGearboxToggle</code></td>
<td>Show Sniper/War Room toggle</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>enableCostDisplay</code></td>
<td>Show cost badges</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>enableEscalationButton</code></td>
<td>Show Escalate button</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>defaultExecutionMode</code></td>
<td>Default mode</td>
<td><code>sniper</code></td>
</tr>
<tr>
<td><code>domainViewOverrides</code></td>
<td>Per-domain view mapping</td>
<td>medical/financial/legal â†’ <code>diff_editor</code></td>
</tr>
</tbody>
</table>
<h3 id="implementation-files-3">35.6 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>governor/economic-governor.ts</code></td>
<td><code>determineViewType()</code>, <code>determinePolymorphicRoute()</code></td>
</tr>
<tr>
<td><code>consciousness/mcp-server.ts</code></td>
<td><code>render_interface</code>, <code>escalate_to_war_room</code> tools</td>
</tr>
<tr>
<td><code>python/cato/cognitive/workflows.py</code></td>
<td>Flyte tasks for view selection</td>
</tr>
<tr>
<td><code>migrations/160_polymorphic_ui.sql</code></td>
<td>Database schema</td>
</tr>
<tr>
<td><code>components/thinktank/polymorphic/</code></td>
<td>React view components</td>
</tr>
<tr>
<td><code>app/(dashboard)/thinktank/polymorphic/page.tsx</code></td>
<td>Admin page</td>
</tr>
</tbody>
</table>
<h3 id="database-tables-16">35.7 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>view_state_history</code></td>
<td>Tracks UI morphing decisions</td>
</tr>
<tr>
<td><code>execution_escalations</code></td>
<td>Tracks Sniper â†’ War Room escalations</td>
</tr>
<tr>
<td><code>polymorphic_config</code></td>
<td>Per-tenant configuration</td>
</tr>
</tbody>
</table>
<h3 id="api-endpoints-7">35.8 API Endpoints</h3>
<p>Base: <code>/api/admin/polymorphic</code></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/?action=config</code></td>
<td>Get configuration</td>
</tr>
<tr>
<td>GET</td>
<td><code>/?action=view-history</code></td>
<td>Get view state history</td>
</tr>
<tr>
<td>GET</td>
<td><code>/?action=escalations</code></td>
<td>Get escalation history</td>
</tr>
<tr>
<td>GET</td>
<td><code>/?action=analytics</code></td>
<td>Get usage analytics</td>
</tr>
<tr>
<td>POST</td>
<td><code>/</code> (action: render)</td>
<td>Render specific view</td>
</tr>
<tr>
<td>POST</td>
<td><code>/</code> (action: escalate)</td>
<td>Escalate to War Room</td>
</tr>
<tr>
<td>POST</td>
<td><code>/</code> (action: update-config)</td>
<td>Update configuration</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="think-tank-policy-framework-strategic-intelligence">36. Think Tank Policy Framework: Strategic Intelligence</h2>
<p>The Think Tank is not merely a chatbot interfaceâ€”it is a <strong>policy research engine</strong> informed by rigorous analysis from organizations like the Cato Institute. This section documents the strategic framework that underlies Think Tankâ€™s approach to technology policy, regulation, and economic analysis.</p>
<h3 id="the-cato-institute-policy-foundation">36.1 The Cato Institute Policy Foundation</h3>
<p>The Cato Institute, a renowned policy think tank, provides crucial insights on technology regulation and innovation. Think Tank integrates these perspectives to ensure users receive balanced, evidence-based analysis rather than ideologically-driven conclusions.</p>
<h4 id="core-policy-principles">Core Policy Principles</h4>
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 26%" />
<col style="width: 52%" />
</colgroup>
<thead>
<tr>
<th>Principle</th>
<th>Description</th>
<th>Application in Think Tank</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Pro-Innovation Default</strong></td>
<td>Permissionless innovation should be the norm</td>
<td>Bias toward â€œhow can this work?â€ not â€œwhy wonâ€™t this work?â€</td>
</tr>
<tr>
<td><strong>Evidence-Based Analysis</strong></td>
<td>Policy must be grounded in data, not fear</td>
<td>Require citations and data sources in policy discussions</td>
</tr>
<tr>
<td><strong>Regulatory Humility</strong></td>
<td>Acknowledge limits of prediction</td>
<td>Flag uncertainty explicitly; avoid overconfident prescriptions</td>
</tr>
<tr>
<td><strong>Market-Based Solutions</strong></td>
<td>Private sector often innovates faster than regulators</td>
<td>Explore voluntary standards before mandates</td>
</tr>
<tr>
<td><strong>Individual Liberty</strong></td>
<td>Technology should enhance freedom, not surveillance</td>
<td>Privacy-by-design; minimize data collection</td>
</tr>
</tbody>
</table>
<h3 id="the-10-trillion-cybercrime-economy">36.2 The $10 Trillion Cybercrime Economy</h3>
<p>A critical context for Think Tankâ€™s policy analysis is the scale of the threat environment. The global economy loses approximately <strong>$10 trillion annually</strong> to cybercrimeâ€”a figure larger than the GDP of every country except the United States and China.</p>
<h4 id="economic-impact-analysis">Economic Impact Analysis</h4>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GLOBAL CYBERCRIME ECONOMIC IMPACT                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   ANNUAL LOSSES: ~$10 TRILLION                                               â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                                                      â”‚  â”‚
â”‚   â”‚   $10T â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CYBERCRIME    â”‚  â”‚
â”‚   â”‚                                                                      â”‚  â”‚
â”‚   â”‚   $4.2T â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ GERMANY GDP                         â”‚  â”‚
â”‚   â”‚                                                                      â”‚  â”‚
â”‚   â”‚   $3.4T â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ JAPAN GDP                              â”‚  â”‚
â”‚   â”‚                                                                      â”‚  â”‚
â”‚   â”‚   $2.1T â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ UK GDP                                       â”‚  â”‚
â”‚   â”‚                                                                      â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â”‚   BREAKDOWN BY ATTACK TYPE:                                                  â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚   â€¢ Ransomware: $20B+ annually                                              â”‚
â”‚   â€¢ Business Email Compromise: $2.7B annually                               â”‚
â”‚   â€¢ Data Breaches: $4.45M average cost per incident                        â”‚
â”‚   â€¢ Supply Chain Attacks: Growing 742% since 2019                          â”‚
â”‚   â€¢ Nation-State Attacks: Incalculable strategic damage                    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h4 id="implications-for-policy-discussion">Implications for Policy Discussion</h4>
<p>When users ask Think Tank about cybersecurity policy, the system contextualizes recommendations against this $10T backdrop:</p>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr>
<th>User Query</th>
<th>Policy-Aware Response Approach</th>
</tr>
</thead>
<tbody>
<tr>
<td>â€œShould we regulate AI?â€</td>
<td>Frame against: AI can <em>reduce</em> $10T losses if deployed correctly</td>
</tr>
<tr>
<td>â€œIs this security spending justified?â€</td>
<td>Compare against: Your $1M security budget vs.Â $4.45M average breach cost</td>
</tr>
<tr>
<td>â€œShould we ban ransomware payments?â€</td>
<td>Analyze: Prohibition vs.Â harm reduction strategies</td>
</tr>
<tr>
<td>â€œHow strict should compliance be?â€</td>
<td>Balance: Compliance costs vs.Â breach probability Ã— impact</td>
</tr>
</tbody>
</table>
<h3 id="memory-safety-and-the-70-problem">36.3 Memory Safety and the 70% Problem</h3>
<p>The Think Tank injects a specific technical insight into relevant conversations: <strong>70% of all software vulnerabilities</strong> stem from memory safety issues. This statistic, validated by Microsoft, Google, and the NSA, should inform every software architecture discussion.</p>
<h4 id="memory-safety-vulnerability-classes">Memory Safety Vulnerability Classes</h4>
<table>
<thead>
<tr>
<th>Vulnerability</th>
<th>Description</th>
<th>% of CVEs</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Buffer Overflow</strong></td>
<td>Writing beyond allocated memory</td>
<td>~30%</td>
</tr>
<tr>
<td><strong>Use-After-Free</strong></td>
<td>Accessing freed memory</td>
<td>~20%</td>
</tr>
<tr>
<td><strong>Double Free</strong></td>
<td>Freeing memory twice</td>
<td>~8%</td>
</tr>
<tr>
<td><strong>Null Pointer Dereference</strong></td>
<td>Accessing null pointers</td>
<td>~7%</td>
</tr>
<tr>
<td><strong>Integer Overflow</strong></td>
<td>Arithmetic exceeding bounds</td>
<td>~5%</td>
</tr>
<tr>
<td><strong>Total Memory Safety</strong></td>
<td>All memory-related issues</td>
<td><strong>~70%</strong></td>
</tr>
</tbody>
</table>
<h4 id="policy-recommendation-engine">Policy Recommendation Engine</h4>
<p>When users discuss software architecture, security, or procurement, Think Tank can inject policy-informed guidance:</p>
<pre class="typescript"><code>// Policy injection for memory safety discussions
const MEMORY_SAFETY_POLICY = {
  context: &#39;User discussing software architecture or security&#39;,
  
  injectedGuidance: `
    POLICY CONTEXT: Memory safety vulnerabilities account for 70% of all CVEs.
    
    RECOMMENDATIONS:
    1. For new projects: Prefer memory-safe languages (Rust, Go, Swift)
    2. For existing C/C++ code: Consider incremental migration or sandboxing
    3. For procurement: Require memory-safe language attestation from vendors
    4. For risk assessment: Memory-unsafe components = higher risk weight
    
    SOURCE: Microsoft, Google, NSA research (2019-2024)
  `,
  
  triggerPatterns: [
    &#39;architecture&#39;, &#39;security&#39;, &#39;language choice&#39;, &#39;procurement&#39;,
    &#39;vulnerability&#39;, &#39;CVE&#39;, &#39;buffer overflow&#39;, &#39;memory&#39;
  ],
};</code></pre>
<h3 id="regulatory-stance-configuration">36.4 Regulatory Stance Configuration</h3>
<p>Administrators can configure Think Tankâ€™s default policy stance for their organization:</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Options</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>defaultRegulatorystance</code></td>
<td><code>cautious</code> / <code>balanced</code> / <code>pro_innovation</code></td>
<td>Bias in regulatory discussions</td>
</tr>
<tr>
<td><code>requireCitations</code></td>
<td><code>true</code> / <code>false</code></td>
<td>Require sources for policy claims</td>
</tr>
<tr>
<td><code>flagUncertainty</code></td>
<td><code>always</code> / <code>when_high</code> / <code>never</code></td>
<td>Uncertainty disclosure level</td>
</tr>
<tr>
<td><code>privateDataBias</code></td>
<td><code>minimize</code> / <code>balanced</code> / <code>maximize_utility</code></td>
<td>Data collection philosophy</td>
</tr>
<tr>
<td><code>complianceEmphasis</code></td>
<td><code>strict</code> / <code>risk_based</code> / <code>minimal</code></td>
<td>Compliance recommendation style</td>
</tr>
</tbody>
</table>
<h4 id="configuration-example">Configuration Example</h4>
<p>Navigate to <strong>Think Tank â†’ Policy Framework</strong> in admin dashboard:</p>
<pre class="yaml"><code># policy-framework.config.yaml
policy_framework:
  enabled: true
  
  default_stance: balanced
  
  cybercrime_context:
    enabled: true
    inject_10T_context: true
    inject_memory_safety_context: true
    
  citation_requirements:
    require_for_policy_claims: true
    preferred_sources:
      - cato_institute
      - brookings
      - nist
      - academic_peer_reviewed
    flag_opinion_vs_fact: true
    
  uncertainty_handling:
    disclosure_level: always
    confidence_threshold_for_recommendation: 0.7
    escalate_low_confidence_to_human: true
    
  privacy_settings:
    default_data_collection: minimize
    require_purpose_limitation: true
    support_right_to_deletion: true</code></pre>
<h3 id="database-tables-17">36.5 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>policy_framework_config</code></td>
<td>Per-tenant policy configuration</td>
</tr>
<tr>
<td><code>policy_citation_log</code></td>
<td>Citations used in policy discussions</td>
</tr>
<tr>
<td><code>policy_uncertainty_flags</code></td>
<td>Uncertainty disclosures</td>
</tr>
<tr>
<td><code>regulatory_stance_overrides</code></td>
<td>Per-domain stance overrides</td>
</tr>
</tbody>
</table>
<h3 id="implementation-files-4">36.6 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lambda/shared/services/policy-framework.service.ts</code></td>
<td>Policy context injection</td>
</tr>
<tr>
<td><code>lambda/shared/services/citation-manager.service.ts</code></td>
<td>Citation tracking and validation</td>
</tr>
<tr>
<td><code>lambda/thinktank/policy-context.ts</code></td>
<td>API handler for policy queries</td>
</tr>
<tr>
<td><code>migrations/164_policy_framework.sql</code></td>
<td>Database schema</td>
</tr>
<tr>
<td><code>config/policy/cato-principles.yaml</code></td>
<td>Cato Institute policy principles</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="agentic-orchestration-ssf-caep-and-identity-remediation">37. Agentic Orchestration: SSF, CAEP, and Identity Remediation</h2>
<p>Think Tankâ€™s AI agents operate within a rigorous security framework that leverages open standards for real-time security signaling. This section documents the Shared Signals Framework (SSF) and Continuous Access Evaluation Profile (CAEP) integration specific to Think Tank operations.</p>
<h3 id="the-agentic-ai-paradigm">37.1 The Agentic AI Paradigm</h3>
<p>Traditional automation follows rigid if-then rules. <strong>Agentic AI</strong> represents a fundamental shift: AI systems that continuously evaluate their environment, learn from outcomes, and adapt their behavior within defined safety constraints.</p>
<h4 id="traditional-automation-vs.-agentic-ai">Traditional Automation vs.Â Agentic AI</h4>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Traditional Automation</th>
<th>Agentic AI (Think Tank)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Decision Logic</strong></td>
<td>Static rules</td>
<td>Dynamic evaluation</td>
</tr>
<tr>
<td><strong>Learning</strong></td>
<td>None</td>
<td>Continuous adaptation</td>
</tr>
<tr>
<td><strong>Error Handling</strong></td>
<td>Fail or retry</td>
<td>Investigate and adapt</td>
</tr>
<tr>
<td><strong>Human Interaction</strong></td>
<td>Scheduled checkpoints</td>
<td>On-demand escalation</td>
</tr>
<tr>
<td><strong>Security Model</strong></td>
<td>Perimeter-based</td>
<td>Zero Trust + CAEP</td>
</tr>
</tbody>
</table>
<h3 id="shared-signals-framework-ssf-integration">37.2 Shared Signals Framework (SSF) Integration</h3>
<p>The <strong>Shared Signals Framework</strong> is an open standard that enables real-time security event sharing between systems. Think Tank agents both emit and consume SSF signals.</p>
<h4 id="ssf-event-flow-in-think-tank">SSF Event Flow in Think Tank</h4>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    THINK TANK SSF EVENT ARCHITECTURE                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   SIGNAL EMITTERS (Think Tank generates)                                    â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                    â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚ User Behavior   â”‚  â”‚ Content Safety  â”‚  â”‚ Agent Activity  â”‚            â”‚
â”‚   â”‚ Anomaly         â”‚  â”‚ Violation       â”‚  â”‚ Escalation      â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚            â”‚                    â”‚                    â”‚                      â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                 â”‚                                           â”‚
â”‚                                 â–¼                                           â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                    â”‚    SSF TRANSMITTER      â”‚                             â”‚
â”‚                    â”‚  (Think Tank â†’ Cato)    â”‚                             â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                 â”‚                                           â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚                                 â”‚                                           â”‚
â”‚                                 â–¼                                           â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                    â”‚    SSF RECEIVER         â”‚                             â”‚
â”‚                    â”‚  (Cato â†’ Think Tank)    â”‚                             â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                 â”‚                                           â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚            â”‚                    â”‚                    â”‚                      â”‚
â”‚            â–¼                    â–¼                    â–¼                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚ Session Revoke  â”‚  â”‚ Threat Detected â”‚  â”‚ Genesis Alert   â”‚            â”‚
â”‚   â”‚ â†’ Terminate     â”‚  â”‚ â†’ Restrict      â”‚  â”‚ â†’ Pause Agents  â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h4 id="ssf-events-emitted-by-think-tank">SSF Events Emitted by Think Tank</h4>
<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 23%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr>
<th>Event Type</th>
<th>Trigger</th>
<th>Recipient Action</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>thinktank.behavior.anomaly</code></td>
<td>User behavior deviates significantly from baseline</td>
<td>Cato increases monitoring</td>
</tr>
<tr>
<td><code>thinktank.content.violation</code></td>
<td>User attempts prohibited content</td>
<td>Identity provider notified</td>
</tr>
<tr>
<td><code>thinktank.agent.escalation</code></td>
<td>Agent requires human approval</td>
<td>Mission Control alerted</td>
</tr>
<tr>
<td><code>thinktank.session.suspicious</code></td>
<td>Multiple failed attempts or unusual patterns</td>
<td>Cato may revoke session</td>
</tr>
<tr>
<td><code>thinktank.data.exfiltration_attempt</code></td>
<td>Suspected data extraction attempt</td>
<td>Block and investigate</td>
</tr>
</tbody>
</table>
<h4 id="ssf-events-consumed-by-think-tank">SSF Events Consumed by Think Tank</h4>
<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 20%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr>
<th>Event Type</th>
<th>Source</th>
<th>Think Tank Action</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>session-revoked</code></td>
<td>Identity Provider</td>
<td>Immediately terminate user session</td>
</tr>
<tr>
<td><code>credential-change</code></td>
<td>Identity Provider</td>
<td>Force re-authentication</td>
</tr>
<tr>
<td><code>threat-detected</code></td>
<td>Cato SASE</td>
<td>Restrict agent capabilities</td>
</tr>
<tr>
<td><code>genesis.alert</code></td>
<td>Genesis Reactor</td>
<td>Pause all non-critical agents</td>
</tr>
<tr>
<td><code>device-compliance-change</code></td>
<td>MDM/EDR</td>
<td>Re-evaluate user permissions</td>
</tr>
</tbody>
</table>
<h3 id="continuous-access-evaluation-profile-caep">37.3 Continuous Access Evaluation Profile (CAEP)</h3>
<p><strong>CAEP</strong> extends SSF with specific event types designed for continuous session validation. Unlike traditional session timeouts, CAEP enables <strong>real-time session adjustment</strong> based on security signals.</p>
<h4 id="caep-session-lifecycle">CAEP Session Lifecycle</h4>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CAEP SESSION LIFECYCLE IN THINK TANK                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   1. SESSION START                                                           â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚      â”‚ User authenticates â†’ Session created â†’ CAEP listener registered  â”‚   â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   2. CONTINUOUS EVALUATION (every CAEP event)                               â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚      â”‚                                                                   â”‚   â”‚
â”‚      â”‚   CAEP Event Received â†’ Evaluate Impact â†’ Adjust Session         â”‚   â”‚
â”‚      â”‚                                                                   â”‚   â”‚
â”‚      â”‚   Example: IP Change                                             â”‚   â”‚
â”‚      â”‚   â”œâ”€ Same country? â†’ Log only                                    â”‚   â”‚
â”‚      â”‚   â”œâ”€ Different country? â†’ Step-up authentication                 â”‚   â”‚
â”‚      â”‚   â””â”€ Impossible travel? â†’ Terminate session                      â”‚   â”‚
â”‚      â”‚                                                                   â”‚   â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚   3. SESSION TERMINATION                                                     â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚      â”‚ CAEP revoke signal OR user logout OR timeout â†’ Clean termination â”‚   â”‚
â”‚      â”‚ â†’ Preserve conversation state â†’ Clear credentials â†’ Audit log    â”‚   â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h4 id="caep-configuration-for-think-tank">CAEP Configuration for Think Tank</h4>
<pre class="yaml"><code># caep-thinktank.config.yaml
caep:
  enabled: true
  
  session_management:
    # How to handle IP changes
    ip_change_policy:
      same_country: log_only
      different_country: step_up_auth
      impossible_travel: terminate_session
      impossible_travel_threshold_hours: 2
    
    # How to handle device changes
    device_change_policy:
      known_device: allow
      unknown_device_trusted_location: step_up_auth
      unknown_device_unknown_location: terminate_session
    
    # How to handle credential events
    credential_change_policy:
      password_change: force_reauth
      mfa_change: force_reauth
      role_change: re_evaluate_permissions
  
  agent_restrictions:
    # During security events, restrict agent capabilities
    during_threat_detected:
      disable_autonomous_actions: true
      disable_external_api_calls: true
      require_human_approval_all: true
      
    during_genesis_alert:
      pause_all_agents: true
      preserve_state: true
      notify_administrators: true</code></pre>
<h3 id="autonomous-identity-remediation">37.4 Autonomous Identity Remediation</h3>
<p>Think Tank agents can perform <strong>autonomous identity remediation</strong>â€”cleaning up identity data quality issues without human intervention. This capability requires careful configuration to balance efficiency with safety.</p>
<h4 id="remediation-capabilities">Remediation Capabilities</h4>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 39%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr>
<th>Action</th>
<th>Autonomous?</th>
<th>Conditions</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Remove Orphan Account</strong></td>
<td>Yes</td>
<td>Inactive 90+ days, no entitlements, no recent auth</td>
</tr>
<tr>
<td><strong>Disable Stale Service Account</strong></td>
<td>Yes</td>
<td>Unused 180+ days, not in critical systems</td>
</tr>
<tr>
<td><strong>Fix Group Membership Inconsistency</strong></td>
<td>Yes</td>
<td>Source of truth mismatch detected</td>
</tr>
<tr>
<td><strong>Delete Human Account</strong></td>
<td><strong>No</strong></td>
<td>Always requires human approval</td>
</tr>
<tr>
<td><strong>Revoke Admin Privileges</strong></td>
<td><strong>No</strong></td>
<td>Always requires human approval</td>
</tr>
<tr>
<td><strong>Bulk Operations (100+)</strong></td>
<td><strong>No</strong></td>
<td>Always requires human approval</td>
</tr>
</tbody>
</table>
<h4 id="remediation-workflow">Remediation Workflow</h4>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AUTONOMOUS REMEDIATION WORKFLOW                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   1. DETECTION                                                               â”‚
â”‚      Agent scans Identity Fabric for anomalies                              â”‚
â”‚      â”œâ”€ Orphan accounts (no manager, no recent activity)                    â”‚
â”‚      â”œâ”€ Stale service accounts (unused beyond threshold)                    â”‚
â”‚      â””â”€ Inconsistent group memberships (source mismatch)                    â”‚
â”‚                                                                              â”‚
â”‚   2. VALIDATION                                                              â”‚
â”‚      â”œâ”€ Verify anomaly against multiple data sources                        â”‚
â”‚      â”œâ”€ Check against exclusion lists (VIPs, system accounts)              â”‚
â”‚      â”œâ”€ Confirm remediation action is within autonomous scope              â”‚
â”‚      â””â”€ Verify Genesis Interlock allows action (no active alerts)          â”‚
â”‚                                                                              â”‚
â”‚   3. EXECUTION                                                               â”‚
â”‚      â”œâ”€ If autonomous: Execute immediately, log action                      â”‚
â”‚      â””â”€ If requires approval: Create Mission Control escalation            â”‚
â”‚                                                                              â”‚
â”‚   4. VERIFICATION                                                            â”‚
â”‚      â”œâ”€ Confirm action completed successfully                               â”‚
â”‚      â”œâ”€ Verify no unintended side effects                                  â”‚
â”‚      â””â”€ Update remediation statistics                                       â”‚
â”‚                                                                              â”‚
â”‚   5. LEARNING                                                                â”‚
â”‚      â”œâ”€ If action succeeded: Reinforce pattern                             â”‚
â”‚      â””â”€ If action failed or reversed: Flag for human review                â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h4 id="remediation-configuration">Remediation Configuration</h4>
<p>Navigate to <strong>Think Tank â†’ Identity â†’ Remediation</strong> in admin dashboard:</p>
<pre class="yaml"><code># identity-remediation-thinktank.config.yaml
identity_remediation:
  enabled: true
  
  # Autonomous action limits
  autonomous_limits:
    max_per_hour: 50
    max_per_day: 200
    cooldown_after_error_minutes: 30
    
  # Detection criteria
  detection:
    orphan_account:
      inactive_days_threshold: 90
      require_no_entitlements: true
      require_no_recent_auth: true
      exclude_patterns:
        - &quot;*-system@*&quot;
        - &quot;*-service@*&quot;
        - &quot;admin@*&quot;
        
    stale_service_account:
      unused_days_threshold: 180
      exclude_critical_systems: true
      critical_system_tags:
        - genesis
        - security
        - auth
        
    group_membership:
      check_source_of_truth: true
      sources:
        - active_directory
        - scim_provider
        - hr_system
  
  # Notification settings
  notifications:
    notify_on_autonomous_action: true
    notify_recipients:
      - security_team
      - identity_admins
    daily_summary: true
    
  # Genesis Interlock integration
  genesis_interlock:
    pause_during: [GEN-300, GEN-400, GEN-500]
    resume_automatically: true</code></pre>
<h3 id="the-radiant-ghost-in-think-tank">37.5 The Radiant Ghost in Think Tank</h3>
<p>The <strong>Radiant Ghost</strong> metaphor extends to Think Tankâ€™s user interface, providing visual feedback about agent activity.</p>
<h4 id="ghost-states-in-think-tank-ui">Ghost States in Think Tank UI</h4>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 27%" />
<col style="width: 22%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr>
<th>State</th>
<th>Indicator</th>
<th>Meaning</th>
<th>User Action</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Idle</strong></td>
<td>Faint outline</td>
<td>No active agents</td>
<td>None</td>
</tr>
<tr>
<td><strong>Thinking</strong></td>
<td>Soft pulse</td>
<td>Agent processing request</td>
<td>Wait</td>
</tr>
<tr>
<td><strong>Researching</strong></td>
<td>Searching animation</td>
<td>Agent gathering information</td>
<td>Wait</td>
</tr>
<tr>
<td><strong>Writing</strong></td>
<td>Typing animation</td>
<td>Agent generating response</td>
<td>Watch</td>
</tr>
<tr>
<td><strong>Validating</strong></td>
<td>Checkmark animation</td>
<td>Agent verifying output</td>
<td>Wait</td>
</tr>
<tr>
<td><strong>Escalating</strong></td>
<td>Orange pulse</td>
<td>Agent needs human input</td>
<td>Respond</td>
</tr>
<tr>
<td><strong>Alert</strong></td>
<td>Red pulse</td>
<td>Security or safety event</td>
<td>Investigate</td>
</tr>
</tbody>
</table>
<h4 id="ghost-configuration">Ghost Configuration</h4>
<pre class="yaml"><code># ghost-ui.config.yaml
ghost_ui:
  enabled: true
  
  # Visual settings
  visuals:
    idle_opacity: 0.3
    active_opacity: 0.8
    alert_opacity: 1.0
    animation_speed: normal  # slow, normal, fast
    
  # State display
  states:
    show_thinking: true
    show_researching: true
    show_writing: true
    show_validating: true
    show_escalating: true
    show_alert: true
    
  # Accessibility
  accessibility:
    respect_reduced_motion: true
    provide_text_status: true
    screen_reader_announcements: true</code></pre>
<h3 id="database-tables-18">37.6 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ssf_events_emitted</code></td>
<td>SSF events sent by Think Tank</td>
</tr>
<tr>
<td><code>ssf_events_received</code></td>
<td>SSF events received by Think Tank</td>
</tr>
<tr>
<td><code>caep_session_events</code></td>
<td>CAEP session lifecycle events</td>
</tr>
<tr>
<td><code>identity_remediation_log</code></td>
<td>All remediation actions</td>
</tr>
<tr>
<td><code>identity_remediation_errors</code></td>
<td>Failed remediation attempts</td>
</tr>
<tr>
<td><code>ghost_state_log</code></td>
<td>Ghost UI state transitions</td>
</tr>
</tbody>
</table>
<h3 id="api-endpoints-8">37.7 API Endpoints</h3>
<p>Base: <code>/api/thinktank/security</code></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/ssf/status</code></td>
<td>SSF integration status</td>
</tr>
<tr>
<td>GET</td>
<td><code>/ssf/events</code></td>
<td>Recent SSF events</td>
</tr>
<tr>
<td>POST</td>
<td><code>/ssf/emit</code></td>
<td>Manually emit SSF event (admin only)</td>
</tr>
<tr>
<td>GET</td>
<td><code>/caep/session</code></td>
<td>Current session CAEP status</td>
</tr>
<tr>
<td>GET</td>
<td><code>/remediation/stats</code></td>
<td>Remediation statistics</td>
</tr>
<tr>
<td>GET</td>
<td><code>/remediation/log</code></td>
<td>Remediation action log</td>
</tr>
<tr>
<td>POST</td>
<td><code>/remediation/trigger</code></td>
<td>Trigger manual remediation scan</td>
</tr>
<tr>
<td>GET</td>
<td><code>/ghost/state</code></td>
<td>Current Ghost state</td>
</tr>
</tbody>
</table>
<h3 id="implementation-files-5">37.8 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lambda/shared/services/ssf-thinktank.service.ts</code></td>
<td>SSF emitter/receiver for Think Tank</td>
</tr>
<tr>
<td><code>lambda/shared/services/caep-session.service.ts</code></td>
<td>CAEP session management</td>
</tr>
<tr>
<td><code>lambda/shared/services/identity-remediation-thinktank.service.ts</code></td>
<td>Think Tank remediation agent</td>
</tr>
<tr>
<td><code>lambda/thinktank/security-events.ts</code></td>
<td>Security event API handler</td>
</tr>
<tr>
<td><code>components/thinktank/ghost-indicator.tsx</code></td>
<td>Ghost UI component</td>
</tr>
<tr>
<td><code>migrations/165_agentic_orchestration.sql</code></td>
<td>Database schema</td>
</tr>
<tr>
<td><code>config/security/ssf-events.yaml</code></td>
<td>SSF event definitions</td>
</tr>
<tr>
<td><code>config/security/caep-policies.yaml</code></td>
<td>CAEP policy configuration</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="advanced-features-v4.18.0">38. Advanced Features (v4.18.0)</h2>
<p>This section covers new advanced features implemented for Think Tank.</p>
<h3 id="flash-facts-knowledge-sparks">38.1 Flash Facts (Knowledge Sparks)</h3>
<p>Fast-access factual memory system for quick retrieval of verified facts.</p>
<p><strong>UI Metaphor: â€œKnowledge Sparksâ€</strong> - Contextual sidebar widget showing relevant facts as glowing spark icons.</p>
<p><strong>Features:</strong> - CRUD operations for facts with confidence scoring - Semantic search using vector embeddings - Automatic fact extraction from conversations - Fact verification workflow - Usage tracking and statistics</p>
<p><strong>API Endpoints (Base: <code>/api/thinktank/flash-facts</code>):</strong></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/</code></td>
<td>List facts with filtering</td>
</tr>
<tr>
<td>POST</td>
<td><code>/</code></td>
<td>Create a new fact</td>
</tr>
<tr>
<td>GET</td>
<td><code>/:id</code></td>
<td>Get a specific fact</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/:id</code></td>
<td>Update a fact</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/:id</code></td>
<td>Delete a fact</td>
</tr>
<tr>
<td>POST</td>
<td><code>/query</code></td>
<td>Semantic search for facts</td>
</tr>
<tr>
<td>POST</td>
<td><code>/extract</code></td>
<td>Extract facts from conversation</td>
</tr>
<tr>
<td>POST</td>
<td><code>/:id/verify</code></td>
<td>Verify a fact</td>
</tr>
<tr>
<td>GET</td>
<td><code>/stats</code></td>
<td>Get usage statistics</td>
</tr>
</tbody>
</table>
<p><strong>Database Tables:</strong> - <code>flash_facts</code> - Fact storage with embeddings - <code>flash_facts_config</code> - Per-tenant configuration</p>
<hr />
<h3 id="grimoire-spell-book">38.2 Grimoire (Spell Book)</h3>
<p>Procedural memory system for storing and executing reusable patterns.</p>
<p><strong>UI Metaphor: â€œSpell Bookâ€</strong> - Magical tome with spell cards organized by schools of magic.</p>
<p><strong>Schools of Magic:</strong> | School | Icon | Purpose | |â€”â€”â€“|â€”â€”|â€”â€”â€”| | Code | ğŸ’» | Programming patterns | | Data | ğŸ“Š | Data manipulation | | Text | ğŸ“ | Text processing | | Analysis | ğŸ” | Analytical methods | | Design | ğŸ¨ | UI/UX patterns | | Integration | ğŸ”— | API integrations | | Automation | âš™ï¸ | Workflow automation | | Universal | ğŸŒŸ | Cross-domain spells |</p>
<p><strong>Spell Categories:</strong> - Transformation, Divination, Conjuration, Abjuration - Enchantment, Illusion, Necromancy, Evocation</p>
<p><strong>API Endpoints (Base: <code>/api/thinktank/grimoire</code>):</strong></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/</code></td>
<td>Get grimoire overview</td>
</tr>
<tr>
<td>GET</td>
<td><code>/spells</code></td>
<td>List all spells</td>
</tr>
<tr>
<td>POST</td>
<td><code>/spells</code></td>
<td>Create a new spell</td>
</tr>
<tr>
<td>GET</td>
<td><code>/spells/:id</code></td>
<td>Get spell details</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/spells/:id</code></td>
<td>Update a spell</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/spells/:id</code></td>
<td>Delete a spell</td>
</tr>
<tr>
<td>POST</td>
<td><code>/spells/:id/cast</code></td>
<td>Cast a spell</td>
</tr>
<tr>
<td>POST</td>
<td><code>/spells/:id/learn</code></td>
<td>Learn from failure</td>
</tr>
<tr>
<td>GET</td>
<td><code>/schools</code></td>
<td>Get schools of magic</td>
</tr>
<tr>
<td>GET</td>
<td><code>/categories</code></td>
<td>Get spell categories</td>
</tr>
<tr>
<td>POST</td>
<td><code>/match</code></td>
<td>Find matching spell</td>
</tr>
<tr>
<td>POST</td>
<td><code>/promote</code></td>
<td>Promote pattern to spell</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="economic-governor-fuel-gauge">38.3 Economic Governor (Fuel Gauge)</h3>
<p>Model arbitrage and cost optimization system.</p>
<p><strong>UI Metaphor: â€œFuel Gaugeâ€</strong> - Visual meter showing budget remaining with color-coded status.</p>
<p><strong>Governor Modes:</strong> | Mode | Description | |â€”â€”|â€”â€”â€”â€”-| | <code>cost_minimizer</code> | Always cheapest viable option | | <code>quality_maximizer</code> | Best quality within budget | | <code>balanced</code> | Balance cost and quality | | <code>latency_focused</code> | Prioritize response speed | | <code>custom</code> | Use custom arbitrage rules |</p>
<p><strong>Model Tiers:</strong> - Economy (ğŸŒ±) - Cheapest, simple tasks - Self-Hosted (ğŸ ) - On-premise models - Standard (ğŸ“Š) - Default tier - Premium (ğŸ’) - Higher quality - Flagship (ğŸš€) - Best available</p>
<p><strong>API Endpoints (Base: <code>/api/thinktank/governor</code>):</strong></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/</code></td>
<td>Get dashboard with fuel gauge</td>
</tr>
<tr>
<td>GET</td>
<td><code>/config</code></td>
<td>Get configuration</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/config</code></td>
<td>Update configuration</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/mode</code></td>
<td>Quick mode switch</td>
</tr>
<tr>
<td>POST</td>
<td><code>/recommend</code></td>
<td>Get model recommendation</td>
</tr>
<tr>
<td>GET</td>
<td><code>/metrics</code></td>
<td>Get cost metrics</td>
</tr>
<tr>
<td>GET</td>
<td><code>/budget</code></td>
<td>Get budget status</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/budget</code></td>
<td>Update budget limit</td>
</tr>
<tr>
<td>GET</td>
<td><code>/tiers</code></td>
<td>Get model tiers</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/tiers/:tier</code></td>
<td>Update tier config</td>
</tr>
<tr>
<td>GET</td>
<td><code>/rules</code></td>
<td>Get arbitrage rules</td>
</tr>
<tr>
<td>POST</td>
<td><code>/rules</code></td>
<td>Add arbitrage rule</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/rules/:id</code></td>
<td>Update rule</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/rules/:id</code></td>
<td>Delete rule</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="sentinel-agents-watchtower-dashboard">38.4 Sentinel Agents (Watchtower Dashboard)</h3>
<p>Event-driven autonomous agents for monitoring and automation.</p>
<p><strong>UI Metaphor: â€œWatchtower Dashboardâ€</strong> - Castle towers watching over different domains.</p>
<p><strong>Agent Types:</strong> | Type | Icon | Purpose | |â€”â€”|â€”â€”|â€”â€”â€”| | Monitor | ğŸ‘ï¸ | Passive watchdog - observes and alerts | | Guardian | ğŸ›¡ï¸ | Protective - can block harmful actions | | Scout | ğŸ”­ | Proactive information gathering | | Herald | ğŸ“¯ | Notifications and announcements | | Arbiter | âš–ï¸ | Decision making and routing |</p>
<p><strong>Agent Status:</strong> - Idle (âšª), Watching (ğŸŸ¢), Triggered (ğŸŸ¡), Cooldown (ğŸ”µ), Disabled (ğŸ”´)</p>
<p><strong>API Endpoints (Base: <code>/api/thinktank/sentinels</code>):</strong></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/</code></td>
<td>List all agents</td>
</tr>
<tr>
<td>POST</td>
<td><code>/</code></td>
<td>Create agent</td>
</tr>
<tr>
<td>GET</td>
<td><code>/:id</code></td>
<td>Get agent details</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/:id</code></td>
<td>Update agent</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/:id</code></td>
<td>Delete agent</td>
</tr>
<tr>
<td>POST</td>
<td><code>/:id/trigger</code></td>
<td>Manually trigger</td>
</tr>
<tr>
<td>POST</td>
<td><code>/:id/enable</code></td>
<td>Enable agent</td>
</tr>
<tr>
<td>POST</td>
<td><code>/:id/disable</code></td>
<td>Disable agent</td>
</tr>
<tr>
<td>GET</td>
<td><code>/:id/events</code></td>
<td>Get agent events</td>
</tr>
<tr>
<td>GET</td>
<td><code>/events</code></td>
<td>All events</td>
</tr>
<tr>
<td>GET</td>
<td><code>/stats</code></td>
<td>Statistics</td>
</tr>
<tr>
<td>GET</td>
<td><code>/types</code></td>
<td>Available types</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="time-travel-debugging-timeline-scrubber">38.5 Time-Travel Debugging (Timeline Scrubber)</h3>
<p>Conversation forking and state replay system.</p>
<p><strong>UI Metaphor: â€œTimeline Scrubberâ€</strong> - Horizontal timeline with draggable playhead and fork points.</p>
<p><strong>Checkpoint Types:</strong> | Type | Icon | Description | |â€”â€”|â€”â€”|â€”â€”â€”â€”-| | Auto | âšª | Automatic checkpoint | | Manual | ğŸ“ | User-created | | Fork | ğŸŒ¿ | Branch point | | Merge | ğŸ”€ | Merged timelines | | Rollback | âª | After rollback |</p>
<p><strong>API Endpoints (Base: <code>/api/thinktank/time-travel</code>):</strong></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/timelines</code></td>
<td>List timelines</td>
</tr>
<tr>
<td>POST</td>
<td><code>/timelines</code></td>
<td>Create timeline</td>
</tr>
<tr>
<td>GET</td>
<td><code>/timelines/:id</code></td>
<td>Get timeline view</td>
</tr>
<tr>
<td>POST</td>
<td><code>/timelines/:id/checkpoint</code></td>
<td>Create checkpoint</td>
</tr>
<tr>
<td>POST</td>
<td><code>/timelines/:id/jump</code></td>
<td>Jump to checkpoint</td>
</tr>
<tr>
<td>POST</td>
<td><code>/timelines/:id/fork</code></td>
<td>Fork timeline</td>
</tr>
<tr>
<td>POST</td>
<td><code>/timelines/:id/replay</code></td>
<td>Replay sequence</td>
</tr>
<tr>
<td>GET</td>
<td><code>/checkpoints/:id</code></td>
<td>Get checkpoint</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="council-of-rivals-debate-arena">38.6 Council of Rivals (Debate Arena)</h3>
<p>Multi-model adversarial consensus system.</p>
<p><strong>UI Metaphor: â€œDebate Arenaâ€</strong> - Amphitheater with model avatars debating in a circular arrangement.</p>
<p><strong>Member Roles:</strong> | Role | Icon | Purpose | |â€”â€”|â€”â€”|â€”â€”â€”| | Advocate | ğŸ“£ | Argues for a position | | Critic | ğŸ” | Challenges positions | | Synthesizer | ğŸ”® | Combines perspectives | | Specialist | ğŸ“ | Domain expert | | Contrarian | ğŸ˜ˆ | Devilâ€™s advocate |</p>
<p><strong>Preset Councils:</strong> - <strong>Balanced</strong> (âš–ï¸) - Diverse perspectives - <strong>Technical</strong> (ğŸ”§) - Expert technical review - <strong>Creative</strong> (ğŸ¨) - Creative exploration</p>
<p><strong>Verdict Outcomes:</strong> - Consensus (ğŸ¤), Majority (âœ‹), Split (âš–ï¸), Deadlock (ğŸ”’), Synthesized (ğŸ”®)</p>
<p><strong>API Endpoints (Base: <code>/api/thinktank/council</code>):</strong></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/</code></td>
<td>List councils</td>
</tr>
<tr>
<td>POST</td>
<td><code>/</code></td>
<td>Create council</td>
</tr>
<tr>
<td>POST</td>
<td><code>/preset</code></td>
<td>Create preset council</td>
</tr>
<tr>
<td>GET</td>
<td><code>/:id</code></td>
<td>Get council</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/:id</code></td>
<td>Update council</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/:id</code></td>
<td>Delete council</td>
</tr>
<tr>
<td>POST</td>
<td><code>/:id/debate</code></td>
<td>Start debate</td>
</tr>
<tr>
<td>GET</td>
<td><code>/debate/:id</code></td>
<td>Get debate</td>
</tr>
<tr>
<td>POST</td>
<td><code>/debate/:id/argument</code></td>
<td>Submit argument</td>
</tr>
<tr>
<td>POST</td>
<td><code>/debate/:id/rebuttal</code></td>
<td>Submit rebuttal</td>
</tr>
<tr>
<td>POST</td>
<td><code>/debate/:id/vote</code></td>
<td>Conduct voting</td>
</tr>
<tr>
<td>GET</td>
<td><code>/presets</code></td>
<td>Get preset options</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="security-signals-security-shield">38.7 Security Signals (Security Shield)</h3>
<p>SSF/CAEP integration for identity security events.</p>
<p><strong>UI Metaphor: â€œSecurity Shieldâ€</strong> - Animated shield with real-time threat visualization.</p>
<p><strong>Signal Types:</strong> | Type | Icon | Description | |â€”â€”|â€”â€”|â€”â€”â€”â€”-| | Session Revoked | ğŸ” | SSF session terminated | | Credential Change | ğŸ”‘ | Password/key changed | | Device Compliance | ğŸ“± | CAEP compliance change | | Risk Change | ğŸ“Š | Risk level changed | | Anomaly Detected | ğŸ” | Behavioral anomaly | | Threat Detected | âš ï¸ | Active threat | | Policy Violation | ğŸš« | Policy breach |</p>
<p><strong>Severity Levels:</strong> Critical (ğŸ”´), High (ğŸŸ ), Medium (ğŸŸ¡), Low (ğŸŸ¢), Info (ğŸ”µ)</p>
<p><strong>API Endpoints (Base: <code>/api/thinktank/security</code>):</strong></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/dashboard</code></td>
<td>Security dashboard</td>
</tr>
<tr>
<td>GET</td>
<td><code>/signals</code></td>
<td>List signals</td>
</tr>
<tr>
<td>POST</td>
<td><code>/signals</code></td>
<td>Create signal</td>
</tr>
<tr>
<td>GET</td>
<td><code>/signals/:id</code></td>
<td>Get signal</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/signals/:id/status</code></td>
<td>Update status</td>
</tr>
<tr>
<td>GET</td>
<td><code>/policies</code></td>
<td>List policies</td>
</tr>
<tr>
<td>POST</td>
<td><code>/policies</code></td>
<td>Create policy</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/policies/:id</code></td>
<td>Update policy</td>
</tr>
<tr>
<td>DELETE</td>
<td><code>/policies/:id</code></td>
<td>Delete policy</td>
</tr>
<tr>
<td>POST</td>
<td><code>/ssf/event</code></td>
<td>Ingest SSF event</td>
</tr>
<tr>
<td>POST</td>
<td><code>/caep/event</code></td>
<td>Ingest CAEP event</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="policy-framework-stance-compass">38.8 Policy Framework (Stance Compass)</h3>
<p>Strategic intelligence and regulatory stance configuration.</p>
<p><strong>UI Metaphor: â€œStance Compassâ€</strong> - Radial chart showing policy positions across domains.</p>
<p><strong>Policy Domains:</strong> | Domain | Icon | Description | |â€”â€”â€“|â€”â€”|â€”â€”â€”â€”-| | AI Safety | ğŸ¤– | AI alignment and safety | | Data Privacy | ğŸ”’ | Data protection regulations | | Content Moderation | ğŸ“ | Content policies | | Accessibility | â™¿ | Accessibility requirements | | Sustainability | ğŸŒ± | Environmental considerations | | Security | ğŸ›¡ï¸ | Cybersecurity posture | | Transparency | ğŸ‘ï¸ | AI transparency | | Ethics | âš–ï¸ | Ethical AI principles | | Compliance | ğŸ“‹ | Regulatory compliance | | Innovation | ğŸ’¡ | Innovation balance |</p>
<p><strong>Stance Positions:</strong> - Restrictive (ğŸ”´), Cautious (ğŸŸ ), Balanced (ğŸŸ¡), Permissive (ğŸŸ¢), Adaptive (ğŸ”µ)</p>
<p><strong>Preset Profiles:</strong> - <strong>Conservative</strong> - Maximum safety, minimal risk - <strong>Balanced</strong> - Middle ground - <strong>Innovative</strong> - Emphasis on innovation</p>
<p><strong>API Endpoints (Base: <code>/api/thinktank/policy</code>):</strong></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/compass</code></td>
<td>Get compass view</td>
</tr>
<tr>
<td>GET</td>
<td><code>/domains</code></td>
<td>Get available domains</td>
</tr>
<tr>
<td>GET</td>
<td><code>/positions</code></td>
<td>Get stance positions</td>
</tr>
<tr>
<td>GET</td>
<td><code>/stances</code></td>
<td>List stances</td>
</tr>
<tr>
<td>POST</td>
<td><code>/stances</code></td>
<td>Create stance</td>
</tr>
<tr>
<td>GET</td>
<td><code>/stances/:domain</code></td>
<td>Get domain stance</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/stances/:id</code></td>
<td>Update stance</td>
</tr>
<tr>
<td>GET</td>
<td><code>/profiles</code></td>
<td>List profiles</td>
</tr>
<tr>
<td>GET</td>
<td><code>/profiles/active</code></td>
<td>Get active profile</td>
</tr>
<tr>
<td>POST</td>
<td><code>/profiles</code></td>
<td>Create profile</td>
</tr>
<tr>
<td>POST</td>
<td><code>/profiles/preset</code></td>
<td>Create preset profile</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/profiles/:id/activate</code></td>
<td>Activate profile</td>
</tr>
<tr>
<td>GET</td>
<td><code>/recommendations</code></td>
<td>Get recommendations</td>
</tr>
<tr>
<td>GET</td>
<td><code>/compliance</code></td>
<td>Check compliance</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="database-migration">38.9 Database Migration</h3>
<p>All features use migration <code>100_thinktank_advanced_features.sql</code> with the following tables:</p>
<table>
<thead>
<tr>
<th>Table</th>
<th>Feature</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>flash_facts</code></td>
<td>Flash Facts storage</td>
</tr>
<tr>
<td><code>flash_facts_config</code></td>
<td>Flash Facts config</td>
</tr>
<tr>
<td><code>grimoire_spells</code></td>
<td>Grimoire spells</td>
</tr>
<tr>
<td><code>grimoire_casts</code></td>
<td>Spell cast history</td>
</tr>
<tr>
<td><code>grimoire_achievements</code></td>
<td>User achievements</td>
</tr>
<tr>
<td><code>economic_governor_config</code></td>
<td>Governor config</td>
</tr>
<tr>
<td><code>economic_governor_usage</code></td>
<td>Usage tracking</td>
</tr>
<tr>
<td><code>sentinel_agents</code></td>
<td>Sentinel agents</td>
</tr>
<tr>
<td><code>sentinel_events</code></td>
<td>Agent events</td>
</tr>
<tr>
<td><code>time_travel_timelines</code></td>
<td>Timelines</td>
</tr>
<tr>
<td><code>time_travel_checkpoints</code></td>
<td>Checkpoints</td>
</tr>
<tr>
<td><code>time_travel_forks</code></td>
<td>Fork records</td>
</tr>
<tr>
<td><code>council_of_rivals</code></td>
<td>Councils</td>
</tr>
<tr>
<td><code>council_debates</code></td>
<td>Debates</td>
</tr>
<tr>
<td><code>security_signals</code></td>
<td>Security signals</td>
</tr>
<tr>
<td><code>security_policies</code></td>
<td>Security policies</td>
</tr>
<tr>
<td><code>policy_stances</code></td>
<td>Policy stances</td>
</tr>
<tr>
<td><code>policy_profiles</code></td>
<td>Policy profiles</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="liquid-interface-generative-ui">39. Liquid Interface (Generative UI)</h2>
<h3 id="overview-5">39.1 Overview</h3>
<p><strong>â€œDonâ€™t Build the Tool. BE the Tool.â€</strong></p>
<p>The Liquid Interface transforms the chat interface into dynamic, morphable UI tools based on user intent. Instead of asking â€œhelp me make a spreadsheet app,â€ the chat <em>becomes</em> the spreadsheet.</p>
<p><strong>Core Concept:</strong> - User says: â€œHelp me track my invoicesâ€ - Chat morphs into: Invoice tracker with data grid, totals, AI assistant sidebar - User interacts: Add, edit, filter invoices directly - AI watches: Ghost State binds UI actions to AI context - Export: â€œEjectâ€ to a deployable Next.js/Vite app</p>
<p><strong>Key Benefits:</strong> - <strong>Zero-friction prototyping</strong> - Ideas become tools instantly - <strong>Two-way AI binding</strong> - AI sees what youâ€™re doing, UI reflects what AI knows - <strong>Production export</strong> - Ephemeral apps become real codebases - <strong>50+ morphable components</strong> - Data grids, charts, kanban, calendars, code editors</p>
<hr />
<h3 id="architecture-2">39.2 Architecture</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        User Message                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Intent Detection                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ data_analysisâ”‚  â”‚  tracking   â”‚  â”‚visualizationâ”‚   ...       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Schema Generation                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ LiquidSchema {                                               â”‚â”‚
â”‚  â”‚   layout: { type: &#39;split&#39;, children: [...] }                 â”‚â”‚
â”‚  â”‚   bindings: [{ sourceComponent, contextKey, direction }]     â”‚â”‚
â”‚  â”‚   aiOverlay: { mode: &#39;sidebar&#39;, position: &#39;right&#39; }          â”‚â”‚
â”‚  â”‚ }                                                            â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Liquid Renderer                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚DataGridâ”‚  â”‚ Chart  â”‚  â”‚ Kanban â”‚  â”‚AI Chat â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ghost State Manager                           â”‚
â”‚  UI Events â”€â”€â–º AI Context                                        â”‚
â”‚  AI Updates â—„â”€â”€ UI Components                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<hr />
<h3 id="component-registry">39.3 Component Registry</h3>
<p><strong>50+ pre-built morphable components</strong> across 9 categories:</p>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 34%" />
<col style="width: 37%" />
</colgroup>
<thead>
<tr>
<th>Category</th>
<th>Components</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Data</strong> (10)</td>
<td>DataGrid, PivotTable, DataCard, JSONViewer, SQLViewer, CSVEditor, DataFilter, SchemaDesigner, DataDiff, DataImport</td>
<td>Spreadsheets, tables, data viewers</td>
</tr>
<tr>
<td><strong>Visualization</strong> (10)</td>
<td>LineChart, BarChart, PieChart, ScatterPlot, AreaChart, Heatmap, Treemap, GeoMap, Timeline, SankeyDiagram</td>
<td>Charts, graphs, maps</td>
</tr>
<tr>
<td><strong>Productivity</strong> (10)</td>
<td>KanbanBoard, Calendar, GanttChart, TodoList, NotesEditor, Timer, HabitTracker, MindMap, Whiteboard, FileManager</td>
<td>Task &amp; project management</td>
</tr>
<tr>
<td><strong>Finance</strong> (6)</td>
<td>Invoice, BudgetTracker, ExpenseTable, Portfolio, Calculator, CurrencyConverter</td>
<td>Financial tools</td>
</tr>
<tr>
<td><strong>Code</strong> (6)</td>
<td>CodeEditor, Terminal, DiffViewer, APITester, RegexTester, JSONFormatter</td>
<td>Developer tools</td>
</tr>
<tr>
<td><strong>AI</strong> (4)</td>
<td>AIChat, InsightCard, SuggestionPanel, ContextInspector</td>
<td>AI-powered widgets</td>
</tr>
<tr>
<td><strong>Input</strong> (4)</td>
<td>FormBuilder, SliderPanel, DateRangePicker, SearchBox</td>
<td>User input forms</td>
</tr>
</tbody>
</table>
<p><strong>Component Definition:</strong></p>
<pre class="typescript"><code>interface LiquidComponent {
  id: string;                    // e.g., &#39;data-grid&#39;
  name: string;                  // e.g., &#39;DataGrid&#39;
  category: ComponentCategory;   // e.g., &#39;data&#39;
  propsSchema: JSONSchema;       // Component props
  eventsSchema: JSONSchema;      // Emitted events
  supportsInteraction: boolean;
  supportsDataBinding: boolean;
  supportsAIContext: boolean;
  defaultSize: { width, height };
  icon: string;
  tags: string[];
}</code></pre>
<hr />
<h3 id="ghost-state-two-way-binding">39.4 Ghost State (Two-Way Binding)</h3>
<p><strong>â€œThe AI sees what youâ€™re doing. The UI reflects what AI knows.â€</strong></p>
<p>Ghost State creates bidirectional bindings between UI components and AI context:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   UI Component  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚   AI Context    â”‚
â”‚                 â”‚                    â”‚                 â”‚
â”‚ selectedRow: 5  â”‚   GhostBinding     â”‚ user_selection  â”‚
â”‚ filterValue: X  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚ applied_filter  â”‚
â”‚                 â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                 â”‚
â”‚ [AI updates]    â”‚   AI Reaction      â”‚ insight: &quot;...&quot;  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<p><strong>Binding Configuration:</strong></p>
<pre class="typescript"><code>interface GhostBinding {
  id: string;
  sourceComponent: string;    // UI component ID
  sourceProperty: string;     // e.g., &#39;selectedRow&#39;
  contextKey: string;         // AI context key
  direction: &#39;ui_to_ai&#39; | &#39;ai_to_ui&#39; | &#39;bidirectional&#39;;
  debounceMs?: number;        // Debounce rapid changes
  triggerReaction?: boolean;  // Trigger AI response on change
  reactionPrompt?: string;    // Custom prompt for reaction
}</code></pre>
<p><strong>AI Reactions:</strong> When users interact with morphed UI, the AI can react with: - <code>speak</code> - Send a message - <code>update</code> - Update UI state - <code>morph</code> - Transform to different layout - <code>suggest</code> - Show suggestion panel</p>
<hr />
<h3 id="intent-detection">39.5 Intent Detection</h3>
<p>Intent detection determines when and how to morph the UI:</p>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 32%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr>
<th>Intent Category</th>
<th>Trigger Phrases</th>
<th>Default Components</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>data_analysis</code></td>
<td>spreadsheet, excel, csv, analyze data</td>
<td>DataGrid, PivotTable</td>
</tr>
<tr>
<td><code>tracking</code></td>
<td>track invoices, manage expenses</td>
<td>Invoice, ExpenseTable, Kanban</td>
</tr>
<tr>
<td><code>visualization</code></td>
<td>chart, graph, visualize, show metrics</td>
<td>LineChart, BarChart, Dashboard</td>
</tr>
<tr>
<td><code>planning</code></td>
<td>plan project, timeline, kanban</td>
<td>KanbanBoard, GanttChart</td>
</tr>
<tr>
<td><code>calculation</code></td>
<td>calculate, compute, formula</td>
<td>Calculator, DataGrid</td>
</tr>
<tr>
<td><code>design</code></td>
<td>design, wireframe, brainstorm</td>
<td>Whiteboard, MindMap</td>
</tr>
<tr>
<td><code>coding</code></td>
<td>code, debug, terminal</td>
<td>CodeEditor, Terminal</td>
</tr>
<tr>
<td><code>writing</code></td>
<td>write, draft, notes</td>
<td>NotesEditor, MindMap</td>
</tr>
</tbody>
</table>
<p><strong>Morph Threshold:</strong> <code>confidence &gt;= 0.85</code> (configurable per tenant)</p>
<hr />
<h3 id="eject-to-app">39.6 Eject to App</h3>
<p><strong>â€œThe Takeout Buttonâ€</strong> - Export ephemeral liquid apps to real codebases.</p>
<p><strong>Supported Frameworks:</strong> - <strong>Next.js 14</strong> - Full-stack React with API routes - <strong>Vite + React</strong> - Fast client-side SPA - <strong>Remix</strong> - Web standards framework - <strong>Astro</strong> - Content-focused sites</p>
<p><strong>Features to Include:</strong> | Feature | Description | |â€”â€”â€”|â€”â€”â€”â€”-| | <code>database</code> | PGLite â†’ Postgres migration, Drizzle ORM | | <code>auth</code> | NextAuth scaffolding | | <code>api</code> | API routes for data operations | | <code>ai</code> | OpenAI integration | | <code>realtime</code> | WebSocket support |</p>
<p><strong>Generated Files:</strong></p>
<pre><code>my-liquid-app/
â”œâ”€â”€ package.json
â”œâ”€â”€ next.config.mjs / vite.config.ts
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tailwind.config.ts
â”œâ”€â”€ app/page.tsx (or src/App.tsx)
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ LiquidLayout.tsx
â”‚   â”œâ”€â”€ DataGrid.tsx
â”‚   â”œâ”€â”€ ...
â”œâ”€â”€ store/index.ts (Zustand)
â”œâ”€â”€ types/index.ts
â”œâ”€â”€ lib/db.ts (if database)
â”œâ”€â”€ lib/ai.ts (if ai)
â”œâ”€â”€ README.md
â”œâ”€â”€ .env.example
â””â”€â”€ .gitignore</code></pre>
<hr />
<h3 id="configuration-8">39.7 Configuration</h3>
<p><strong>Per-Tenant Configuration:</strong></p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td><code>true</code></td>
<td>Enable Liquid Interface</td>
</tr>
<tr>
<td><code>auto_morph_enabled</code></td>
<td><code>true</code></td>
<td>Auto-morph on high-confidence intent</td>
</tr>
<tr>
<td><code>eject_enabled</code></td>
<td><code>true</code></td>
<td>Allow app export</td>
</tr>
<tr>
<td><code>morph_confidence_threshold</code></td>
<td><code>0.85</code></td>
<td>Minimum confidence to morph</td>
</tr>
<tr>
<td><code>auto_revert_timeout_seconds</code></td>
<td><code>300</code></td>
<td>Auto-revert to chat after inactivity</td>
</tr>
<tr>
<td><code>max_active_sessions</code></td>
<td><code>10</code></td>
<td>Max concurrent liquid sessions</td>
</tr>
<tr>
<td><code>max_ghost_events_per_session</code></td>
<td><code>1000</code></td>
<td>Event history limit</td>
</tr>
<tr>
<td><code>default_overlay_mode</code></td>
<td><code>sidebar</code></td>
<td>AI overlay mode</td>
</tr>
<tr>
<td><code>default_overlay_position</code></td>
<td><code>right</code></td>
<td>AI overlay position</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="api-endpoints-9">39.8 API Endpoints</h3>
<p><strong>Base: <code>/api/thinktank/liquid</code></strong></p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 32%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Registry</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>GET</td>
<td><code>/registry</code></td>
<td>Get registry overview</td>
</tr>
<tr>
<td>GET</td>
<td><code>/registry/components</code></td>
<td>List components (filter: <code>?category=</code>, <code>?q=</code>)</td>
</tr>
<tr>
<td>GET</td>
<td><code>/registry/components/:id</code></td>
<td>Get component details</td>
</tr>
<tr>
<td><strong>Sessions</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>POST</td>
<td><code>/sessions</code></td>
<td>Create new session</td>
</tr>
<tr>
<td>GET</td>
<td><code>/sessions/:id</code></td>
<td>Get session</td>
</tr>
<tr>
<td><strong>Morphing</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>POST</td>
<td><code>/morph</code></td>
<td>Process morph request</td>
</tr>
<tr>
<td>POST</td>
<td><code>/detect-intent</code></td>
<td>Detect intent from message</td>
</tr>
<tr>
<td>POST</td>
<td><code>/sessions/:id/revert</code></td>
<td>Revert to chat mode</td>
</tr>
<tr>
<td><strong>Ghost State</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>POST</td>
<td><code>/ghost/event</code></td>
<td>Send ghost event</td>
</tr>
<tr>
<td>GET</td>
<td><code>/ghost/state/:sessionId</code></td>
<td>Get ghost state snapshot</td>
</tr>
<tr>
<td>POST</td>
<td><code>/ghost/sync</code></td>
<td>Sync multiple state updates</td>
</tr>
<tr>
<td>GET</td>
<td><code>/ghost/history/:sessionId</code></td>
<td>Get event history</td>
</tr>
<tr>
<td>GET</td>
<td><code>/ghost/context/:sessionId</code></td>
<td>Get AI context block</td>
</tr>
<tr>
<td><strong>Eject</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>POST</td>
<td><code>/eject</code></td>
<td>Eject to app</td>
</tr>
<tr>
<td>POST</td>
<td><code>/eject/preview</code></td>
<td>Preview eject</td>
</tr>
<tr>
<td><strong>Analytics</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>GET</td>
<td><code>/analytics/usage</code></td>
<td>Component usage stats</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="database-tables-19">39.9 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>liquid_sessions</code></td>
<td>Active liquid interface sessions</td>
</tr>
<tr>
<td><code>liquid_ghost_state</code></td>
<td>Persisted ghost state bindings</td>
</tr>
<tr>
<td><code>liquid_ghost_events</code></td>
<td>User interaction events</td>
</tr>
<tr>
<td><code>liquid_ai_reactions</code></td>
<td>AI responses to events</td>
</tr>
<tr>
<td><code>liquid_eject_history</code></td>
<td>App export history</td>
</tr>
<tr>
<td><code>liquid_component_usage</code></td>
<td>Component analytics</td>
</tr>
<tr>
<td><code>liquid_intent_patterns</code></td>
<td>Learnable intent patterns</td>
</tr>
<tr>
<td><code>liquid_config</code></td>
<td>Per-tenant configuration</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="implementation-files-6">39.10 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>packages/shared/src/types/liquid-interface.types.ts</code></td>
<td>Type definitions</td>
</tr>
<tr>
<td><code>lambda/shared/services/liquid-interface/liquid-interface.service.ts</code></td>
<td>Main service</td>
</tr>
<tr>
<td><code>lambda/shared/services/liquid-interface/ghost-state.service.ts</code></td>
<td>Ghost state manager</td>
</tr>
<tr>
<td><code>lambda/shared/services/liquid-interface/eject.service.ts</code></td>
<td>App export service</td>
</tr>
<tr>
<td><code>lambda/shared/services/liquid-interface/component-registry.ts</code></td>
<td>50+ components</td>
</tr>
<tr>
<td><code>lambda/thinktank/liquid-interface.ts</code></td>
<td>API handler</td>
</tr>
<tr>
<td><code>migrations/161_liquid_interface.sql</code></td>
<td>Database schema</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="the-reality-engine">40. The Reality Engine</h2>
<blockquote>
<p><strong>â€œThe Reality Engine transforms Think Tank from a chatbot into a shape-shifting command center with time travel, parallel universes, and telepathy.â€</strong></p>
</blockquote>
<p>The Reality Engine is the unified runtime powering Think Tankâ€™s supernatural capabilities. It consists of four interconnected features that solve the three fundamental anxieties preventing users from trusting AI with complex work: <strong>Fear</strong> (of breaking what works), <strong>Commitment</strong> (fear of choosing the wrong path), and <strong>Latency</strong> (waiting for the AI to think).</p>
<h3 id="feature-overview">40.1 Feature Overview</h3>
<table>
<colgroup>
<col style="width: 36%" />
<col style="width: 36%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Emotion</th>
<th>Pitch</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Morphic UI</strong></td>
<td>Flow</td>
<td>â€œStop hunting for the right tool. Radiant is a Morphic Surface that shapeshifts instantly.â€</td>
</tr>
<tr>
<td><strong>Reality Scrubber</strong></td>
<td>Invincibility</td>
<td>â€œWe replaced â€˜Undoâ€™ with Time Travel. Scrub reality back to any point.â€</td>
</tr>
<tr>
<td><strong>Quantum Futures</strong></td>
<td>Omniscience</td>
<td>â€œWhy choose one strategy? Split the timeline and run both simultaneously.â€</td>
</tr>
<tr>
<td><strong>Pre-Cognition</strong></td>
<td>Telepathy</td>
<td>â€œRadiant answers before you ask. Itâ€™s not just fast; itâ€™s anticipatory.â€</td>
</tr>
</tbody>
</table>
<h3 id="architecture-3">40.2 Architecture</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         THE REALITY ENGINE                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚   MORPHIC UI     â”‚    â”‚ REALITY SCRUBBER â”‚    â”‚ QUANTUM FUTURES  â”‚     â”‚
â”‚   â”‚   â•â•â•â•â•â•â•â•â•â•â•â•   â”‚    â”‚   â•â•â•â•â•â•â•â•â•â•â•â•   â”‚    â”‚   â•â•â•â•â•â•â•â•â•â•â•â•   â”‚     â”‚
â”‚   â”‚                  â”‚    â”‚                  â”‚    â”‚                  â”‚     â”‚
â”‚   â”‚ Intent Detection â”‚    â”‚ State Snapshots  â”‚    â”‚ Branch Manager   â”‚     â”‚
â”‚   â”‚ Layout Engine    â”‚    â”‚ VFS + PGLite     â”‚    â”‚ Diff Engine      â”‚     â”‚
â”‚   â”‚ Ghost State      â”‚    â”‚ Timeline UI      â”‚    â”‚ Collapse Logic   â”‚     â”‚
â”‚   â”‚ Component Reg.   â”‚    â”‚ Bookmark System  â”‚    â”‚ Dream Archive    â”‚     â”‚
â”‚   â”‚                  â”‚    â”‚                  â”‚    â”‚                  â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚            â”‚                       â”‚                       â”‚                â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                    â”‚                                        â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                      â”‚      PRE-COGNITION        â”‚                          â”‚
â”‚                      â”‚      â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•      â”‚                          â”‚
â”‚                      â”‚                           â”‚                          â”‚
â”‚                      â”‚   Intent Prediction       â”‚                          â”‚
â”‚                      â”‚   Solution Pre-Compute    â”‚                          â”‚
â”‚                      â”‚   Genesis Model (Local)   â”‚                          â”‚
â”‚                      â”‚   Instant Delivery        â”‚                          â”‚
â”‚                      â”‚                           â”‚                          â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="morphic-ui">40.3 Morphic UI</h3>
<p><strong>â€œStop hunting for the right tool. Radiant is a Morphic Surface that shapeshifts instantly.â€</strong></p>
<p>The Morphic UI detects user intent and transforms the interface into the appropriate tool.</p>
<h4 id="intent-categories">Intent Categories</h4>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 50%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr>
<th>Intent</th>
<th>Detected Patterns</th>
<th>Morphs To</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>data_analysis</code></td>
<td>â€œanalyzeâ€, â€œdataâ€, â€œstatisticsâ€</td>
<td>DataGrid, Charts</td>
</tr>
<tr>
<td><code>tracking</code></td>
<td>â€œtrackâ€, â€œmanageâ€, â€œorganizeâ€</td>
<td>Kanban, Calendar</td>
</tr>
<tr>
<td><code>visualization</code></td>
<td>â€œvisualizeâ€, â€œchartâ€, â€œgraphâ€</td>
<td>LineChart, PieChart, BarChart</td>
</tr>
<tr>
<td><code>planning</code></td>
<td>â€œplanâ€, â€œscheduleâ€, â€œtimelineâ€</td>
<td>GanttChart, Calendar</td>
</tr>
<tr>
<td><code>finance</code></td>
<td>â€œbudgetâ€, â€œinvoiceâ€, â€œexpenseâ€</td>
<td>Ledger, Calculator, Invoice</td>
</tr>
<tr>
<td><code>design</code></td>
<td>â€œbrainstormâ€, â€œdesignâ€, â€œwhiteboardâ€</td>
<td>MindMap, Whiteboard</td>
</tr>
<tr>
<td><code>coding</code></td>
<td>â€œcodeâ€, â€œdebugâ€, â€œscriptâ€</td>
<td>CodeEditor, Terminal</td>
</tr>
</tbody>
</table>
<h4 id="ghost-state-binding">Ghost State Binding</h4>
<p>Every UI component is bidirectionally bound to AI context:</p>
<pre class="typescript"><code>// User selects a row â†’ AI knows what they&#39;re focused on
ghostBinding: {
  componentProp: &#39;selectedRow&#39;,
  contextKey: &#39;user_focus&#39;,
  direction: &#39;ui_to_ai&#39;
}

// AI insight â†’ UI highlights relevant items
ghostBinding: {
  componentProp: &#39;highlights&#39;,
  contextKey: &#39;ai_suggestions&#39;,
  direction: &#39;ai_to_ui&#39;
}</code></pre>
<h3 id="reality-scrubber">40.4 Reality Scrubber</h3>
<p><strong>â€œWe replaced â€˜Undoâ€™ with Time Travel.â€</strong></p>
<p>The Reality Scrubber captures full state snapshots and allows instant rewinding to any point.</p>
<h4 id="what-gets-snapshotted">What Gets Snapshotted</h4>
<table>
<thead>
<tr>
<th>State Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>VFS State</strong></td>
<td>Virtual File System (all generated files)</td>
</tr>
<tr>
<td><strong>DB State</strong></td>
<td>PGLite database snapshot</td>
</tr>
<tr>
<td><strong>Ghost State</strong></td>
<td>All UI-AI bindings</td>
</tr>
<tr>
<td><strong>Chat Context</strong></td>
<td>Conversation history at that point</td>
</tr>
<tr>
<td><strong>Layout State</strong></td>
<td>Current morphed UI layout</td>
</tr>
</tbody>
</table>
<h4 id="trigger-events">Trigger Events</h4>
<table>
<thead>
<tr>
<th>Event</th>
<th>When Captured</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>user_action</code></td>
<td>User explicitly triggered</td>
</tr>
<tr>
<td><code>ai_generation</code></td>
<td>AI generated content</td>
</tr>
<tr>
<td><code>db_mutation</code></td>
<td>Database was modified</td>
</tr>
<tr>
<td><code>morph_transition</code></td>
<td>UI morphed</td>
</tr>
<tr>
<td><code>checkpoint</code></td>
<td>User-created bookmark</td>
</tr>
<tr>
<td><code>auto_interval</code></td>
<td>Every 30 seconds (configurable)</td>
</tr>
</tbody>
</table>
<h4 id="timeline-ui">Timeline UI</h4>
<p>The Reality Scrubber replaces the standard scrollbar with a video-editor-style timeline:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            REALITY TIMELINE                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   10:00 AM     10:15 AM     10:30 AM     10:45 AM     11:00 AM    NOW      â”‚
â”‚     â”‚            â”‚            â”‚            â”‚            â”‚          â”‚        â”‚
â”‚     â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ğŸ”–â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—†        â”‚
â”‚     â”‚            â”‚            â”‚            â”‚            â”‚          â”‚        â”‚
â”‚   Start      AI Gen        Morph       Bookmark      Branch     Current    â”‚
â”‚                                           â”‚                                  â”‚
â”‚                                           â–¼                                  â”‚
â”‚                                    &quot;Before risky change&quot;                     â”‚
â”‚                                                                              â”‚
â”‚   [ â—€â—€ ]  [ â—€ ]  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â—â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  [ â–¶ ]  [ â–¶â–¶ ]       â”‚
â”‚                              â–²                                               â”‚
â”‚                         Drag to scrub                                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="quantum-futures">40.5 Quantum Futures</h3>
<p><strong>â€œWhy choose one strategy? Split the timeline.â€</strong></p>
<p>Quantum Futures enables parallel reality branching where users can run multiple strategies simultaneously.</p>
<h4 id="branch-creation">Branch Creation</h4>
<pre class="typescript"><code>// User: &quot;Should I use Redux or Zustand?&quot;
await quantumFuturesService.createSplit({
  sessionId,
  prompt: &quot;State management comparison&quot;,
  branchNames: [&quot;Redux Implementation&quot;, &quot;Zustand Implementation&quot;],
  autoCompare: true
});</code></pre>
<h4 id="comparison-view">Comparison View</h4>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ”· Redux Implementation          â”‚   ğŸ”¶ Zustand Implementation            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚                                       â”‚
â”‚   âœ… Type safety                   â”‚   âœ… Simpler setup                    â”‚
â”‚   âš ï¸ Boilerplate                    â”‚   âœ… Less boilerplate                 â”‚
â”‚   ğŸ“Š Completion: 45%               â”‚   ğŸ“Š Completion: 60%                  â”‚
â”‚   ğŸ’° Est. Cost: $0.12              â”‚   ğŸ’° Est. Cost: $0.08                 â”‚
â”‚                                     â”‚                                       â”‚
â”‚   [Keep This Reality]              â”‚   [Keep This Reality]                 â”‚
â”‚                                     â”‚                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h4 id="collapse-to-winner">Collapse to Winner</h4>
<p>When the user selects a winner, the losing branches are either: - <strong>Collapsed</strong>: Permanently removed - <strong>Archived</strong>: Stored in â€œDream Memoryâ€ for potential future recall</p>
<h3 id="pre-cognition">40.6 Pre-Cognition</h3>
<p><strong>â€œRadiant answers before you ask.â€</strong></p>
<p>Pre-Cognition uses speculative execution to predict the userâ€™s next likely actions and pre-compute solutions in the background.</p>
<h4 id="how-it-works-6">How It Works</h4>
<ol type="1">
<li><strong>Prediction</strong>: While user reads current response, Genesis model predicts next 3 likely moves</li>
<li><strong>Pre-Compute</strong>: Solutions are generated in hidden background containers</li>
<li><strong>Instant Delivery</strong>: When userâ€™s request matches a prediction, response appears instantly (0ms latency)</li>
</ol>
<h4 id="prediction-algorithm">Prediction Algorithm</h4>
<pre class="typescript"><code>// After building a login form, predict:
predictions: [
  { intent: &#39;coding&#39;, prompt: &#39;Add password reset&#39;, confidence: 0.8 },
  { intent: &#39;coding&#39;, prompt: &#39;Add OAuth integration&#39;, confidence: 0.7 },
  { intent: &#39;design&#39;, prompt: &#39;Style the form&#39;, confidence: 0.6 }
]</code></pre>
<h4 id="analytics">Analytics</h4>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>hitRate</code></td>
<td>Percentage of predictions that matched user intent</td>
</tr>
<tr>
<td><code>avgLatencySaved</code></td>
<td>Average milliseconds saved by pre-cognition</td>
</tr>
<tr>
<td><code>telepathyScore</code></td>
<td>User-facing metric showing prediction accuracy</td>
</tr>
</tbody>
</table>
<h3 id="configuration-9">40.7 Configuration</h3>
<pre class="typescript"><code>interface RealityEngineConfig {
  // Feature toggles
  morphicUIEnabled: boolean;          // Enable Morphic UI
  realityScrubberEnabled: boolean;    // Enable Reality Scrubber
  quantumFuturesEnabled: boolean;     // Enable Quantum Futures
  preCognitionEnabled: boolean;       // Enable Pre-Cognition
  
  // Behavior
  autoSnapshotIntervalMs: number;     // Default: 30000 (30s)
  maxSnapshotsPerSession: number;     // Default: 100
  maxBranchesPerSession: number;      // Default: 8
  codeCurtainDefault: boolean;        // Hide code by default (Genie mode)
  ephemeralByDefault: boolean;        // Apps dissolve when topic changes
  
  // Pre-Cognition
  preCognition: {
    maxPredictions: number;           // Default: 3
    predictionTTLMs: number;          // Default: 60000 (1 min)
    computeBudgetMs: number;          // Default: 5000 (5s)
    minConfidenceThreshold: number;   // Default: 0.6
    useGenesisModel: boolean;         // Use local model for predictions
  };
}</code></pre>
<h3 id="api-endpoints-10">40.8 API Endpoints</h3>
<p>Base path: <code>/api/thinktank/reality-engine</code></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Session</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>POST</td>
<td><code>/session</code></td>
<td>Initialize Reality Engine session</td>
</tr>
<tr>
<td>GET</td>
<td><code>/session/:id</code></td>
<td>Get session state</td>
</tr>
<tr>
<td><strong>Morphic UI</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>POST</td>
<td><code>/morph</code></td>
<td>Morph interface to intent</td>
</tr>
<tr>
<td>POST</td>
<td><code>/dissolve</code></td>
<td>Dissolve morphed interface</td>
</tr>
<tr>
<td>POST</td>
<td><code>/ghost</code></td>
<td>Update Ghost State</td>
</tr>
<tr>
<td><strong>Reality Scrubber</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>POST</td>
<td><code>/scrub</code></td>
<td>Scrub to point in time</td>
</tr>
<tr>
<td>POST</td>
<td><code>/bookmark</code></td>
<td>Create bookmark</td>
</tr>
<tr>
<td>GET</td>
<td><code>/timeline/:sessionId</code></td>
<td>Get timeline visualization</td>
</tr>
<tr>
<td>GET</td>
<td><code>/bookmarks/:sessionId</code></td>
<td>Get all bookmarks</td>
</tr>
<tr>
<td><strong>Quantum Futures</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>POST</td>
<td><code>/split</code></td>
<td>Split into parallel realities</td>
</tr>
<tr>
<td>GET</td>
<td><code>/branches/:sessionId</code></td>
<td>Get all branches</td>
</tr>
<tr>
<td>POST</td>
<td><code>/compare</code></td>
<td>Compare two branches</td>
</tr>
<tr>
<td>POST</td>
<td><code>/collapse</code></td>
<td>Collapse to winning reality</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/view-mode</code></td>
<td>Set comparison view mode</td>
</tr>
<tr>
<td><strong>Pre-Cognition</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>GET</td>
<td><code>/precognition/:sessionId</code></td>
<td>Get analytics</td>
</tr>
<tr>
<td>POST</td>
<td><code>/precognition/cleanup</code></td>
<td>Clean up expired predictions</td>
</tr>
<tr>
<td><strong>Eject</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>POST</td>
<td><code>/eject</code></td>
<td>Eject to standalone app</td>
</tr>
<tr>
<td><strong>Metrics</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>GET</td>
<td><code>/metrics/:sessionId</code></td>
<td>Get session metrics</td>
</tr>
</tbody>
</table>
<h3 id="database-tables-20">40.9 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>reality_engine_sessions</code></td>
<td>Unified session state</td>
</tr>
<tr>
<td><code>reality_timelines</code></td>
<td>Timeline structure and navigation</td>
</tr>
<tr>
<td><code>reality_snapshots</code></td>
<td>Full state snapshots for time travel</td>
</tr>
<tr>
<td><code>quantum_branches</code></td>
<td>Parallel reality branches</td>
</tr>
<tr>
<td><code>quantum_splits</code></td>
<td>Split configuration and history</td>
</tr>
<tr>
<td><code>quantum_dream_archive</code></td>
<td>Archived branches in dream memory</td>
</tr>
<tr>
<td><code>precognition_queues</code></td>
<td>Per-session prediction configuration</td>
</tr>
<tr>
<td><code>precognition_predictions</code></td>
<td>Pre-computed solutions</td>
</tr>
<tr>
<td><code>precognition_analytics</code></td>
<td>Hit/miss tracking for learning</td>
</tr>
</tbody>
</table>
<h3 id="implementation-files-7">40.10 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>packages/shared/src/types/reality-engine.types.ts</code></td>
<td>Type definitions</td>
</tr>
<tr>
<td><code>lambda/shared/services/reality-engine/reality-engine.service.ts</code></td>
<td>Main service</td>
</tr>
<tr>
<td><code>lambda/shared/services/reality-engine/reality-scrubber.service.ts</code></td>
<td>Time travel</td>
</tr>
<tr>
<td><code>lambda/shared/services/reality-engine/quantum-futures.service.ts</code></td>
<td>Branching</td>
</tr>
<tr>
<td><code>lambda/shared/services/reality-engine/pre-cognition.service.ts</code></td>
<td>Predictions</td>
</tr>
<tr>
<td><code>lambda/thinktank/reality-engine.ts</code></td>
<td>API handler</td>
</tr>
<tr>
<td><code>migrations/162_reality_engine.sql</code></td>
<td>Database schema</td>
</tr>
</tbody>
</table>
<h3 id="the-code-curtain-rule">40.11 The â€œCode Curtainâ€ Rule</h3>
<p>The Reality Engine enforces the distinction between â€œBuilderâ€ (Coder) and â€œGenieâ€ (Radiant):</p>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr>
<th>Rule</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Hide Code by Default</strong></td>
<td>UI snaps to Preview tab, not code</td>
</tr>
<tr>
<td><strong>Interaction over Syntax</strong></td>
<td>Variables become UI controls (sliders, inputs)</td>
</tr>
<tr>
<td><strong>Ephemeral by Default</strong></td>
<td>Apps dissolve when topic changes</td>
</tr>
<tr>
<td><strong>Eject to Keep</strong></td>
<td>Only persist to repo if user explicitly clicks â€œKeep Thisâ€</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>â€œRadiant is a Genie, not a Coder. We use code as invisible ink to draw the interfaceâ€”the user should never see the ink, only the drawing.â€</strong></p>
</blockquote>
<hr />
<h2 id="the-magic-carpet">41. The Magic Carpet</h2>
<blockquote>
<p><strong>â€œWe are building â€˜The Magic Carpet.â€™ You donâ€™t drive it. You donâ€™t write code for it. You just say where you want to go, and the ground beneath you reshapes itself to take you there instantly.â€</strong></p>
</blockquote>
<p>The Magic Carpet is the unified navigation and experience layer for Think Tank. It wraps the Reality Engine capabilities into a cohesive, magical user experience where users feel like magicians, not coders.</p>
<h3 id="the-magic-carpet-philosophy">41.1 The Magic Carpet Philosophy</h3>
<table>
<thead>
<tr>
<th>Traditional Apps</th>
<th>Magic Carpet</th>
</tr>
</thead>
<tbody>
<tr>
<td>Navigate menus</td>
<td>Speak your destination</td>
</tr>
<tr>
<td>Click through workflows</td>
<td>Fly directly there</td>
</tr>
<tr>
<td>Learn the interface</td>
<td>Interface learns you</td>
</tr>
<tr>
<td>You drive</td>
<td>Youâ€™re carried</td>
</tr>
</tbody>
</table>
<p><strong>Core Insight:</strong> We arenâ€™t selling a better IDE. We are selling <strong>the feeling of being a Magician</strong>.</p>
<h3 id="carpet-modes">41.2 Carpet Modes</h3>
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 48%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr>
<th>Mode</th>
<th>Description</th>
<th>Visual</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>resting</code></td>
<td>Waiting for destination (chat-first)</td>
<td>Carpet gently floating</td>
</tr>
<tr>
<td><code>flying</code></td>
<td>Morphing/transitioning to destination</td>
<td>Trail effects, motion blur</td>
</tr>
<tr>
<td><code>hovering</code></td>
<td>Arrived, actively working</td>
<td>Stable, glowing edges</td>
</tr>
<tr>
<td><code>exploring</code></td>
<td>Quantum Futures - multiple realities</td>
<td>Split view, branch indicators</td>
</tr>
<tr>
<td><code>rewinding</code></td>
<td>Reality Scrubber - time traveling</td>
<td>Timeline visible, rewind effect</td>
</tr>
<tr>
<td><code>anticipating</code></td>
<td>Pre-Cognition active</td>
<td>Prediction cards appearing</td>
</tr>
</tbody>
</table>
<h3 id="carpet-altitudes">41.3 Carpet Altitudes</h3>
<p>The altitude represents UI complexity level:</p>
<table>
<thead>
<tr>
<th>Altitude</th>
<th>Complexity</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ground</code></td>
<td>Simple chat mode</td>
<td>Just the chat interface</td>
</tr>
<tr>
<td><code>low</code></td>
<td>Single component</td>
<td>One morphed widget</td>
</tr>
<tr>
<td><code>medium</code></td>
<td>Full workspace</td>
<td>2-3 components</td>
</tr>
<tr>
<td><code>high</code></td>
<td>Complex layout</td>
<td>4-5 components + timeline</td>
</tr>
<tr>
<td><code>stratosphere</code></td>
<td>Maximum capability</td>
<td>Full Reality Engine features</td>
</tr>
</tbody>
</table>
<h3 id="default-destinations">41.4 Default Destinations</h3>
<table>
<thead>
<tr>
<th>Destination</th>
<th>Icon</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Command Center</td>
<td>ğŸ </td>
<td>Overview dashboard</td>
</tr>
<tr>
<td>Workshop</td>
<td>ğŸ”¨</td>
<td>Build and create</td>
</tr>
<tr>
<td>Time Stream</td>
<td>â³</td>
<td>Reality Scrubber timeline</td>
</tr>
<tr>
<td>Quantum Realm</td>
<td>ğŸŒŒ</td>
<td>Parallel realities view</td>
</tr>
<tr>
<td>Oracleâ€™s Chamber</td>
<td>ğŸ”®</td>
<td>Pre-Cognition predictions</td>
</tr>
<tr>
<td>Gallery</td>
<td>ğŸ–¼ï¸</td>
<td>View creations</td>
</tr>
<tr>
<td>Vault</td>
<td>ğŸ”</td>
<td>Saved/bookmarked items</td>
</tr>
</tbody>
</table>
<h3 id="carpet-commands">41.5 Carpet Commands</h3>
<pre class="typescript"><code>// Fly to a destination
await magicCarpetService.command(carpetId, { 
  type: &#39;fly&#39;, 
  destination: &#39;Workshop&#39; 
});

// Return to chat
await magicCarpetService.command(carpetId, { type: &#39;land&#39; });

// Increase complexity
await magicCarpetService.command(carpetId, { type: &#39;ascend&#39; });

// Time travel
await magicCarpetService.command(carpetId, { 
  type: &#39;rewind&#39;, 
  to: -2 // Go back 2 snapshots
});

// Split into parallel realities
await magicCarpetService.command(carpetId, { 
  type: &#39;branch&#39;, 
  options: [&#39;Conservative Plan&#39;, &#39;Aggressive Plan&#39;] 
});

// Collapse to winner
await magicCarpetService.command(carpetId, { 
  type: &#39;collapse&#39;, 
  winner: &#39;branch-id&#39; 
});</code></pre>
<h3 id="carpet-themes">41.6 Carpet Themes</h3>
<p>Pre-built visual themes for personalization:</p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 43%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>Theme</th>
<th>Description</th>
<th>Gradient</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mystic Night</td>
<td>Deep purple mystical (default)</td>
<td>Indigo â†’ Purple â†’ Violet</td>
</tr>
<tr>
<td>Desert Sun</td>
<td>Warm golden</td>
<td>Amber â†’ Orange â†’ Brown</td>
</tr>
<tr>
<td>Ocean Deep</td>
<td>Cool blue aquatic</td>
<td>Cyan â†’ Teal â†’ Emerald</td>
</tr>
<tr>
<td>Cosmic Void</td>
<td>Dark minimalist</td>
<td>Gray gradient</td>
</tr>
<tr>
<td>Neon Circuit</td>
<td>Cyberpunk electric</td>
<td>Cyan â†’ Purple â†’ Pink</td>
</tr>
</tbody>
</table>
<h3 id="carpet-preferences">41.7 Carpet Preferences</h3>
<pre class="typescript"><code>interface CarpetPreferences {
  // Navigation
  autoFly: boolean;              // Auto-morph on intent detection
  smoothTransitions: boolean;    // Animated vs instant
  showJourneyTrail: boolean;     // Show navigation history
  
  // Pre-Cognition
  preCognitionEnabled: boolean;
  showPredictions: boolean;
  telepathyIntensity: &#39;subtle&#39; | &#39;moderate&#39; | &#39;aggressive&#39;;
  
  // Reality Scrubber
  showTimeline: boolean;
  autoSnapshot: boolean;
  snapshotInterval: number;      // Seconds
  
  // Quantum Futures
  maxParallelRealities: number;
  autoCompare: boolean;
  
  // Accessibility
  reducedMotion: boolean;
  highContrast: boolean;
  screenReaderMode: boolean;
}</code></pre>
<h3 id="journey-navigation">41.8 Journey Navigation</h3>
<p>The Magic Carpet tracks the userâ€™s journey:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MAGIC CARPET JOURNEY                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   ğŸ  â”€â”€â”€â”€â–º ğŸ”¨ â”€â”€â”€â”€â–º ğŸŒŒ â”€â”€â”€â”€â–º ğŸ”® â”€â”€â”€â”€â–º â—†                                      â”‚
â”‚   Command  Workshop  Quantum  Oracle   NOW                                   â”‚
â”‚   Center            Realm    Chamber                                         â”‚
â”‚                                                                              â”‚
â”‚   Click any point to fly back. Journey is saved with Reality Scrubber.      â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="api-endpoints-11">41.9 API Endpoints</h3>
<p>Base path: <code>/api/thinktank/magic-carpet</code></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>POST</td>
<td><code>/summon</code></td>
<td>Summon a new Magic Carpet</td>
</tr>
<tr>
<td>GET</td>
<td><code>/:carpetId</code></td>
<td>Get carpet state</td>
</tr>
<tr>
<td>POST</td>
<td><code>/:carpetId/fly</code></td>
<td>Fly to destination</td>
</tr>
<tr>
<td>POST</td>
<td><code>/:carpetId/land</code></td>
<td>Land (return to chat)</td>
</tr>
<tr>
<td>POST</td>
<td><code>/:carpetId/command</code></td>
<td>Execute a command</td>
</tr>
<tr>
<td>GET</td>
<td><code>/:carpetId/journey</code></td>
<td>Get journey history</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/:carpetId/theme</code></td>
<td>Update theme</td>
</tr>
<tr>
<td>PUT</td>
<td><code>/:carpetId/preferences</code></td>
<td>Update preferences</td>
</tr>
<tr>
<td>GET</td>
<td><code>/destinations</code></td>
<td>Get available destinations</td>
</tr>
<tr>
<td>GET</td>
<td><code>/themes</code></td>
<td>Get available themes</td>
</tr>
</tbody>
</table>
<h3 id="database-tables-21">41.10 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>magic_carpets</code></td>
<td>Carpet state and configuration</td>
</tr>
<tr>
<td><code>carpet_destinations</code></td>
<td>Pre-defined and custom destinations</td>
</tr>
<tr>
<td><code>carpet_journey_points</code></td>
<td>Navigation history</td>
</tr>
<tr>
<td><code>carpet_themes</code></td>
<td>Visual themes</td>
</tr>
<tr>
<td><code>carpet_analytics</code></td>
<td>Usage analytics</td>
</tr>
</tbody>
</table>
<h3 id="implementation-files-8">41.11 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>packages/shared/src/types/magic-carpet.types.ts</code></td>
<td>Type definitions</td>
</tr>
<tr>
<td><code>lambda/shared/services/magic-carpet/magic-carpet.service.ts</code></td>
<td>Main service</td>
</tr>
<tr>
<td><code>migrations/163_magic_carpet.sql</code></td>
<td>Database schema</td>
</tr>
</tbody>
</table>
<h3 id="integration-with-reality-engine">41.12 Integration with Reality Engine</h3>
<p>The Magic Carpet wraps the Reality Engine:</p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MAGIC CARPET                                         â”‚
â”‚                    (User Experience Layer)                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   &quot;Fly to Workshop&quot;  â†’  carpet.fly(&#39;workshop&#39;)                              â”‚
â”‚                              â”‚                                               â”‚
â”‚                              â–¼                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                      REALITY ENGINE                                  â”‚   â”‚
â”‚   â”‚                   (Capability Layer)                                 â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â”‚   Morphic UI â—„â”€â”€â”€â”€ Intent: &#39;coding&#39;                                 â”‚   â”‚
â”‚   â”‚   Reality Scrubber â—„â”€â”€â”€â”€ Auto-snapshot                              â”‚   â”‚
â”‚   â”‚   Pre-Cognition â—„â”€â”€â”€â”€ Predict next destinations                     â”‚   â”‚
â”‚   â”‚                                                                      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<hr />
<h2 id="magic-carpet-ui-components">42. Magic Carpet UI Components</h2>
<p>The Magic Carpet UI is implemented through a set of React components that bring the 2026 UI/UX trends to life.</p>
<h3 id="component-inventory">42.1 Component Inventory</h3>
<table>
<colgroup>
<col style="width: 36%" />
<col style="width: 30%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>Component</th>
<th>Purpose</th>
<th>Location</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MagicCarpetNavigator</code></td>
<td>Bottom navigation with journey trail</td>
<td><code>magic-carpet/magic-carpet-navigator.tsx</code></td>
</tr>
<tr>
<td><code>RealityScrubberTimeline</code></td>
<td>Video-editor timeline for state snapshots</td>
<td><code>magic-carpet/reality-scrubber-timeline.tsx</code></td>
</tr>
<tr>
<td><code>QuantumSplitView</code></td>
<td>Side-by-side reality comparison</td>
<td><code>magic-carpet/quantum-split-view.tsx</code></td>
</tr>
<tr>
<td><code>PreCognitionSuggestions</code></td>
<td>Predicted actions panel</td>
<td><code>magic-carpet/pre-cognition-suggestions.tsx</code></td>
</tr>
<tr>
<td><code>AIPresenceIndicator</code></td>
<td>AI cognitive/emotional state display</td>
<td><code>magic-carpet/ai-presence-indicator.tsx</code></td>
</tr>
<tr>
<td><code>SpatialGlassCard</code></td>
<td>Glassmorphism card with depth</td>
<td><code>magic-carpet/spatial-glass-card.tsx</code></td>
</tr>
<tr>
<td><code>GlassPanel</code></td>
<td>Large glass content area</td>
<td><code>magic-carpet/spatial-glass-card.tsx</code></td>
</tr>
<tr>
<td><code>GlassButton</code></td>
<td>Interactive glass button</td>
<td><code>magic-carpet/spatial-glass-card.tsx</code></td>
</tr>
<tr>
<td><code>GlassBadge</code></td>
<td>Status indicator with glass effect</td>
<td><code>magic-carpet/spatial-glass-card.tsx</code></td>
</tr>
<tr>
<td><code>FocusModeControls</code></td>
<td>Focus mode toggle and controls</td>
<td><code>magic-carpet/focus-mode.tsx</code></td>
</tr>
<tr>
<td><code>FocusOverlay</code></td>
<td>Dimming overlay for focus mode</td>
<td><code>magic-carpet/focus-mode.tsx</code></td>
</tr>
</tbody>
</table>
<h3 id="usage-examples">42.2 Usage Examples</h3>
<pre class="tsx"><code>import {
  MagicCarpetNavigator,
  RealityScrubberTimeline,
  QuantumSplitView,
  PreCognitionSuggestions,
  AIPresenceIndicator,
  SpatialGlassCard,
  FocusModeControls,
} from &#39;@/components/thinktank/magic-carpet&#39;;

// Magic Carpet Navigator (bottom of screen)
&lt;MagicCarpetNavigator
  currentDestination={{ id: &#39;workspace&#39;, name: &#39;Workshop&#39;, icon: &#39;ğŸ”¨&#39; }}
  journey={journeyHistory}
  predictions={preCognizedActions}
  telepathyScore={0.82}
  mode=&quot;hovering&quot;
  altitude=&quot;medium&quot;
  onFly={(dest) =&gt; navigateTo(dest)}
  onLand={() =&gt; returnToChat()}
/&gt;

// Reality Scrubber Timeline
&lt;RealityScrubberTimeline
  snapshots={stateSnapshots}
  currentPosition={currentSnapshotIndex}
  onScrubTo={(position) =&gt; restoreSnapshot(position)}
  onCreateBookmark={(label) =&gt; bookmarkCurrentState(label)}
/&gt;

// Quantum Split View
&lt;QuantumSplitView
  branches={parallelRealities}
  onCollapse={(winnerId) =&gt; collapseToReality(winnerId)}
/&gt;

// AI Presence Indicator
&lt;AIPresenceIndicator
  state=&quot;thinking&quot;
  affect={{ valence: 0.6, arousal: 0.4, curiosity: 0.8, confidence: 0.85 }}
  currentTask=&quot;Analyzing user intent...&quot;
  modelName=&quot;claude-3.5-sonnet&quot;
/&gt;

// Spatial Glass Card
&lt;SpatialGlassCard variant=&quot;strong&quot; layer=&quot;floating&quot; glow glowColor=&quot;purple&quot;&gt;
  &lt;p&gt;Content with glass effect&lt;/p&gt;
&lt;/SpatialGlassCard&gt;</code></pre>
<h3 id="dependencies-1">42.3 Dependencies</h3>
<p>The Magic Carpet UI requires <strong>framer-motion</strong> for animations:</p>
<pre class="bash"><code>npm install framer-motion@^11.0.0</code></pre>
<h3 id="demo-page">42.4 Demo Page</h3>
<p>Access the Magic Carpet UI demo at:</p>
<pre><code>/thinktank/magic-carpet</code></pre>
<p>This page showcases all components with interactive examples.</p>
<hr />
<h2 id="concurrent-task-execution-moat-17">43. Concurrent Task Execution (Moat #17)</h2>
<p><strong>Moat Evaluation</strong>: Score 20/30 - Tier 3 Feature Moat. No major competitor offers split-pane concurrent execution with WebSocket multiplexing.</p>
<h3 id="overview-6">43.1 Overview</h3>
<p>Concurrent Task Execution enables users to run 2-4 AI tasks simultaneously in a split-pane UI, compare outputs, and merge the best results. This is a key differentiator vs.Â single-threaded competitors.</p>
<h3 id="architecture-4">43.2 Architecture</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Split-Pane UI                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Pane 1    â”‚   Pane 2    â”‚   Pane 3    â”‚      Pane 4         â”‚
â”‚  Task A     â”‚  Task B     â”‚  Task C     â”‚     Task D          â”‚
â”‚  (running)  â”‚  (queued)   â”‚  (complete) â”‚    (streaming)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“              â†“              â†“              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               WebSocket Multiplexer                             â”‚
â”‚  Channel isolation â€¢ Heartbeat â€¢ Reconnection â€¢ Sequencing      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“              â†“              â†“              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Background Queue                               â”‚
â”‚  Priority scheduling â€¢ Max concurrent: 4 â€¢ Queue depth: 20     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="configuration-10">43.3 Configuration</h3>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td><code>true</code></td>
<td>Enable concurrent execution</td>
</tr>
<tr>
<td><code>maxPanes</code></td>
<td><code>4</code></td>
<td>Maximum split panes (1-8)</td>
</tr>
<tr>
<td><code>maxConcurrentTasks</code></td>
<td><code>4</code></td>
<td>Maximum simultaneous tasks (1-10)</td>
</tr>
<tr>
<td><code>maxQueueDepth</code></td>
<td><code>20</code></td>
<td>Maximum queued tasks (1-100)</td>
</tr>
<tr>
<td><code>defaultLayout</code></td>
<td><code>horizontal-2</code></td>
<td>Default pane layout</td>
</tr>
<tr>
<td><code>defaultSyncMode</code></td>
<td><code>independent</code></td>
<td>Default sync mode</td>
</tr>
<tr>
<td><code>enableComparison</code></td>
<td><code>true</code></td>
<td>Enable task comparison</td>
</tr>
<tr>
<td><code>enableMerge</code></td>
<td><code>true</code></td>
<td>Enable task merging</td>
</tr>
</tbody>
</table>
<h3 id="pane-layouts">43.4 Pane Layouts</h3>
<table>
<thead>
<tr>
<th>Layout</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>single</code></td>
<td>Full-width single pane</td>
</tr>
<tr>
<td><code>horizontal-2</code></td>
<td>Two panes side-by-side</td>
</tr>
<tr>
<td><code>vertical-2</code></td>
<td>Two panes stacked</td>
</tr>
<tr>
<td><code>grid-4</code></td>
<td>2x2 grid of four panes</td>
</tr>
<tr>
<td><code>focus-left</code></td>
<td>Large left pane, small right</td>
</tr>
<tr>
<td><code>focus-right</code></td>
<td>Small left pane, large right</td>
</tr>
</tbody>
</table>
<h3 id="sync-modes">43.5 Sync Modes</h3>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>independent</code></td>
<td>Each pane operates independently</td>
</tr>
<tr>
<td><code>mirror-input</code></td>
<td>Same prompt sent to all panes</td>
</tr>
<tr>
<td><code>compare-output</code></td>
<td>Automatic comparison when all complete</td>
</tr>
</tbody>
</table>
<h3 id="task-comparison">43.6 Task Comparison</h3>
<p>When multiple tasks complete, users can compare results:</p>
<pre class="typescript"><code>// Compare completed tasks
const comparison = await compareTasks(tenantId, [taskId1, taskId2, taskId3]);

// Returns:
{
  similarities: [
    { metric: &#39;semantic&#39;, score: 0.85, details: &#39;High semantic similarity&#39; },
    { metric: &#39;structural&#39;, score: 0.72, details: &#39;Moderate structural similarity&#39; },
    { metric: &#39;factual&#39;, score: 0.91, details: &#39;Strong factual agreement&#39; }
  ],
  differences: [...],
  recommendation: &#39;Results are mostly consistent. Review highlighted differences.&#39;
}</code></pre>
<h3 id="task-merging">43.7 Task Merging</h3>
<p>Three merge strategies are available:</p>
<table>
<thead>
<tr>
<th>Strategy</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>best-of</code></td>
<td>Select the highest-scored result</td>
</tr>
<tr>
<td><code>combine</code></td>
<td>Concatenate all results with separators</td>
</tr>
<tr>
<td><code>consensus</code></td>
<td>AI-synthesized consensus from all results</td>
</tr>
</tbody>
</table>
<h3 id="api-endpoints-12">43.8 API Endpoints</h3>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/api/thinktank/concurrent/config</code></td>
<td>GET</td>
<td>Get configuration</td>
</tr>
<tr>
<td><code>/api/thinktank/concurrent/config</code></td>
<td>PUT</td>
<td>Update configuration</td>
</tr>
<tr>
<td><code>/api/thinktank/concurrent/tasks</code></td>
<td>POST</td>
<td>Create task</td>
</tr>
<tr>
<td><code>/api/thinktank/concurrent/tasks/:id</code></td>
<td>GET</td>
<td>Get task status</td>
</tr>
<tr>
<td><code>/api/thinktank/concurrent/tasks/:id</code></td>
<td>DELETE</td>
<td>Cancel task</td>
</tr>
<tr>
<td><code>/api/thinktank/concurrent/queue</code></td>
<td>GET</td>
<td>Get queue status</td>
</tr>
<tr>
<td><code>/api/thinktank/concurrent/panes</code></td>
<td>POST</td>
<td>Create pane config</td>
</tr>
<tr>
<td><code>/api/thinktank/concurrent/compare</code></td>
<td>POST</td>
<td>Compare tasks</td>
</tr>
<tr>
<td><code>/api/thinktank/concurrent/merge</code></td>
<td>POST</td>
<td>Merge tasks</td>
</tr>
<tr>
<td><code>/api/thinktank/concurrent/metrics</code></td>
<td>GET</td>
<td>Get metrics</td>
</tr>
</tbody>
</table>
<h3 id="database-tables-22">43.9 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>concurrent_execution_config</code></td>
<td>Per-tenant configuration</td>
</tr>
<tr>
<td><code>concurrent_tasks</code></td>
<td>Task records with status/results</td>
</tr>
<tr>
<td><code>split_pane_configs</code></td>
<td>User pane layouts</td>
</tr>
<tr>
<td><code>task_comparisons</code></td>
<td>Comparison results</td>
</tr>
<tr>
<td><code>concurrent_execution_metrics</code></td>
<td>Usage metrics</td>
</tr>
</tbody>
</table>
<h3 id="implementation-files-9">43.10 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>packages/shared/src/types/concurrent-execution.types.ts</code></td>
<td>Type definitions</td>
</tr>
<tr>
<td><code>lambda/shared/services/concurrent-execution.service.ts</code></td>
<td>Core service</td>
</tr>
<tr>
<td><code>lambda/thinktank/concurrent-execution.ts</code></td>
<td>API handler</td>
</tr>
<tr>
<td><code>migrations/170_concurrent_execution.sql</code></td>
<td>Database schema</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="structure-from-chaos-synthesis-moat-20">44. Structure from Chaos Synthesis (Moat #20)</h2>
<p><strong>Moat Evaluation</strong>: Score 20/30 - Tier 3 Feature Moat. AI transforms whiteboard chaos â†’ structured decisions, data, project plans. Think Tank differentiation vs Miro/Mural.</p>
<h3 id="overview-7">44.1 Overview</h3>
<p>Structure from Chaos Synthesis takes unstructured input (whiteboards, brainstorms, meeting notes, voice transcripts) and transforms it into structured outputs (action items, decisions, project plans, knowledge bases).</p>
<h3 id="architecture-5">44.2 Architecture</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Chaotic Input                                â”‚
â”‚  Whiteboard â€¢ Brainstorm â€¢ Meeting Notes â€¢ Voice Transcript     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Synthesis Pipeline                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. Parse Input â†’ 2. Extract Entities â†’ 3. Identify Relations  â”‚
â”‚  4. Generate Structure â†’ 5. Validate Output                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Structured Output                              â”‚
â”‚  Decisions â€¢ Action Items â€¢ Project Plan â€¢ Knowledge Base       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="input-types">44.3 Input Types</h3>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 46%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>whiteboard</code></td>
<td>Visual whiteboard with sticky notes</td>
<td>Miro/FigJam export</td>
</tr>
<tr>
<td><code>brainstorm</code></td>
<td>Unstructured idea dump</td>
<td>Free-form text</td>
</tr>
<tr>
<td><code>meeting_notes</code></td>
<td>Notes from a meeting</td>
<td>Transcription or notes</td>
</tr>
<tr>
<td><code>voice_transcript</code></td>
<td>Speech-to-text output</td>
<td>Zoom/Teams transcript</td>
</tr>
<tr>
<td><code>chat_history</code></td>
<td>Conversation history</td>
<td>Slack/Teams export</td>
</tr>
<tr>
<td><code>document_dump</code></td>
<td>Multiple documents</td>
<td>File uploads</td>
</tr>
<tr>
<td><code>mixed</code></td>
<td>Combination of above</td>
<td>Multi-source input</td>
</tr>
</tbody>
</table>
<h3 id="output-types">44.4 Output Types</h3>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 44%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Contains</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>decisions</code></td>
<td>Key decisions made</td>
<td>Decision list with context</td>
</tr>
<tr>
<td><code>action_items</code></td>
<td>Tasks to complete</td>
<td>Assignee, due date, priority</td>
</tr>
<tr>
<td><code>project_plan</code></td>
<td>Full project plan</td>
<td>Milestones, timeline, dependencies</td>
</tr>
<tr>
<td><code>meeting_summary</code></td>
<td>Meeting summary</td>
<td>Key points, attendees, outcomes</td>
</tr>
<tr>
<td><code>knowledge_base</code></td>
<td>Knowledge extraction</td>
<td>Concepts, facts, relationships</td>
</tr>
<tr>
<td><code>data_table</code></td>
<td>Structured data</td>
<td>Tabular format</td>
</tr>
<tr>
<td><code>timeline</code></td>
<td>Chronological view</td>
<td>Events in sequence</td>
</tr>
<tr>
<td><code>hierarchy</code></td>
<td>Hierarchical structure</td>
<td>Parent-child relationships</td>
</tr>
<tr>
<td><code>comparison</code></td>
<td>Compare items</td>
<td>Side-by-side analysis</td>
</tr>
</tbody>
</table>
<h3 id="configuration-11">44.5 Configuration</h3>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td><code>true</code></td>
<td>Enable synthesis</td>
</tr>
<tr>
<td><code>defaultOutputType</code></td>
<td><code>meeting_summary</code></td>
<td>Default output format</td>
</tr>
<tr>
<td><code>extractEntities</code></td>
<td><code>true</code></td>
<td>Extract named entities</td>
</tr>
<tr>
<td><code>extractRelationships</code></td>
<td><code>true</code></td>
<td>Identify entity relationships</td>
</tr>
<tr>
<td><code>generateTimeline</code></td>
<td><code>true</code></td>
<td>Generate timeline view</td>
</tr>
<tr>
<td><code>generateActionItems</code></td>
<td><code>true</code></td>
<td>Extract action items</td>
</tr>
<tr>
<td><code>autoAssignTasks</code></td>
<td><code>false</code></td>
<td>Auto-assign based on mentions</td>
</tr>
<tr>
<td><code>confidenceThreshold</code></td>
<td><code>0.70</code></td>
<td>Minimum confidence score</td>
</tr>
<tr>
<td><code>maxProcessingTimeMs</code></td>
<td><code>30000</code></td>
<td>Processing timeout</td>
</tr>
</tbody>
</table>
<h3 id="entity-extraction">44.6 Entity Extraction</h3>
<p>Automatically extracts entities from chaotic input:</p>
<table>
<thead>
<tr>
<th>Entity Type</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>person</code></td>
<td><span class="citation" data-cites="mentions">@mentions</span>, â€œJohn Smithâ€</td>
</tr>
<tr>
<td><code>organization</code></td>
<td>â€œAcme Corpâ€, â€œthe marketing teamâ€</td>
</tr>
<tr>
<td><code>project</code></td>
<td>Project names, codenames</td>
</tr>
<tr>
<td><code>product</code></td>
<td>Product references</td>
</tr>
<tr>
<td><code>date</code></td>
<td>â€œnext Mondayâ€, â€œQ2 2026â€</td>
</tr>
<tr>
<td><code>location</code></td>
<td>Meeting rooms, cities</td>
</tr>
<tr>
<td><code>concept</code></td>
<td>Technical terms, ideas</td>
</tr>
<tr>
<td><code>metric</code></td>
<td>KPIs, numbers</td>
</tr>
<tr>
<td><code>resource</code></td>
<td>Tools, documents</td>
</tr>
</tbody>
</table>
<h3 id="relationship-types">44.7 Relationship Types</h3>
<table>
<thead>
<tr>
<th>Relationship</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>owns</code></td>
<td>Person owns task/project</td>
</tr>
<tr>
<td><code>assigned_to</code></td>
<td>Task assigned to person</td>
</tr>
<tr>
<td><code>depends_on</code></td>
<td>Task depends on another</td>
</tr>
<tr>
<td><code>blocks</code></td>
<td>Task blocks another</td>
</tr>
<tr>
<td><code>related_to</code></td>
<td>General relationship</td>
</tr>
<tr>
<td><code>parent_of</code></td>
<td>Hierarchical parent</td>
</tr>
<tr>
<td><code>precedes</code></td>
<td>Temporal ordering</td>
</tr>
<tr>
<td><code>contradicts</code></td>
<td>Conflicting statements</td>
</tr>
<tr>
<td><code>supports</code></td>
<td>Supporting evidence</td>
</tr>
</tbody>
</table>
<h3 id="whiteboard-parsing">44.8 Whiteboard Parsing</h3>
<p>For visual whiteboards, the service parses spatial elements:</p>
<pre class="typescript"><code>// Parse whiteboard elements into thematic clusters
const clusters = await parseWhiteboard(elements);

// Returns clusters with:
{
  id: &#39;cluster-1&#39;,
  elements: [...],  // Grouped elements
  theme: &#39;marketing&#39;,  // AI-detected theme
  centroid: { x: 150, y: 200 },  // Cluster center
  significance: 0.85  // Importance score
}</code></pre>
<h3 id="api-endpoints-13">44.9 API Endpoints</h3>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 25%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/api/thinktank/chaos/config</code></td>
<td>GET</td>
<td>Get configuration</td>
</tr>
<tr>
<td><code>/api/thinktank/chaos/config</code></td>
<td>PUT</td>
<td>Update configuration</td>
</tr>
<tr>
<td><code>/api/thinktank/chaos/synthesize</code></td>
<td>POST</td>
<td>Full synthesis pipeline</td>
</tr>
<tr>
<td><code>/api/thinktank/chaos/extract/actions</code></td>
<td>POST</td>
<td>Extract action items only</td>
</tr>
<tr>
<td><code>/api/thinktank/chaos/extract/decisions</code></td>
<td>POST</td>
<td>Extract decisions only</td>
</tr>
<tr>
<td><code>/api/thinktank/chaos/extract/questions</code></td>
<td>POST</td>
<td>Extract questions only</td>
</tr>
<tr>
<td><code>/api/thinktank/chaos/project-plan</code></td>
<td>POST</td>
<td>Generate project plan</td>
</tr>
<tr>
<td><code>/api/thinktank/chaos/whiteboard/parse</code></td>
<td>POST</td>
<td>Parse whiteboard elements</td>
</tr>
<tr>
<td><code>/api/thinktank/chaos/metrics</code></td>
<td>GET</td>
<td>Get metrics</td>
</tr>
</tbody>
</table>
<h3 id="database-tables-23">44.10 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>synthesis_config</code></td>
<td>Per-tenant configuration</td>
</tr>
<tr>
<td><code>chaotic_inputs</code></td>
<td>Raw input storage</td>
</tr>
<tr>
<td><code>structured_outputs</code></td>
<td>Generated outputs</td>
</tr>
<tr>
<td><code>extracted_entities</code></td>
<td>Named entities</td>
</tr>
<tr>
<td><code>entity_relationships</code></td>
<td>Entity relationships</td>
</tr>
<tr>
<td><code>structured_items</code></td>
<td>Action items, decisions</td>
</tr>
<tr>
<td><code>whiteboard_elements</code></td>
<td>Visual element data</td>
</tr>
<tr>
<td><code>synthesis_metrics</code></td>
<td>Usage metrics</td>
</tr>
</tbody>
</table>
<h3 id="implementation-files-10">44.11 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>packages/shared/src/types/structure-from-chaos.types.ts</code></td>
<td>Type definitions</td>
</tr>
<tr>
<td><code>lambda/shared/services/structure-from-chaos.service.ts</code></td>
<td>Core service</td>
</tr>
<tr>
<td><code>lambda/thinktank/structure-from-chaos.ts</code></td>
<td>API handler</td>
</tr>
<tr>
<td><code>migrations/171_structure_from_chaos.sql</code></td>
<td>Database schema</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="delight-services-code-quality">45. Delight Services Code Quality</h2>
<h3 id="overview-8">45.1 Overview</h3>
<p>The Think Tank Delight system has comprehensive unit test coverage for its core services:</p>
<ul>
<li><strong>delight.service</strong> - Core delight preferences and personality modes</li>
<li><strong>delight-orchestration.service</strong> - Contextual message generation for workflows</li>
<li><strong>delight-events.service</strong> - Real-time event emission for plan execution</li>
</ul>
<h3 id="test-coverage">45.2 Test Coverage</h3>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 29%" />
<col style="width: 18%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th>Service</th>
<th>Test File</th>
<th>Tests</th>
<th>Coverage</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>delight.service</code></td>
<td><code>delight.service.test.ts</code></td>
<td>15</td>
<td>85%</td>
</tr>
<tr>
<td><code>delight-orchestration.service</code></td>
<td><code>delight-orchestration.service.test.ts</code></td>
<td>17</td>
<td>92%</td>
</tr>
<tr>
<td><code>delight-events.service</code></td>
<td><code>delight-events.service.test.ts</code></td>
<td>23</td>
<td>88%</td>
</tr>
</tbody>
</table>
<h3 id="tested-methods">45.3 Tested Methods</h3>
<p><strong>delight-orchestration.service</strong>: - <code>getContextualMessage()</code> - Generates mode-appropriate messages - <code>getDomainLoadingMessage()</code> - Domain-specific loading messages - <code>getModelDynamicsMessage()</code> - Model consensus indicators - <code>getSynthesisMessage()</code> - Confidence-based synthesis messages - <code>clearSession()</code> - Session cleanup</p>
<p><strong>delight-events.service</strong>: - <code>subscribe()</code> / <code>unsubscribe()</code> - Event subscription management - <code>emitMessage()</code> / <code>emitAchievement()</code> - Event emission - <code>emitStepUpdate()</code> / <code>emitPlanUpdate()</code> - Progress updates - <code>emitWorkflowDelight()</code> - Complete workflow delight events - <code>getHistory()</code> / <code>clearHistory()</code> - Event history management</p>
<h3 id="running-tests">45.4 Running Tests</h3>
<pre class="bash"><code>cd packages/infrastructure
npx vitest run lambda/shared/services/__tests__/delight*.test.ts</code></pre>
<h3 id="think-tank-code-quality-dashboard">45.5 Think Tank Code Quality Dashboard</h3>
<p><strong>Location</strong>: <code>/thinktank/code-quality</code></p>
<p>The Think Tank Code Quality page displays: - Service coverage metrics for Delight, Brain Planning, and Domain services - Test pass rates and recent test runs - Detailed method coverage for each service</p>
<h3 id="implementation-files-11">45.6 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>lambda/shared/services/__tests__/delight.service.test.ts</code></td>
<td>Core service tests</td>
</tr>
<tr>
<td><code>lambda/shared/services/__tests__/delight-orchestration.service.test.ts</code></td>
<td>Orchestration tests</td>
</tr>
<tr>
<td><code>lambda/shared/services/__tests__/delight-events.service.test.ts</code></td>
<td>Events service tests</td>
</tr>
<tr>
<td><code>apps/admin-dashboard/app/(dashboard)/thinktank/code-quality/page.tsx</code></td>
<td>Dashboard UI</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="section-46-sovereign-mesh-in-think-tank-admin">Section 46: Sovereign Mesh in Think Tank Admin</h2>
<p><strong>Location</strong>: Think Tank Admin â†’ Sovereign Mesh</p>
<p>The Sovereign Mesh is accessible in Think Tank Admin for users who need to manage autonomous agents and view decision transparency.</p>
<h3 id="navigation-items">46.1 Navigation Items</h3>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 28%" />
<col style="width: 42%" />
</colgroup>
<thead>
<tr>
<th>Page</th>
<th>Path</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>Overview</td>
<td><code>/sovereign-mesh</code></td>
<td>Dashboard with metrics and recent activity</td>
</tr>
<tr>
<td>Agents</td>
<td><code>/sovereign-mesh/agents</code></td>
<td>Create and manage OODA agents</td>
</tr>
<tr>
<td>Apps</td>
<td><code>/sovereign-mesh/apps</code></td>
<td>Browse 3,000+ app integrations</td>
</tr>
<tr>
<td>Transparency</td>
<td><code>/sovereign-mesh/transparency</code></td>
<td>View Cato decision explanations</td>
</tr>
<tr>
<td>AI Helper</td>
<td><code>/sovereign-mesh/ai-helper</code></td>
<td>Configure parametric AI assistance</td>
</tr>
<tr>
<td>Approvals</td>
<td><code>/sovereign-mesh/approvals</code></td>
<td>HITL approval queue</td>
</tr>
</tbody>
</table>
<h3 id="user-permissions">46.2 User Permissions</h3>
<p>Think Tank users see a subset of Sovereign Mesh functionality: - <strong>View</strong>: All users can view agents, apps, and their own executions - <strong>Execute</strong>: Users can run agents within their budget limits - <strong>Approve</strong>: Users with approval role can handle HITL requests</p>
<h3 id="implementation">46.3 Implementation</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>apps/thinktank-admin/components/layout/sidebar.tsx</code></td>
<td>Navigation with 6 Sovereign Mesh items</td>
</tr>
<tr>
<td>Pages mirror admin-dashboard versions</td>
<td>Shared API endpoints</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="section-47-hitl-orchestration-in-think-tank-admin">Section 47: HITL Orchestration in Think Tank Admin</h2>
<p><strong>Location</strong>: Think Tank Admin â†’ Sovereign Mesh â†’ HITL Orchestration</p>
<p>Advanced Human-in-the-Loop orchestration for intelligent question management in user workflows.</p>
<h3 id="overview-9">47.1 Overview</h3>
<p>HITL Orchestration implements industry best practices to reduce unnecessary questions while ensuring critical information is captured:</p>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>SAGE-Agent Bayesian VOI</strong></td>
<td>Calculates whether asking a question is worth the userâ€™s time</td>
</tr>
<tr>
<td><strong>Question Batching</strong></td>
<td>Groups related questions to reduce interruptions</td>
</tr>
<tr>
<td><strong>Two-Question Rule</strong></td>
<td>Maximum 2 clarifications per workflow</td>
</tr>
<tr>
<td><strong>Abstention Detection</strong></td>
<td>Detects when AI should decline to answer</td>
</tr>
</tbody>
</table>
<h3 id="user-facing-benefits-1">47.2 User-Facing Benefits</h3>
<ul>
<li><strong>70% fewer unnecessary questions</strong> - AI only asks when genuinely needed</li>
<li><strong>2.7x faster response times</strong> - Batched questions reduce context switching</li>
<li><strong>Explicit assumptions</strong> - When skipping questions, AI states assumptions clearly</li>
</ul>
<h3 id="navigation">47.3 Navigation</h3>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 28%" />
<col style="width: 42%" />
</colgroup>
<thead>
<tr>
<th>Page</th>
<th>Path</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td>HITL Orchestration</td>
<td><code>/hitl-orchestration</code></td>
<td>View orchestration metrics and settings</td>
</tr>
</tbody>
</table>
<h3 id="dashboard-tabs">47.4 Dashboard Tabs</h3>
<table>
<thead>
<tr>
<th>Tab</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Overview</strong></td>
<td>Key metrics, VOI breakdown, abstention reasons</td>
</tr>
<tr>
<td><strong>Value of Information</strong></td>
<td>SAGE-Agent VOI statistics and decisions</td>
</tr>
<tr>
<td><strong>Abstention</strong></td>
<td>Detection methods and model-level statistics</td>
</tr>
<tr>
<td><strong>Batching</strong></td>
<td>Three-layer batching strategies and metrics</td>
</tr>
</tbody>
</table>
<h3 id="key-metrics-2">47.5 Key Metrics</h3>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Question Reduction</td>
<td>Percentage of questions skipped via VOI</td>
</tr>
<tr>
<td>Prior Accuracy</td>
<td>How often predictions match actual answers</td>
</tr>
<tr>
<td>Abstention Events</td>
<td>Times AI correctly declined to answer</td>
</tr>
<tr>
<td>Batch Completion</td>
<td>Success rate of batched question sets</td>
</tr>
</tbody>
</table>
<h3 id="implementation-files-12">47.6 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>apps/thinktank-admin/app/hitl-orchestration/page.tsx</code></td>
<td>Dashboard page</td>
</tr>
<tr>
<td><code>apps/thinktank-admin/components/layout/sidebar.tsx</code></td>
<td>Navigation item</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="section-48-scout-hitl-integration-v5.34.0">Section 48: Scout HITL Integration (v5.34.0)</h2>
<p><strong>Location</strong>: Think Tank Admin â†’ Sovereign Mesh â†’ Scout HITL</p>
<p>Scout HITL bridges Catoâ€™s Scout persona (epistemic uncertainty mode) with HITL orchestration for intelligent clarification during user workflows.</p>
<h3 id="overview-10">48.1 Overview</h3>
<p>When the AI encounters epistemic uncertainty, the Scout persona activates and generates targeted clarification questions:</p>
<ol type="1">
<li>Scout persona activates due to uncertainty</li>
<li>Questions prioritized by aspect impact and domain</li>
<li>Questions filtered through VOI (Value-of-Information) scoring</li>
<li>High-VOI questions go to user, low-VOI get reasonable assumptions</li>
<li>Responses reduce uncertainty, allowing workflow to proceed</li>
</ol>
<h3 id="key-metrics-3">48.2 Key Metrics</h3>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Total Sessions</strong></td>
<td>Number of Scout clarification sessions</td>
</tr>
<tr>
<td><strong>Avg Questions</strong></td>
<td>Average questions asked per session</td>
</tr>
<tr>
<td><strong>Proceed Rate</strong></td>
<td>Sessions that proceeded successfully</td>
</tr>
<tr>
<td><strong>Avg Assumptions</strong></td>
<td>Auto-assumed aspects per session</td>
</tr>
</tbody>
</table>
<h3 id="domains">48.3 Domains</h3>
<p>Questions are prioritized based on domain-specific impact:</p>
<table>
<thead>
<tr>
<th>Domain</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>medical</code></td>
<td>HIPAA-sensitive, safety-critical</td>
</tr>
<tr>
<td><code>financial</code></td>
<td>SOC2/PCI compliance</td>
</tr>
<tr>
<td><code>legal</code></td>
<td>Regulatory compliance</td>
</tr>
<tr>
<td><code>bioinformatics</code></td>
<td>Research accuracy</td>
</tr>
<tr>
<td><code>general</code></td>
<td>Default domain</td>
</tr>
</tbody>
</table>
<h3 id="dashboard-tabs-1">48.4 Dashboard Tabs</h3>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr>
<th>Tab</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Overview</strong></td>
<td>Session recommendations breakdown, domain distribution</td>
</tr>
<tr>
<td><strong>Recent Sessions</strong></td>
<td>Table of recent clarification sessions</td>
</tr>
<tr>
<td><strong>Configuration</strong></td>
<td>Enable/disable, VOI threshold, max questions</td>
</tr>
</tbody>
</table>
<h3 id="configuration-12">48.5 Configuration</h3>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>enabled</code></td>
<td><code>true</code></td>
<td>Enable Scout HITL integration</td>
</tr>
<tr>
<td><code>voiThreshold</code></td>
<td><code>0.3</code></td>
<td>Minimum VOI to ask question</td>
</tr>
<tr>
<td><code>maxQuestionsPerSession</code></td>
<td><code>3</code></td>
<td>Max clarifications before assuming</td>
</tr>
<tr>
<td><code>defaultDomain</code></td>
<td><code>general</code></td>
<td>Fallback domain</td>
</tr>
</tbody>
</table>
<h3 id="session-recommendations">48.6 Session Recommendations</h3>
<table>
<thead>
<tr>
<th>Recommendation</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>proceed</code></td>
<td>Uncertainty resolved sufficiently</td>
</tr>
<tr>
<td><code>wait</code></td>
<td>Still uncertain, user should wait</td>
</tr>
<tr>
<td><code>abort</code></td>
<td>Critical uncertainty, cannot proceed safely</td>
</tr>
</tbody>
</table>
<h3 id="implementation-files-13">48.7 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>apps/thinktank-admin/app/scout-hitl/page.tsx</code></td>
<td>Dashboard page</td>
</tr>
<tr>
<td><code>apps/thinktank-admin/components/layout/sidebar.tsx</code></td>
<td>Navigation item</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="section-49-sovereign-mesh-administration-v5.39.0">Section 49: Sovereign Mesh Administration (v5.39.0)</h2>
<p><strong>Location</strong>: Think Tank Admin â†’ Sovereign Mesh</p>
<p>The Sovereign Mesh provides autonomous agent orchestration with AI-assisted decision making at every node level.</p>
<h3 id="overview-dashboard">49.1 Overview Dashboard</h3>
<p><strong>Location</strong>: <code>/sovereign-mesh</code></p>
<p>The overview dashboard displays:</p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>System Health</strong></td>
<td>Overall mesh health score (0-100%)</td>
</tr>
<tr>
<td><strong>Active Agents</strong></td>
<td>Number of currently running agents</td>
</tr>
<tr>
<td><strong>Pending Approvals</strong></td>
<td>Items awaiting human review</td>
</tr>
<tr>
<td><strong>Active Apps</strong></td>
<td>Deployed applications count</td>
</tr>
<tr>
<td><strong>Decisions Today</strong></td>
<td>Autonomous decisions made</td>
</tr>
<tr>
<td><strong>Human Interventions</strong></td>
<td>Manual overrides required</td>
</tr>
</tbody>
</table>
<h3 id="agent-registry">49.2 Agent Registry</h3>
<p><strong>Location</strong>: <code>/sovereign-mesh/agents</code></p>
<p>Manage AI agents deployed in the mesh:</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Name</strong></td>
<td>Agent identifier</td>
</tr>
<tr>
<td><strong>Type</strong></td>
<td>orchestrator, executor, monitor, advisor</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>active, idle, error, maintenance</td>
</tr>
<tr>
<td><strong>Load</strong></td>
<td>Current utilization percentage</td>
</tr>
<tr>
<td><strong>Response Time</strong></td>
<td>Average response latency</td>
</tr>
<tr>
<td><strong>Success Rate</strong></td>
<td>Task completion rate</td>
</tr>
</tbody>
</table>
<p><strong>Actions:</strong> - View agent details - Pause/resume agent - View execution logs - Configure thresholds</p>
<h3 id="app-registry">49.3 App Registry</h3>
<p><strong>Location</strong>: <code>/sovereign-mesh/apps</code></p>
<p>Browse and manage deployed applications:</p>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 65%" />
</colgroup>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Name</strong></td>
<td>Application name</td>
</tr>
<tr>
<td><strong>Category</strong></td>
<td>productivity, analytics, automation, integration, custom</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>active, paused, error</td>
</tr>
<tr>
<td><strong>Users</strong></td>
<td>Active user count</td>
</tr>
<tr>
<td><strong>Requests</strong></td>
<td>Daily request volume</td>
</tr>
</tbody>
</table>
<h3 id="transparency-layer">49.4 Transparency Layer</h3>
<p><strong>Location</strong>: <code>/sovereign-mesh/transparency</code></p>
<p>Complete audit trail of AI decisions:</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Timestamp</strong></td>
<td>When decision was made</td>
</tr>
<tr>
<td><strong>Decision Type</strong></td>
<td>approval, rejection, escalation, execution</td>
</tr>
<tr>
<td><strong>Confidence</strong></td>
<td>AI confidence score (0-1)</td>
</tr>
<tr>
<td><strong>Reasoning</strong></td>
<td>Explanation of decision logic</td>
</tr>
<tr>
<td><strong>Outcome</strong></td>
<td>Result of the decision</td>
</tr>
</tbody>
</table>
<p><strong>Filters:</strong> - Date range - Decision type - Confidence threshold - Agent filter</p>
<h3 id="ai-helper">49.5 AI Helper</h3>
<p><strong>Location</strong>: <code>/sovereign-mesh/ai-helper</code></p>
<p>Manage AI assistance requests from the mesh:</p>
<table>
<thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Pending</strong></td>
<td>Awaiting AI processing</td>
</tr>
<tr>
<td><strong>In Progress</strong></td>
<td>Currently being handled</td>
</tr>
<tr>
<td><strong>Completed</strong></td>
<td>Successfully resolved</td>
</tr>
<tr>
<td><strong>Escalated</strong></td>
<td>Requires human review</td>
</tr>
</tbody>
</table>
<h3 id="approval-workflow">49.6 Approval Workflow</h3>
<p><strong>Location</strong>: <code>/sovereign-mesh/approvals</code></p>
<p>Human-in-the-loop approval queue:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Type</strong></td>
<td>deployment, configuration, access, execution</td>
</tr>
<tr>
<td><strong>Priority</strong></td>
<td>low, medium, high, critical</td>
</tr>
<tr>
<td><strong>Requester</strong></td>
<td>Agent or user requesting approval</td>
</tr>
<tr>
<td><strong>Created</strong></td>
<td>Request timestamp</td>
</tr>
<tr>
<td><strong>Expires</strong></td>
<td>Approval deadline</td>
</tr>
</tbody>
</table>
<p><strong>Actions:</strong> - Approve with notes - Reject with reason - Delegate to another admin - Request more information</p>
<h3 id="implementation-files-14">49.7 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>apps/thinktank-admin/app/(dashboard)/sovereign-mesh/page.tsx</code></td>
<td>Overview dashboard</td>
</tr>
<tr>
<td><code>apps/thinktank-admin/app/(dashboard)/sovereign-mesh/agents/page.tsx</code></td>
<td>Agent registry</td>
</tr>
<tr>
<td><code>apps/thinktank-admin/app/(dashboard)/sovereign-mesh/apps/page.tsx</code></td>
<td>App browser</td>
</tr>
<tr>
<td><code>apps/thinktank-admin/app/(dashboard)/sovereign-mesh/transparency/page.tsx</code></td>
<td>Decision logs</td>
</tr>
<tr>
<td><code>apps/thinktank-admin/app/(dashboard)/sovereign-mesh/ai-helper/page.tsx</code></td>
<td>AI assistance</td>
</tr>
<tr>
<td><code>apps/thinktank-admin/app/(dashboard)/sovereign-mesh/approvals/page.tsx</code></td>
<td>Approval queue</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="section-50-code-quality-dashboard-v5.39.0">Section 50: Code Quality Dashboard (v5.39.0)</h2>
<p><strong>Location</strong>: Think Tank Admin â†’ Code Quality</p>
<p>Real-time visibility into codebase health and quality metrics.</p>
<h3 id="overview-11">50.1 Overview</h3>
<p>The Code Quality dashboard provides:</p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Overall Score</strong></td>
<td>Aggregate quality score (0-100)</td>
</tr>
<tr>
<td><strong>Total Errors</strong></td>
<td>Critical issues requiring immediate fix</td>
</tr>
<tr>
<td><strong>Total Warnings</strong></td>
<td>Non-critical issues to address</td>
</tr>
<tr>
<td><strong>Files Analyzed</strong></td>
<td>Number of files scanned</td>
</tr>
</tbody>
</table>
<h3 id="issue-categories">50.2 Issue Categories</h3>
<table>
<thead>
<tr>
<th>Category</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Error</strong></td>
<td>Critical issues (type errors, syntax errors)</td>
</tr>
<tr>
<td><strong>Warning</strong></td>
<td>Style violations, best practice deviations</td>
</tr>
<tr>
<td><strong>Info</strong></td>
<td>Suggestions for improvement</td>
</tr>
</tbody>
</table>
<h3 id="issue-details">50.3 Issue Details</h3>
<p>Each issue displays: - <strong>File path</strong> with line number - <strong>Rule ID</strong> (e.g., <code>@typescript-eslint/no-unused-vars</code>) - <strong>Message</strong> describing the issue - <strong>Severity</strong> badge (error/warning/info)</p>
<h3 id="filtering">50.4 Filtering</h3>
<table>
<thead>
<tr>
<th>Filter</th>
<th>Options</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Severity</strong></td>
<td>All, Errors only, Warnings only</td>
</tr>
<tr>
<td><strong>Category</strong></td>
<td>TypeScript, ESLint, Custom rules</td>
</tr>
<tr>
<td><strong>Date Range</strong></td>
<td>Filter by scan date</td>
</tr>
</tbody>
</table>
<h3 id="implementation-files-15">50.5 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>apps/thinktank-admin/app/(dashboard)/code-quality/page.tsx</code></td>
<td>Dashboard page</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="section-51-schema-adaptive-reports-v5.39.0">Section 51: Schema-Adaptive Reports (v5.39.0)</h2>
<p><strong>Location</strong>: Think Tank Admin â†’ Reports</p>
<p>Dynamic report builder that automatically adapts to database schema changes.</p>
<h3 id="overview-12">51.1 Overview</h3>
<p>The Reports page provides three tabs:</p>
<table>
<thead>
<tr>
<th>Tab</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Quick Reports</strong></td>
<td>Pre-built report templates</td>
</tr>
<tr>
<td><strong>Saved Reports</strong></td>
<td>User-saved custom reports</td>
</tr>
<tr>
<td><strong>Schema Builder</strong></td>
<td>Visual report builder</td>
</tr>
</tbody>
</table>
<h3 id="quick-reports">51.2 Quick Reports</h3>
<p>Pre-configured reports available:</p>
<table>
<thead>
<tr>
<th>Report</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>User Engagement</strong></td>
<td>Active users, session duration, feature usage</td>
</tr>
<tr>
<td><strong>Model Performance</strong></td>
<td>Response times, success rates, token usage</td>
</tr>
<tr>
<td><strong>Billing Summary</strong></td>
<td>Revenue, credits consumed, subscription status</td>
</tr>
</tbody>
</table>
<h3 id="schema-builder-v5.40.0-enhanced">51.3 Schema Builder (v5.40.0 Enhanced)</h3>
<p>The visual report builder provides a comprehensive 4-tab configuration panel:</p>
<table>
<thead>
<tr>
<th>Tab</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Fields</strong></td>
<td>Select columns with per-field alias and aggregation</td>
</tr>
<tr>
<td><strong>Filters</strong></td>
<td>Build WHERE clauses with 11 operators + date presets</td>
</tr>
<tr>
<td><strong>Sort</strong></td>
<td>Configure ORDER BY with multi-column ASC/DESC</td>
</tr>
<tr>
<td><strong>Group</strong></td>
<td>Select GROUP BY columns from selected fields</td>
</tr>
</tbody>
</table>
<p><strong>Enhanced Features:</strong> - <strong>SQL Preview</strong> - Live-generated SQL query with dark theme display - <strong>Date Presets</strong> - Today, Yesterday, Last 7/30 Days, This/Last Month - <strong>Filter Operators</strong> - =, â‰ , &gt;, â‰¥, &lt;, â‰¤, LIKE, IN, BETWEEN, IS NULL, IS NOT NULL - <strong>Visualization Toggles</strong> - Table, Bar, Line, Pie chart view switches - <strong>Save Report</strong> - Persist definitions to database for reuse - <strong>Row Limit</strong> - 50, 100, 500, 1000 row options</p>
<p><strong>Workflow:</strong> 1. <strong>Select Table</strong> - Browse categorized database tables (Conversations, Users, Delight) 2. <strong>Configure Fields</strong> - Select columns, set aliases, choose aggregations 3. <strong>Add Filters</strong> - Build WHERE conditions with operators or date presets 4. <strong>Set Sorting</strong> - Add ORDER BY columns with direction toggle 5. <strong>Group Results</strong> - Enable GROUP BY on selected fields 6. <strong>Execute</strong> - Run report and view in table or chart mode 7. <strong>Export/Save</strong> - Download CSV or save report definition</p>
<h3 id="ai-report-writer-v5.42.0">51.4 AI Report Writer (v5.42.0)</h3>
<p>Enterprise-grade AI-powered report generation with text and voice input, interactive charts, smart insights, and brand customization.</p>
<p><strong>Location</strong>: Think Tank Admin â†’ Reports â†’ AI Writer tab</p>
<p><strong>Core Features:</strong> - <strong>Natural Language Generation</strong> - Describe reports in plain English - <strong>Voice Input</strong> - Web Speech API for hands-free report creation - <strong>AI Modification</strong> - Refine with follow-up prompts (â€œAdd delight metricsâ€) - <strong>Report Styles</strong> - Executive Summary, Detailed Analysis, Dashboard View, Narrative - <strong>Rich Formatting</strong> - Headings, metrics cards, charts, tables, lists, quotes - <strong>Edit Mode</strong> - Click sections to modify, use format panel for styling - <strong>Undo/Redo</strong> - Full history navigation - <strong>Export</strong> - PDF, Excel, HTML, Print</p>
<p><strong>Interactive Charts (v5.42.0):</strong> - Real Recharts visualizations replacing placeholders - Bar, Line, Pie, Area chart types - Auto-formatted tooltips (K/M for thousands/millions) - 8-color palette for visual consistency</p>
<p><strong>Smart Insights (v5.42.0):</strong> - AI anomaly detection (usage spikes, unusual patterns) - Trend analysis with growth predictions - Achievement tracking (delight score peaks, retention milestones) - Actionable recommendations - Severity indicators (low/medium/high) - Confidence scores per insight</p>
<p><strong>Brand Kit (v5.42.0):</strong> - Logo upload with drag-and-drop - Company name and tagline customization - Color pickers (Primary/Secondary/Accent) - Font selection for headers and body - Quick preset themes - Live preview card</p>
<p><strong>Think Tank Example Prompts:</strong> - â€œGenerate a user engagement report showing active users and session trendsâ€ - â€œCreate a delight score analysis for the past monthâ€ - â€œBuild a conversation analytics report with message volumesâ€ - â€œShow me user retention metrics with churn analysisâ€</p>
<p><strong>Usage:</strong> 1. Navigate to Reports â†’ AI Writer tab 2. Select report style 3. Type or speak your request (click mic for voice) 4. Review generated report preview 5. Use modification prompt to refine 6. Toggle Edit Mode to modify sections 7. Export to PDF/Excel/HTML</p>
<p><strong>Report Sections Generated:</strong> | Type | Description | |â€”â€”|â€”â€”â€”â€”-| | <code>heading</code> | H1-H3 headings | | <code>paragraph</code> | Body text | | <code>metrics</code> | 4-column KPI cards with trends (â†‘â†“) | | <code>chart</code> | Interactive chart placeholders | | <code>table</code> | Data tables with headers | | <code>list</code> | Bullet point lists | | <code>quote</code> | Blockquote sections |</p>
<h3 id="table-categories">51.5 Table Categories</h3>
<table>
<thead>
<tr>
<th>Category</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Core</strong></td>
<td>Users, tenants, sessions</td>
</tr>
<tr>
<td><strong>AI</strong></td>
<td>Models, prompts, responses</td>
</tr>
<tr>
<td><strong>Billing</strong></td>
<td>Subscriptions, credits, invoices</td>
</tr>
<tr>
<td><strong>Analytics</strong></td>
<td>Events, metrics, logs</td>
</tr>
<tr>
<td><strong>System</strong></td>
<td>Configuration, audit, health</td>
</tr>
</tbody>
</table>
<h3 id="field-options">51.5 Field Options</h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Aggregation</strong></td>
<td>none, count, sum, avg, min, max, distinct</td>
</tr>
<tr>
<td><strong>Format</strong></td>
<td>text, number, currency, percentage, date, datetime</td>
</tr>
<tr>
<td><strong>Filter</strong></td>
<td>Where clause conditions</td>
</tr>
<tr>
<td><strong>Group By</strong></td>
<td>Grouping columns</td>
</tr>
<tr>
<td><strong>Order By</strong></td>
<td>Sort columns and direction</td>
</tr>
</tbody>
</table>
<h3 id="export-formats">51.6 Export Formats</h3>
<table>
<thead>
<tr>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>CSV</strong></td>
<td>Comma-separated values</td>
</tr>
<tr>
<td><strong>JSON</strong></td>
<td>Structured data format</td>
</tr>
</tbody>
</table>
<h3 id="api-endpoints-14">51.7 API Endpoints</h3>
<p>Base: <code>/api/admin/dynamic-reports</code></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET</code></td>
<td><code>/schema</code></td>
<td>Discover database schema</td>
</tr>
<tr>
<td><code>GET</code></td>
<td><code>/suggestions</code></td>
<td>AI-generated report templates</td>
</tr>
<tr>
<td><code>GET</code></td>
<td><code>/</code></td>
<td>List saved reports</td>
</tr>
<tr>
<td><code>POST</code></td>
<td><code>/</code></td>
<td>Save report definition</td>
</tr>
<tr>
<td><code>POST</code></td>
<td><code>/execute</code></td>
<td>Execute a report</td>
</tr>
<tr>
<td><code>POST</code></td>
<td><code>/export</code></td>
<td>Export report data</td>
</tr>
<tr>
<td><code>DELETE</code></td>
<td><code>/:id</code></td>
<td>Delete a report</td>
</tr>
</tbody>
</table>
<h3 id="implementation-files-16">51.8 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>apps/thinktank-admin/app/(dashboard)/reports/page.tsx</code></td>
<td>Reports page</td>
</tr>
<tr>
<td><code>packages/infrastructure/lambda/shared/services/schema-adaptive-reports.service.ts</code></td>
<td>Backend service</td>
</tr>
<tr>
<td><code>packages/infrastructure/lambda/admin/dynamic-reports.ts</code></td>
<td>API handler</td>
</tr>
<tr>
<td><code>packages/infrastructure/migrations/V2026_01_21_003__dynamic_reports.sql</code></td>
<td>Database migration</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="section-52-gateway-status-v5.39.0">Section 52: Gateway Status (v5.39.0)</h2>
<p><strong>Location</strong>: Think Tank Admin â†’ Gateway</p>
<p>Monitor API Gateway health and traffic metrics.</p>
<h3 id="overview-13">52.1 Overview</h3>
<p>The Gateway Status dashboard displays:</p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Status</strong></td>
<td>Overall gateway health (healthy/degraded/down)</td>
</tr>
<tr>
<td><strong>Requests/sec</strong></td>
<td>Current request throughput</td>
</tr>
<tr>
<td><strong>Avg Latency</strong></td>
<td>Mean response time</td>
</tr>
<tr>
<td><strong>Error Rate</strong></td>
<td>Percentage of failed requests</td>
</tr>
<tr>
<td><strong>Active Connections</strong></td>
<td>Current WebSocket connections</td>
</tr>
</tbody>
</table>
<h3 id="endpoint-health">52.2 Endpoint Health</h3>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Endpoint</strong></td>
<td>API route path</td>
</tr>
<tr>
<td><strong>Method</strong></td>
<td>HTTP method (GET, POST, etc.)</td>
</tr>
<tr>
<td><strong>Status</strong></td>
<td>healthy, slow, error</td>
</tr>
<tr>
<td><strong>Latency</strong></td>
<td>P50/P95/P99 response times</td>
</tr>
<tr>
<td><strong>Requests</strong></td>
<td>Request count (24h)</td>
</tr>
<tr>
<td><strong>Errors</strong></td>
<td>Error count (24h)</td>
</tr>
</tbody>
</table>
<h3 id="traffic-patterns">52.3 Traffic Patterns</h3>
<table>
<thead>
<tr>
<th>View</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Hourly</strong></td>
<td>Requests per hour (24h)</td>
</tr>
<tr>
<td><strong>Daily</strong></td>
<td>Requests per day (30d)</td>
</tr>
<tr>
<td><strong>By Endpoint</strong></td>
<td>Traffic distribution by route</td>
</tr>
<tr>
<td><strong>By Status</strong></td>
<td>Success vs error breakdown</td>
</tr>
</tbody>
</table>
<h3 id="alerts-1">52.4 Alerts</h3>
<table>
<thead>
<tr>
<th>Alert Type</th>
<th>Trigger</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>High Latency</strong></td>
<td>P95 &gt; 2000ms</td>
</tr>
<tr>
<td><strong>High Error Rate</strong></td>
<td>Errors &gt; 5%</td>
</tr>
<tr>
<td><strong>Throughput Spike</strong></td>
<td>2x normal traffic</td>
</tr>
<tr>
<td><strong>Connection Drop</strong></td>
<td>WebSocket disconnections</td>
</tr>
</tbody>
</table>
<h3 id="implementation-files-17">52.5 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>apps/thinktank-admin/app/(dashboard)/gateway/page.tsx</code></td>
<td>Gateway dashboard</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="section-53-decision-intelligence-artifacts-dia-engine-v5.43.0">Section 53: Decision Intelligence Artifacts (DIA Engine) (v5.43.0)</h2>
<p><strong>Location</strong>: Think Tank Admin â†’ Decision Records</p>
<p>The Glass Box Decision Engine - transforms AI conversations into auditable, evidence-backed decision records with full provenance tracking.</p>
<h3 id="overview-14">53.1 Overview</h3>
<p>Decision Intelligence Artifacts (DIA) solve the critical problem of AI decision opacity:</p>
<table>
<colgroup>
<col style="width: 44%" />
<col style="width: 56%" />
</colgroup>
<thead>
<tr>
<th>Challenge</th>
<th>DIA Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Black Box Decisions</strong></td>
<td>Full claim-to-evidence mapping</td>
</tr>
<tr>
<td><strong>Data Staleness</strong></td>
<td>Volatile query tracking with automatic validation</td>
</tr>
<tr>
<td><strong>Dissent Hidden</strong></td>
<td>Ghost paths visualize rejected alternatives</td>
</tr>
<tr>
<td><strong>Compliance Gaps</strong></td>
<td>Built-in HIPAA/SOC2/GDPR export packages</td>
</tr>
<tr>
<td><strong>Trust Uncertainty</strong></td>
<td>Breathing heatmap shows trust topology at-a-glance</td>
</tr>
</tbody>
</table>
<h3 id="core-concepts-1">53.2 Core Concepts</h3>
<p><strong>Claims</strong>: Extracted conclusions, findings, recommendations, warnings, and facts from AI responses.</p>
<table>
<thead>
<tr>
<th>Claim Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>conclusion</code></td>
<td>Final determination or decision</td>
</tr>
<tr>
<td><code>finding</code></td>
<td>Discovered information or observation</td>
</tr>
<tr>
<td><code>recommendation</code></td>
<td>Suggested course of action</td>
</tr>
<tr>
<td><code>warning</code></td>
<td>Risk or caution indicator</td>
</tr>
<tr>
<td><code>fact</code></td>
<td>Verified data point</td>
</tr>
<tr>
<td><code>clinical_finding</code></td>
<td>Healthcare-specific observation</td>
</tr>
<tr>
<td><code>treatment_recommendation</code></td>
<td>Medical treatment suggestion</td>
</tr>
<tr>
<td><code>risk_assessment</code></td>
<td>Risk evaluation</td>
</tr>
<tr>
<td><code>legal_opinion</code></td>
<td>Legal interpretation</td>
</tr>
<tr>
<td><code>compliance_finding</code></td>
<td>Regulatory compliance observation</td>
</tr>
</tbody>
</table>
<p><strong>Evidence Links</strong>: Connections between claims and their supporting data sources.</p>
<table>
<thead>
<tr>
<th>Evidence Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tool_call</code></td>
<td>API or tool execution result</td>
</tr>
<tr>
<td><code>web_search</code></td>
<td>Web search results</td>
</tr>
<tr>
<td><code>document</code></td>
<td>Referenced document</td>
</tr>
<tr>
<td><code>calculation</code></td>
<td>Computed result</td>
</tr>
<tr>
<td><code>model_consensus</code></td>
<td>Multiple model agreement</td>
</tr>
</tbody>
</table>
<p><strong>Dissent Events</strong>: Captured disagreements from model reasoning traces.</p>
<table>
<thead>
<tr>
<th>Severity</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>minor</code></td>
<td>Small qualification or caveat</td>
</tr>
<tr>
<td><code>moderate</code></td>
<td>Significant alternative consideration</td>
</tr>
<tr>
<td><code>significant</code></td>
<td>Major disagreement requiring attention</td>
</tr>
</tbody>
</table>
<p><strong>Volatile Queries</strong>: Tool calls that may return different results over time.</p>
<table>
<thead>
<tr>
<th>Volatility</th>
<th>Threshold</th>
<th>Examples</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>real-time</code></td>
<td>1 hour</td>
<td>Stock prices, weather</td>
</tr>
<tr>
<td><code>daily</code></td>
<td>24 hours</td>
<td>News, analytics</td>
</tr>
<tr>
<td><code>weekly</code></td>
<td>168 hours</td>
<td>Document searches</td>
</tr>
<tr>
<td><code>stable</code></td>
<td>No expiry</td>
<td>Static references</td>
</tr>
</tbody>
</table>
<h3 id="the-living-parchment-ui">53.3 The Living Parchment UI</h3>
<p>The artifact viewer uses sensory design principles:</p>
<p><strong>Breathing Heatmap Scrollbar</strong>: - Green (verified) - 6 BPM breathing rate - Amber (unverified) - Standard breathing - Red (contested) - 12 BPM alert breathing - Purple (stale) - Fading intensity with age</p>
<p><strong>Living Ink Typography</strong>: - Font weight: 350-500 based on confidence (0-100%) - Stale claims fade to grayscale - Hover reveals evidence connections</p>
<p><strong>Control Island</strong> (floating lens selector): - <strong>Read</strong>: Standard document view - <strong>X-Ray</strong>: Evidence links visible - <strong>Risk</strong>: Ghost paths and contested claims highlighted - <strong>Compliance</strong>: Regulatory framework coverage</p>
<p><strong>Ghost Paths</strong>: Dashed connectors showing rejected alternatives from dissent events.</p>
<h3 id="artifact-lifecycle">53.4 Artifact Lifecycle</h3>
<pre><code>Conversation â†’ Extract â†’ Validate â†’ Active â†’ [Validate] â†’ Verified
                                      â†“
                                    Stale â†’ Invalidated
                                      â†“
                                   Frozen (immutable)</code></pre>
<table>
<thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>active</code></td>
<td>Current, editable artifact</td>
</tr>
<tr>
<td><code>frozen</code></td>
<td>Immutable version with content hash</td>
</tr>
<tr>
<td><code>archived</code></td>
<td>Soft-deleted</td>
</tr>
<tr>
<td><code>invalidated</code></td>
<td>Data significantly changed</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Validation Status</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>fresh</code></td>
<td>Newly created, not yet validated</td>
</tr>
<tr>
<td><code>stale</code></td>
<td>Volatile queries exceeded thresholds</td>
</tr>
<tr>
<td><code>verified</code></td>
<td>Recently validated, data unchanged</td>
</tr>
<tr>
<td><code>invalidated</code></td>
<td>Significant data changes detected</td>
</tr>
</tbody>
</table>
<h3 id="compliance-exports">53.5 Compliance Exports</h3>
<table>
<thead>
<tr>
<th>Format</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pdf</code></td>
<td>Human-readable document</td>
</tr>
<tr>
<td><code>json</code></td>
<td>Machine-readable data</td>
</tr>
<tr>
<td><code>hipaa_audit</code></td>
<td>HIPAA compliance package with PHI inventory</td>
</tr>
<tr>
<td><code>soc2_evidence</code></td>
<td>SOC2 control mapping and evidence chain</td>
</tr>
<tr>
<td><code>gdpr_dsar</code></td>
<td>GDPR Data Subject Access Request response</td>
</tr>
</tbody>
</table>
<p><strong>HIPAA Audit Package Contents</strong>: - Cover sheet with artifact metadata - PHI inventory with categories - Access log for minimum necessary compliance - Evidence chain verification - System attestation with content hash</p>
<p><strong>SOC2 Evidence Bundle Contents</strong>: - Control mapping (CC6.x, CC7.x, CC8.x) - Evidence chain completeness verification - Change management documentation - Integrity verification with signature</p>
<h3 id="configuration-13">53.6 Configuration</h3>
<p><strong>Location</strong>: Think Tank Admin â†’ Decision Records â†’ Config</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 29%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>Setting</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>diaEnabled</code></td>
<td><code>true</code></td>
<td>Enable DIA Engine</td>
</tr>
<tr>
<td><code>autoGenerateEnabled</code></td>
<td><code>false</code></td>
<td>Auto-generate artifacts from conversations</td>
</tr>
<tr>
<td><code>phiDetectionEnabled</code></td>
<td><code>true</code></td>
<td>Scan for protected health information</td>
</tr>
<tr>
<td><code>piiDetectionEnabled</code></td>
<td><code>true</code></td>
<td>Scan for personally identifiable information</td>
</tr>
<tr>
<td><code>defaultStalenessThresholdDays</code></td>
<td><code>7</code></td>
<td>Days before volatile queries flagged stale</td>
</tr>
<tr>
<td><code>maxArtifactsPerUser</code></td>
<td><code>0</code></td>
<td>Limit per user (0 = unlimited)</td>
</tr>
<tr>
<td><code>extractionModel</code></td>
<td><code>claude-3-5-sonnet</code></td>
<td>Model for claim extraction</td>
</tr>
<tr>
<td><code>autoRedactPhiOnExport</code></td>
<td><code>false</code></td>
<td>Automatically redact PHI on export</td>
</tr>
</tbody>
</table>
<h3 id="templates">53.7 Templates</h3>
<p>Pre-configured extraction templates:</p>
<table>
<thead>
<tr>
<th>Template</th>
<th>Description</th>
<th>Compliance</th>
</tr>
</thead>
<tbody>
<tr>
<td>General Decision Record</td>
<td>Standard extraction</td>
<td>None</td>
</tr>
<tr>
<td>Healthcare Decision</td>
<td>HIPAA-compliant clinical</td>
<td>HIPAA</td>
</tr>
<tr>
<td>Financial Analysis</td>
<td>Audit-ready financial</td>
<td>SOC2</td>
</tr>
<tr>
<td>Legal Review</td>
<td>Legal opinion documentation</td>
<td>SOC2, GDPR</td>
</tr>
<tr>
<td>Research Synthesis</td>
<td>Multi-source research</td>
<td>None</td>
</tr>
</tbody>
</table>
<h3 id="api-endpoints-15">53.8 API Endpoints</h3>
<p>Base: <code>/api/thinktank/decision-artifacts</code></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>GET</code></td>
<td><code>/</code></td>
<td>List artifacts (supports filters)</td>
</tr>
<tr>
<td><code>POST</code></td>
<td><code>/</code></td>
<td>Generate artifact from conversation</td>
</tr>
<tr>
<td><code>GET</code></td>
<td><code>/dashboard</code></td>
<td>Dashboard metrics</td>
</tr>
<tr>
<td><code>GET</code></td>
<td><code>/templates</code></td>
<td>List available templates</td>
</tr>
<tr>
<td><code>GET</code></td>
<td><code>/config</code></td>
<td>Get tenant configuration</td>
</tr>
<tr>
<td><code>PUT</code></td>
<td><code>/config</code></td>
<td>Update configuration</td>
</tr>
<tr>
<td><code>GET</code></td>
<td><code>/:id</code></td>
<td>Get artifact details</td>
</tr>
<tr>
<td><code>DELETE</code></td>
<td><code>/:id</code></td>
<td>Archive artifact</td>
</tr>
<tr>
<td><code>GET</code></td>
<td><code>/:id/staleness</code></td>
<td>Check staleness status</td>
</tr>
<tr>
<td><code>POST</code></td>
<td><code>/:id/validate</code></td>
<td>Validate volatile queries</td>
</tr>
<tr>
<td><code>POST</code></td>
<td><code>/:id/export</code></td>
<td>Export artifact</td>
</tr>
<tr>
<td><code>GET</code></td>
<td><code>/:id/versions</code></td>
<td>Get version history</td>
</tr>
<tr>
<td><code>GET</code></td>
<td><code>/:id/validation-history</code></td>
<td>Validation audit trail</td>
</tr>
<tr>
<td><code>GET</code></td>
<td><code>/:id/export-history</code></td>
<td>Export audit trail</td>
</tr>
</tbody>
</table>
<h3 id="dashboard-metrics">53.9 Dashboard Metrics</h3>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Total Artifacts</td>
<td>All artifacts for tenant</td>
</tr>
<tr>
<td>Active Artifacts</td>
<td>Non-archived, non-frozen</td>
</tr>
<tr>
<td>Frozen Artifacts</td>
<td>Immutable versions</td>
</tr>
<tr>
<td>Average Confidence</td>
<td>Mean confidence across active</td>
</tr>
<tr>
<td>Stale Artifacts</td>
<td>Needing validation</td>
</tr>
<tr>
<td>PHI/PII Detected</td>
<td>Artifacts with sensitive data</td>
</tr>
<tr>
<td>Validation Cost MTD</td>
<td>API costs for re-validation</td>
</tr>
<tr>
<td>Top Domains</td>
<td>Most common primary domains</td>
</tr>
<tr>
<td>Compliance Usage</td>
<td>Framework distribution</td>
</tr>
</tbody>
</table>
<h3 id="database-schema-3">53.10 Database Schema</h3>
<p><strong>Tables</strong>:</p>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>decision_artifacts</code></td>
<td>Main artifact storage</td>
</tr>
<tr>
<td><code>decision_artifact_validation_log</code></td>
<td>Validation audit trail</td>
</tr>
<tr>
<td><code>decision_artifact_export_log</code></td>
<td>Export audit trail</td>
</tr>
<tr>
<td><code>decision_artifact_config</code></td>
<td>Tenant configuration</td>
</tr>
<tr>
<td><code>decision_artifact_templates</code></td>
<td>Extraction templates</td>
</tr>
<tr>
<td><code>decision_artifact_access_log</code></td>
<td>Access audit (HIPAA)</td>
</tr>
</tbody>
</table>
<p><strong>Key Columns</strong> (<code>decision_artifacts</code>):</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>artifact_content</code></td>
<td>JSONB</td>
<td>Claims, evidence, dissent, metrics</td>
</tr>
<tr>
<td><code>heatmap_data</code></td>
<td>JSONB</td>
<td>Pre-computed heatmap segments</td>
</tr>
<tr>
<td><code>validation_status</code></td>
<td>VARCHAR</td>
<td>fresh/stale/verified/invalidated</td>
</tr>
<tr>
<td><code>phi_detected</code></td>
<td>BOOLEAN</td>
<td>Contains protected health info</td>
</tr>
<tr>
<td><code>content_hash</code></td>
<td>VARCHAR(64)</td>
<td>SHA-256 for frozen artifacts</td>
</tr>
</tbody>
</table>
<h3 id="implementation-files-18">53.11 Implementation Files</h3>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr>
<th>File</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>packages/shared/src/types/decision-artifact.types.ts</code></td>
<td>Type definitions</td>
</tr>
<tr>
<td><code>packages/infrastructure/lambda/shared/services/dia/</code></td>
<td>Backend services</td>
</tr>
<tr>
<td><code>packages/infrastructure/lambda/thinktank/decision-artifacts.ts</code></td>
<td>API handler</td>
</tr>
<tr>
<td><code>packages/infrastructure/lib/stacks/dia-stack.ts</code></td>
<td>CDK infrastructure</td>
</tr>
<tr>
<td><code>packages/infrastructure/migrations/V2026_01_22_001__decision_artifacts.sql</code></td>
<td>Core schema</td>
</tr>
<tr>
<td><code>packages/infrastructure/migrations/V2026_01_22_002__decision_artifact_versioning.sql</code></td>
<td>Versioning functions</td>
</tr>
<tr>
<td><code>packages/infrastructure/migrations/V2026_01_22_003__decision_artifact_config.sql</code></td>
<td>Config &amp; templates</td>
</tr>
<tr>
<td><code>apps/thinktank-admin/app/(dashboard)/decision-records/</code></td>
<td>Admin UI</td>
</tr>
<tr>
<td><code>apps/thinktank-admin/app/(dashboard)/decision-records/components/</code></td>
<td>UI components</td>
</tr>
</tbody>
</table>
<h3 id="troubleshooting-2">53.12 Troubleshooting</h3>
<table>
<colgroup>
<col style="width: 41%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr>
<th>Issue</th>
<th>Solution</th>
</tr>
</thead>
<tbody>
<tr>
<td>Extraction fails</td>
<td>Check Bedrock model access permissions</td>
</tr>
<tr>
<td>Missing evidence links</td>
<td>Verify tool_calls in message metadata</td>
</tr>
<tr>
<td>Stale status not updating</td>
<td>Run manual validation or check thresholds</td>
</tr>
<tr>
<td>PHI not detected</td>
<td>Verify phiDetectionEnabled in config</td>
</tr>
<tr>
<td>Export fails</td>
<td>Check S3 bucket permissions (DIA_EXPORT_BUCKET)</td>
</tr>
<tr>
<td>Version history empty</td>
<td>Artifact must be frozen to create versions</td>
</tr>
</tbody>
</table>
<h3 id="security-considerations-1">53.13 Security Considerations</h3>
<ul>
<li>All tables have RLS policies enforcing tenant isolation</li>
<li>PHI/PII detection runs automatically on extraction</li>
<li>Access logging enabled for HIPAA compliance</li>
<li>Content hashes provide tamper evidence for frozen artifacts</li>
<li>Export audit trail tracks all compliance exports</li>
<li>Presigned URLs expire after 1 hour</li>
</ul>
<hr />
<h2 id="section-54-living-parchment-2029-vision-v5.44.0">Section 54: Living Parchment 2029 Vision (v5.44.0)</h2>
<h3 id="overview-15">Overview</h3>
<p>Living Parchment is a comprehensive suite of advanced decision intelligence tools featuring sensory UI elements that communicate trust, confidence, and data freshness through visual breathing, living typography, and ghost paths. This 2029 Vision implementation transforms how users interact with AI-assisted decision making.</p>
<h3 id="design-philosophy">Design Philosophy</h3>
<table>
<colgroup>
<col style="width: 36%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr>
<th>Concept</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Breathing Interfaces</strong></td>
<td>UI elements pulse with lifeâ€”faster breathing (12 BPM) indicates uncertainty, slower (4-6 BPM) indicates confidence</td>
</tr>
<tr>
<td><strong>Living Ink</strong></td>
<td>Text weight varies 350-500 based on confidence; stale information fades to grayscale</td>
</tr>
<tr>
<td><strong>Ghost Paths</strong></td>
<td>Rejected alternatives remain visible as translucent traces showing what could have been</td>
</tr>
<tr>
<td><strong>Confidence Terrain</strong></td>
<td>3D topographic visualization where elevation = confidence, color = risk</td>
</tr>
</tbody>
</table>
<h3 id="war-room-strategic-decision-theater">54.1 War Room (Strategic Decision Theater)</h3>
<p>High-stakes collaborative decision space with AI advisors and confidence terrain.</p>
<h4 id="features-1">Features</h4>
<ul>
<li><strong>Confidence Terrain</strong>: 3D grid visualization showing confidence topology across decision space</li>
<li><strong>AI Advisory Council</strong>: Multiple AI models providing different perspectives</li>
<li><strong>Decision Paths</strong>: Branching options with outcome predictions and advocate tracking</li>
<li><strong>Ghost Branches</strong>: Rejected paths remain visible for context</li>
<li><strong>Stake Level Indicators</strong>: Visual urgency based on decision importance</li>
</ul>
<h4 id="advisor-types">Advisor Types</h4>
<table>
<thead>
<tr>
<th>Type</th>
<th>Color</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td>AI Model</td>
<td>Blue (#3b82f6)</td>
<td>Claude, GPT for strategic analysis</td>
</tr>
<tr>
<td>Human Expert</td>
<td>Purple (#8b5cf6)</td>
<td>Domain specialists</td>
</tr>
<tr>
<td>Domain Specialist</td>
<td>Cyan (#06b6d4)</td>
<td>Industry-specific advisors</td>
</tr>
</tbody>
</table>
<h4 id="api-endpoints-16">API Endpoints</h4>
<pre><code>POST   /api/thinktank/living-parchment/war-room           Create session
GET    /api/thinktank/living-parchment/war-room           List sessions
GET    /api/thinktank/living-parchment/war-room/:id       Get session
POST   /api/thinktank/living-parchment/war-room/:id/advisors        Add advisor
POST   /api/thinktank/living-parchment/war-room/:id/advisors/:aid/analyze   Request analysis
POST   /api/thinktank/living-parchment/war-room/:id/paths           Propose path
POST   /api/thinktank/living-parchment/war-room/:id/decide          Make decision
POST   /api/thinktank/living-parchment/war-room/:id/terrain         Update terrain</code></pre>
<h3 id="council-of-experts">54.2 Council of Experts</h3>
<p>Multi-persona AI consultation with consensus tracking and dissent visualization.</p>
<h4 id="expert-personas">Expert Personas</h4>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 48%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr>
<th>Persona</th>
<th>Specialization</th>
<th>Style</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pragmatist</td>
<td>Practical Implementation</td>
<td>Results-focused, cost-conscious</td>
</tr>
<tr>
<td>Ethicist</td>
<td>Moral Philosophy</td>
<td>Principle-based, stakeholder-aware</td>
</tr>
<tr>
<td>Innovator</td>
<td>Creative Solutions</td>
<td>Visionary, possibility-focused</td>
</tr>
<tr>
<td>Skeptic</td>
<td>Risk Analysis</td>
<td>Devilâ€™s advocate, challenging</td>
</tr>
<tr>
<td>Synthesizer</td>
<td>Integration</td>
<td>Bridge-building, pattern-finding</td>
</tr>
<tr>
<td>Analyst</td>
<td>Data-Driven</td>
<td>Quantitative, evidence-based</td>
</tr>
<tr>
<td>Strategist</td>
<td>Long-term Strategy</td>
<td>Big-picture, competitive-aware</td>
</tr>
<tr>
<td>Humanist</td>
<td>Human Impact</td>
<td>Empathetic, user-centered</td>
</tr>
</tbody>
</table>
<h4 id="consensus-visualization">Consensus Visualization</h4>
<ul>
<li>Experts positioned on circular visualization</li>
<li>Positions move toward center as consensus increases</li>
<li>Dissent sparks appear as electrical arcs between disagreeing experts</li>
<li>Gravitational attraction animation shows convergence</li>
</ul>
<h4 id="api-endpoints-17">API Endpoints</h4>
<pre><code>POST   /api/thinktank/living-parchment/council            Convene council
GET    /api/thinktank/living-parchment/council/:id        Get session
POST   /api/thinktank/living-parchment/council/:id/debate Run debate round
POST   /api/thinktank/living-parchment/council/:id/conclude Conclude session</code></pre>
<h3 id="debate-arena">54.3 Debate Arena</h3>
<p>Adversarial exploration with attack/defense flows and steel-man generation.</p>
<h4 id="features-2">Features</h4>
<ul>
<li><strong>Resolution Meter</strong>: Balance indicator (-100 to +100) showing which side is winning</li>
<li><strong>Argument Flow</strong>: Visual stream of claims, rebuttals, and concessions</li>
<li><strong>Weak Point Detection</strong>: Breathing red indicators on vulnerable arguments</li>
<li><strong>Steel-Man Generation</strong>: AI creates strongest version of opponentâ€™s argument</li>
<li><strong>Attack/Defense Arrows</strong>: Animated flows showing which arguments target which</li>
</ul>
<h4 id="debate-phases">Debate Phases</h4>
<ol type="1">
<li><strong>Setup</strong> - Configure debaters and proposition</li>
<li><strong>Opening</strong> - Initial statements</li>
<li><strong>Main</strong> - Core argument exchange</li>
<li><strong>Rebuttal</strong> - Direct challenges</li>
<li><strong>Closing</strong> - Final positions</li>
<li><strong>Resolved</strong> - Outcome determined</li>
</ol>
<h4 id="api-endpoints-18">API Endpoints</h4>
<pre><code>POST   /api/thinktank/living-parchment/debate             Create debate
GET    /api/thinktank/living-parchment/debate/:id         Get arena
POST   /api/thinktank/living-parchment/debate/:id/round   Run round
POST   /api/thinktank/living-parchment/debate/:id/steel-man Generate steel-man</code></pre>
<h3 id="memory-palace-coming-soon">54.4 Memory Palace (Coming Soon)</h3>
<p>Navigable 3D knowledge topology with freshness fog.</p>
<ul>
<li><strong>Knowledge Rooms</strong>: Domain-organized 3D spaces</li>
<li><strong>Freshness Fog</strong>: Stale areas appear foggy</li>
<li><strong>Connection Threads</strong>: Luminous lines between related concepts</li>
<li><strong>Discovery Hotspots</strong>: Breathing beacons where insights could emerge</li>
</ul>
<h3 id="oracle-view-coming-soon">54.5 Oracle View (Coming Soon)</h3>
<p>Predictive confidence landscape.</p>
<ul>
<li><strong>Probability Heatmap</strong>: Future timeline with brightness = confidence</li>
<li><strong>Bifurcation Points</strong>: Animated forks showing cascade effects</li>
<li><strong>Ghost Futures</strong>: Translucent overlays of alternative scenarios</li>
<li><strong>Black Swan Indicators</strong>: Dormant embers for low-probability/high-impact events</li>
</ul>
<h3 id="synthesis-engine-coming-soon">54.6 Synthesis Engine (Coming Soon)</h3>
<p>Multi-source fusion view.</p>
<ul>
<li><strong>Source Streams</strong>: Flowing rivers converging into synthesis</li>
<li><strong>Agreement Zones</strong>: Warm glow where sources align</li>
<li><strong>Tension Zones</strong>: Crackling energy between contradictions</li>
<li><strong>Provenance Trails</strong>: Click any claim to see all supporting sources</li>
</ul>
<h3 id="cognitive-load-monitor-coming-soon">54.7 Cognitive Load Monitor (Coming Soon)</h3>
<p>User state awareness with adaptive UI.</p>
<ul>
<li><strong>Attention Heatmap</strong>: Track where user has focused</li>
<li><strong>Fatigue Indicators</strong>: UI breathing slows as session lengthens</li>
<li><strong>Overwhelm Warning</strong>: Screen edges breathe red when load peaks</li>
</ul>
<h3 id="temporal-drift-observatory-coming-soon">54.8 Temporal Drift Observatory (Coming Soon)</h3>
<p>Fact evolution tracking.</p>
<ul>
<li><strong>Drift Alerts</strong>: Notifications when facts have changed</li>
<li><strong>Version Ghosts</strong>: Previous versions as translucent overlays</li>
<li><strong>Citation Half-Life</strong>: Predict when facts likely become stale</li>
</ul>
<h3 id="database-schema-4">Database Schema</h3>
<pre class="sql"><code>-- Core tables (see migration V2026_01_22_004)
war_room_sessions, war_room_participants, war_room_advisors
memory_palaces, memory_rooms, knowledge_nodes, memory_connections
oracle_views, oracle_predictions, bifurcation_points, ghost_futures
synthesis_sessions, synthesis_sources, synthesis_claims
cognitive_load_sessions, cognitive_load_history
council_sessions, council_experts, expert_arguments, minority_reports
drifting_facts, drift_alerts, version_ghosts
debate_arenas, debaters, debate_arguments, weak_points, steel_man_overlays
living_parchment_config</code></pre>
<h3 id="configuration-14">Configuration</h3>
<pre class="typescript"><code>interface LivingParchmentConfig {
  features: {
    warRoomEnabled: boolean;          // Default: true
    memoryPalaceEnabled: boolean;     // Default: true
    oracleViewEnabled: boolean;       // Default: true
    synthesisEngineEnabled: boolean;  // Default: true
    cognitiveLoadEnabled: boolean;    // Default: true
    councilOfExpertsEnabled: boolean; // Default: true
    temporalDriftEnabled: boolean;    // Default: true
    debateArenaEnabled: boolean;      // Default: true
  };
  defaults: {
    breathingRateBase: 6;             // BPM
    confidenceThreshold: 70;          // Minimum for &quot;high confidence&quot;
    stalenessThresholdDays: 30;       // When facts become stale
    maxAdvisors: 10;
    maxExperts: 8;
    maxDebateRounds: 5;
  };
  visualSettings: {
    heatmapColorScheme: &#39;standard&#39; | &#39;accessible&#39; | &#39;dark&#39;;
    animationIntensity: &#39;subtle&#39; | &#39;normal&#39; | &#39;vivid&#39;;
    ghostOpacity: 0.5;
  };
}</code></pre>
<h3 id="implementation-files-19">Implementation Files</h3>
<pre><code>packages/shared/src/types/living-parchment.types.ts     # All types
packages/infrastructure/migrations/V2026_01_22_004__living_parchment_core.sql
packages/infrastructure/lambda/shared/services/living-parchment/
  â”œâ”€â”€ war-room.service.ts
  â”œâ”€â”€ council-of-experts.service.ts
  â”œâ”€â”€ debate-arena.service.ts
  â””â”€â”€ index.ts
packages/infrastructure/lambda/thinktank/living-parchment.ts
apps/thinktank-admin/app/(dashboard)/living-parchment/
  â”œâ”€â”€ page.tsx                        # Landing page
  â”œâ”€â”€ war-room/page.tsx               # War Room UI
  â”œâ”€â”€ council/page.tsx                # Council of Experts UI
  â””â”€â”€ debate/page.tsx                 # Debate Arena UI</code></pre>
<h3 id="security-considerations-2">Security Considerations</h3>
<ul>
<li>All tables have RLS policies enforcing tenant isolation</li>
<li>AI advisor calls use tenant-scoped model access</li>
<li>Session ownership validated before modifications</li>
<li>Audit logging for all decision actions</li>
<li>Debate content filtered for appropriate use</li>
</ul>
<hr />
<h2 id="localization-translation-overrides">45. Localization &amp; Translation Overrides</h2>
<p><strong>Location</strong>: Think Tank Admin â†’ Administration â†’ Localization</p>
<p>Tenant administrators can customize UI text and messages across Think Tank with translation overrides.</p>
<h3 id="overview-16">45.1 Overview</h3>
<p>The localization system allows tenants to: - Override any system string with custom text - Protect overrides from automatic translation updates - Configure default and enabled languages for users - Maintain brand consistency across all 18 supported languages</p>
<h3 id="supported-languages">45.2 Supported Languages</h3>
<table>
<thead>
<tr>
<th>Language</th>
<th>Code</th>
<th>Flag</th>
</tr>
</thead>
<tbody>
<tr>
<td>English</td>
<td>en</td>
<td>ğŸ‡ºğŸ‡¸</td>
</tr>
<tr>
<td>Spanish</td>
<td>es</td>
<td>ğŸ‡ªğŸ‡¸</td>
</tr>
<tr>
<td>French</td>
<td>fr</td>
<td>ğŸ‡«ğŸ‡·</td>
</tr>
<tr>
<td>German</td>
<td>de</td>
<td>ğŸ‡©ğŸ‡ª</td>
</tr>
<tr>
<td>Portuguese</td>
<td>pt</td>
<td>ğŸ‡µğŸ‡¹</td>
</tr>
<tr>
<td>Italian</td>
<td>it</td>
<td>ğŸ‡®ğŸ‡¹</td>
</tr>
<tr>
<td>Dutch</td>
<td>nl</td>
<td>ğŸ‡³ğŸ‡±</td>
</tr>
<tr>
<td>Polish</td>
<td>pl</td>
<td>ğŸ‡µğŸ‡±</td>
</tr>
<tr>
<td>Russian</td>
<td>ru</td>
<td>ğŸ‡·ğŸ‡º</td>
</tr>
<tr>
<td>Turkish</td>
<td>tr</td>
<td>ğŸ‡¹ğŸ‡·</td>
</tr>
<tr>
<td>Japanese</td>
<td>ja</td>
<td>ğŸ‡¯ğŸ‡µ</td>
</tr>
<tr>
<td>Korean</td>
<td>ko</td>
<td>ğŸ‡°ğŸ‡·</td>
</tr>
<tr>
<td>Chinese (Simplified)</td>
<td>zh-CN</td>
<td>ğŸ‡¨ğŸ‡³</td>
</tr>
<tr>
<td>Chinese (Traditional)</td>
<td>zh-TW</td>
<td>ğŸ‡¹ğŸ‡¼</td>
</tr>
<tr>
<td>Arabic</td>
<td>ar</td>
<td>ğŸ‡¸ğŸ‡¦</td>
</tr>
<tr>
<td>Hindi</td>
<td>hi</td>
<td>ğŸ‡®ğŸ‡³</td>
</tr>
<tr>
<td>Thai</td>
<td>th</td>
<td>ğŸ‡¹ğŸ‡­</td>
</tr>
<tr>
<td>Vietnamese</td>
<td>vi</td>
<td>ğŸ‡»ğŸ‡³</td>
</tr>
</tbody>
</table>
<h3 id="admin-ui-tabs">45.3 Admin UI Tabs</h3>
<table>
<thead>
<tr>
<th>Tab</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Your Overrides</strong></td>
<td>View and manage custom translations</td>
</tr>
<tr>
<td><strong>Browse Strings</strong></td>
<td>Search Think Tank strings to customize</td>
</tr>
<tr>
<td><strong>Configuration</strong></td>
<td>Set default language and enabled languages</td>
</tr>
</tbody>
</table>
<h3 id="creating-translation-overrides">45.4 Creating Translation Overrides</h3>
<ol type="1">
<li>Navigate to <strong>Administration â†’ Localization</strong></li>
<li>Select target language from dropdown</li>
<li>Go to <strong>Browse Strings</strong> tab</li>
<li>Search for the string you want to customize</li>
<li>Click <strong>Edit</strong> to open the override dialog</li>
<li>Enter your custom text</li>
<li>Toggle <strong>Protect from automatic updates</strong> (recommended)</li>
<li>Click <strong>Save</strong></li>
</ol>
<h3 id="protection-system">45.5 Protection System</h3>
<p><strong>Protected overrides</strong> (default): - Will NOT be updated when system translations improve - Recommended for brand-specific terminology - Shows lock icon in override list</p>
<p><strong>Unprotected overrides</strong>: - May be updated by automatic translation systems - Useful for temporary fixes until system improves - Shows unlock icon in override list</p>
<p><strong>Reverting to system translation</strong>: - Click the revert button on any override - Override is deleted and system translation is restored</p>
<h3 id="language-configuration">45.6 Language Configuration</h3>
<p>Configure which languages are available to your users:</p>
<ol type="1">
<li>Go to <strong>Configuration</strong> tab</li>
<li>Set <strong>Default Language</strong> for new users</li>
<li>Enable/disable languages by clicking language cards</li>
<li>At least one language must remain enabled</li>
</ol>
<h3 id="common-use-cases">45.7 Common Use Cases</h3>
<table>
<thead>
<tr>
<th>Use Case</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Brand terminology</strong></td>
<td>Replace â€œThink Tankâ€ with your product name</td>
</tr>
<tr>
<td><strong>Industry jargon</strong></td>
<td>Use domain-specific terms</td>
</tr>
<tr>
<td><strong>Tone adjustment</strong></td>
<td>Make messages more formal/casual</td>
</tr>
<tr>
<td><strong>Legal compliance</strong></td>
<td>Customize disclaimers</td>
</tr>
<tr>
<td><strong>Regional variants</strong></td>
<td>UK vs US English differences</td>
</tr>
</tbody>
</table>
<h3 id="api-reference-2">45.8 API Reference</h3>
<p><strong>Base URL</strong>: <code>/api/admin/localization</code></p>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/overrides</code></td>
<td>GET</td>
<td>List your overrides</td>
</tr>
<tr>
<td><code>/overrides</code></td>
<td>POST</td>
<td>Create/update override</td>
</tr>
<tr>
<td><code>/overrides/:id</code></td>
<td>DELETE</td>
<td>Revert to system</td>
</tr>
<tr>
<td><code>/overrides/:id/protection</code></td>
<td>PATCH</td>
<td>Toggle protection</td>
</tr>
<tr>
<td><code>/config</code></td>
<td>GET/PUT</td>
<td>Language configuration</td>
</tr>
<tr>
<td><code>/bundle/:lang</code></td>
<td>GET</td>
<td>Get translations with overrides</td>
</tr>
</tbody>
</table>
<h3 id="database-tables-24">45.9 Database Tables</h3>
<table>
<thead>
<tr>
<th>Table</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tenant_translation_overrides</code></td>
<td>Custom translations per tenant</td>
</tr>
<tr>
<td><code>tenant_localization_config</code></td>
<td>Language settings per tenant</td>
</tr>
<tr>
<td><code>translation_audit_log</code></td>
<td>Change history</td>
</tr>
</tbody>
</table>
<h3 id="implementation-files-20">45.10 Implementation Files</h3>
<pre><code>packages/infrastructure/migrations/V2026_01_25_006__tenant_translation_overrides.sql
packages/infrastructure/lambda/admin/localization-registry.ts
apps/thinktank-admin/app/(dashboard)/localization/page.tsx</code></pre>
<hr />
<h2 id="related-documentation-2">Related Documentation</h2>
<ul>
<li><a href="./RADIANT-ADMIN-GUIDE.md">RADIANT Admin Guide</a> - Platform administration</li>
<li><a href="./RADIANT-ADMIN-GUIDE.md#section-64-hitl-orchestration-enhancements">RADIANT Admin Guide - HITL Orchestration</a> - Full HITL Orchestration documentation</li>
<li><a href="./RADIANT-ADMIN-GUIDE.md#36-metrics--persistent-learning-infrastructure">RADIANT Admin Guide - Metrics &amp; Learning</a> - Persistent learning system</li>
<li><a href="./RADIANT-ADMIN-GUIDE.md#27-consciousness-evolution-administration">RADIANT Admin Guide - Consciousness Evolution</a> - Predictive coding, LoRA evolution, Local Ego</li>
<li><a href="./THINK-TANK-USER-GUIDE.md">Think Tank User Guide</a> - End user guide</li>
<li><a href="./USER-RULES-SYSTEM.md">User Rules System</a> - Memory rules details</li>
<li><a href="./PROVIDER-REJECTION-HANDLING.md">Provider Rejection Handling</a> - Rejection system</li>
<li><a href="./AI-ETHICS-STANDARDS.md">AI Ethics Standards</a> - Ethics framework</li>
</ul>

  
  <div class="footer">
    RADIANT Documentation | Version 5.52.29 | Generated January 25, 2026
  </div>
</body>
</html>