<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SECTION 02 CDK INFRASTRUCTURE STACKS - RADIANT Documentation</title>
  
<style>
@media print {
  body { font-size: 11pt !important; }
  pre { page-break-inside: avoid; }
  h1, h2, h3 { page-break-after: avoid; }
  .no-print { display: none !important; }
}

* { box-sizing: border-box; }

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  line-height: 1.7;
  color: #1d1d1f;
  max-width: 900px;
  margin: 0 auto;
  padding: 40px 30px;
  background: white;
}

h1 {
  color: #1d1d1f;
  border-bottom: 3px solid #0071e3;
  padding-bottom: 12px;
  font-size: 28px;
  margin-top: 0;
}

h2 {
  color: #1d1d1f;
  border-bottom: 1px solid #d2d2d7;
  padding-bottom: 8px;
  font-size: 22px;
  margin-top: 40px;
}

h3 { color: #1d1d1f; font-size: 18px; margin-top: 30px; }
h4 { color: #1d1d1f; font-size: 16px; margin-top: 25px; }

a { color: #0071e3; text-decoration: none; }
a:hover { text-decoration: underline; }

code {
  background: #f5f5f7;
  padding: 2px 6px;
  border-radius: 4px;
  font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
  font-size: 0.9em;
  color: #1d1d1f;
}

pre {
  background: #1d1d1f;
  color: #f5f5f7;
  padding: 20px;
  border-radius: 10px;
  overflow-x: auto;
  font-size: 13px;
  line-height: 1.5;
}

pre code {
  background: transparent;
  padding: 0;
  color: inherit;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin: 20px 0;
  font-size: 14px;
}

th, td {
  border: 1px solid #d2d2d7;
  padding: 12px 15px;
  text-align: left;
}

th {
  background: #0071e3;
  color: white;
  font-weight: 600;
}

tr:nth-child(even) { background: #f5f5f7; }

blockquote {
  border-left: 4px solid #0071e3;
  margin: 20px 0;
  padding: 15px 25px;
  background: #f5f5f7;
  border-radius: 0 8px 8px 0;
}

blockquote p { margin: 0; }

img { max-width: 100%; height: auto; border-radius: 8px; }

hr {
  border: none;
  border-top: 1px solid #d2d2d7;
  margin: 40px 0;
}

ul, ol { padding-left: 25px; }
li { margin: 8px 0; }

.header-bar {
  background: linear-gradient(135deg, #0071e3 0%, #00c6ff 100%);
  color: white;
  padding: 20px 30px;
  margin: -40px -30px 30px -30px;
  border-radius: 0 0 16px 16px;
}

.header-bar h1 {
  color: white;
  border: none;
  margin: 0;
  padding: 0;
}

.header-bar .meta {
  font-size: 13px;
  opacity: 0.9;
  margin-top: 8px;
}

.print-btn {
  position: fixed;
  top: 20px;
  right: 20px;
  background: #0071e3;
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  box-shadow: 0 4px 12px rgba(0,113,227,0.3);
}

.print-btn:hover { background: #0077ed; }

.mermaid {
  background: #f5f5f7;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
  margin: 20px 0;
}

.footer {
  margin-top: 60px;
  padding-top: 20px;
  border-top: 1px solid #d2d2d7;
  color: #86868b;
  font-size: 12px;
  text-align: center;
}
</style>

</head>
<body>
  <button class="print-btn no-print" onclick="window.print()">ğŸ–¨ï¸ Print / Save as PDF</button>
  
  <div class="header-bar">
    <h1>SECTION 02 CDK INFRASTRUCTURE STACKS</h1>
    <div class="meta">RADIANT v5.52.29 | docs/sections/SECTION-02-CDK-INFRASTRUCTURE-STACKS.md</div>
  </div>
  
  <h1 id="section-2-cdk-infrastructure-stacks-v2.0.0">SECTION 2: CDK INFRASTRUCTURE STACKS (v2.0.0)</h1>
<h1 id="Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢">Ã¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢Â</h1>
<blockquote>
<p><strong>Dependencies:</strong> Sections 0, 1 <strong>Creates:</strong> VPC, Aurora, DynamoDB, S3, KMS, WAF stacks</p>
</blockquote>
<h2 id="important-type-imports">IMPORTANT: Type Imports</h2>
<p>All CDK stacks should import types and configs from <span class="citation" data-cites="radiant/shared">@radiant/shared</span>:</p>
<pre class="typescript"><code>// At the top of each stack file:
import {
  TierConfig,
  TierLevel,
  getTierConfig,
  TIER_CONFIGS,
  REGIONS,
  getMultiRegionDeployment,
} from &#39;@radiant/shared&#39;;</code></pre>
<p><strong>DO NOT recreate</strong> the following files (they come from Section 0): - <code>lib/config/tiers.ts</code> - Import from <span class="citation" data-cites="radiant/shared">@radiant/shared</span> instead - <code>lib/config/regions.ts</code> - Import from <span class="citation" data-cites="radiant/shared">@radiant/shared</span> instead</p>
<p><strong>DO create</strong> these CDK-specific files: - <code>lib/config/tags.ts</code> - CDK tagging utilities (shown in Section 1)</p>
<hr />
<h1 id="radiant-v2.2.0---prompt-2-cdk-infrastructure-stacks">RADIANT v2.2.0 - Prompt 2: CDK Infrastructure Stacks</h1>
<blockquote>
<p><strong>Prompt 2 of 9</strong> | Target Size: ~35KB | Version: 3.7.0 | December 2024</p>
</blockquote>
<hr />
<h2 id="overview">OVERVIEW</h2>
<p>This prompt creates the core AWS CDK infrastructure stacks:</p>
<ol type="1">
<li><strong>Foundation Stack</strong> - SSM parameters, tagging, base configuration</li>
<li><strong>Networking Stack</strong> - VPC, subnets, NAT, VPC endpoints</li>
<li><strong>Security Stack</strong> - KMS keys, IAM roles, security groups, WAF</li>
<li><strong>Data Stack</strong> - Aurora PostgreSQL, DynamoDB, ElastiCache</li>
<li><strong>Storage Stack</strong> - S3 buckets, CloudFront distributions</li>
</ol>
<p>All stacks are tier-aware and scale automatically based on the selected infrastructure tier (1-5).</p>
<hr />
<h2 id="infrastructure-package-structure">INFRASTRUCTURE PACKAGE STRUCTURE</h2>
<pre><code>packages/infrastructure/
ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ package.json
ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ tsconfig.json
ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ cdk.json
ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ bin/
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ radiant.ts                    # CDK app entry point
ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ lib/
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ index.ts
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ config/
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ index.ts
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ tiers.ts                  # Tier configurations
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ regions.ts                # Region configurations
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ tags.ts                   # Tagging utilities
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ stacks/
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ index.ts
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ foundation.stack.ts
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ networking.stack.ts
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ security.stack.ts
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ data.stack.ts
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ storage.stack.ts
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ ai.stack.ts               # Prompt 3
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ api.stack.ts              # Prompt 3
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ admin.stack.ts            # Prompt 3
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ constructs/
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡       ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ index.ts
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡       ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ aurora-global.construct.ts
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡       ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ vpc-endpoints.construct.ts
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡       ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ waf.construct.ts
ÃƒÂ¢Ã¢â‚¬ÂÃ…â€œÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ lambda/                           # Prompts 4-5
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ [See Prompts 4-5]
ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ migrations/
    ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ [See Prompt 7]</code></pre>
<hr />
<h2 id="part-1-package-configuration">PART 1: PACKAGE CONFIGURATION</h2>
<h3 id="packagesinfrastructurepackage.json">packages/infrastructure/package.json</h3>
<pre class="json"><code>{
  &quot;name&quot;: &quot;@radiant/infrastructure&quot;,
  &quot;version&quot;: &quot;2.2.0&quot;,
  &quot;private&quot;: true,
  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;tsc&quot;,
    &quot;watch&quot;: &quot;tsc -w&quot;,
    &quot;clean&quot;: &quot;rm -rf dist cdk.out&quot;,
    &quot;cdk&quot;: &quot;cdk&quot;,
    &quot;synth&quot;: &quot;cdk synth&quot;,
    &quot;deploy&quot;: &quot;cdk deploy --all&quot;,
    &quot;deploy:dev&quot;: &quot;cdk deploy --all --context environment=dev --context tier=1&quot;,
    &quot;deploy:staging&quot;: &quot;cdk deploy --all --context environment=staging --context tier=2&quot;,
    &quot;deploy:prod&quot;: &quot;cdk deploy --all --context environment=prod --context tier=3&quot;,
    &quot;diff&quot;: &quot;cdk diff&quot;,
    &quot;destroy&quot;: &quot;cdk destroy --all&quot;,
    &quot;test&quot;: &quot;jest&quot;
  },
  &quot;dependencies&quot;: {
    &quot;aws-cdk-lib&quot;: &quot;^2.120.0&quot;,
    &quot;constructs&quot;: &quot;^10.3.0&quot;,
    &quot;source-map-support&quot;: &quot;^0.5.21&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;@types/node&quot;: &quot;^20.10.0&quot;,
    &quot;aws-cdk&quot;: &quot;^2.120.0&quot;,
    &quot;typescript&quot;: &quot;^5.3.0&quot;,
    &quot;jest&quot;: &quot;^29.7.0&quot;,
    &quot;@types/jest&quot;: &quot;^29.5.11&quot;,
    &quot;ts-jest&quot;: &quot;^29.1.1&quot;
  }
}</code></pre>
<h3 id="packagesinfrastructuretsconfig.json">packages/infrastructure/tsconfig.json</h3>
<h2 id="cdk-entry-point">2.2 CDK ENTRY POINT</h2>
<blockquote>
<p><strong>NOTE:</strong> The bin/radiant.ts file imports from <span class="citation" data-cites="radiant/shared">@radiant/shared</span>, not local config files.</p>
</blockquote>
<pre><code>  natGateways: 1,
  enableFlowLogs: true,
  flowLogsRetentionDays: 14,
},

aurora: {
  instanceClass: &#39;db.r6g.large&#39;,
  minCapacity: 1,
  maxCapacity: 4,
  enableGlobal: false,
  readerCount: 1,
  backupRetentionDays: 14,
  enablePerformanceInsights: true,
  performanceInsightsRetentionDays: 7,
  deletionProtection: true,
  enableIAMAuth: true,
},

dynamodb: {
  billingMode: &#39;PAY_PER_REQUEST&#39;,
  enablePointInTimeRecovery: true,
  enableContributorInsights: false,
},

elasticache: {
  enabled: true,
  nodeType: &#39;cache.t4g.micro&#39;,
  numCacheNodes: 1,
  enableMultiAz: false,
  enableAutoFailover: false,
  snapshotRetentionDays: 1,
},

lambda: {
  memoryMB: 1024,
  timeoutSeconds: 60,
},

litellm: {
  taskCount: 2,
  cpu: 512,
  memory: 1024,
  enableAutoScaling: true,
  minTasks: 1,
  maxTasks: 4,
},

sagemaker: {
  enabled: false,
},

s3: {
  intelligentTiering: true,
  lifecycleRules: true,
  replicationEnabled: false,
  versioning: true,
},

security: {
  enableWaf: true,
  enableShield: false,
  enableGuardDuty: true,
  enableInspector: false,
  enableSecurityHub: false,
  enableMacie: false,
  kmsKeyRotation: true,
},

features: {
  multiRegion: false,
  enhancedMonitoring: true,
  xrayTracing: true,
  detailedCloudWatchMetrics: false,
},

estimatedCost: {
  min: 300,
  max: 800,
  notes: &#39;Production-ready, single region&#39;,
},</code></pre>
<p>},</p>
<p>// ============================================================================ // TIER 3: GROWTH - Growing Production // ============================================================================ 3: { tier: 3, name: â€˜GROWTHâ€™, description: â€˜Growing production workloadsâ€™,</p>
<pre><code>vpc: {
  maxAzs: 3,
  natGateways: 2,
  enableFlowLogs: true,
  flowLogsRetentionDays: 30,
},

aurora: {
  instanceClass: &#39;db.r6g.xlarge&#39;,
  minCapacity: 2,
  maxCapacity: 16,
  enableGlobal: false,
  readerCount: 2,
  backupRetentionDays: 30,
  enablePerformanceInsights: true,
  performanceInsightsRetentionDays: 31,
  deletionProtection: true,
  enableIAMAuth: true,
},

dynamodb: {
  billingMode: &#39;PAY_PER_REQUEST&#39;,
  enablePointInTimeRecovery: true,
  enableContributorInsights: true,
},

elasticache: {
  enabled: true,
  nodeType: &#39;cache.r6g.large&#39;,
  numCacheNodes: 2,
  enableMultiAz: true,
  enableAutoFailover: true,
  snapshotRetentionDays: 7,
},

lambda: {
  memoryMB: 2048,
  timeoutSeconds: 120,
  reservedConcurrency: 100,
},

litellm: {
  taskCount: 4,
  cpu: 1024,
  memory: 2048,
  enableAutoScaling: true,
  minTasks: 2,
  maxTasks: 8,
},

sagemaker: {
  enabled: true,
  defaultInstanceType: &#39;ml.g4dn.xlarge&#39;,
  enableMultiModel: false,
},

s3: {
  intelligentTiering: true,
  lifecycleRules: true,
  replicationEnabled: false,
  versioning: true,
},

security: {
  enableWaf: true,
  enableShield: false,
  enableGuardDuty: true,
  enableInspector: true,
  enableSecurityHub: true,
  enableMacie: false,
  kmsKeyRotation: true,
},

features: {
  multiRegion: false,
  enhancedMonitoring: true,
  xrayTracing: true,
  detailedCloudWatchMetrics: true,
},

estimatedCost: {
  min: 1500,
  max: 4000,
  notes: &#39;High availability, full monitoring&#39;,
},</code></pre>
<p>},</p>
<p>// ============================================================================ // TIER 4: SCALE - Large Production + Multi-Region // ============================================================================ 4: { tier: 4, name: â€˜SCALEâ€™, description: â€˜High-scale production with multi-regionâ€™,</p>
<pre><code>vpc: {
  maxAzs: 3,
  natGateways: 3,
  enableFlowLogs: true,
  flowLogsRetentionDays: 90,
},

aurora: {
  instanceClass: &#39;db.r6g.2xlarge&#39;,
  minCapacity: 4,
  maxCapacity: 64,
  enableGlobal: true,
  readerCount: 3,
  backupRetentionDays: 35,
  enablePerformanceInsights: true,
  performanceInsightsRetentionDays: 93,
  deletionProtection: true,
  enableIAMAuth: true,
},

dynamodb: {
  billingMode: &#39;PAY_PER_REQUEST&#39;,
  enablePointInTimeRecovery: true,
  enableContributorInsights: true,
},

elasticache: {
  enabled: true,
  nodeType: &#39;cache.r6g.xlarge&#39;,
  numCacheNodes: 3,
  enableMultiAz: true,
  enableAutoFailover: true,
  snapshotRetentionDays: 14,
},

lambda: {
  memoryMB: 3072,
  timeoutSeconds: 300,
  reservedConcurrency: 500,
  provisionedConcurrency: 10,
},

litellm: {
  taskCount: 8,
  cpu: 2048,
  memory: 4096,
  enableAutoScaling: true,
  minTasks: 4,
  maxTasks: 16,
},

sagemaker: {
  enabled: true,
  defaultInstanceType: &#39;ml.g5.xlarge&#39;,
  enableMultiModel: true,
},

s3: {
  intelligentTiering: true,
  lifecycleRules: true,
  replicationEnabled: true,
  versioning: true,
},

security: {
  enableWaf: true,
  enableShield: true,
  enableGuardDuty: true,
  enableInspector: true,
  enableSecurityHub: true,
  enableMacie: true,
  kmsKeyRotation: true,
},

features: {
  multiRegion: true,
  enhancedMonitoring: true,
  xrayTracing: true,
  detailedCloudWatchMetrics: true,
},

estimatedCost: {
  min: 5000,
  max: 15000,
  notes: &#39;Multi-region, advanced security&#39;,
},</code></pre>
<p>},</p>
<p>// ============================================================================ // TIER 5: ENTERPRISE - Full Compliance // ============================================================================ 5: { tier: 5, name: â€˜ENTERPRISEâ€™, description: â€˜Enterprise-scale with full complianceâ€™,</p>
<pre><code>vpc: {
  maxAzs: 3,
  natGateways: 3,
  enableFlowLogs: true,
  flowLogsRetentionDays: 365,
},

aurora: {
  instanceClass: &#39;db.r6g.4xlarge&#39;,
  minCapacity: 8,
  maxCapacity: 128,
  enableGlobal: true,
  readerCount: 5,
  backupRetentionDays: 35,
  enablePerformanceInsights: true,
  performanceInsightsRetentionDays: 731,
  deletionProtection: true,
  enableIAMAuth: true,
},

dynamodb: {
  billingMode: &#39;PAY_PER_REQUEST&#39;,
  enablePointInTimeRecovery: true,
  enableContributorInsights: true,
},

elasticache: {
  enabled: true,
  nodeType: &#39;cache.r6g.2xlarge&#39;,
  numCacheNodes: 6,
  enableMultiAz: true,
  enableAutoFailover: true,
  snapshotRetentionDays: 35,
},

lambda: {
  memoryMB: 4096,
  timeoutSeconds: 900,
  reservedConcurrency: 1000,
  provisionedConcurrency: 50,
},

litellm: {
  taskCount: 16,
  cpu: 4096,
  memory: 8192,
  enableAutoScaling: true,
  minTasks: 8,
  maxTasks: 32,
},

sagemaker: {
  enabled: true,
  defaultInstanceType: &#39;ml.g5.2xlarge&#39;,
  enableMultiModel: true,
},

s3: {
  intelligentTiering: true,
  lifecycleRules: true,
  replicationEnabled: true,
  versioning: true,
},

security: {
  enableWaf: true,
  enableShield: true,
  enableGuardDuty: true,
  enableInspector: true,
  enableSecurityHub: true,
  enableMacie: true,
  kmsKeyRotation: true,
},

features: {
  multiRegion: true,
  enhancedMonitoring: true,
  xrayTracing: true,
  detailedCloudWatchMetrics: true,
},

estimatedCost: {
  min: 15000,
  max: 50000,
  notes: &#39;Full enterprise, HIPAA/SOC 2&#39;,
},</code></pre>
<p>}, };</p>
<p>/** * Get tier configuration */ export function getTierConfig(tier: TierLevel): TierConfig { const config = TIER_CONFIGS[tier]; if (!config) { throw new Error(<code>Invalid tier: ${tier}. Must be 1-5.</code>); } return config; }</p>
<p>/** * Validate tier for environment */ export function validateTierForEnvironment(tier: TierLevel, environment: string): void { if (environment === â€˜prodâ€™ &amp;&amp; tier &lt; 2) { console.warn(â€˜ÃƒÂ¢Ã…Â¡Ã‚Â ÃƒÂ¯Ã‚Â¸Ã‚Â Warning: Tier 1 (SEED) is not recommended for productionâ€™); } if (environment === â€˜devâ€™ &amp;&amp; tier &gt; 2) { console.warn(â€˜ÃƒÂ¢Ã…Â¡Ã‚Â ÃƒÂ¯Ã‚Â¸Ã‚Â Warning: Tier 3+ may be expensive for developmentâ€™); } }</p>
<pre><code>
### packages/infrastructure/lib/config/regions.ts

```typescript
/**
 * AWS Region Configuration
 */

export interface RegionConfig {
  code: string;
  name: string;
  geography: &#39;us&#39; | &#39;eu&#39; | &#39;apac&#39;;
  isPrimary: boolean;
  supportsAllServices: boolean;
  latencyZone: number;  // 1 = lowest latency from US
}

export const REGIONS: Record&lt;string, RegionConfig&gt; = {
  &#39;us-east-1&#39;: {
    code: &#39;us-east-1&#39;,
    name: &#39;US East (N. Virginia)&#39;,
    geography: &#39;us&#39;,
    isPrimary: true,
    supportsAllServices: true,
    latencyZone: 1,
  },
  &#39;us-west-2&#39;: {
    code: &#39;us-west-2&#39;,
    name: &#39;US West (Oregon)&#39;,
    geography: &#39;us&#39;,
    isPrimary: false,
    supportsAllServices: true,
    latencyZone: 2,
  },
  &#39;eu-west-1&#39;: {
    code: &#39;eu-west-1&#39;,
    name: &#39;Europe (Ireland)&#39;,
    geography: &#39;eu&#39;,
    isPrimary: false,
    supportsAllServices: true,
    latencyZone: 3,
  },
  &#39;eu-central-1&#39;: {
    code: &#39;eu-central-1&#39;,
    name: &#39;Europe (Frankfurt)&#39;,
    geography: &#39;eu&#39;,
    isPrimary: false,
    supportsAllServices: true,
    latencyZone: 3,
  },
  &#39;ap-northeast-1&#39;: {
    code: &#39;ap-northeast-1&#39;,
    name: &#39;Asia Pacific (Tokyo)&#39;,
    geography: &#39;apac&#39;,
    isPrimary: false,
    supportsAllServices: true,
    latencyZone: 4,
  },
  &#39;ap-southeast-1&#39;: {
    code: &#39;ap-southeast-1&#39;,
    name: &#39;Asia Pacific (Singapore)&#39;,
    geography: &#39;apac&#39;,
    isPrimary: false,
    supportsAllServices: true,
    latencyZone: 4,
  },
};

/**
 * Default multi-region configuration
 * Maps geography to preferred region
 */
export const MULTI_REGION_CONFIG: Record&lt;string, string&gt; = {
  us: &#39;us-east-1&#39;,
  eu: &#39;eu-west-1&#39;,
  apac: &#39;ap-northeast-1&#39;,
};

/**
 * Get regions for multi-region deployment
 */
export function getMultiRegionDeployment(primaryRegion: string): string[] {
  const regions = new Set&lt;string&gt;([primaryRegion]);
  
  for (const region of Object.values(MULTI_REGION_CONFIG)) {
    regions.add(region);
  }
  
  return Array.from(regions);
}

/**
 * Get region configuration
 */
export function getRegionConfig(region: string): RegionConfig {
  const config = REGIONS[region];
  if (!config) {
    throw new Error(`Unsupported region: ${region}`);
  }
  return config;
}</code></pre>
<h3 id="packagesinfrastructurelibconfigtags.ts">packages/infrastructure/lib/config/tags.ts</h3>
<pre class="typescript"><code>import * as cdk from &#39;aws-cdk-lib&#39;;
import { Construct } from &#39;constructs&#39;;

export interface RadiantTags {
  project?: string;
  appId: string;
  environment: string;
  tier: number;
  version?: string;
  owner?: string;
  costCenter?: string;
  compliance?: string;
}

/**
 * Apply standard RADIANT tags to a construct
 */
export function applyTags(scope: Construct, tags: RadiantTags): void {
  cdk.Tags.of(scope).add(&#39;Project&#39;, tags.project || &#39;RADIANT&#39;);
  cdk.Tags.of(scope).add(&#39;AppId&#39;, tags.appId);
  cdk.Tags.of(scope).add(&#39;Environment&#39;, tags.environment);
  cdk.Tags.of(scope).add(&#39;Tier&#39;, String(tags.tier));
  cdk.Tags.of(scope).add(&#39;Version&#39;, tags.version || &#39;2.2.0&#39;);
  cdk.Tags.of(scope).add(&#39;ManagedBy&#39;, &#39;CDK&#39;);
  
  if (tags.owner) {
    cdk.Tags.of(scope).add(&#39;Owner&#39;, tags.owner);
  }
  if (tags.costCenter) {
    cdk.Tags.of(scope).add(&#39;CostCenter&#39;, tags.costCenter);
  }
  if (tags.compliance) {
    cdk.Tags.of(scope).add(&#39;Compliance&#39;, tags.compliance);
  }
}

/**
 * Get standard resource naming
 */
export function getResourceName(
  appId: string,
  environment: string,
  resourceType: string,
  suffix?: string
): string {
  const base = `${appId}-${environment}-${resourceType}`;
  return suffix ? `${base}-${suffix}` : base;
}</code></pre>
<hr />
<h2 id="part-4-foundation-stack">PART 4: FOUNDATION STACK</h2>
<h3 id="packagesinfrastructurelibstacksfoundation.stack.ts">packages/infrastructure/lib/stacks/foundation.stack.ts</h3>
<pre class="typescript"><code>import * as cdk from &#39;aws-cdk-lib&#39;;
import * as ssm from &#39;aws-cdk-lib/aws-ssm&#39;;
import { Construct } from &#39;constructs&#39;;
import { TierConfig, TierLevel } from &#39;../config/tiers&#39;;
import { applyTags } from &#39;../config/tags&#39;;

export interface FoundationStackProps extends cdk.StackProps {
  appId: string;
  appName: string;
  environment: string;
  tier: TierLevel;
  tierConfig: TierConfig;
  domain: string;
}

/**
 * Foundation Stack
 * 
 * Creates base configuration and SSM parameters used by all other stacks.
 * This stack has no dependencies and is deployed first.
 */
export class FoundationStack extends cdk.Stack {
  public readonly tierParameter: ssm.StringParameter;
  public readonly configParameter: ssm.StringParameter;

  constructor(scope: Construct, id: string, props: FoundationStackProps) {
    super(scope, id, props);

    const prefix = `/radiant/${props.appId}/${props.environment}`;

    // ========================================================================
    // SSM PARAMETERS
    // ========================================================================

    // Tier level
    this.tierParameter = new ssm.StringParameter(this, &#39;TierParameter&#39;, {
      parameterName: `${prefix}/tier`,
      stringValue: String(props.tier),
      description: `RADIANT infrastructure tier for ${props.appName} ${props.environment}`,
      tier: ssm.ParameterTier.STANDARD,
    });

    // Full tier configuration (JSON)
    this.configParameter = new ssm.StringParameter(this, &#39;TierConfigParameter&#39;, {
      parameterName: `${prefix}/tier-config`,
      stringValue: JSON.stringify(props.tierConfig),
      description: `RADIANT tier configuration for ${props.appName} ${props.environment}`,
      tier: ssm.ParameterTier.ADVANCED,  // Allows larger values
    });

    // App metadata
    new ssm.StringParameter(this, &#39;AppIdParameter&#39;, {
      parameterName: `${prefix}/app-id`,
      stringValue: props.appId,
      description: &#39;Application identifier&#39;,
    });

    new ssm.StringParameter(this, &#39;AppNameParameter&#39;, {
      parameterName: `${prefix}/app-name`,
      stringValue: props.appName,
      description: &#39;Application display name&#39;,
    });

    new ssm.StringParameter(this, &#39;DomainParameter&#39;, {
      parameterName: `${prefix}/domain`,
      stringValue: props.domain,
      description: &#39;Base domain for the application&#39;,
    });

    new ssm.StringParameter(this, &#39;VersionParameter&#39;, {
      parameterName: `${prefix}/version`,
      stringValue: &#39;2.2.0&#39;,
      description: &#39;RADIANT platform version&#39;,
    });

    new ssm.StringParameter(this, &#39;DeployedAtParameter&#39;, {
      parameterName: `${prefix}/deployed-at`,
      stringValue: new Date().toISOString(),
      description: &#39;Last deployment timestamp&#39;,
    });

    // Feature flags based on tier
    new ssm.StringParameter(this, &#39;FeaturesParameter&#39;, {
      parameterName: `${prefix}/features`,
      stringValue: JSON.stringify({
        multiRegion: props.tierConfig.features.multiRegion,
        waf: props.tierConfig.security.enableWaf,
        guardDuty: props.tierConfig.security.enableGuardDuty,
        sagemaker: props.tierConfig.sagemaker.enabled,
        elasticache: props.tierConfig.elasticache.enabled,
        xray: props.tierConfig.features.xrayTracing,
      }),
      description: &#39;Enabled features for this deployment&#39;,
    });

    // ========================================================================
    // TAGS
    // ========================================================================

    applyTags(this, {
      appId: props.appId,
      environment: props.environment,
      tier: props.tier,
    });

    // ========================================================================
    // OUTPUTS
    // ========================================================================

    new cdk.CfnOutput(this, &#39;TierName&#39;, {
      value: props.tierConfig.name,
      description: &#39;Infrastructure tier name&#39;,
      exportName: `${props.appId}-${props.environment}-tier-name`,
    });

    new cdk.CfnOutput(this, &#39;ParameterPrefix&#39;, {
      value: prefix,
      description: &#39;SSM parameter prefix&#39;,
      exportName: `${props.appId}-${props.environment}-param-prefix`,
    });
  }
}</code></pre>
<hr />
<h2 id="part-5-networking-stack">PART 5: NETWORKING STACK</h2>
<h3 id="packagesinfrastructurelibstacksnetworking.stack.ts">packages/infrastructure/lib/stacks/networking.stack.ts</h3>
<pre class="typescript"><code>import * as cdk from &#39;aws-cdk-lib&#39;;
import * as ec2 from &#39;aws-cdk-lib/aws-ec2&#39;;
import * as logs from &#39;aws-cdk-lib/aws-logs&#39;;
import * as iam from &#39;aws-cdk-lib/aws-iam&#39;;
import { Construct } from &#39;constructs&#39;;
import { TierConfig, TierLevel } from &#39;../config/tiers&#39;;
import { applyTags } from &#39;../config/tags&#39;;

export interface NetworkingStackProps extends cdk.StackProps {
  appId: string;
  appName: string;
  environment: string;
  tier: TierLevel;
  tierConfig: TierConfig;
  domain: string;
}

/**
 * Networking Stack
 * 
 * Creates VPC with public, private, and isolated subnets.
 * Configures NAT gateways, VPC endpoints, and flow logs.
 */
export class NetworkingStack extends cdk.Stack {
  public readonly vpc: ec2.Vpc;
  public readonly flowLogsGroup: logs.LogGroup;

  constructor(scope: Construct, id: string, props: NetworkingStackProps) {
    super(scope, id, props);

    const { tierConfig } = props;

    // ========================================================================
    // VPC FLOW LOGS
    // ========================================================================

    this.flowLogsGroup = new logs.LogGroup(this, &#39;VpcFlowLogs&#39;, {
      logGroupName: `/radiant/${props.appId}/${props.environment}/vpc-flow-logs`,
      retention: this.getLogRetention(tierConfig.vpc.flowLogsRetentionDays),
      removalPolicy: props.environment === &#39;prod&#39; 
        ? cdk.RemovalPolicy.RETAIN 
        : cdk.RemovalPolicy.DESTROY,
    });

    const flowLogsRole = new iam.Role(this, &#39;VpcFlowLogsRole&#39;, {
      assumedBy: new iam.ServicePrincipal(&#39;vpc-flow-logs.amazonaws.com&#39;),
      description: &#39;Role for VPC Flow Logs&#39;,
    });

    this.flowLogsGroup.grantWrite(flowLogsRole);

    // ========================================================================
    // VPC
    // ========================================================================

    this.vpc = new ec2.Vpc(this, &#39;Vpc&#39;, {
      vpcName: `${props.appId}-${props.environment}-vpc`,
      
      // IP addressing
      ipAddresses: ec2.IpAddresses.cidr(&#39;10.0.0.0/16&#39;),
      
      // Availability zones
      maxAzs: tierConfig.vpc.maxAzs,
      
      // NAT configuration
      natGateways: tierConfig.vpc.natGateways,
      natGatewayProvider: tierConfig.tier &gt;= 3
        ? ec2.NatProvider.gateway()
        : ec2.NatProvider.gateway(),  // Could use NAT instances for tier 1
      
      // Subnet configuration
      subnetConfiguration: [
        {
          name: &#39;Public&#39;,
          subnetType: ec2.SubnetType.PUBLIC,
          cidrMask: 24,
          mapPublicIpOnLaunch: false,
        },
        {
          name: &#39;Private&#39;,
          subnetType: ec2.SubnetType.PRIVATE_WITH_EGRESS,
          cidrMask: 24,
        },
        {
          name: &#39;Isolated&#39;,
          subnetType: ec2.SubnetType.PRIVATE_ISOLATED,
          cidrMask: 24,
        },
      ],
      
      // Enable DNS
      enableDnsHostnames: true,
      enableDnsSupport: true,
      
      // Flow logs
      flowLogs: tierConfig.vpc.enableFlowLogs ? {
        flowLog: {
          destination: ec2.FlowLogDestination.toCloudWatchLogs(
            this.flowLogsGroup,
            flowLogsRole
          ),
          trafficType: ec2.FlowLogTrafficType.ALL,
        },
      } : undefined,
    });

    // ========================================================================
    // VPC ENDPOINTS - GATEWAY (Free)
    // ========================================================================

    // S3 Gateway Endpoint (free)
    this.vpc.addGatewayEndpoint(&#39;S3Endpoint&#39;, {
      service: ec2.GatewayVpcEndpointAwsService.S3,
      subnets: [
        { subnetType: ec2.SubnetType.PRIVATE_WITH_EGRESS },
        { subnetType: ec2.SubnetType.PRIVATE_ISOLATED },
      ],
    });

    // DynamoDB Gateway Endpoint (free)
    this.vpc.addGatewayEndpoint(&#39;DynamoDbEndpoint&#39;, {
      service: ec2.GatewayVpcEndpointAwsService.DYNAMODB,
      subnets: [
        { subnetType: ec2.SubnetType.PRIVATE_WITH_EGRESS },
        { subnetType: ec2.SubnetType.PRIVATE_ISOLATED },
      ],
    });

    // ========================================================================
    // VPC ENDPOINTS - INTERFACE (Tier 2+)
    // ========================================================================

    if (tierConfig.tier &gt;= 2) {
      // Security group for VPC endpoints
      const endpointSecurityGroup = new ec2.SecurityGroup(this, &#39;EndpointSecurityGroup&#39;, {
        vpc: this.vpc,
        description: &#39;Security group for VPC Interface Endpoints&#39;,
        allowAllOutbound: false,
      });

      // Allow HTTPS from within VPC
      endpointSecurityGroup.addIngressRule(
        ec2.Peer.ipv4(this.vpc.vpcCidrBlock),
        ec2.Port.tcp(443),
        &#39;Allow HTTPS from VPC&#39;
      );

      // Secrets Manager
      this.vpc.addInterfaceEndpoint(&#39;SecretsManagerEndpoint&#39;, {
        service: ec2.InterfaceVpcEndpointAwsService.SECRETS_MANAGER,
        securityGroups: [endpointSecurityGroup],
        subnets: { subnetType: ec2.SubnetType.PRIVATE_WITH_EGRESS },
        privateDnsEnabled: true,
      });

      // SSM
      this.vpc.addInterfaceEndpoint(&#39;SsmEndpoint&#39;, {
        service: ec2.InterfaceVpcEndpointAwsService.SSM,
        securityGroups: [endpointSecurityGroup],
        subnets: { subnetType: ec2.SubnetType.PRIVATE_WITH_EGRESS },
        privateDnsEnabled: true,
      });

      // CloudWatch Logs
      this.vpc.addInterfaceEndpoint(&#39;CloudWatchLogsEndpoint&#39;, {
        service: ec2.InterfaceVpcEndpointAwsService.CLOUDWATCH_LOGS,
        securityGroups: [endpointSecurityGroup],
        subnets: { subnetType: ec2.SubnetType.PRIVATE_WITH_EGRESS },
        privateDnsEnabled: true,
      });
    }

    // ========================================================================
    // VPC ENDPOINTS - ADDITIONAL (Tier 3+)
    // ========================================================================

    if (tierConfig.tier &gt;= 3) {
      const endpointSecurityGroup = ec2.SecurityGroup.fromSecurityGroupId(
        this,
        &#39;ExistingEndpointSg&#39;,
        this.vpc.vpcEndpoints[0]?.connections?.securityGroups[0]?.securityGroupId || &#39;&#39;,
      );

      // ECR for container images
      this.vpc.addInterfaceEndpoint(&#39;EcrEndpoint&#39;, {
        service: ec2.InterfaceVpcEndpointAwsService.ECR,
        subnets: { subnetType: ec2.SubnetType.PRIVATE_WITH_EGRESS },
        privateDnsEnabled: true,
      });

      this.vpc.addInterfaceEndpoint(&#39;EcrDockerEndpoint&#39;, {
        service: ec2.InterfaceVpcEndpointAwsService.ECR_DOCKER,
        subnets: { subnetType: ec2.SubnetType.PRIVATE_WITH_EGRESS },
        privateDnsEnabled: true,
      });

      // SageMaker Runtime (if enabled)
      if (tierConfig.sagemaker.enabled) {
        this.vpc.addInterfaceEndpoint(&#39;SageMakerRuntimeEndpoint&#39;, {
          service: ec2.InterfaceVpcEndpointAwsService.SAGEMAKER_RUNTIME,
          subnets: { subnetType: ec2.SubnetType.PRIVATE_WITH_EGRESS },
          privateDnsEnabled: true,
        });
      }

      // Lambda
      this.vpc.addInterfaceEndpoint(&#39;LambdaEndpoint&#39;, {
        service: ec2.InterfaceVpcEndpointAwsService.LAMBDA,
        subnets: { subnetType: ec2.SubnetType.PRIVATE_WITH_EGRESS },
        privateDnsEnabled: true,
      });

      // STS
      this.vpc.addInterfaceEndpoint(&#39;StsEndpoint&#39;, {
        service: ec2.InterfaceVpcEndpointAwsService.STS,
        subnets: { subnetType: ec2.SubnetType.PRIVATE_WITH_EGRESS },
        privateDnsEnabled: true,
      });

      // KMS
      this.vpc.addInterfaceEndpoint(&#39;KmsEndpoint&#39;, {
        service: ec2.InterfaceVpcEndpointAwsService.KMS,
        subnets: { subnetType: ec2.SubnetType.PRIVATE_WITH_EGRESS },
        privateDnsEnabled: true,
      });
    }

    // ========================================================================
    // TAGS
    // ========================================================================

    applyTags(this, {
      appId: props.appId,
      environment: props.environment,
      tier: props.tier,
    });

    // Tag subnets for easier identification
    for (const subnet of this.vpc.publicSubnets) {
      cdk.Tags.of(subnet).add(&#39;Name&#39;, `${props.appId}-${props.environment}-public-${subnet.availabilityZone}`);
      cdk.Tags.of(subnet).add(&#39;SubnetType&#39;, &#39;Public&#39;);
    }
    for (const subnet of this.vpc.privateSubnets) {
      cdk.Tags.of(subnet).add(&#39;Name&#39;, `${props.appId}-${props.environment}-private-${subnet.availabilityZone}`);
      cdk.Tags.of(subnet).add(&#39;SubnetType&#39;, &#39;Private&#39;);
    }
    for (const subnet of this.vpc.isolatedSubnets) {
      cdk.Tags.of(subnet).add(&#39;Name&#39;, `${props.appId}-${props.environment}-isolated-${subnet.availabilityZone}`);
      cdk.Tags.of(subnet).add(&#39;SubnetType&#39;, &#39;Isolated&#39;);
    }

    // ========================================================================
    // OUTPUTS
    // ========================================================================

    new cdk.CfnOutput(this, &#39;VpcId&#39;, {
      value: this.vpc.vpcId,
      description: &#39;VPC ID&#39;,
      exportName: `${props.appId}-${props.environment}-vpc-id`,
    });

    new cdk.CfnOutput(this, &#39;VpcCidr&#39;, {
      value: this.vpc.vpcCidrBlock,
      description: &#39;VPC CIDR block&#39;,
      exportName: `${props.appId}-${props.environment}-vpc-cidr`,
    });

    new cdk.CfnOutput(this, &#39;PrivateSubnets&#39;, {
      value: this.vpc.privateSubnets.map(s =&gt; s.subnetId).join(&#39;,&#39;),
      description: &#39;Private subnet IDs&#39;,
      exportName: `${props.appId}-${props.environment}-private-subnets`,
    });

    new cdk.CfnOutput(this, &#39;IsolatedSubnets&#39;, {
      value: this.vpc.isolatedSubnets.map(s =&gt; s.subnetId).join(&#39;,&#39;),
      description: &#39;Isolated subnet IDs&#39;,
      exportName: `${props.appId}-${props.environment}-isolated-subnets`,
    });
  }

  /**
   * Convert days to CloudWatch log retention enum
   */
  private getLogRetention(days: number): logs.RetentionDays {
    const retentionMap: Record&lt;number, logs.RetentionDays&gt; = {
      1: logs.RetentionDays.ONE_DAY,
      3: logs.RetentionDays.THREE_DAYS,
      5: logs.RetentionDays.FIVE_DAYS,
      7: logs.RetentionDays.ONE_WEEK,
      14: logs.RetentionDays.TWO_WEEKS,
      30: logs.RetentionDays.ONE_MONTH,
      60: logs.RetentionDays.TWO_MONTHS,
      90: logs.RetentionDays.THREE_MONTHS,
      120: logs.RetentionDays.FOUR_MONTHS,
      150: logs.RetentionDays.FIVE_MONTHS,
      180: logs.RetentionDays.SIX_MONTHS,
      365: logs.RetentionDays.ONE_YEAR,
      400: logs.RetentionDays.THIRTEEN_MONTHS,
      545: logs.RetentionDays.EIGHTEEN_MONTHS,
      731: logs.RetentionDays.TWO_YEARS,
      1827: logs.RetentionDays.FIVE_YEARS,
      3653: logs.RetentionDays.TEN_YEARS,
    };

    // Find closest match
    const sortedDays = Object.keys(retentionMap)
      .map(Number)
      .sort((a, b) =&gt; a - b);
    
    for (const d of sortedDays) {
      if (d &gt;= days) {
        return retentionMap[d];
      }
    }
    
    return logs.RetentionDays.TEN_YEARS;
  }
}</code></pre>
<hr />
<h2 id="part-6-security-stack">PART 6: SECURITY STACK</h2>
<h3 id="packagesinfrastructurelibstackssecurity.stack.ts">packages/infrastructure/lib/stacks/security.stack.ts</h3>
<pre class="typescript"><code>import * as cdk from &#39;aws-cdk-lib&#39;;
import * as ec2 from &#39;aws-cdk-lib/aws-ec2&#39;;
import * as kms from &#39;aws-cdk-lib/aws-kms&#39;;
import * as iam from &#39;aws-cdk-lib/aws-iam&#39;;
import * as wafv2 from &#39;aws-cdk-lib/aws-wafv2&#39;;
import * as guardduty from &#39;aws-cdk-lib/aws-guardduty&#39;;
import { Construct } from &#39;constructs&#39;;
import { TierConfig, TierLevel } from &#39;../config/tiers&#39;;
import { applyTags } from &#39;../config/tags&#39;;

export interface SecurityStackProps extends cdk.StackProps {
  appId: string;
  appName: string;
  environment: string;
  tier: TierLevel;
  tierConfig: TierConfig;
  domain: string;
  vpc: ec2.Vpc;
}

/**
 * Security Stack
 * 
 * Creates KMS keys, IAM roles, security groups, and WAF rules.
 * Configures GuardDuty, Inspector, and other security services based on tier.
 */
export class SecurityStack extends cdk.Stack {
  // KMS Keys
  public readonly dataKey: kms.Key;
  public readonly mediaKey: kms.Key;
  public readonly logsKey: kms.Key;
  public readonly secretsKey: kms.Key;

  // Security Groups
  public readonly lambdaSecurityGroup: ec2.SecurityGroup;
  public readonly databaseSecurityGroup: ec2.SecurityGroup;
  public readonly cacheSecurityGroup: ec2.SecurityGroup;
  public readonly ecsSecurityGroup: ec2.SecurityGroup;
  public readonly albSecurityGroup: ec2.SecurityGroup;

  // WAF
  public readonly webAcl?: wafv2.CfnWebACL;

  // IAM Roles
  public readonly lambdaExecutionRole: iam.Role;

  constructor(scope: Construct, id: string, props: SecurityStackProps) {
    super(scope, id, props);

    const { tierConfig, vpc } = props;
    const resourcePrefix = `${props.appId}-${props.environment}`;

    // ========================================================================
    // KMS KEYS
    // ========================================================================

    // Data encryption key (Aurora, DynamoDB)
    this.dataKey = new kms.Key(this, &#39;DataKey&#39;, {
      alias: `alias/${resourcePrefix}-data`,
      description: `RADIANT data encryption key for ${props.appName} ${props.environment}`,
      enableKeyRotation: tierConfig.security.kmsKeyRotation,
      removalPolicy: props.environment === &#39;prod&#39; 
        ? cdk.RemovalPolicy.RETAIN 
        : cdk.RemovalPolicy.DESTROY,
      pendingWindow: cdk.Duration.days(7),
    });

    // Media encryption key (S3)
    this.mediaKey = new kms.Key(this, &#39;MediaKey&#39;, {
      alias: `alias/${resourcePrefix}-media`,
      description: `RADIANT media encryption key for ${props.appName} ${props.environment}`,
      enableKeyRotation: tierConfig.security.kmsKeyRotation,
      removalPolicy: props.environment === &#39;prod&#39; 
        ? cdk.RemovalPolicy.RETAIN 
        : cdk.RemovalPolicy.DESTROY,
      pendingWindow: cdk.Duration.days(7),
    });

    // Logs encryption key
    this.logsKey = new kms.Key(this, &#39;LogsKey&#39;, {
      alias: `alias/${resourcePrefix}-logs`,
      description: `RADIANT logs encryption key for ${props.appName} ${props.environment}`,
      enableKeyRotation: tierConfig.security.kmsKeyRotation,
      removalPolicy: cdk.RemovalPolicy.DESTROY,
      pendingWindow: cdk.Duration.days(7),
    });

    // Allow CloudWatch Logs to use the key
    this.logsKey.addToResourcePolicy(new iam.PolicyStatement({
      principals: [new iam.ServicePrincipal(`logs.${this.region}.amazonaws.com`)],
      actions: [
        &#39;kms:Encrypt*&#39;,
        &#39;kms:Decrypt*&#39;,
        &#39;kms:ReEncrypt*&#39;,
        &#39;kms:GenerateDataKey*&#39;,
        &#39;kms:Describe*&#39;,
      ],
      resources: [&#39;*&#39;],
      conditions: {
        ArnLike: {
          &#39;kms:EncryptionContext:aws:logs:arn&#39;: `arn:aws:logs:${this.region}:${this.account}:*`,
        },
      },
    }));

    // Secrets encryption key
    this.secretsKey = new kms.Key(this, &#39;SecretsKey&#39;, {
      alias: `alias/${resourcePrefix}-secrets`,
      description: `RADIANT secrets encryption key for ${props.appName} ${props.environment}`,
      enableKeyRotation: tierConfig.security.kmsKeyRotation,
      removalPolicy: props.environment === &#39;prod&#39; 
        ? cdk.RemovalPolicy.RETAIN 
        : cdk.RemovalPolicy.DESTROY,
      pendingWindow: cdk.Duration.days(7),
    });

    // ========================================================================
    // SECURITY GROUPS
    // ========================================================================

    // ALB Security Group
    this.albSecurityGroup = new ec2.SecurityGroup(this, &#39;AlbSecurityGroup&#39;, {
      vpc,
      securityGroupName: `${resourcePrefix}-alb-sg`,
      description: &#39;Security group for Application Load Balancer&#39;,
      allowAllOutbound: true,
    });

    this.albSecurityGroup.addIngressRule(
      ec2.Peer.anyIpv4(),
      ec2.Port.tcp(443),
      &#39;Allow HTTPS from anywhere&#39;
    );

    this.albSecurityGroup.addIngressRule(
      ec2.Peer.anyIpv4(),
      ec2.Port.tcp(80),
      &#39;Allow HTTP for redirect&#39;
    );

    // Lambda Security Group
    this.lambdaSecurityGroup = new ec2.SecurityGroup(this, &#39;LambdaSecurityGroup&#39;, {
      vpc,
      securityGroupName: `${resourcePrefix}-lambda-sg`,
      description: &#39;Security group for Lambda functions&#39;,
      allowAllOutbound: true,
    });

    // ECS Security Group (for LiteLLM)
    this.ecsSecurityGroup = new ec2.SecurityGroup(this, &#39;EcsSecurityGroup&#39;, {
      vpc,
      securityGroupName: `${resourcePrefix}-ecs-sg`,
      description: &#39;Security group for ECS Fargate tasks&#39;,
      allowAllOutbound: true,
    });

    this.ecsSecurityGroup.addIngressRule(
      this.albSecurityGroup,
      ec2.Port.tcp(4000),
      &#39;Allow traffic from ALB to LiteLLM&#39;
    );

    this.ecsSecurityGroup.addIngressRule(
      this.lambdaSecurityGroup,
      ec2.Port.tcp(4000),
      &#39;Allow Lambda to call LiteLLM&#39;
    );

    // Database Security Group
    this.databaseSecurityGroup = new ec2.SecurityGroup(this, &#39;DatabaseSecurityGroup&#39;, {
      vpc,
      securityGroupName: `${resourcePrefix}-db-sg`,
      description: &#39;Security group for Aurora PostgreSQL&#39;,
      allowAllOutbound: false,
    });

    this.databaseSecurityGroup.addIngressRule(
      this.lambdaSecurityGroup,
      ec2.Port.tcp(5432),
      &#39;Allow Lambda to connect to Aurora&#39;
    );

    this.databaseSecurityGroup.addIngressRule(
      this.ecsSecurityGroup,
      ec2.Port.tcp(5432),
      &#39;Allow ECS to connect to Aurora&#39;
    );

    // Cache Security Group
    this.cacheSecurityGroup = new ec2.SecurityGroup(this, &#39;CacheSecurityGroup&#39;, {
      vpc,
      securityGroupName: `${resourcePrefix}-cache-sg`,
      description: &#39;Security group for ElastiCache Redis&#39;,
      allowAllOutbound: false,
    });

    if (tierConfig.elasticache.enabled) {
      this.cacheSecurityGroup.addIngressRule(
        this.lambdaSecurityGroup,
        ec2.Port.tcp(6379),
        &#39;Allow Lambda to connect to Redis&#39;
      );

      this.cacheSecurityGroup.addIngressRule(
        this.ecsSecurityGroup,
        ec2.Port.tcp(6379),
        &#39;Allow ECS to connect to Redis&#39;
      );
    }

    // ========================================================================
    // IAM ROLES
    // ========================================================================

    // Lambda execution role
    this.lambdaExecutionRole = new iam.Role(this, &#39;LambdaExecutionRole&#39;, {
      roleName: `${resourcePrefix}-lambda-execution`,
      assumedBy: new iam.ServicePrincipal(&#39;lambda.amazonaws.com&#39;),
      description: &#39;Execution role for RADIANT Lambda functions&#39;,
      managedPolicies: [
        iam.ManagedPolicy.fromAwsManagedPolicyName(&#39;service-role/AWSLambdaVPCAccessExecutionRole&#39;),
      ],
    });

    // Basic Lambda permissions
    this.lambdaExecutionRole.addToPolicy(new iam.PolicyStatement({
      sid: &#39;CloudWatchLogs&#39;,
      actions: [
        &#39;logs:CreateLogGroup&#39;,
        &#39;logs:CreateLogStream&#39;,
        &#39;logs:PutLogEvents&#39;,
      ],
      resources: [`arn:aws:logs:${this.region}:${this.account}:log-group:/aws/lambda/${resourcePrefix}-*`],
    }));

    // SSM Parameter access
    this.lambdaExecutionRole.addToPolicy(new iam.PolicyStatement({
      sid: &#39;SSMParameters&#39;,
      actions: [
        &#39;ssm:GetParameter&#39;,
        &#39;ssm:GetParameters&#39;,
        &#39;ssm:GetParametersByPath&#39;,
      ],
      resources: [`arn:aws:ssm:${this.region}:${this.account}:parameter/radiant/${props.appId}/*`],
    }));

    // KMS access
    this.lambdaExecutionRole.addToPolicy(new iam.PolicyStatement({
      sid: &#39;KMSAccess&#39;,
      actions: [
        &#39;kms:Decrypt&#39;,
        &#39;kms:GenerateDataKey&#39;,
      ],
      resources: [
        this.dataKey.keyArn,
        this.secretsKey.keyArn,
      ],
    }));

    // Secrets Manager access
    this.lambdaExecutionRole.addToPolicy(new iam.PolicyStatement({
      sid: &#39;SecretsManager&#39;,
      actions: [
        &#39;secretsmanager:GetSecretValue&#39;,
      ],
      resources: [`arn:aws:secretsmanager:${this.region}:${this.account}:secret:${resourcePrefix}/*`],
    }));

    // X-Ray tracing (if enabled)
    if (tierConfig.features.xrayTracing) {
      this.lambdaExecutionRole.addManagedPolicy(
        iam.ManagedPolicy.fromAwsManagedPolicyName(&#39;AWSXRayDaemonWriteAccess&#39;)
      );
    }

    // ========================================================================
    // WAF (Tier 2+)
    // ========================================================================

    if (tierConfig.security.enableWaf) {
      this.webAcl = new wafv2.CfnWebACL(this, &#39;WebAcl&#39;, {
        name: `${resourcePrefix}-waf`,
        scope: &#39;REGIONAL&#39;,
        defaultAction: { allow: {} },
        visibilityConfig: {
          cloudWatchMetricsEnabled: true,
          metricName: `${resourcePrefix}-waf`,
          sampledRequestsEnabled: true,
        },
        rules: [
          // AWS Managed Rules - Common Rule Set
          {
            name: &#39;AWSManagedRulesCommonRuleSet&#39;,
            priority: 1,
            overrideAction: { none: {} },
            statement: {
              managedRuleGroupStatement: {
                vendorName: &#39;AWS&#39;,
                name: &#39;AWSManagedRulesCommonRuleSet&#39;,
              },
            },
            visibilityConfig: {
              cloudWatchMetricsEnabled: true,
              metricName: &#39;AWSManagedRulesCommonRuleSet&#39;,
              sampledRequestsEnabled: true,
            },
          },
          // AWS Managed Rules - Known Bad Inputs
          {
            name: &#39;AWSManagedRulesKnownBadInputsRuleSet&#39;,
            priority: 2,
            overrideAction: { none: {} },
            statement: {
              managedRuleGroupStatement: {
                vendorName: &#39;AWS&#39;,
                name: &#39;AWSManagedRulesKnownBadInputsRuleSet&#39;,
              },
            },
            visibilityConfig: {
              cloudWatchMetricsEnabled: true,
              metricName: &#39;AWSManagedRulesKnownBadInputsRuleSet&#39;,
              sampledRequestsEnabled: true,
            },
          },
          // AWS Managed Rules - SQL Injection
          {
            name: &#39;AWSManagedRulesSQLiRuleSet&#39;,
            priority: 3,
            overrideAction: { none: {} },
            statement: {
              managedRuleGroupStatement: {
                vendorName: &#39;AWS&#39;,
                name: &#39;AWSManagedRulesSQLiRuleSet&#39;,
              },
            },
            visibilityConfig: {
              cloudWatchMetricsEnabled: true,
              metricName: &#39;AWSManagedRulesSQLiRuleSet&#39;,
              sampledRequestsEnabled: true,
            },
          },
          // Rate limiting
          {
            name: &#39;RateLimitRule&#39;,
            priority: 10,
            action: { block: {} },
            statement: {
              rateBasedStatement: {
                limit: tierConfig.tier &gt;= 4 ? 5000 : 2000,
                aggregateKeyType: &#39;IP&#39;,
              },
            },
            visibilityConfig: {
              cloudWatchMetricsEnabled: true,
              metricName: &#39;RateLimitRule&#39;,
              sampledRequestsEnabled: true,
            },
          },
        ],
      });
    }

    // ========================================================================
    // GUARDDUTY (Tier 2+)
    // ========================================================================

    if (tierConfig.security.enableGuardDuty) {
      // Note: GuardDuty detector is typically enabled once per account/region
      // This creates it if it doesn&#39;t exist
      new guardduty.CfnDetector(this, &#39;GuardDutyDetector&#39;, {
        enable: true,
        findingPublishingFrequency: &#39;FIFTEEN_MINUTES&#39;,
        dataSources: {
          s3Logs: { enable: true },
          kubernetes: {
            auditLogs: { enable: false },
          },
          malwareProtection: {
            scanEc2InstanceWithFindings: {
              ebsVolumes: true,
            },
          },
        },
      });
    }

    // ========================================================================
    // TAGS
    // ========================================================================

    applyTags(this, {
      appId: props.appId,
      environment: props.environment,
      tier: props.tier,
    });

    // ========================================================================
    // OUTPUTS
    // ========================================================================

    new cdk.CfnOutput(this, &#39;DataKeyArn&#39;, {
      value: this.dataKey.keyArn,
      description: &#39;Data encryption key ARN&#39;,
      exportName: `${resourcePrefix}-data-key-arn`,
    });

    new cdk.CfnOutput(this, &#39;MediaKeyArn&#39;, {
      value: this.mediaKey.keyArn,
      description: &#39;Media encryption key ARN&#39;,
      exportName: `${resourcePrefix}-media-key-arn`,
    });

    new cdk.CfnOutput(this, &#39;LambdaSecurityGroupId&#39;, {
      value: this.lambdaSecurityGroup.securityGroupId,
      description: &#39;Lambda security group ID&#39;,
      exportName: `${resourcePrefix}-lambda-sg-id`,
    });

    new cdk.CfnOutput(this, &#39;DatabaseSecurityGroupId&#39;, {
      value: this.databaseSecurityGroup.securityGroupId,
      description: &#39;Database security group ID&#39;,
      exportName: `${resourcePrefix}-db-sg-id`,
    });

    if (this.webAcl) {
      new cdk.CfnOutput(this, &#39;WebAclArn&#39;, {
        value: this.webAcl.attrArn,
        description: &#39;WAF Web ACL ARN&#39;,
        exportName: `${resourcePrefix}-waf-arn`,
      });
    }
  }
}</code></pre>
<hr />
<h2 id="part-7-data-stack">PART 7: DATA STACK</h2>
<h3 id="packagesinfrastructurelibstacksdata.stack.ts">packages/infrastructure/lib/stacks/data.stack.ts</h3>
<pre class="typescript"><code>import * as cdk from &#39;aws-cdk-lib&#39;;
import * as ec2 from &#39;aws-cdk-lib/aws-ec2&#39;;
import * as rds from &#39;aws-cdk-lib/aws-rds&#39;;
import * as dynamodb from &#39;aws-cdk-lib/aws-dynamodb&#39;;
import * as elasticache from &#39;aws-cdk-lib/aws-elasticache&#39;;
import * as kms from &#39;aws-cdk-lib/aws-kms&#39;;
import * as secretsmanager from &#39;aws-cdk-lib/aws-secretsmanager&#39;;
import * as logs from &#39;aws-cdk-lib/aws-logs&#39;;
import { Construct } from &#39;constructs&#39;;
import { TierConfig, TierLevel } from &#39;../config/tiers&#39;;
import { applyTags } from &#39;../config/tags&#39;;

export interface DataStackProps extends cdk.StackProps {
  appId: string;
  appName: string;
  environment: string;
  tier: TierLevel;
  tierConfig: TierConfig;
  domain: string;
  vpc: ec2.Vpc;
  databaseSecurityGroup: ec2.SecurityGroup;
  lambdaSecurityGroup: ec2.SecurityGroup;
  dataKey: kms.Key;
  isPrimary: boolean;
  enableGlobal: boolean;
  globalClusterIdentifier?: string;
}

/**
 * Data Stack
 * 
 * Creates Aurora PostgreSQL Serverless v2, DynamoDB tables, and ElastiCache.
 * Supports Aurora Global Database for multi-region deployments.
 */
export class DataStack extends cdk.Stack {
  public readonly cluster: rds.DatabaseCluster;
  public readonly dbSecret: secretsmanager.ISecret;
  public readonly globalClusterIdentifier?: string;
  
  // DynamoDB Tables
  public readonly usageTable: dynamodb.Table;
  public readonly sessionsTable: dynamodb.Table;
  public readonly cacheTable: dynamodb.Table;
  
  // ElastiCache
  public readonly redisCluster?: elasticache.CfnCacheCluster | elasticache.CfnReplicationGroup;
  public readonly redisEndpoint?: string;

  constructor(scope: Construct, id: string, props: DataStackProps) {
    super(scope, id, props);

    const { tierConfig, vpc } = props;
    const resourcePrefix = `${props.appId}-${props.environment}`;

    // ========================================================================
    // AURORA POSTGRESQL SERVERLESS V2
    // ========================================================================

    // Database credentials
    const dbCredentials = rds.Credentials.fromGeneratedSecret(&#39;radiant_admin&#39;, {
      secretName: `${resourcePrefix}/aurora/credentials`,
      encryptionKey: props.dataKey,
    });

    this.dbSecret = dbCredentials.secret!;

    // Subnet group for Aurora
    const subnetGroup = new rds.SubnetGroup(this, &#39;AuroraSubnetGroup&#39;, {
      vpc,
      description: `Subnet group for ${props.appName} Aurora cluster`,
      vpcSubnets: { subnetType: ec2.SubnetType.PRIVATE_ISOLATED },
      subnetGroupName: `${resourcePrefix}-aurora-subnet-group`,
    });

    // Parameter group with optimized settings
    const parameterGroup = new rds.ParameterGroup(this, &#39;AuroraParameterGroup&#39;, {
      engine: rds.DatabaseClusterEngine.auroraPostgres({
        version: rds.AuroraPostgresEngineVersion.VER_15_4,
      }),
      description: `RADIANT parameter group for ${props.appName}`,
      parameters: {
        // Security
        &#39;rds.force_ssl&#39;: &#39;1&#39;,
        
        // Logging
        &#39;log_statement&#39;: &#39;ddl&#39;,
        &#39;log_min_duration_statement&#39;: &#39;1000&#39;,
        &#39;log_connections&#39;: &#39;1&#39;,
        &#39;log_disconnections&#39;: &#39;1&#39;,
        
        // Performance
        &#39;shared_preload_libraries&#39;: &#39;pg_stat_statements,auto_explain&#39;,
        &#39;pg_stat_statements.track&#39;: &#39;all&#39;,
        &#39;auto_explain.log_min_duration&#39;: &#39;3000&#39;,
        
        // Memory (will be adjusted by Serverless v2)
        &#39;work_mem&#39;: &#39;65536&#39;,
        &#39;maintenance_work_mem&#39;: &#39;524288&#39;,
        
        // WAL
        &#39;wal_level&#39;: &#39;logical&#39;,
        &#39;max_wal_senders&#39;: &#39;10&#39;,
        
        // Row-Level Security
        &#39;row_security&#39;: &#39;on&#39;,
      },
    });

    // CloudWatch Log exports
    const cloudwatchLogsExports = tierConfig.tier &gt;= 2 
      ? [&#39;postgresql&#39;, &#39;upgrade&#39;] 
      : [&#39;postgresql&#39;];

    // Determine if we&#39;re creating primary or secondary cluster
    if (props.isPrimary) {
      // Primary cluster
      this.cluster = new rds.DatabaseCluster(this, &#39;AuroraCluster&#39;, {
        engine: rds.DatabaseClusterEngine.auroraPostgres({
          version: rds.AuroraPostgresEngineVersion.VER_15_4,
        }),
        
        clusterIdentifier: `${resourcePrefix}-aurora`,
        defaultDatabaseName: &#39;radiant&#39;,
        
        credentials: dbCredentials,
        
        // Serverless v2 configuration
        serverlessV2MinCapacity: tierConfig.aurora.minCapacity,
        serverlessV2MaxCapacity: tierConfig.aurora.maxCapacity,
        
        // Writer instance
        writer: rds.ClusterInstance.serverlessV2(&#39;Writer&#39;, {
          publiclyAccessible: false,
          enablePerformanceInsights: tierConfig.aurora.enablePerformanceInsights,
          performanceInsightRetention: tierConfig.aurora.enablePerformanceInsights
            ? this.getPerformanceInsightRetention(tierConfig.aurora.performanceInsightsRetentionDays)
            : undefined,
          performanceInsightEncryptionKey: tierConfig.aurora.enablePerformanceInsights
            ? props.dataKey
            : undefined,
        }),
        
        // Reader instances
        readers: this.createReaderInstances(tierConfig),
        
        vpc,
        vpcSubnets: { subnetType: ec2.SubnetType.PRIVATE_ISOLATED },
        subnetGroup,
        securityGroups: [props.databaseSecurityGroup],
        
        parameterGroup,
        
        // Encryption
        storageEncrypted: true,
        storageEncryptionKey: props.dataKey,
        
        // Backup
        backup: {
          retention: cdk.Duration.days(tierConfig.aurora.backupRetentionDays),
          preferredWindow: &#39;03:00-04:00&#39;,
        },
        
        // Maintenance
        preferredMaintenanceWindow: &#39;sun:04:00-sun:05:00&#39;,
        
        // High availability
        deletionProtection: tierConfig.aurora.deletionProtection,
        
        // Logging
        cloudwatchLogsExports,
        cloudwatchLogsRetention: logs.RetentionDays.ONE_MONTH,
        
        // IAM authentication
        iamAuthentication: tierConfig.aurora.enableIAMAuth,
        
        // Removal policy
        removalPolicy: props.environment === &#39;prod&#39;
          ? cdk.RemovalPolicy.RETAIN
          : cdk.RemovalPolicy.DESTROY,
      });

      // Store global cluster identifier for secondary regions
      if (props.enableGlobal) {
        this.globalClusterIdentifier = `${resourcePrefix}-global`;
        // Note: Aurora Global Database requires additional configuration
        // that would be handled in a separate construct
      }
    } else {
      // Secondary cluster (Aurora Global Database reader)
      // This requires the global cluster to exist
      if (!props.globalClusterIdentifier) {
        throw new Error(&#39;globalClusterIdentifier required for secondary clusters&#39;);
      }
      
      this.cluster = new rds.DatabaseCluster(this, &#39;AuroraCluster&#39;, {
        engine: rds.DatabaseClusterEngine.auroraPostgres({
          version: rds.AuroraPostgresEngineVersion.VER_15_4,
        }),
        
        clusterIdentifier: `${resourcePrefix}-aurora-${this.region}`,
        
        // Serverless v2 for readers
        serverlessV2MinCapacity: tierConfig.aurora.minCapacity,
        serverlessV2MaxCapacity: tierConfig.aurora.maxCapacity,
        
        writer: rds.ClusterInstance.serverlessV2(&#39;Reader&#39;, {
          publiclyAccessible: false,
        }),
        
        vpc,
        vpcSubnets: { subnetType: ec2.SubnetType.PRIVATE_ISOLATED },
        subnetGroup,
        securityGroups: [props.databaseSecurityGroup],
        
        storageEncrypted: true,
        storageEncryptionKey: props.dataKey,
        
        removalPolicy: cdk.RemovalPolicy.DESTROY,
      });
    }

    // ========================================================================
    // DYNAMODB TABLES
    // ========================================================================

    const dynamodbConfig = {
      billingMode: tierConfig.dynamodb.billingMode === &#39;PAY_PER_REQUEST&#39;
        ? dynamodb.BillingMode.PAY_PER_REQUEST
        : dynamodb.BillingMode.PROVISIONED,
      pointInTimeRecovery: tierConfig.dynamodb.enablePointInTimeRecovery,
      contributorInsightsEnabled: tierConfig.dynamodb.enableContributorInsights,
      encryption: dynamodb.TableEncryption.CUSTOMER_MANAGED,
      encryptionKey: props.dataKey,
    };

    // Usage/Metering Table
    this.usageTable = new dynamodb.Table(this, &#39;UsageTable&#39;, {
      tableName: `${resourcePrefix}-usage`,
      partitionKey: { name: &#39;pk&#39;, type: dynamodb.AttributeType.STRING }, // tenantId
      sortKey: { name: &#39;sk&#39;, type: dynamodb.AttributeType.STRING },      // timestamp
      ...dynamodbConfig,
      timeToLiveAttribute: &#39;ttl&#39;,
      stream: dynamodb.StreamViewType.NEW_AND_OLD_IMAGES,
      removalPolicy: props.environment === &#39;prod&#39;
        ? cdk.RemovalPolicy.RETAIN
        : cdk.RemovalPolicy.DESTROY,
    });

    // GSI for querying by model/provider
    this.usageTable.addGlobalSecondaryIndex({
      indexName: &#39;gsi1&#39;,
      partitionKey: { name: &#39;gsi1pk&#39;, type: dynamodb.AttributeType.STRING }, // modelId
      sortKey: { name: &#39;gsi1sk&#39;, type: dynamodb.AttributeType.STRING },      // timestamp
      projectionType: dynamodb.ProjectionType.ALL,
    });

    // GSI for querying by period
    this.usageTable.addGlobalSecondaryIndex({
      indexName: &#39;gsi2&#39;,
      partitionKey: { name: &#39;gsi2pk&#39;, type: dynamodb.AttributeType.STRING }, // period (YYYY-MM)
      sortKey: { name: &#39;gsi2sk&#39;, type: dynamodb.AttributeType.STRING },      // tenantId#timestamp
      projectionType: dynamodb.ProjectionType.ALL,
    });

    // Sessions Table
    this.sessionsTable = new dynamodb.Table(this, &#39;SessionsTable&#39;, {
      tableName: `${resourcePrefix}-sessions`,
      partitionKey: { name: &#39;pk&#39;, type: dynamodb.AttributeType.STRING }, // sessionId
      ...dynamodbConfig,
      timeToLiveAttribute: &#39;ttl&#39;,
      removalPolicy: cdk.RemovalPolicy.DESTROY,
    });

    // GSI for user sessions
    this.sessionsTable.addGlobalSecondaryIndex({
      indexName: &#39;gsi1&#39;,
      partitionKey: { name: &#39;userId&#39;, type: dynamodb.AttributeType.STRING },
      sortKey: { name: &#39;createdAt&#39;, type: dynamodb.AttributeType.STRING },
      projectionType: dynamodb.ProjectionType.ALL,
    });

    // Cache Table (for API response caching)
    this.cacheTable = new dynamodb.Table(this, &#39;CacheTable&#39;, {
      tableName: `${resourcePrefix}-cache`,
      partitionKey: { name: &#39;pk&#39;, type: dynamodb.AttributeType.STRING }, // cacheKey
      ...dynamodbConfig,
      timeToLiveAttribute: &#39;ttl&#39;,
      removalPolicy: cdk.RemovalPolicy.DESTROY,
    });

    // ========================================================================
    // ELASTICACHE REDIS (Tier 2+)
    // ========================================================================

    if (tierConfig.elasticache.enabled) {
      // Subnet group for ElastiCache
      const cacheSubnetGroup = new elasticache.CfnSubnetGroup(this, &#39;CacheSubnetGroup&#39;, {
        subnetIds: vpc.privateSubnets.map(subnet =&gt; subnet.subnetId),
        description: `Subnet group for ${props.appName} ElastiCache`,
        cacheSubnetGroupName: `${resourcePrefix}-cache-subnet-group`,
      });

      // Get the cache security group from security stack
      // Note: This is passed in from the security stack
      const cacheSecurityGroupId = cdk.Fn.importValue(
        `${props.appId}-${props.environment}-cache-sg-id`
      );

      if (tierConfig.elasticache.enableMultiAz &amp;&amp; tierConfig.elasticache.numCacheNodes! &gt;= 2) {
        // Replication Group (Multi-AZ)
        const replicationGroup = new elasticache.CfnReplicationGroup(this, &#39;RedisReplicationGroup&#39;, {
          replicationGroupDescription: `RADIANT Redis for ${props.appName}`,
          replicationGroupId: `${resourcePrefix}-redis`,
          
          engine: &#39;redis&#39;,
          engineVersion: &#39;7.0&#39;,
          
          cacheNodeType: tierConfig.elasticache.nodeType,
          numCacheClusters: tierConfig.elasticache.numCacheNodes,
          
          automaticFailoverEnabled: tierConfig.elasticache.enableAutoFailover,
          multiAzEnabled: tierConfig.elasticache.enableMultiAz,
          
          cacheSubnetGroupName: cacheSubnetGroup.cacheSubnetGroupName,
          securityGroupIds: [cacheSecurityGroupId],
          
          atRestEncryptionEnabled: true,
          transitEncryptionEnabled: true,
          
          snapshotRetentionLimit: tierConfig.elasticache.snapshotRetentionDays,
          snapshotWindow: &#39;05:00-06:00&#39;,
          preferredMaintenanceWindow: &#39;sun:06:00-sun:07:00&#39;,
          
          autoMinorVersionUpgrade: true,
        });
        
        replicationGroup.addDependency(cacheSubnetGroup);
        
        this.redisCluster = replicationGroup;
        this.redisEndpoint = replicationGroup.attrPrimaryEndPointAddress;
      } else {
        // Single node (Tier 2)
        const cacheCluster = new elasticache.CfnCacheCluster(this, &#39;RedisCluster&#39;, {
          clusterName: `${resourcePrefix}-redis`,
          
          engine: &#39;redis&#39;,
          engineVersion: &#39;7.0&#39;,
          
          cacheNodeType: tierConfig.elasticache.nodeType,
          numCacheNodes: 1,
          
          cacheSubnetGroupName: cacheSubnetGroup.cacheSubnetGroupName,
          vpcSecurityGroupIds: [cacheSecurityGroupId],
          
          snapshotRetentionLimit: tierConfig.elasticache.snapshotRetentionDays,
          snapshotWindow: &#39;05:00-06:00&#39;,
          preferredMaintenanceWindow: &#39;sun:06:00-sun:07:00&#39;,
          
          autoMinorVersionUpgrade: true,
        });
        
        cacheCluster.addDependency(cacheSubnetGroup);
        
        this.redisCluster = cacheCluster;
        this.redisEndpoint = cacheCluster.attrRedisEndpointAddress;
      }
    }

    // ========================================================================
    // TAGS
    // ========================================================================

    applyTags(this, {
      appId: props.appId,
      environment: props.environment,
      tier: props.tier,
    });

    // ========================================================================
    // OUTPUTS
    // ========================================================================

    new cdk.CfnOutput(this, &#39;ClusterEndpoint&#39;, {
      value: this.cluster.clusterEndpoint.hostname,
      description: &#39;Aurora cluster endpoint&#39;,
      exportName: `${resourcePrefix}-aurora-endpoint`,
    });

    new cdk.CfnOutput(this, &#39;ClusterReaderEndpoint&#39;, {
      value: this.cluster.clusterReadEndpoint.hostname,
      description: &#39;Aurora cluster reader endpoint&#39;,
      exportName: `${resourcePrefix}-aurora-reader-endpoint`,
    });

    new cdk.CfnOutput(this, &#39;DbSecretArn&#39;, {
      value: this.dbSecret.secretArn,
      description: &#39;Database credentials secret ARN&#39;,
      exportName: `${resourcePrefix}-db-secret-arn`,
    });

    new cdk.CfnOutput(this, &#39;UsageTableName&#39;, {
      value: this.usageTable.tableName,
      description: &#39;Usage DynamoDB table name&#39;,
      exportName: `${resourcePrefix}-usage-table`,
    });

    new cdk.CfnOutput(this, &#39;SessionsTableName&#39;, {
      value: this.sessionsTable.tableName,
      description: &#39;Sessions DynamoDB table name&#39;,
      exportName: `${resourcePrefix}-sessions-table`,
    });

    if (this.redisEndpoint) {
      new cdk.CfnOutput(this, &#39;RedisEndpoint&#39;, {
        value: this.redisEndpoint,
        description: &#39;ElastiCache Redis endpoint&#39;,
        exportName: `${resourcePrefix}-redis-endpoint`,
      });
    }
  }

  /**
   * Create reader instances based on tier configuration
   */
  private createReaderInstances(tierConfig: TierConfig): rds.IClusterInstance[] {
    const readers: rds.IClusterInstance[] = [];
    
    for (let i = 0; i &lt; tierConfig.aurora.readerCount; i++) {
      readers.push(
        rds.ClusterInstance.serverlessV2(`Reader${i + 1}`, {
          publiclyAccessible: false,
          enablePerformanceInsights: tierConfig.aurora.enablePerformanceInsights,
          performanceInsightRetention: tierConfig.aurora.enablePerformanceInsights
            ? this.getPerformanceInsightRetention(tierConfig.aurora.performanceInsightsRetentionDays)
            : undefined,
        })
      );
    }
    
    return readers;
  }

  /**
   * Convert days to Performance Insights retention enum
   */
  private getPerformanceInsightRetention(days: number): rds.PerformanceInsightRetention {
    if (days &lt;= 7) return rds.PerformanceInsightRetention.DEFAULT;
    if (days &lt;= 31) return rds.PerformanceInsightRetention.MONTHS_1;
    if (days &lt;= 93) return rds.PerformanceInsightRetention.MONTHS_3;
    if (days &lt;= 186) return rds.PerformanceInsightRetention.MONTHS_6;
    if (days &lt;= 372) return rds.PerformanceInsightRetention.MONTHS_12;
    return rds.PerformanceInsightRetention.MONTHS_24;
  }
}</code></pre>
<hr />
<h2 id="part-8-storage-stack">PART 8: STORAGE STACK</h2>
<h3 id="packagesinfrastructurelibstacksstorage.stack.ts">packages/infrastructure/lib/stacks/storage.stack.ts</h3>
<pre class="typescript"><code>import * as cdk from &#39;aws-cdk-lib&#39;;
import * as ec2 from &#39;aws-cdk-lib/aws-ec2&#39;;
import * as s3 from &#39;aws-cdk-lib/aws-s3&#39;;
import * as cloudfront from &#39;aws-cdk-lib/aws-cloudfront&#39;;
import * as origins from &#39;aws-cdk-lib/aws-cloudfront-origins&#39;;
import * as kms from &#39;aws-cdk-lib/aws-kms&#39;;
import * as iam from &#39;aws-cdk-lib/aws-iam&#39;;
import * as route53 from &#39;aws-cdk-lib/aws-route53&#39;;
import * as acm from &#39;aws-cdk-lib/aws-certificatemanager&#39;;
import * as route53targets from &#39;aws-cdk-lib/aws-route53-targets&#39;;
import { Construct } from &#39;constructs&#39;;
import { TierConfig, TierLevel } from &#39;../config/tiers&#39;;
import { applyTags } from &#39;../config/tags&#39;;

export interface StorageStackProps extends cdk.StackProps {
  appId: string;
  appName: string;
  environment: string;
  tier: TierLevel;
  tierConfig: TierConfig;
  domain: string;
  vpc: ec2.Vpc;
  mediaKey: kms.Key;
  hostedZoneId?: string;
  enableReplication?: boolean;
}

/**
 * Storage Stack
 * 
 * Creates S3 buckets for media, assets, and logs.
 * Configures CloudFront distributions for global content delivery.
 */
export class StorageStack extends cdk.Stack {
  // S3 Buckets
  public readonly mediaBucket: s3.Bucket;
  public readonly assetsBucket: s3.Bucket;
  public readonly logsBucket: s3.Bucket;
  
  // CloudFront
  public readonly mediaDistribution: cloudfront.Distribution;
  public readonly assetsDistribution: cloudfront.Distribution;
  
  // URLs
  public readonly mediaUrl: string;
  public readonly assetsUrl: string;

  constructor(scope: Construct, id: string, props: StorageStackProps) {
    super(scope, id, props);

    const { tierConfig, vpc } = props;
    const resourcePrefix = `${props.appId}-${props.environment}`;

    // ========================================================================
    // LOGS BUCKET (for access logs)
    // ========================================================================

    this.logsBucket = new s3.Bucket(this, &#39;LogsBucket&#39;, {
      bucketName: `${resourcePrefix}-logs-${this.account}-${this.region}`,
      
      encryption: s3.BucketEncryption.S3_MANAGED,
      
      blockPublicAccess: s3.BlockPublicAccess.BLOCK_ALL,
      
      enforceSSL: true,
      
      lifecycleRules: [
        {
          id: &#39;TransitionToIA&#39;,
          transitions: [
            {
              storageClass: s3.StorageClass.INFREQUENT_ACCESS,
              transitionAfter: cdk.Duration.days(30),
            },
            {
              storageClass: s3.StorageClass.GLACIER,
              transitionAfter: cdk.Duration.days(90),
            },
          ],
          expiration: cdk.Duration.days(365),
        },
      ],
      
      removalPolicy: props.environment === &#39;prod&#39;
        ? cdk.RemovalPolicy.RETAIN
        : cdk.RemovalPolicy.DESTROY,
      
      autoDeleteObjects: props.environment !== &#39;prod&#39;,
    });

    // ========================================================================
    // MEDIA BUCKET (user uploads, AI-generated content)
    // ========================================================================

    this.mediaBucket = new s3.Bucket(this, &#39;MediaBucket&#39;, {
      bucketName: `${resourcePrefix}-media-${this.account}-${this.region}`,
      
      // Encryption with KMS
      encryption: s3.BucketEncryption.KMS,
      encryptionKey: props.mediaKey,
      bucketKeyEnabled: true,
      
      // Security
      blockPublicAccess: s3.BlockPublicAccess.BLOCK_ALL,
      enforceSSL: true,
      
      // Versioning
      versioned: tierConfig.s3.versioning,
      
      // CORS for direct uploads
      cors: [
        {
          allowedMethods: [
            s3.HttpMethods.GET,
            s3.HttpMethods.PUT,
            s3.HttpMethods.POST,
          ],
          allowedOrigins: [
            `https://${props.domain}`,
            `https://*.${props.domain}`,
            &#39;http://localhost:*&#39;,
          ],
          allowedHeaders: [&#39;*&#39;],
          exposedHeaders: [&#39;ETag&#39;],
          maxAge: 3600,
        },
      ],
      
      // Lifecycle rules
      lifecycleRules: tierConfig.s3.lifecycleRules ? [
        {
          id: &#39;IntelligentTiering&#39;,
          enabled: tierConfig.s3.intelligentTiering,
          transitions: tierConfig.s3.intelligentTiering ? [
            {
              storageClass: s3.StorageClass.INTELLIGENT_TIERING,
              transitionAfter: cdk.Duration.days(0),
            },
          ] : [],
        },
        {
          id: &#39;CleanupIncompleteUploads&#39;,
          abortIncompleteMultipartUploadAfter: cdk.Duration.days(7),
        },
        {
          id: &#39;ExpireOldVersions&#39;,
          noncurrentVersionExpiration: cdk.Duration.days(90),
          enabled: tierConfig.s3.versioning,
        },
      ] : undefined,
      
      // Server access logging
      serverAccessLogsBucket: this.logsBucket,
      serverAccessLogsPrefix: &#39;media/&#39;,
      
      // Removal policy
      removalPolicy: props.environment === &#39;prod&#39;
        ? cdk.RemovalPolicy.RETAIN
        : cdk.RemovalPolicy.DESTROY,
      
      autoDeleteObjects: props.environment !== &#39;prod&#39;,
    });

    // ========================================================================
    // ASSETS BUCKET (static assets, compiled frontend)
    // ========================================================================

    this.assetsBucket = new s3.Bucket(this, &#39;AssetsBucket&#39;, {
      bucketName: `${resourcePrefix}-assets-${this.account}-${this.region}`,
      
      // S3-managed encryption for static assets
      encryption: s3.BucketEncryption.S3_MANAGED,
      
      blockPublicAccess: s3.BlockPublicAccess.BLOCK_ALL,
      enforceSSL: true,
      
      lifecycleRules: [
        {
          id: &#39;CleanupOldAssets&#39;,
          prefix: &#39;old/&#39;,
          expiration: cdk.Duration.days(30),
        },
      ],
      
      serverAccessLogsBucket: this.logsBucket,
      serverAccessLogsPrefix: &#39;assets/&#39;,
      
      removalPolicy: cdk.RemovalPolicy.DESTROY,
      autoDeleteObjects: true,
    });

    // ========================================================================
    // CLOUDFRONT - MEDIA DISTRIBUTION
    // ========================================================================

    // Origin Access Identity for S3
    const mediaOai = new cloudfront.OriginAccessIdentity(this, &#39;MediaOai&#39;, {
      comment: `OAI for ${props.appName} media bucket`,
    });

    this.mediaBucket.grantRead(mediaOai);

    // Response headers policy
    const responseHeadersPolicy = new cloudfront.ResponseHeadersPolicy(this, &#39;MediaResponseHeaders&#39;, {
      responseHeadersPolicyName: `${resourcePrefix}-media-headers`,
      securityHeadersBehavior: {
        contentSecurityPolicy: {
          contentSecurityPolicy: &quot;default-src &#39;self&#39;&quot;,
          override: false,
        },
        contentTypeOptions: {
          override: true,
        },
        frameOptions: {
          frameOption: cloudfront.HeadersFrameOption.DENY,
          override: true,
        },
        referrerPolicy: {
          referrerPolicy: cloudfront.HeadersReferrerPolicy.STRICT_ORIGIN_WHEN_CROSS_ORIGIN,
          override: true,
        },
        strictTransportSecurity: {
          accessControlMaxAge: cdk.Duration.days(365),
          includeSubdomains: true,
          preload: true,
          override: true,
        },
        xssProtection: {
          protection: true,
          modeBlock: true,
          override: true,
        },
      },
      corsBehavior: {
        accessControlAllowCredentials: false,
        accessControlAllowHeaders: [&#39;*&#39;],
        accessControlAllowMethods: [&#39;GET&#39;, &#39;HEAD&#39;],
        accessControlAllowOrigins: [
          `https://${props.domain}`,
          `https://*.${props.domain}`,
        ],
        accessControlMaxAge: cdk.Duration.days(1),
        originOverride: true,
      },
    });

    // Cache policy for media
    const mediaCachePolicy = new cloudfront.CachePolicy(this, &#39;MediaCachePolicy&#39;, {
      cachePolicyName: `${resourcePrefix}-media-cache`,
      defaultTtl: cdk.Duration.days(1),
      minTtl: cdk.Duration.seconds(0),
      maxTtl: cdk.Duration.days(365),
      enableAcceptEncodingGzip: true,
      enableAcceptEncodingBrotli: true,
      queryStringBehavior: cloudfront.CacheQueryStringBehavior.allowList(&#39;v&#39;, &#39;w&#39;, &#39;h&#39;, &#39;q&#39;),
    });

    // Media CloudFront distribution
    this.mediaDistribution = new cloudfront.Distribution(this, &#39;MediaDistribution&#39;, {
      comment: `${props.appName} Media Distribution`,
      
      defaultBehavior: {
        origin: new origins.S3Origin(this.mediaBucket, {
          originAccessIdentity: mediaOai,
        }),
        viewerProtocolPolicy: cloudfront.ViewerProtocolPolicy.REDIRECT_TO_HTTPS,
        allowedMethods: cloudfront.AllowedMethods.ALLOW_GET_HEAD,
        cachedMethods: cloudfront.CachedMethods.CACHE_GET_HEAD,
        cachePolicy: mediaCachePolicy,
        responseHeadersPolicy,
        compress: true,
      },
      
      // Additional behaviors for specific paths
      additionalBehaviors: {
        &#39;/uploads/*&#39;: {
          origin: new origins.S3Origin(this.mediaBucket, {
            originAccessIdentity: mediaOai,
          }),
          viewerProtocolPolicy: cloudfront.ViewerProtocolPolicy.REDIRECT_TO_HTTPS,
          allowedMethods: cloudfront.AllowedMethods.ALLOW_GET_HEAD,
          cachePolicy: cloudfront.CachePolicy.CACHING_OPTIMIZED,
          responseHeadersPolicy,
        },
      },
      
      // Error pages
      errorResponses: [
        {
          httpStatus: 403,
          responseHttpStatus: 404,
          responsePagePath: &#39;/404.html&#39;,
          ttl: cdk.Duration.minutes(5),
        },
        {
          httpStatus: 404,
          responseHttpStatus: 404,
          responsePagePath: &#39;/404.html&#39;,
          ttl: cdk.Duration.minutes(5),
        },
      ],
      
      // Geo restrictions (if needed for compliance)
      geoRestriction: cloudfront.GeoRestriction.allowlist(&#39;US&#39;, &#39;CA&#39;, &#39;GB&#39;, &#39;DE&#39;, &#39;FR&#39;, &#39;JP&#39;, &#39;AU&#39;, &#39;SG&#39;),
      
      // Price class based on tier
      priceClass: tierConfig.tier &gt;= 4
        ? cloudfront.PriceClass.PRICE_CLASS_ALL
        : tierConfig.tier &gt;= 2
          ? cloudfront.PriceClass.PRICE_CLASS_100
          : cloudfront.PriceClass.PRICE_CLASS_100,
      
      // HTTP/2 and HTTP/3
      httpVersion: cloudfront.HttpVersion.HTTP2_AND_3,
      
      // Logging
      enableLogging: true,
      logBucket: this.logsBucket,
      logFilePrefix: &#39;cloudfront/media/&#39;,
      
      // Minimum protocol version
      minimumProtocolVersion: cloudfront.SecurityPolicyProtocol.TLS_V1_2_2021,
    });

    this.mediaUrl = `https://${this.mediaDistribution.distributionDomainName}`;

    // ========================================================================
    // CLOUDFRONT - ASSETS DISTRIBUTION
    // ========================================================================

    const assetsOai = new cloudfront.OriginAccessIdentity(this, &#39;AssetsOai&#39;, {
      comment: `OAI for ${props.appName} assets bucket`,
    });

    this.assetsBucket.grantRead(assetsOai);

    // Cache policy for static assets (long cache)
    const assetsCachePolicy = new cloudfront.CachePolicy(this, &#39;AssetsCachePolicy&#39;, {
      cachePolicyName: `${resourcePrefix}-assets-cache`,
      defaultTtl: cdk.Duration.days(30),
      minTtl: cdk.Duration.days(1),
      maxTtl: cdk.Duration.days(365),
      enableAcceptEncodingGzip: true,
      enableAcceptEncodingBrotli: true,
      queryStringBehavior: cloudfront.CacheQueryStringBehavior.allowList(&#39;v&#39;),
    });

    this.assetsDistribution = new cloudfront.Distribution(this, &#39;AssetsDistribution&#39;, {
      comment: `${props.appName} Assets Distribution`,
      
      defaultBehavior: {
        origin: new origins.S3Origin(this.assetsBucket, {
          originAccessIdentity: assetsOai,
        }),
        viewerProtocolPolicy: cloudfront.ViewerProtocolPolicy.REDIRECT_TO_HTTPS,
        allowedMethods: cloudfront.AllowedMethods.ALLOW_GET_HEAD,
        cachedMethods: cloudfront.CachedMethods.CACHE_GET_HEAD,
        cachePolicy: assetsCachePolicy,
        responseHeadersPolicy,
        compress: true,
      },
      
      // SPA support
      defaultRootObject: &#39;index.html&#39;,
      errorResponses: [
        {
          httpStatus: 404,
          responseHttpStatus: 200,
          responsePagePath: &#39;/index.html&#39;,
          ttl: cdk.Duration.seconds(0),
        },
        {
          httpStatus: 403,
          responseHttpStatus: 200,
          responsePagePath: &#39;/index.html&#39;,
          ttl: cdk.Duration.seconds(0),
        },
      ],
      
      priceClass: tierConfig.tier &gt;= 4
        ? cloudfront.PriceClass.PRICE_CLASS_ALL
        : cloudfront.PriceClass.PRICE_CLASS_100,
      
      httpVersion: cloudfront.HttpVersion.HTTP2_AND_3,
      
      enableLogging: true,
      logBucket: this.logsBucket,
      logFilePrefix: &#39;cloudfront/assets/&#39;,
      
      minimumProtocolVersion: cloudfront.SecurityPolicyProtocol.TLS_V1_2_2021,
    });

    this.assetsUrl = `https://${this.assetsDistribution.distributionDomainName}`;

    // ========================================================================
    // S3 CROSS-REGION REPLICATION (Tier 4+)
    // ========================================================================

    if (props.enableReplication &amp;&amp; tierConfig.s3.replicationEnabled) {
      // Note: Cross-region replication requires destination buckets in other regions
      // This would be handled by the multi-region deployment setup
      
      // Create replication role
      const replicationRole = new iam.Role(this, &#39;ReplicationRole&#39;, {
        assumedBy: new iam.ServicePrincipal(&#39;s3.amazonaws.com&#39;),
        description: &#39;Role for S3 cross-region replication&#39;,
      });

      replicationRole.addToPolicy(new iam.PolicyStatement({
        actions: [
          &#39;s3:GetReplicationConfiguration&#39;,
          &#39;s3:ListBucket&#39;,
        ],
        resources: [this.mediaBucket.bucketArn],
      }));

      replicationRole.addToPolicy(new iam.PolicyStatement({
        actions: [
          &#39;s3:GetObjectVersionForReplication&#39;,
          &#39;s3:GetObjectVersionAcl&#39;,
          &#39;s3:GetObjectVersionTagging&#39;,
        ],
        resources: [`${this.mediaBucket.bucketArn}/*`],
      }));

      // Note: Destination bucket permissions would be added when those buckets are created
    }

    // ========================================================================
    // TAGS
    // ========================================================================

    applyTags(this, {
      appId: props.appId,
      environment: props.environment,
      tier: props.tier,
    });

    // ========================================================================
    // OUTPUTS
    // ========================================================================

    new cdk.CfnOutput(this, &#39;MediaBucketName&#39;, {
      value: this.mediaBucket.bucketName,
      description: &#39;Media S3 bucket name&#39;,
      exportName: `${resourcePrefix}-media-bucket`,
    });

    new cdk.CfnOutput(this, &#39;MediaBucketArn&#39;, {
      value: this.mediaBucket.bucketArn,
      description: &#39;Media S3 bucket ARN&#39;,
      exportName: `${resourcePrefix}-media-bucket-arn`,
    });

    new cdk.CfnOutput(this, &#39;AssetsBucketName&#39;, {
      value: this.assetsBucket.bucketName,
      description: &#39;Assets S3 bucket name&#39;,
      exportName: `${resourcePrefix}-assets-bucket`,
    });

    new cdk.CfnOutput(this, &#39;MediaDistributionId&#39;, {
      value: this.mediaDistribution.distributionId,
      description: &#39;Media CloudFront distribution ID&#39;,
      exportName: `${resourcePrefix}-media-cf-id`,
    });

    new cdk.CfnOutput(this, &#39;MediaDistributionUrl&#39;, {
      value: this.mediaUrl,
      description: &#39;Media CloudFront URL&#39;,
      exportName: `${resourcePrefix}-media-url`,
    });

    new cdk.CfnOutput(this, &#39;AssetsDistributionId&#39;, {
      value: this.assetsDistribution.distributionId,
      description: &#39;Assets CloudFront distribution ID&#39;,
      exportName: `${resourcePrefix}-assets-cf-id`,
    });

    new cdk.CfnOutput(this, &#39;AssetsDistributionUrl&#39;, {
      value: this.assetsUrl,
      description: &#39;Assets CloudFront URL&#39;,
      exportName: `${resourcePrefix}-assets-url`,
    });
  }
}</code></pre>
<hr />
<h2 id="part-9-stack-exports">PART 9: STACK EXPORTS</h2>
<h3 id="packagesinfrastructurelibstacksindex.ts">packages/infrastructure/lib/stacks/index.ts</h3>
<pre class="typescript"><code>export * from &#39;./foundation.stack&#39;;
export * from &#39;./networking.stack&#39;;
export * from &#39;./security.stack&#39;;
export * from &#39;./data.stack&#39;;
export * from &#39;./storage.stack&#39;;
// Prompt 3 exports
// export * from &#39;./ai.stack&#39;;
// export * from &#39;./api.stack&#39;;
// export * from &#39;./admin.stack&#39;;</code></pre>
<h3 id="packagesinfrastructurelibindex.ts">packages/infrastructure/lib/index.ts</h3>
<pre class="typescript"><code>export * from &#39;./config&#39;;
export * from &#39;./stacks&#39;;
// export * from &#39;./constructs&#39;;  // When constructs are added</code></pre>
<hr />
<h2 id="deployment-commands">DEPLOYMENT COMMANDS</h2>
<h3 id="development-environment-tier-1">Development Environment (Tier 1)</h3>
<pre class="bash"><code>cd packages/infrastructure

# Deploy all stacks
npx cdk deploy --all \
  --context appId=thinktank \
  --context appName=&quot;Think Tank&quot; \
  --context environment=dev \
  --context tier=1 \
  --context domain=thinktank.YOUR_DOMAIN.com

# Deploy specific stack
npx cdk deploy thinktank-dev-networking \
  --context appId=thinktank \
  --context environment=dev \
  --context tier=1</code></pre>
<h3 id="staging-environment-tier-2">Staging Environment (Tier 2)</h3>
<pre class="bash"><code>npx cdk deploy --all \
  --context appId=thinktank \
  --context appName=&quot;Think Tank&quot; \
  --context environment=staging \
  --context tier=2 \
  --context domain=thinktank.YOUR_DOMAIN.com</code></pre>
<h3 id="production-environment-tier-3-5">Production Environment (Tier 3-5)</h3>
<pre class="bash"><code># Tier 3 - Single Region
npx cdk deploy --all \
  --context appId=thinktank \
  --context appName=&quot;Think Tank&quot; \
  --context environment=prod \
  --context tier=3 \
  --context domain=thinktank.YOUR_DOMAIN.com

# Tier 4 - Multi-Region
npx cdk deploy --all \
  --context appId=thinktank \
  --context appName=&quot;Think Tank&quot; \
  --context environment=prod \
  --context tier=4 \
  --context domain=thinktank.YOUR_DOMAIN.com</code></pre>
<hr />
<h2 id="stack-dependencies">STACK DEPENDENCIES</h2>
<pre><code>                    ÃƒÂ¢Ã¢â‚¬ÂÃ…â€™ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â
                    ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   Foundation    ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
                    ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡     Stack       ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
                    ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‹Å“
                             ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
                             ÃƒÂ¢Ã¢â‚¬â€œÃ‚Â¼
                    ÃƒÂ¢Ã¢â‚¬ÂÃ…â€™ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â
                    ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   Networking    ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
                    ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡     Stack       ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
                    ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‹Å“
                             ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
                             ÃƒÂ¢Ã¢â‚¬â€œÃ‚Â¼
                    ÃƒÂ¢Ã¢â‚¬ÂÃ…â€™ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â
                    ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡    Security     ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
                    ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡     Stack       ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
                    ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‹Å“
                             ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
              ÃƒÂ¢Ã¢â‚¬ÂÃ…â€™ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â¼ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â
              ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡              ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡              ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
              ÃƒÂ¢Ã¢â‚¬â€œÃ‚Â¼              ÃƒÂ¢Ã¢â‚¬â€œÃ‚Â¼              ÃƒÂ¢Ã¢â‚¬â€œÃ‚Â¼
     ÃƒÂ¢Ã¢â‚¬ÂÃ…â€™ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â ÃƒÂ¢Ã¢â‚¬ÂÃ…â€™ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â ÃƒÂ¢Ã¢â‚¬ÂÃ…â€™ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â
     ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡    Data     ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡ ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡   Storage   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡ ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡     AI      ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
     ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡    Stack    ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡ ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡    Stack    ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡ ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡    Stack    ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
     ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‹Å“ ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‹Å“ ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‹Å“
            ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡                               ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
            ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‹Å“
                            ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
                            ÃƒÂ¢Ã¢â‚¬â€œÃ‚Â¼
                   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€™ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â
                   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡      API        ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
                   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡     Stack       ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
                   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‹Å“
                            ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
                            ÃƒÂ¢Ã¢â‚¬â€œÃ‚Â¼
                   ÃƒÂ¢Ã¢â‚¬ÂÃ…â€™ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‚Â
                   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡     Admin       ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
                   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡     Stack       ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬Å¡
                   ÃƒÂ¢Ã¢â‚¬ÂÃ¢â‚¬ÂÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ¢â€šÂ¬ÃƒÂ¢Ã¢â‚¬ÂÃ‹Å“</code></pre>
<hr />
<h2 id="next-prompts">NEXT PROMPTS</h2>
<p>Continue with: - <strong>Prompt 3</strong>: CDK AI &amp; API Stacks (LiteLLM, SageMaker, API Gateway, Cognito) - <strong>Prompt 4</strong>: Lambda Functions - Core (Router, Providers, Models, Chat) - <strong>Prompt 5</strong>: Lambda Functions - Admin &amp; Billing (Invitations, Approvals, Metering) - <strong>Prompt 6</strong>: Self-Hosted Models &amp; Mid-Level Services - <strong>Prompt 7</strong>: External Providers &amp; Database Schema/Migrations - <strong>Prompt 8</strong>: Admin Web Dashboard (Next.js) - <strong>Prompt 9</strong>: Assembly &amp; Deployment Guide</p>
<hr />
<p><em>End of Prompt 2: CDK Infrastructure Stacks</em> <em>RADIANT v2.2.0 - December 2024</em></p>
<h1 id="Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢-1">Ã¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢Â</h1>
<h1 id="end-of-section-2">END OF SECTION 2</h1>
<h1 id="Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢-2">Ã¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢Â</h1>
<h1 id="Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢Ã¢-3">Ã¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢ÂÃ¢â€¢Â</h1>

  
  <div class="footer">
    RADIANT Documentation | Version 5.52.29 | Generated January 25, 2026
  </div>
</body>
</html>